{"version":3,"file":"module.js","mappings":"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ACtB,CAAC,eAAgB,MACjB,CAAC,YAAa,MACd,CAAC,QAAS,QACVrJ,SAAQ,SAAUqJ,GAClB,OAAOwB,EAAUS,gBAAgBjC,EAAK,GAAIA,EAAK,OAMjD,CAEE,YACA,SACA,SACA,MACA,WACA,UACA,OACA,YACA,QACA,YACA,QACA,QACA,QACA,QACA,UACA,SACA,OACA,OACA,UACA,QACA,WACA,MACA,WACA,cACA,QACA,SACA,WACA,YACA,MACA,SACA,YACA,YACA,YACA,WACA,WACA,MACA,UACA,UACA,WACA,WACA,eACA,SACA,SACA,YACA,WACA,YACA,cACA,QACA,UACA,QACA,SACA,aACA,YACA,WACA,OACA,QACA,OACA,QACA,QACA,MACA,QACA,OACA,OACA,YACA,OACA,WACA,SACA,SACA,YACA,WACA,OACA,WACA,OACA,SACA,WACA,SACA,SACA,WACA,SACA,WACA,UACA,QACA,QACA,SACA,UACA,iBACA,QACA,OACA,SACA,UACA,UACA,aACA,WACA,MACA,eAEA,gBACA,SACA,SACA,YACA,WACA,QACA,WACArJ,QAAQ6K,EAAUU,oBAEbV,EA/eYA,aCJrB,IAAIa,EAAoC,oBAAZC,QACxBC,EAAwB,mBAARzH,IAChB0H,EAAwB,mBAARvL,IAChBwL,EAAwC,mBAAhBC,eAAgCA,YAAYC,OAIxE,SAASC,EAAMjpB,EAAG0C,GAEhB,GAAI1C,IAAM0C,EAAG,OAAO,EAEpB,GAAI1C,GAAK0C,GAAiB,iBAAL1C,GAA6B,iBAAL0C,EAAe,CAC1D,GAAI1C,EAAEoc,cAAgB1Z,EAAE0Z,YAAa,OAAO,EAE5C,IAAI5b,EAAQ6B,EAAG6mB,EA6BXC,EA5BJ,GAAI/J,MAAMgK,QAAQppB,GAAI,CAEpB,IADAQ,EAASR,EAAEQ,SACGkC,EAAElC,OAAQ,OAAO,EAC/B,IAAK6B,EAAI7B,EAAgB,GAAR6B,KACf,IAAK4mB,EAAMjpB,EAAEqC,GAAIK,EAAEL,IAAK,OAAO,EACjC,OAAO,EAwBT,GAAIumB,GAAW5oB,aAAamhB,KAASze,aAAaye,IAAM,CACtD,GAAInhB,EAAEqf,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","sources":["webpack:///webpack/runtime/load script","webpack:///../node_modules/@grafana/aws-sdk/dist/index.production.js","webpack:///../node_modules/@grafana/aws-sdk/index.js","webpack:///../node_modules/@grafana/e2e-selectors/index.js","webpack:///../node_modules/@grafana/e2e-selectors/index.production.js","webpack:///../node_modules/lru-cache/index.js","webpack:///../node_modules/pluralize/pluralize.js","webpack:///../node_modules/react-fast-compare/index.js","webpack:///../node_modules/react-highlight-words/dist/main.js","webpack:///external amd \"@emotion/css\"","webpack:///external amd \"@grafana/data\"","webpack:///external amd \"@grafana/runtime\"","webpack:///external amd \"@grafana/ui\"","webpack:///external amd \"lodash\"","webpack:///external amd \"prismjs\"","webpack:///external amd \"react\"","webpack:///external amd \"react-dom\"","webpack:///external amd \"react-redux\"","webpack:///external amd \"redux\"","webpack:///external amd \"rxjs\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/amd options","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/ensure chunk","webpack:///webpack/runtime/get javascript chunk filename","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/publicPath","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/runtime/nonce","webpack:///./components/QueryEditor/AccessoryButton.tsx","webpack:///./components/QueryEditor/Stack.tsx","webpack:///./components/QueryEditor/EditorFieldGroup.tsx","webpack:///./components/QueryEditor/EditorHeader.tsx","webpack:///./components/QueryEditor/Space.tsx","webpack:///./components/QueryEditor/EditorField.tsx","webpack:///./components/QueryEditor/EditorRow.tsx","webpack:///./components/QueryEditor/EditorList.tsx","webpack:///./components/QueryEditor/EditorRows.tsx","webpack:///./components/QueryEditor/EditorSwitch.tsx","webpack:///./components/QueryEditor/FlexItem.tsx","webpack:///./components/QueryEditor/InlineSelect.tsx","webpack:///./components/QueryEditor/InputGroup.tsx","webpack:///./metricsql.ts","webpack:///./querybuilder/types.ts","webpack:///./querybuilder/components/LabelParamEditor.tsx","webpack:///./querybuilder/shared/operationUtils.ts","webpack:///./querybuilder/binaryScalarOperations.ts","webpack:///./querybuilder/operations.ts","webpack:///./querybuilder/aggregations.ts","webpack:///./querybuilder/PromQueryModeller.ts","webpack:///./querybuilder/shared/LokiAndPromQueryModellerBase.ts","webpack:///../node_modules/@lezer/lr/node_modules/@lezer/common/dist/index.js","webpack:///../node_modules/@lezer/lr/dist/index.js","webpack:///../node_modules/@lezer/highlight/node_modules/@lezer/common/dist/index.js","webpack:///../node_modules/@lezer/highlight/dist/index.js","webpack:///../node_modules/@prometheus-io/lezer-promql/dist/index.es.js","webpack:///./querybuilder/shared/parsingUtils.ts","webpack:///./querybuilder/parsing.ts","webpack:///./querybuilder/shared/FeedbackLink.tsx","webpack:///./querybuilder/shared/types.ts","webpack:///./querybuilder/shared/QueryEditorModeToggle.tsx","webpack:///./querybuilder/shared/QueryHeaderSwitch.tsx","webpack:///./store.ts","webpack:///./querybuilder/shared/hooks/useFlag.ts","webpack:///./types.ts","webpack:///./querybuilder/state.ts","webpack:///../node_modules/immer/dist/immer.esm.mjs","webpack:///../node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js","webpack:///./add_label_to_query.ts","webpack:///./language_utils.ts","webpack:///./language_provider.ts","webpack:///./querybuilder/shared/LabelFilterItem.tsx","webpack:///./querybuilder/shared/LabelFilters.tsx","webpack:///./querybuilder/shared/OperationExplainedBox.tsx","webpack:///../node_modules/react-beautiful-dnd/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///../node_modules/react-beautiful-dnd/node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack:///../node_modules/react-beautiful-dnd/node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///../node_modules/use-memo-one/dist/use-memo-one.esm.js","webpack:///../node_modules/css-box-model/dist/css-box-model.esm.js","webpack:///../node_modules/tiny-invariant/dist/tiny-invariant.esm.js","webpack:///../node_modules/react-beautiful-dnd/node_modules/memoize-one/dist/memoize-one.esm.js","webpack:///../node_modules/raf-schd/dist/raf-schd.esm.js","webpack:///../node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js","webpack:///../node_modules/react-use/esm/usePrevious.js","webpack:///../node_modules/react-popper-tooltip/node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getWindow.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","webpack:///../node_modules/@popperjs/core/lib/utils/math.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","webpack:///../node_modules/@popperjs/core/lib/enums.js","webpack:///../node_modules/@popperjs/core/lib/utils/orderModifiers.js","webpack:///../node_modules/@popperjs/core/lib/utils/debounce.js","webpack:///../node_modules/@popperjs/core/lib/createPopper.js","webpack:///../node_modules/@popperjs/core/lib/utils/mergeByName.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/eventListeners.js","webpack:///../node_modules/@popperjs/core/lib/utils/getBasePlacement.js","webpack:///../node_modules/@popperjs/core/lib/utils/getVariation.js","webpack:///../node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","webpack:///../node_modules/@popperjs/core/lib/utils/computeOffsets.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/computeStyles.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/offset.js","webpack:///../node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","webpack:///../node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/contains.js","webpack:///../node_modules/@popperjs/core/lib/utils/rectToClientRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","webpack:///../node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","webpack:///../node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","webpack:///../node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","webpack:///../node_modules/@popperjs/core/lib/utils/expandToHashMap.js","webpack:///../node_modules/@popperjs/core/lib/utils/detectOverflow.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/flip.js","webpack:///../node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","webpack:///../node_modules/@popperjs/core/lib/utils/within.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","webpack:///../node_modules/@popperjs/core/lib/utils/getAltAxis.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/arrow.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/hide.js","webpack:///../node_modules/@popperjs/core/lib/popper.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","webpack:///../node_modules/@popperjs/core/lib/modifiers/applyStyles.js","webpack:///../node_modules/react-popper/lib/esm/utils.js","webpack:///../node_modules/react-popper/lib/esm/usePopper.js","webpack:///../node_modules/react-popper-tooltip/dist/esm/react-popper-tooltip.js","webpack:///./querybuilder/shared/OperationInfoButton.tsx","webpack:///../node_modules/react-popper-tooltip/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./querybuilder/shared/OperationHeader.tsx","webpack:///./querybuilder/shared/OperationParamEditor.tsx","webpack:///./querybuilder/shared/OperationEditor.tsx","webpack:///./querybuilder/shared/OperationList.tsx","webpack:///../node_modules/react-use/esm/useMountedState.js","webpack:///./querybuilder/shared/RawQuery.tsx","webpack:///./querybuilder/shared/OperationListExplained.tsx","webpack:///./querybuilder/shared/OperationsEditorRow.tsx","webpack:///./querybuilder/shared/QueryBuilderHints.tsx","webpack:///./querybuilder/components/MetricSelect.tsx","webpack:///./querybuilder/components/NestedQuery.tsx","webpack:///./querybuilder/components/NestedQueryList.tsx","webpack:///./querybuilder/components/PromQueryBuilderExplained.tsx","webpack:///./querybuilder/components/PromQueryBuilder.tsx","webpack:///./querybuilder/components/QueryPreview.tsx","webpack:///./querybuilder/components/PromQueryBuilderContainer.tsx","webpack:///./components/PromExploreExtraField.tsx","webpack:///./components/PromLink.tsx","webpack:///./components/LocalStorageValueProvider.tsx","webpack:///../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///../node_modules/react-window/node_modules/memoize-one/dist/memoize-one.esm.js","webpack:///../node_modules/react-window/dist/index.esm.js","webpack:///../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack:///./components/PrometheusMetricsBrowser.tsx","webpack:///../node_modules/monaco-promql/promql/promql.contribution.js","webpack:///../node_modules/react-use/esm/useLatest.js","webpack:///./components/monaco-query-field/getOverrideServices.ts","webpack:///./components/monaco-query-field/monaco-completion-provider/util.ts","webpack:///./components/monaco-query-field/monaco-completion-provider/completions.ts","webpack:///./components/monaco-query-field/monaco-completion-provider/situation.ts","webpack:///./components/monaco-query-field/monaco-completion-provider/index.ts","webpack:///./components/monaco-query-field/MonacoQueryField.tsx","webpack:///./components/monaco-query-field/MonacoQueryFieldLazy.tsx","webpack:///./components/monaco-query-field/MonacoQueryFieldWrapper.tsx","webpack:///./components/PromQueryField.tsx","webpack:///./utils/CancelablePromise.ts","webpack:///./components/PromQueryEditor.tsx","webpack:///../node_modules/react-use/esm/useToggle.js","webpack:///./querybuilder/shared/QueryOptionGroup.tsx","webpack:///./querybuilder/components/PromQueryLegendEditor.tsx","webpack:///./querybuilder/components/PromQueryBuilderOptions.tsx","webpack:///./querybuilder/components/PromQueryCodeEditor.tsx","webpack:///./querybuilder/components/PromQueryEditorSelector.tsx","webpack:///./components/PromExploreQueryEditor.tsx","webpack:///./components/PromQueryEditorForAlerting.tsx","webpack:///./components/PromQueryEditorByApp.tsx","webpack:///../app/plugins/datasource/alertmanager/types.ts","webpack:///../app/types/dashboard.ts","webpack:///../app/types/acl.ts","webpack:///../app/types/serviceaccount.ts","webpack:///../app/types/appNotifications.ts","webpack:///../app/types/explore.ts","webpack:///../app/types/accessControl.ts","webpack:///../app/types/events.ts","webpack:///../app/core/config.ts","webpack:///../app/core/services/context_srv.ts","webpack:///../app/features/alerting/unified/utils/datasource.ts","webpack:///./configuration/AzureCredentials.ts","webpack:///../app/features/alerting/unified/utils/access-control.ts","webpack:///../app/features/alerting/unified/utils/alertmanager.ts","webpack:///./configuration/AzureCredentialsConfig.ts","webpack:///./configuration/AzureCredentialsForm.tsx","webpack:///./configuration/AzureAuthSettings.tsx","webpack:///./configuration/PromSettings.tsx","webpack:///./configuration/ConfigEditor.tsx","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack:///../node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack:///../node_modules/rxjs/dist/esm5/internal/config.js","webpack:///../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack:///../node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack:///../node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/filter.js","webpack:///../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack:///../node_modules/rxjs/dist/esm5/internal/Observable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","webpack:///./types/events.ts","webpack:///../node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/catchError.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isPromise.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isIterable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","webpack:///./components/AnnotationQueryEditor.tsx","webpack:///./legend.ts","webpack:///./utils/timePicker.ts","webpack:///./services/app_events.ts","webpack:///./services/config.ts","webpack:///./types/accessControl.ts","webpack:///./services/context_srv.ts","webpack:///./services/TimeSrv.ts","webpack:///./utils/getRefreshFromUrl.ts","webpack:///./metric_find_query.ts","webpack:///./query_hints.ts","webpack:///./result_transformer.ts","webpack:///./variables.ts","webpack:///./datasource.tsx","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/tap.js","webpack:///./utils/safeStringifyValue.ts","webpack:///./module.ts","webpack:///../app/features/alerting/unified/utils/config.ts"],"sourcesContent":["var inProgress = {};\n// data-webpack is not used as build has no uniqueName\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","Object.defineProperty(exports,\"__esModule\",{value:!0});var e,t=require(\"react\"),a=(e=t)&&\"object\"==typeof e&&\"default\"in e?e.default:e,n=require(\"@grafana/ui\"),l=require(\"@grafana/data\"),o=require(\"lodash\"),s=function(){return(s=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};function i(e,t,a,n){return new(a||(a=Promise))((function(l,o){function s(e){try{r(n.next(e))}catch(e){o(e)}}function i(e){try{r(n.throw(e))}catch(e){o(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}r((n=n.apply(e,t||[])).next())}))}function r(e,t){var a,n,l,o,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(a)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(a=1,n&&(l=2&o[0]?n.return:o[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,o[1])).done)return l;switch(n=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(l=s.trys,(l=l.length>0&&l[l.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){s.label=o[1];break}if(6===o[0]&&s.label<l[1]){s.label=l[1],l=o;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(o);break}l[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{a=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}function u(e,t){var a=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,l,o=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){l={error:e}}finally{try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(l)throw l.error}}return s}var c,d=[\"af-south-1\",\"ap-east-1\",\"ap-northeast-1\",\"ap-northeast-2\",\"ap-northeast-3\",\"ap-south-1\",\"ap-southeast-1\",\"ap-southeast-2\",\"ca-central-1\",\"cn-north-1\",\"cn-northwest-1\",\"eu-central-1\",\"eu-north-1\",\"eu-west-1\",\"eu-west-2\",\"eu-west-3\",\"me-south-1\",\"sa-east-1\",\"us-east-1\",\"us-east-2\",\"us-gov-east-1\",\"us-gov-west-1\",\"us-iso-east-1\",\"us-isob-east-1\",\"us-west-1\",\"us-west-2\"];(c=exports.AwsAuthType||(exports.AwsAuthType={})).Keys=\"keys\",c.Credentials=\"credentials\",c.Default=\"default\",c.EC2IAMRole=\"ec2_iam_role\",c.ARN=\"arn\";var p,h=[{label:\"Workspace IAM Role\",value:exports.AwsAuthType.EC2IAMRole},{label:\"AWS SDK Default\",value:exports.AwsAuthType.Default},{label:\"Access & secret key\",value:exports.AwsAuthType.Keys},{label:\"Credentials file\",value:exports.AwsAuthType.Credentials}],f=function(e){return{value:e,label:e}},v=function(e){var o,i,r,c,p,v,m,g,y,b=u(t.useState((e.standardRegions||d).map(f)),2),D=b[0],w=b[1],E=e.loadRegions,A=e.onOptionsChange,S=e.skipHeader,C=void 0!==S&&S,x=e.skipEndpoint,V=void 0!==x&&x,I=e.options,F=I.jsonData.profile;void 0===F&&(F=I.database);var O=window.grafanaBootData.settings,R=null!==(o=O.awsAllowedAuthProviders)&&void 0!==o?o:[exports.AwsAuthType.Default,exports.AwsAuthType.Keys,exports.AwsAuthType.Credentials],j=null===(i=O.awsAssumeRoleEnabled)||void 0===i||i,K=h.find((function(e){return e.value===I.jsonData.authType}));return t.useEffect((function(){!K&&R.length&&A(s(s({},I),{jsonData:s(s({},I.jsonData),{authType:R[0]})}))}),[K,I,A]),t.useEffect((function(){E&&E().then((function(e){return w(e.map(f))}))}),[E]),a.createElement(n.FieldSet,{label:C?\"\":\"Connection Details\",\"data-testid\":\"connection-config\"},a.createElement(n.InlineField,{label:\"Authentication Provider\",labelWidth:28,tooltip:\"Specify which AWS credentials chain to use.\"},a.createElement(n.Select,{\"aria-label\":\"Authentication Provider\",className:\"width-30\",value:K,options:h.filter((function(e){return R.includes(e.value)})),defaultValue:I.jsonData.authType,onChange:function(t){l.onUpdateDatasourceJsonDataOptionSelect(e,\"authType\")(t)},menuShouldPortal:!0})),\"credentials\"===I.jsonData.authType&&a.createElement(n.InlineField,{label:\"Credentials Profile Name\",labelWidth:28,tooltip:\"Credentials profile name, as specified in ~/.aws/credentials, leave blank for default.\"},a.createElement(n.Input,{\"aria-label\":\"Credentials Profile Name\",className:\"width-30\",placeholder:\"default\",value:F,onChange:l.onUpdateDatasourceJsonDataOption(e,\"profile\")})),\"keys\"===I.jsonData.authType&&a.createElement(a.Fragment,null,a.createElement(n.InlineField,{label:\"Access Key ID\",labelWidth:28},(null===(r=e.options.secureJsonFields)||void 0===r?void 0:r.accessKey)?a.createElement(n.ButtonGroup,{className:\"width-30\"},a.createElement(n.Input,{disabled:!0,placeholder:\"Configured\"}),a.createElement(n.ToolbarButton,{icon:\"edit\",tooltip:\"Edit Access Key ID\",type:\"button\",onClick:l.onUpdateDatasourceResetOption(e,\"accessKey\")})):a.createElement(n.Input,{\"aria-label\":\"Access Key ID\",className:\"width-30\",value:null!==(p=null===(c=I.secureJsonData)||void 0===c?void 0:c.accessKey)&&void 0!==p?p:\"\",onChange:l.onUpdateDatasourceSecureJsonDataOption(e,\"accessKey\")})),a.createElement(n.InlineField,{label:\"Secret Access Key\",labelWidth:28},(null===(v=e.options.secureJsonFields)||void 0===v?void 0:v.secretKey)?a.createElement(n.ButtonGroup,{className:\"width-30\"},a.createElement(n.Input,{disabled:!0,placeholder:\"Configured\"}),a.createElement(n.ToolbarButton,{icon:\"edit\",type:\"button\",tooltip:\"Edit Secret Access Key\",onClick:l.onUpdateDatasourceResetOption(e,\"secretKey\")})):a.createElement(n.Input,{\"aria-label\":\"Secret Access Key\",className:\"width-30\",value:null!==(g=null===(m=I.secureJsonData)||void 0===m?void 0:m.secretKey)&&void 0!==g?g:\"\",onChange:l.onUpdateDatasourceSecureJsonDataOption(e,\"secretKey\")}))),j&&a.createElement(a.Fragment,null,a.createElement(n.InlineField,{label:\"Assume Role ARN\",labelWidth:28,tooltip:\"Optionally, specify the ARN of a role to assume. Specifying a role here will ensure that the selected authentication provider is used to assume the specified role rather than using the credentials directly. Leave blank if you don't need to assume a role at all\"},a.createElement(n.Input,{\"aria-label\":\"Assume Role ARN\",className:\"width-30\",placeholder:\"arn:aws:iam:*\",value:I.jsonData.assumeRoleArn||\"\",onChange:l.onUpdateDatasourceJsonDataOption(e,\"assumeRoleArn\")})),a.createElement(n.InlineField,{label:\"External ID\",labelWidth:28,tooltip:\"If you are assuming a role in another account, that has been created with an external ID, specify the external ID here.\"},a.createElement(n.Input,{\"aria-label\":\"External ID\",className:\"width-30\",placeholder:\"External ID\",value:I.jsonData.externalId||\"\",onChange:l.onUpdateDatasourceJsonDataOption(e,\"externalId\")}))),!V&&a.createElement(n.InlineField,{label:\"Endpoint\",labelWidth:28,tooltip:\"Optionally, specify a custom endpoint for the service\"},a.createElement(n.Input,{\"aria-label\":\"Endpoint\",className:\"width-30\",placeholder:null!==(y=e.defaultEndpoint)&&void 0!==y?y:\"https://{service}.{region}.amazonaws.com\",value:I.jsonData.endpoint||\"\",onChange:l.onUpdateDatasourceJsonDataOption(e,\"endpoint\")})),a.createElement(n.InlineField,{label:\"Default Region\",labelWidth:28,tooltip:\"Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region.\"},a.createElement(n.Select,{\"aria-label\":\"Default Region\",className:\"width-30\",value:D.find((function(e){return e.value===I.jsonData.defaultRegion})),options:D,defaultValue:I.jsonData.defaultRegion,allowCustomValue:!0,onChange:l.onUpdateDatasourceJsonDataOptionSelect(e,\"defaultRegion\"),formatCreateLabel:function(e){return\"Use region: \"+e},menuShouldPortal:!0})),e.children)};function m(e){var l=this,c=u(t.useState(e.value||e.default||null),2),d=c[0],p=c[1],h=u(t.useState(d?[d]:[]),2),f=h[0],v=h[1],m=u(t.useState(e.dependencies),2),g=m[0],y=m[1],b=u(t.useState(!1),2),D=b[0],w=b[1],E=u(t.useState(!1),2),A=E[0],S=E[1],C=t.useMemo((function(){var t=[{label:\"default (\"+e.default+\")\",value:\"__default\",description:\"Default value set in the data source\"}];return e.value&&\"__default\"!==e.value&&t.push({label:e.value,value:e.value}),t}),[e.default,e.value]),x=u(t.useState(e.default?C:[]),2),V=x[0],I=x[1];t.useEffect((function(){void 0!==e.resources&&v(e.resources)}),[e.resources]),t.useEffect((function(){var t=e.default?C:[];f.length?(f.forEach((function(e){var a=\"string\"==typeof e?e:e.value;t.find((function(e){return e.value===a}))||(\"string\"==typeof e?t.push({label:e,value:e}):t.push(e))})),I(t)):I([])}),[f,C,e.default]),t.useEffect((function(){o.isEqual(e.dependencies,g)||(S(!1),p(null),e.onChange(null),y(e.dependencies))}),[e,g]);return a.createElement(n.InlineField,{label:e.label,labelWidth:e.labelWidth,tooltip:e.tooltip,hidden:e.hidden},a.createElement(\"div\",{\"data-testid\":e[\"data-testid\"],title:e.title},a.createElement(n.Select,s({},e,{\"aria-label\":e.label,options:V,onChange:function(t){e.onChange(t),t.value&&p(t.value)},isLoading:D,className:e.className||\"min-width-6\",onOpenMenu:function(){return e.fetch&&i(l,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:w(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,i(l,void 0,void 0,(function(){var t;return r(this,(function(a){switch(a.label){case 0:return A?[2]:e.saveOptions?[4,e.saveOptions()]:[3,2];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,,4,5]),[4,e.fetch()];case 3:return t=a.sent(),v(t),[3,5];case 4:return S(!0),[7];case 5:return[2]}}))}))];case 2:return t.sent(),[3,4];case 3:return w(!1),[7];case 4:return[2]}}))}))},menuShouldPortal:!0}))))}(p=exports.FillValueOptions||(exports.FillValueOptions={}))[p.Previous=0]=\"Previous\",p[p.Null=1]=\"Null\",p[p.Value=2]=\"Value\";var g=[{label:\"Previous Value\",value:exports.FillValueOptions.Previous},{label:\"NULL\",value:exports.FillValueOptions.Null},{label:\"Value\",value:exports.FillValueOptions.Value}];function y(e){return\"string\"==typeof e?e:e.map((function(e){return function(e){return\"'\"+String(e).replace(/'/g,\"''\")+\"'\"}(e)})).join(\",\")}exports.ConfigSelect=function(e){var t,n,l=e.options.jsonData,o={title:l.defaultRegion?\"\":\"select a default region\",labelWidth:28,className:\"width-30\"},i=[e.options.jsonData.assumeRoleArn,e.options.jsonData.authType,e.options.jsonData.defaultRegion,e.options.jsonData.endpoint,e.options.jsonData.externalId,e.options.jsonData.profile,null===(t=e.options.secureJsonData)||void 0===t?void 0:t.accessKey,null===(n=e.options.secureJsonData)||void 0===n?void 0:n.secretKey].concat(e.dependencies);return a.createElement(m,s({label:e.label,\"data-testid\":e[\"data-testid\"],onChange:e.onChange,fetch:e.fetch,value:e.value,saveOptions:e.saveOptions,dependencies:i,hidden:e.hidden,disabled:e.disabled||!l.defaultRegion,allowCustomValue:e.allowCustomValue,autoFocus:e.autoFocus,backspaceRemovesValue:e.backspaceRemovesValue,className:e.className,invalid:e.invalid,isClearable:e.isClearable,isMulti:e.isMulti,inputId:e.inputId,showAllSelectedWhenOpen:e.showAllSelectedWhenOpen,maxMenuHeight:e.maxMenuHeight,minMenuHeight:e.minMenuHeight,maxVisibleValues:e.maxVisibleValues,menuPlacement:e.menuPlacement,menuPosition:e.menuPosition,noOptionsMessage:e.noOptionsMessage,onBlur:e.onBlur,onCreateOption:e.onCreateOption,onInputChange:e.onInputChange,placeholder:e.placeholder,width:e.width,isOptionDisabled:e.isOptionDisabled},o))},exports.ConnectionConfig=v,exports.FillValueSelect=function(e){var t,l,o;return a.createElement(a.Fragment,null,a.createElement(n.InlineField,{label:\"Fill value\",tooltip:\"value to fill missing points\"},a.createElement(n.Select,{\"aria-label\":\"Fill value\",options:g,value:null!==(l=null===(t=e.query.fillMode)||void 0===t?void 0:t.mode)&&void 0!==l?l:exports.FillValueOptions.Previous,onChange:function(t){var a=t.value;e.onChange(s(s({},e.query),{fillMode:s(s({},e.query.fillMode),{mode:a})})),e.onRunQuery()},className:\"width-12\",menuShouldPortal:!0})),(null===(o=e.query.fillMode)||void 0===o?void 0:o.mode)===exports.FillValueOptions.Value&&a.createElement(n.InlineField,{label:\"Value\",labelWidth:11},a.createElement(n.Input,{type:\"number\",\"aria-label\":\"Value\",value:e.query.fillMode.value,onChange:function(t){var a=t.currentTarget;return e.onChange(s(s({},e.query),{fillMode:{mode:exports.FillValueOptions.Value,value:a.valueAsNumber}}))},onBlur:function(){return e.onRunQuery()}})))},exports.FormatSelect=function(e){return a.createElement(n.InlineField,{label:\"Format as\",labelWidth:11},a.createElement(n.Select,{\"aria-label\":\"Format as\",options:e.options,value:e.query.format,onChange:function(t){e.onChange(s(s({},e.query),{format:t.value||0})),e.onRunQuery()},className:\"width-12\",menuShouldPortal:!0}))},exports.InlineInput=function(e){return a.createElement(n.InlineField,{label:e.label,labelWidth:28,tooltip:e.tooltip,hidden:e.hidden,disabled:e.disabled},a.createElement(n.Input,{\"data-testid\":e[\"data-testid\"],className:\"width-30\",value:e.value,onChange:e.onChange,placeholder:e.placeholder,disabled:e.disabled}))},exports.QueryCodeEditor=function(e){var l=e.getSuggestions,i=e.query,r=o.defaults(e.query,{rawSQL:\"\"}).rawSQL,u=t.useRef([]);return t.useEffect((function(){u.current=l(i)}),[l,i]),a.createElement(n.CodeEditor,s({language:e.language,value:r,onBlur:function(t){var a=s(s({},e.query),{rawSQL:t});e.onChange(a),e.onRunQuery()},showMiniMap:!1,showLineNumbers:!0,getSuggestions:function(){return u.current},height:\"240px\"},e.editorProps))},exports.ResourceSelector=m,exports.SIGV4ConnectionConfig=function(e){var t,n,l,o,i=e.onOptionsChange,r=e.options,u={onOptionsChange:function(e){var t,a,n,l,o=s(s({},r),{jsonData:s(s({},r.jsonData),{sigV4AuthType:e.jsonData.authType,sigV4Profile:e.jsonData.profile,sigV4AssumeRoleArn:e.jsonData.assumeRoleArn,sigV4ExternalId:e.jsonData.externalId,sigV4Region:e.jsonData.defaultRegion,sigV4Endpoint:e.jsonData.endpoint}),secureJsonFields:{sigV4AccessKey:null===(t=e.secureJsonFields)||void 0===t?void 0:t.accessKey,sigV4SecretKey:null===(a=e.secureJsonFields)||void 0===a?void 0:a.secretKey},secureJsonData:{sigV4AccessKey:null===(n=e.secureJsonData)||void 0===n?void 0:n.accessKey,sigV4SecretKey:null===(l=e.secureJsonData)||void 0===l?void 0:l.secretKey}});i(o)},options:s(s({},r),{jsonData:s(s({},r.jsonData),{authType:r.jsonData.sigV4AuthType,profile:r.jsonData.sigV4Profile,assumeRoleArn:r.jsonData.sigV4AssumeRoleArn,externalId:r.jsonData.sigV4ExternalId,defaultRegion:r.jsonData.sigV4Region,endpoint:r.jsonData.sigV4Endpoint}),secureJsonFields:{accessKey:null===(t=r.secureJsonFields)||void 0===t?void 0:t.sigV4AccessKey,secretKey:null===(n=r.secureJsonFields)||void 0===n?void 0:n.sigV4SecretKey},secureJsonData:{accessKey:null===(l=r.secureJsonData)||void 0===l?void 0:l.sigV4AccessKey,secretKey:null===(o=r.secureJsonData)||void 0===o?void 0:o.sigV4SecretKey}})};return a.createElement(a.Fragment,null,a.createElement(\"div\",{className:\"gf-form\"},a.createElement(\"h6\",null,\"SigV4 Auth Details\")),a.createElement(v,s({},u,{skipHeader:!0,skipEndpoint:!0})))},exports.appendTemplateVariablesAsSuggestions=function(e,t){var a=e(),l=[];return a.getVariables().forEach((function(e){var t=\"$\"+e.name,o=a.replace(t);o===t&&(o=\"\"),l.push({label:t,kind:n.CodeEditorSuggestionItemKind.Text,detail:\"(Template Variable) \"+o})})),t.concat(l)},exports.applySQLTemplateVariables=function(e,t,a){var n=a();return s(s({},e),{rawSQL:n.replace(e.rawSQL,t,y)})},exports.awsAuthProviderOptions=h,exports.filterSQLQuery=function(e){return!!e.rawSQL},exports.standardRegions=d;\n//# sourceMappingURL=index.production.js.map\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./dist/index.production.js');\n} else {\n  module.exports = require('./dist/index.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./index.production.js');\n} else {\n  module.exports = require('./index.development.js');\n}\n","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});const e={TimePicker:{openButton:\"data-testid TimePicker Open Button\",fromField:\"Time Range from field\",toField:\"Time Range to field\",applyTimeRange:\"data-testid TimePicker submit button\",calendar:{label:\"Time Range calendar\",openButton:\"Open time range calendar\",closeButton:\"Close time range Calendar\"},absoluteTimeRangeTitle:\"data-testid-absolute-time-range-narrow\"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:\"Test Data Query scenario select container\",scenarioSelect:\"Test Data Query scenario select\",max:\"TestData max\",min:\"TestData min\",noise:\"TestData noise\",seriesCount:\"TestData series count\",spread:\"TestData spread\",startValue:\"TestData start value\",drop:\"TestData drop values\"}},DataSourceHttpSettings:{urlInput:\"Datasource HTTP settings url\"},Jaeger:{traceIDInput:\"Trace ID\"},Prometheus:{configPage:{exemplarsAddButton:\"Add exemplar config button\",internalLinkSwitch:\"Internal link switch\"},exemplarMarker:\"Exemplar marker\"}},Menu:{MenuComponent:e=>`${e} menu`,MenuGroup:e=>`${e} menu group`,MenuItem:e=>`${e} menu item`,SubMenu:{container:\"SubMenu container\",icon:\"SubMenu icon\"}},Panels:{Panel:{title:e=>`data-testid Panel header ${e}`,headerItems:e=>`Panel header item ${e}`,containerByTitle:e=>`${e} panel`,headerCornerInfo:e=>`Panel header ${e}`},Visualization:{Graph:{VisualizationTab:{legendSection:\"Legend section\"},Legend:{legendItemAlias:e=>`gpl alias ${e}`,showLegendSwitch:\"gpl show legend\"},xAxis:{labels:()=>\"div.flot-x-axis > div.flot-tick-label\"}},BarGauge:{value:\"Bar gauge value\",valueV2:\"data-testid Bar gauge value\"},PieChart:{svgSlice:\"Pie Chart Slice\"},Text:{container:()=>\".markdown-html\"},Table:{header:\"table header\",footer:\"table-footer\"}}},VizLegend:{seriesName:e=>`VizLegend series ${e}`},Drawer:{General:{title:e=>`Drawer title ${e}`,expand:\"Drawer expand\",contract:\"Drawer contract\",close:\"Drawer close\",rcContentWrapper:()=>\".drawer-content-wrapper\"}},PanelEditor:{General:{content:\"Panel editor content\"},OptionsPane:{content:\"Panel editor option pane content\",select:\"Panel editor option pane select\",fieldLabel:e=>`${e} field property editor`},DataPane:{content:\"Panel editor data pane content\"},applyButton:\"Apply changes and go back to dashboard\",toggleVizPicker:\"toggle-viz-picker\",toggleVizOptions:\"toggle-viz-options\",toggleTableView:\"toggle-table-view\"},PanelInspector:{Data:{content:\"Panel inspector Data content\"},Stats:{content:\"Panel inspector Stats content\"},Json:{content:\"Panel inspector Json content\"},Query:{content:\"Panel inspector Query content\",refreshButton:\"Panel inspector Query refresh button\",jsonObjectKeys:()=>\".json-formatter-key\"}},Tab:{title:e=>`Tab ${e}`,active:()=>'[class*=\"-activeTabStyle\"]'},RefreshPicker:{runButton:\"RefreshPicker run button\",intervalButton:\"RefreshPicker interval button\",runButtonV2:\"data-testid RefreshPicker run button\",intervalButtonV2:\"data-testid RefreshPicker interval button\"},QueryTab:{content:\"Query editor tab content\",queryInspectorButton:\"Query inspector button\",queryHistoryButton:\"Rich history button\",addQuery:\"Query editor add query button\"},QueryHistory:{queryText:\"Query text\"},QueryEditorRows:{rows:\"Query editor row\"},QueryEditorRow:{actionButton:e=>`${e} query operation action`,title:e=>`Query editor row title ${e}`,container:e=>`Query editor row ${e}`},AlertTab:{content:\"Alert editor tab content\"},Alert:{alert:e=>`Alert ${e}`,alertV2:e=>`data-testid Alert ${e}`},TransformTab:{content:\"Transform editor tab content\",newTransform:e=>`New transform ${e}`,transformationEditor:e=>`Transformation editor ${e}`,transformationEditorDebugger:e=>`Transformation editor debugger ${e}`},Transforms:{card:e=>`New transform ${e}`,Reduce:{modeLabel:\"Transform mode label\",calculationsLabel:\"Transform calculations label\"},searchInput:\"search transformations\"},PageToolbar:{container:()=>\".page-toolbar\",item:e=>`${e}`},QueryEditorToolbarItem:{button:e=>`QueryEditor toolbar item button ${e}`},BackButton:{backArrow:\"Go Back\"},OptionsGroup:{group:e=>e?`Options group ${e}`:\"Options group\",toggle:e=>e?`Options group ${e} toggle`:\"Options group toggle\"},PluginVisualization:{item:e=>`Plugin visualization item ${e}`,current:()=>'[class*=\"-currentVisualizationItem\"]'},Select:{option:\"Select option\",input:()=>'input[id*=\"time-options-input\"]',singleValue:()=>'div[class*=\"-singleValue\"]'},FieldConfigEditor:{content:\"Field config editor content\"},OverridesConfigEditor:{content:\"Field overrides editor content\"},FolderPicker:{container:\"Folder picker select container\",containerV2:\"data-testid Folder picker select container\",input:\"Select a folder\"},ReadonlyFolderPicker:{container:\"data-testid Readonly folder picker select container\"},DataSourcePicker:{container:\"Data source picker select container\",input:()=>'input[id=\"data-source-picker\"]',inputV2:\"Select a data source\"},TimeZonePicker:{container:\"Time zone picker select container\",containerV2:\"data-testid Time zone picker select container\"},WeekStartPicker:{container:\"Choose starting day of the week\",containerV2:\"data-testid Choose starting day of the week\",placeholder:\"Choose starting day of the week\"},TraceViewer:{spanBar:\"data-testid SpanBar--wrapper\"},QueryField:{container:\"Query field\"},QueryBuilder:{queryPatterns:\"Query patterns\",labelSelect:\"Select label\",valueSelect:\"Select value\",matchOperatorSelect:\"Select match operator\"},ValuePicker:{button:e=>`Value picker button ${e}`,select:e=>`Value picker select ${e}`},Search:{section:\"Search section\",sectionV2:\"data-testid Search section\",items:\"Search items\",itemsV2:\"data-testid Search items\",cards:\"data-testid Search cards\",collapseFolder:e=>`data-testid Collapse folder ${e}`,expandFolder:e=>`data-testid Expand folder ${e}`,dashboardItem:t=>`${e.Search.dashboardItems} ${t}`,dashboardCard:e=>`data-testid Search card ${e}`,dashboardItems:\"data-testid Dashboard search item\"},DashboardLinks:{container:\"data-testid Dashboard link container\",dropDown:\"data-testid Dashboard link dropdown\",link:\"data-testid Dashboard link\"},LoadingIndicator:{icon:\"Loading indicator\"},CallToActionCard:{button:e=>`Call to action button ${e}`,buttonV2:e=>`data-testid Call to action button ${e}`},DataLinksContextMenu:{singleLink:\"Data link\"},CodeEditor:{container:\"Code editor container\"},DashboardImportPage:{textarea:\"data-testid-import-dashboard-textarea\",submit:\"data-testid-load-dashboard\"},ImportDashboardForm:{name:\"data-testid-import-dashboard-title\",submit:\"data-testid-import-dashboard-submit\"},PanelAlertTabContent:{content:\"Unified alert editor tab content\"},VisualizationPreview:{card:e=>`data-testid suggestion-${e}`},ColorSwatch:{name:\"data-testid-colorswatch\"},DashboardRow:{title:e=>`data-testid dashboard-row-title-${e}`},UserProfile:{profileSaveButton:\"data-testid-user-profile-save\",preferencesSaveButton:\"data-testid-shared-prefs-save\",orgsTable:\"data-testid-user-orgs-table\",sessionsTable:\"data-testid-user-sessions-table\"},FileUpload:{inputField:\"data-testid-file-upload-input-field\",fileNameSpan:\"data-testid-file-upload-file-name\"}},t={Login:{url:\"/login\",username:\"Username input field\",password:\"Password input field\",submit:\"Login button\",skip:\"Skip change password button\"},Home:{url:\"/\"},DataSource:{name:\"Data source settings page name input field\",delete:\"Data source settings page Delete button\",readOnly:\"Data source settings page read only message\",saveAndTest:\"Data source settings page Save and Test button\",alert:\"Data source settings page Alert\"},DataSources:{url:\"/datasources\",dataSources:e=>`Data source list item ${e}`},AddDataSource:{url:\"/datasources/new\",dataSourcePlugins:e=>`Data source plugin item ${e}`,dataSourcePluginsV2:e=>`Add data source ${e}`},ConfirmModal:{delete:\"Confirm Modal Danger Button\"},AddDashboard:{url:\"/dashboard/new\",addNewPanel:\"Add new panel\",addNewRow:\"Add new row\",addNewPanelLibrary:\"Add new panel from panel library\"},Dashboard:{url:e=>`/d/${e}`,DashNav:{nav:\"Dashboard navigation\",navV2:\"data-testid Dashboard navigation\",publicDashboardTag:\"data-testid public dashboard tag\"},SubMenu:{submenu:\"Dashboard submenu\",submenuItem:\"data-testid template variable\",submenuItemLabels:e=>`data-testid Dashboard template variables submenu Label ${e}`,submenuItemValueDropDownValueLinkTexts:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`,submenuItemValueDropDownDropDown:\"Variable options\",submenuItemValueDropDownOptionTexts:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Settings:{General:{deleteDashBoard:\"Dashboard settings page delete dashboard button\",sectionItems:e=>`Dashboard settings section item ${e}`,saveDashBoard:\"Dashboard settings aside actions Save button\",saveAsDashBoard:\"Dashboard settings aside actions Save As button\",timezone:\"Time zone picker select container\",title:\"Dashboard settings page title\"},Annotations:{List:{addAnnotationCTA:e.CallToActionCard.button(\"Add annotation query\"),addAnnotationCTAV2:e.CallToActionCard.buttonV2(\"Add annotation query\")},Settings:{name:\"Annotations settings name input\"}},Variables:{List:{addVariableCTA:e.CallToActionCard.button(\"Add variable\"),addVariableCTAV2:e.CallToActionCard.buttonV2(\"Add variable\"),newButton:\"Variable editor New variable button\",table:\"Variable editor Table\",tableRowNameFields:e=>`Variable editor Table Name field ${e}`,tableRowDefinitionFields:e=>`Variable editor Table Definition field ${e}`,tableRowArrowUpButtons:e=>`Variable editor Table ArrowUp button ${e}`,tableRowArrowDownButtons:e=>`Variable editor Table ArrowDown button ${e}`,tableRowDuplicateButtons:e=>`Variable editor Table Duplicate button ${e}`,tableRowRemoveButtons:e=>`Variable editor Table Remove button ${e}`},Edit:{General:{headerLink:\"Variable editor Header link\",modeLabelNew:\"Variable editor Header mode New\",modeLabelEdit:\"Variable editor Header mode Edit\",generalNameInput:\"Variable editor Form Name field\",generalNameInputV2:\"data-testid Variable editor Form Name field\",generalTypeSelect:\"Variable editor Form Type select\",generalTypeSelectV2:\"data-testid Variable editor Form Type select\",generalLabelInput:\"Variable editor Form Label field\",generalLabelInputV2:\"data-testid Variable editor Form Label field\",generalHideSelect:\"Variable editor Form Hide select\",generalHideSelectV2:\"data-testid Variable editor Form Hide select\",selectionOptionsMultiSwitch:\"Variable editor Form Multi switch\",selectionOptionsIncludeAllSwitch:\"Variable editor Form IncludeAll switch\",selectionOptionsCustomAllInput:\"Variable editor Form IncludeAll field\",selectionOptionsCustomAllInputV2:\"data-testid Variable editor Form IncludeAll field\",previewOfValuesOption:\"Variable editor Preview of Values option\",submitButton:\"Variable editor Submit button\"},QueryVariable:{queryOptionsDataSourceSelect:e.DataSourcePicker.container,queryOptionsRefreshSelect:\"Variable editor Form Query Refresh select\",queryOptionsRefreshSelectV2:\"data-testid Variable editor Form Query Refresh select\",queryOptionsRegExInput:\"Variable editor Form Query RegEx field\",queryOptionsRegExInputV2:\"data-testid Variable editor Form Query RegEx field\",queryOptionsSortSelect:\"Variable editor Form Query Sort select\",queryOptionsSortSelectV2:\"data-testid Variable editor Form Query Sort select\",queryOptionsQueryInput:\"Variable editor Form Default Variable Query Editor textarea\",valueGroupsTagsEnabledSwitch:\"Variable editor Form Query UseTags switch\",valueGroupsTagsTagsQueryInput:\"Variable editor Form Query TagsQuery field\",valueGroupsTagsTagsValuesQueryInput:\"Variable editor Form Query TagsValuesQuery field\"},ConstantVariable:{constantOptionsQueryInput:\"Variable editor Form Constant Query field\",constantOptionsQueryInputV2:\"data-testid Variable editor Form Constant Query field\"},DatasourceVariable:{datasourceSelect:\"data-testid datasource variable datasource type\"},TextBoxVariable:{textBoxOptionsQueryInput:\"Variable editor Form TextBox Query field\",textBoxOptionsQueryInputV2:\"data-testid Variable editor Form TextBox Query field\"},CustomVariable:{customValueInput:\"data-testid custom-variable-input\"},IntervalVariable:{intervalsValueInput:\"data-testid interval variable intervals input\"}}}}},Dashboards:{url:\"/dashboards\",dashboards:e=>`Dashboard search item ${e}`},SaveDashboardAsModal:{newName:\"Save dashboard title field\",save:\"Save dashboard button\"},SaveDashboardModal:{save:\"Dashboard settings Save Dashboard Modal Save button\",saveVariables:\"Dashboard settings Save Dashboard Modal Save variables checkbox\",saveTimerange:\"Dashboard settings Save Dashboard Modal Save timerange checkbox\"},SharePanelModal:{linkToRenderedImage:\"Link to rendered image\"},ShareDashboardModal:{shareButton:\"Share dashboard or panel\",PublicDashboard:{Tab:\"Tab Public Dashboard\",WillBePublicCheckbox:\"data-testid public dashboard will be public checkbox\",LimitedDSCheckbox:\"data-testid public dashboard limited datasources checkbox\",CostIncreaseCheckbox:\"data-testid public dashboard cost may increase checkbox\",EnableSwitch:\"data-testid public dashboard on off switch\",SaveConfigButton:\"data-testid public dashboard save config button\",CopyUrlInput:\"data-testid public dashboard copy url input\",CopyUrlButton:\"data-testid public dashboard copy url button\",TemplateVariablesWarningAlert:\"data-testid public dashboard disabled template variables alert\"}},Explore:{url:\"/explore\",General:{container:\"data-testid Explore\",graph:\"Explore Graph\",table:\"Explore Table\",scrollView:\"data-testid explorer scroll view\"}},SoloPanel:{url:e=>`/d-solo/${e}`},PluginsList:{page:\"Plugins list page\",list:\"Plugins list\",listItem:\"Plugins list item\",signatureErrorNotice:\"Unsigned plugins notice\"},PluginPage:{page:\"Plugin page\",signatureInfo:\"Plugin signature info\",disabledInfo:\"Plugin disabled info\"},PlaylistForm:{name:\"Playlist name\",interval:\"Playlist interval\",itemRow:\"Playlist item row\",itemIdType:\"Playlist item dashboard by ID type\",itemTagType:\"Playlist item dashboard by Tag type\",itemMoveUp:\"Move playlist item order up\",itemMoveDown:\"Move playlist item order down\",itemDelete:\"Delete playlist item\"}},a={pages:t,components:e};exports.Components=e,exports.Pages=t,exports.selectors=a;\n//# sourceMappingURL=index.production.js.map\n","const perf =\n  typeof performance === 'object' &&\n  performance &&\n  typeof performance.now === 'function'\n    ? performance\n    : Date\n\nconst hasAbortController = typeof AbortController === 'function'\n\n// minimal backwards-compatibility polyfill\n// this doesn't have nearly all the checks and whatnot that\n// actual AbortController/Signal has, but it's enough for\n// our purposes, and if used properly, behaves the same.\nconst AC = hasAbortController\n  ? AbortController\n  : class AbortController {\n      constructor() {\n        this.signal = new AS()\n      }\n      abort() {\n        this.signal.dispatchEvent('abort')\n      }\n    }\n\nconst hasAbortSignal = typeof AbortSignal === 'function'\n// Some polyfills put this on the AC class, not global\nconst hasACAbortSignal = typeof AC.AbortSignal === 'function'\nconst AS = hasAbortSignal\n  ? AbortSignal\n  : hasACAbortSignal\n  ? AC.AbortController\n  : class AbortSignal {\n      constructor() {\n        this.aborted = false\n        this._listeners = []\n      }\n      dispatchEvent(type) {\n        if (type === 'abort') {\n          this.aborted = true\n          const e = { type, target: this }\n          this.onabort(e)\n          this._listeners.forEach(f => f(e), this)\n        }\n      }\n      onabort() {}\n      addEventListener(ev, fn) {\n        if (ev === 'abort') {\n          this._listeners.push(fn)\n        }\n      }\n      removeEventListener(ev, fn) {\n        if (ev === 'abort') {\n          this._listeners = this._listeners.filter(f => f !== fn)\n        }\n      }\n    }\n\nconst warned = new Set()\nconst deprecatedOption = (opt, instead) => {\n  const code = `LRU_CACHE_OPTION_${opt}`\n  if (shouldWarn(code)) {\n    warn(code, `${opt} option`, `options.${instead}`, LRUCache)\n  }\n}\nconst deprecatedMethod = (method, instead) => {\n  const code = `LRU_CACHE_METHOD_${method}`\n  if (shouldWarn(code)) {\n    const { prototype } = LRUCache\n    const { get } = Object.getOwnPropertyDescriptor(prototype, method)\n    warn(code, `${method} method`, `cache.${instead}()`, get)\n  }\n}\nconst deprecatedProperty = (field, instead) => {\n  const code = `LRU_CACHE_PROPERTY_${field}`\n  if (shouldWarn(code)) {\n    const { prototype } = LRUCache\n    const { get } = Object.getOwnPropertyDescriptor(prototype, field)\n    warn(code, `${field} property`, `cache.${instead}`, get)\n  }\n}\n\nconst emitWarning = (...a) => {\n  typeof process === 'object' &&\n  process &&\n  typeof process.emitWarning === 'function'\n    ? process.emitWarning(...a)\n    : console.error(...a)\n}\n\nconst shouldWarn = code => !warned.has(code)\n\nconst warn = (code, what, instead, fn) => {\n  warned.add(code)\n  const msg = `The ${what} is deprecated. Please use ${instead} instead.`\n  emitWarning(msg, 'DeprecationWarning', code, fn)\n}\n\nconst isPosInt = n => n && n === Math.floor(n) && n > 0 && isFinite(n)\n\n/* istanbul ignore next - This is a little bit ridiculous, tbh.\n * The maximum array length is 2^32-1 or thereabouts on most JS impls.\n * And well before that point, you're caching the entire world, I mean,\n * that's ~32GB of just integers for the next/prev links, plus whatever\n * else to hold that many keys and values.  Just filling the memory with\n * zeroes at init time is brutal when you get that big.\n * But why not be complete?\n * Maybe in the future, these limits will have expanded. */\nconst getUintArray = max =>\n  !isPosInt(max)\n    ? null\n    : max <= Math.pow(2, 8)\n    ? Uint8Array\n    : max <= Math.pow(2, 16)\n    ? Uint16Array\n    : max <= Math.pow(2, 32)\n    ? Uint32Array\n    : max <= Number.MAX_SAFE_INTEGER\n    ? ZeroArray\n    : null\n\nclass ZeroArray extends Array {\n  constructor(size) {\n    super(size)\n    this.fill(0)\n  }\n}\n\nclass Stack {\n  constructor(max) {\n    if (max === 0) {\n      return []\n    }\n    const UintArray = getUintArray(max)\n    this.heap = new UintArray(max)\n    this.length = 0\n  }\n  push(n) {\n    this.heap[this.length++] = n\n  }\n  pop() {\n    return this.heap[--this.length]\n  }\n}\n\nclass LRUCache {\n  constructor(options = {}) {\n    const {\n      max = 0,\n      ttl,\n      ttlResolution = 1,\n      ttlAutopurge,\n      updateAgeOnGet,\n      updateAgeOnHas,\n      allowStale,\n      dispose,\n      disposeAfter,\n      noDisposeOnSet,\n      noUpdateTTL,\n      maxSize = 0,\n      maxEntrySize = 0,\n      sizeCalculation,\n      fetchMethod,\n      fetchContext,\n      noDeleteOnFetchRejection,\n      noDeleteOnStaleGet,\n    } = options\n\n    // deprecated options, don't trigger a warning for getting them if\n    // the thing being passed in is another LRUCache we're copying.\n    const { length, maxAge, stale } =\n      options instanceof LRUCache ? {} : options\n\n    if (max !== 0 && !isPosInt(max)) {\n      throw new TypeError('max option must be a nonnegative integer')\n    }\n\n    const UintArray = max ? getUintArray(max) : Array\n    if (!UintArray) {\n      throw new Error('invalid max value: ' + max)\n    }\n\n    this.max = max\n    this.maxSize = maxSize\n    this.maxEntrySize = maxEntrySize || this.maxSize\n    this.sizeCalculation = sizeCalculation || length\n    if (this.sizeCalculation) {\n      if (!this.maxSize && !this.maxEntrySize) {\n        throw new TypeError(\n          'cannot set sizeCalculation without setting maxSize or maxEntrySize'\n        )\n      }\n      if (typeof this.sizeCalculation !== 'function') {\n        throw new TypeError('sizeCalculation set to non-function')\n      }\n    }\n\n    this.fetchMethod = fetchMethod || null\n    if (this.fetchMethod && typeof this.fetchMethod !== 'function') {\n      throw new TypeError(\n        'fetchMethod must be a function if specified'\n      )\n    }\n\n    this.fetchContext = fetchContext\n    if (!this.fetchMethod && fetchContext !== undefined) {\n      throw new TypeError(\n        'cannot set fetchContext without fetchMethod'\n      )\n    }\n\n    this.keyMap = new Map()\n    this.keyList = new Array(max).fill(null)\n    this.valList = new Array(max).fill(null)\n    this.next = new UintArray(max)\n    this.prev = new UintArray(max)\n    this.head = 0\n    this.tail = 0\n    this.free = new Stack(max)\n    this.initialFill = 1\n    this.size = 0\n\n    if (typeof dispose === 'function') {\n      this.dispose = dispose\n    }\n    if (typeof disposeAfter === 'function') {\n      this.disposeAfter = disposeAfter\n      this.disposed = []\n    } else {\n      this.disposeAfter = null\n      this.disposed = null\n    }\n    this.noDisposeOnSet = !!noDisposeOnSet\n    this.noUpdateTTL = !!noUpdateTTL\n    this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection\n\n    // NB: maxEntrySize is set to maxSize if it's set\n    if (this.maxEntrySize !== 0) {\n      if (this.maxSize !== 0) {\n        if (!isPosInt(this.maxSize)) {\n          throw new TypeError(\n            'maxSize must be a positive integer if specified'\n          )\n        }\n      }\n      if (!isPosInt(this.maxEntrySize)) {\n        throw new TypeError(\n          'maxEntrySize must be a positive integer if specified'\n        )\n      }\n      this.initializeSizeTracking()\n    }\n\n    this.allowStale = !!allowStale || !!stale\n    this.noDeleteOnStaleGet = !!noDeleteOnStaleGet\n    this.updateAgeOnGet = !!updateAgeOnGet\n    this.updateAgeOnHas = !!updateAgeOnHas\n    this.ttlResolution =\n      isPosInt(ttlResolution) || ttlResolution === 0\n        ? ttlResolution\n        : 1\n    this.ttlAutopurge = !!ttlAutopurge\n    this.ttl = ttl || maxAge || 0\n    if (this.ttl) {\n      if (!isPosInt(this.ttl)) {\n        throw new TypeError(\n          'ttl must be a positive integer if specified'\n        )\n      }\n      this.initializeTTLTracking()\n    }\n\n    // do not allow completely unbounded caches\n    if (this.max === 0 && this.ttl === 0 && this.maxSize === 0) {\n      throw new TypeError(\n        'At least one of max, maxSize, or ttl is required'\n      )\n    }\n    if (!this.ttlAutopurge && !this.max && !this.maxSize) {\n      const code = 'LRU_CACHE_UNBOUNDED'\n      if (shouldWarn(code)) {\n        warned.add(code)\n        const msg =\n          'TTL caching without ttlAutopurge, max, or maxSize can ' +\n          'result in unbounded memory consumption.'\n        emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache)\n      }\n    }\n\n    if (stale) {\n      deprecatedOption('stale', 'allowStale')\n    }\n    if (maxAge) {\n      deprecatedOption('maxAge', 'ttl')\n    }\n    if (length) {\n      deprecatedOption('length', 'sizeCalculation')\n    }\n  }\n\n  getRemainingTTL(key) {\n    return this.has(key, { updateAgeOnHas: false }) ? Infinity : 0\n  }\n\n  initializeTTLTracking() {\n    this.ttls = new ZeroArray(this.max)\n    this.starts = new ZeroArray(this.max)\n\n    this.setItemTTL = (index, ttl, start = perf.now()) => {\n      this.starts[index] = ttl !== 0 ? start : 0\n      this.ttls[index] = ttl\n      if (ttl !== 0 && this.ttlAutopurge) {\n        const t = setTimeout(() => {\n          if (this.isStale(index)) {\n            this.delete(this.keyList[index])\n          }\n        }, ttl + 1)\n        /* istanbul ignore else - unref() not supported on all platforms */\n        if (t.unref) {\n          t.unref()\n        }\n      }\n    }\n\n    this.updateItemAge = index => {\n      this.starts[index] = this.ttls[index] !== 0 ? perf.now() : 0\n    }\n\n    // debounce calls to perf.now() to 1s so we're not hitting\n    // that costly call repeatedly.\n    let cachedNow = 0\n    const getNow = () => {\n      const n = perf.now()\n      if (this.ttlResolution > 0) {\n        cachedNow = n\n        const t = setTimeout(\n          () => (cachedNow = 0),\n          this.ttlResolution\n        )\n        /* istanbul ignore else - not available on all platforms */\n        if (t.unref) {\n          t.unref()\n        }\n      }\n      return n\n    }\n\n    this.getRemainingTTL = key => {\n      const index = this.keyMap.get(key)\n      if (index === undefined) {\n        return 0\n      }\n      return this.ttls[index] === 0 || this.starts[index] === 0\n        ? Infinity\n        : this.starts[index] +\n            this.ttls[index] -\n            (cachedNow || getNow())\n    }\n\n    this.isStale = index => {\n      return (\n        this.ttls[index] !== 0 &&\n        this.starts[index] !== 0 &&\n        (cachedNow || getNow()) - this.starts[index] >\n          this.ttls[index]\n      )\n    }\n  }\n  updateItemAge(index) {}\n  setItemTTL(index, ttl, start) {}\n  isStale(index) {\n    return false\n  }\n\n  initializeSizeTracking() {\n    this.calculatedSize = 0\n    this.sizes = new ZeroArray(this.max)\n    this.removeItemSize = index => {\n      this.calculatedSize -= this.sizes[index]\n      this.sizes[index] = 0\n    }\n    this.requireSize = (k, v, size, sizeCalculation) => {\n      if (!isPosInt(size)) {\n        if (sizeCalculation) {\n          if (typeof sizeCalculation !== 'function') {\n            throw new TypeError('sizeCalculation must be a function')\n          }\n          size = sizeCalculation(v, k)\n          if (!isPosInt(size)) {\n            throw new TypeError(\n              'sizeCalculation return invalid (expect positive integer)'\n            )\n          }\n        } else {\n          throw new TypeError(\n            'invalid size value (must be positive integer)'\n          )\n        }\n      }\n      return size\n    }\n    this.addItemSize = (index, size) => {\n      this.sizes[index] = size\n      const maxSize = this.maxSize - this.sizes[index]\n      while (this.calculatedSize > maxSize) {\n        this.evict(true)\n      }\n      this.calculatedSize += this.sizes[index]\n    }\n  }\n  removeItemSize(index) {}\n  addItemSize(index, size) {}\n  requireSize(k, v, size, sizeCalculation) {\n    if (size || sizeCalculation) {\n      throw new TypeError(\n        'cannot set size without setting maxSize or maxEntrySize on cache'\n      )\n    }\n  }\n\n  *indexes({ allowStale = this.allowStale } = {}) {\n    if (this.size) {\n      for (let i = this.tail; true; ) {\n        if (!this.isValidIndex(i)) {\n          break\n        }\n        if (allowStale || !this.isStale(i)) {\n          yield i\n        }\n        if (i === this.head) {\n          break\n        } else {\n          i = this.prev[i]\n        }\n      }\n    }\n  }\n\n  *rindexes({ allowStale = this.allowStale } = {}) {\n    if (this.size) {\n      for (let i = this.head; true; ) {\n        if (!this.isValidIndex(i)) {\n          break\n        }\n        if (allowStale || !this.isStale(i)) {\n          yield i\n        }\n        if (i === this.tail) {\n          break\n        } else {\n          i = this.next[i]\n        }\n      }\n    }\n  }\n\n  isValidIndex(index) {\n    return this.keyMap.get(this.keyList[index]) === index\n  }\n\n  *entries() {\n    for (const i of this.indexes()) {\n      yield [this.keyList[i], this.valList[i]]\n    }\n  }\n  *rentries() {\n    for (const i of this.rindexes()) {\n      yield [this.keyList[i], this.valList[i]]\n    }\n  }\n\n  *keys() {\n    for (const i of this.indexes()) {\n      yield this.keyList[i]\n    }\n  }\n  *rkeys() {\n    for (const i of this.rindexes()) {\n      yield this.keyList[i]\n    }\n  }\n\n  *values() {\n    for (const i of this.indexes()) {\n      yield this.valList[i]\n    }\n  }\n  *rvalues() {\n    for (const i of this.rindexes()) {\n      yield this.valList[i]\n    }\n  }\n\n  [Symbol.iterator]() {\n    return this.entries()\n  }\n\n  find(fn, getOptions = {}) {\n    for (const i of this.indexes()) {\n      if (fn(this.valList[i], this.keyList[i], this)) {\n        return this.get(this.keyList[i], getOptions)\n      }\n    }\n  }\n\n  forEach(fn, thisp = this) {\n    for (const i of this.indexes()) {\n      fn.call(thisp, this.valList[i], this.keyList[i], this)\n    }\n  }\n\n  rforEach(fn, thisp = this) {\n    for (const i of this.rindexes()) {\n      fn.call(thisp, this.valList[i], this.keyList[i], this)\n    }\n  }\n\n  get prune() {\n    deprecatedMethod('prune', 'purgeStale')\n    return this.purgeStale\n  }\n\n  purgeStale() {\n    let deleted = false\n    for (const i of this.rindexes({ allowStale: true })) {\n      if (this.isStale(i)) {\n        this.delete(this.keyList[i])\n        deleted = true\n      }\n    }\n    return deleted\n  }\n\n  dump() {\n    const arr = []\n    for (const i of this.indexes({ allowStale: true })) {\n      const key = this.keyList[i]\n      const v = this.valList[i]\n      const value = this.isBackgroundFetch(v)\n        ? v.__staleWhileFetching\n        : v\n      const entry = { value }\n      if (this.ttls) {\n        entry.ttl = this.ttls[i]\n        // always dump the start relative to a portable timestamp\n        // it's ok for this to be a bit slow, it's a rare operation.\n        const age = perf.now() - this.starts[i]\n        entry.start = Math.floor(Date.now() - age)\n      }\n      if (this.sizes) {\n        entry.size = this.sizes[i]\n      }\n      arr.unshift([key, entry])\n    }\n    return arr\n  }\n\n  load(arr) {\n    this.clear()\n    for (const [key, entry] of arr) {\n      if (entry.start) {\n        // entry.start is a portable timestamp, but we may be using\n        // node's performance.now(), so calculate the offset.\n        // it's ok for this to be a bit slow, it's a rare operation.\n        const age = Date.now() - entry.start\n        entry.start = perf.now() - age\n      }\n      this.set(key, entry.value, entry)\n    }\n  }\n\n  dispose(v, k, reason) {}\n\n  set(\n    k,\n    v,\n    {\n      ttl = this.ttl,\n      start,\n      noDisposeOnSet = this.noDisposeOnSet,\n      size = 0,\n      sizeCalculation = this.sizeCalculation,\n      noUpdateTTL = this.noUpdateTTL,\n    } = {}\n  ) {\n    size = this.requireSize(k, v, size, sizeCalculation)\n    // if the item doesn't fit, don't do anything\n    // NB: maxEntrySize set to maxSize by default\n    if (this.maxEntrySize && size > this.maxEntrySize) {\n      return this\n    }\n    let index = this.size === 0 ? undefined : this.keyMap.get(k)\n    if (index === undefined) {\n      // addition\n      index = this.newIndex()\n      this.keyList[index] = k\n      this.valList[index] = v\n      this.keyMap.set(k, index)\n      this.next[this.tail] = index\n      this.prev[index] = this.tail\n      this.tail = index\n      this.size++\n      this.addItemSize(index, size)\n      noUpdateTTL = false\n    } else {\n      // update\n      const oldVal = this.valList[index]\n      if (v !== oldVal) {\n        if (this.isBackgroundFetch(oldVal)) {\n          oldVal.__abortController.abort()\n        } else {\n          if (!noDisposeOnSet) {\n            this.dispose(oldVal, k, 'set')\n            if (this.disposeAfter) {\n              this.disposed.push([oldVal, k, 'set'])\n            }\n          }\n        }\n        this.removeItemSize(index)\n        this.valList[index] = v\n        this.addItemSize(index, size)\n      }\n      this.moveToTail(index)\n    }\n    if (ttl !== 0 && this.ttl === 0 && !this.ttls) {\n      this.initializeTTLTracking()\n    }\n    if (!noUpdateTTL) {\n      this.setItemTTL(index, ttl, start)\n    }\n    if (this.disposeAfter) {\n      while (this.disposed.length) {\n        this.disposeAfter(...this.disposed.shift())\n      }\n    }\n    return this\n  }\n\n  newIndex() {\n    if (this.size === 0) {\n      return this.tail\n    }\n    if (this.size === this.max && this.max !== 0) {\n      return this.evict(false)\n    }\n    if (this.free.length !== 0) {\n      return this.free.pop()\n    }\n    // initial fill, just keep writing down the list\n    return this.initialFill++\n  }\n\n  pop() {\n    if (this.size) {\n      const val = this.valList[this.head]\n      this.evict(true)\n      return val\n    }\n  }\n\n  evict(free) {\n    const head = this.head\n    const k = this.keyList[head]\n    const v = this.valList[head]\n    if (this.isBackgroundFetch(v)) {\n      v.__abortController.abort()\n    } else {\n      this.dispose(v, k, 'evict')\n      if (this.disposeAfter) {\n        this.disposed.push([v, k, 'evict'])\n      }\n    }\n    this.removeItemSize(head)\n    // if we aren't about to use the index, then null these out\n    if (free) {\n      this.keyList[head] = null\n      this.valList[head] = null\n      this.free.push(head)\n    }\n    this.head = this.next[head]\n    this.keyMap.delete(k)\n    this.size--\n    return head\n  }\n\n  has(k, { updateAgeOnHas = this.updateAgeOnHas } = {}) {\n    const index = this.keyMap.get(k)\n    if (index !== undefined) {\n      if (!this.isStale(index)) {\n        if (updateAgeOnHas) {\n          this.updateItemAge(index)\n        }\n        return true\n      }\n    }\n    return false\n  }\n\n  // like get(), but without any LRU updating or TTL expiration\n  peek(k, { allowStale = this.allowStale } = {}) {\n    const index = this.keyMap.get(k)\n    if (index !== undefined && (allowStale || !this.isStale(index))) {\n      const v = this.valList[index]\n      // either stale and allowed, or forcing a refresh of non-stale value\n      return this.isBackgroundFetch(v) ? v.__staleWhileFetching : v\n    }\n  }\n\n  backgroundFetch(k, index, options, context) {\n    const v = index === undefined ? undefined : this.valList[index]\n    if (this.isBackgroundFetch(v)) {\n      return v\n    }\n    const ac = new AC()\n    const fetchOpts = {\n      signal: ac.signal,\n      options,\n      context,\n    }\n    const cb = v => {\n      if (!ac.signal.aborted) {\n        this.set(k, v, fetchOpts.options)\n      }\n      return v\n    }\n    const eb = er => {\n      if (this.valList[index] === p) {\n        const del =\n          !options.noDeleteOnFetchRejection ||\n          p.__staleWhileFetching === undefined\n        if (del) {\n          this.delete(k)\n        } else {\n          // still replace the *promise* with the stale value,\n          // since we are done with the promise at this point.\n          this.valList[index] = p.__staleWhileFetching\n        }\n      }\n      if (p.__returned === p) {\n        throw er\n      }\n    }\n    const pcall = res => res(this.fetchMethod(k, v, fetchOpts))\n    const p = new Promise(pcall).then(cb, eb)\n    p.__abortController = ac\n    p.__staleWhileFetching = v\n    p.__returned = null\n    if (index === undefined) {\n      this.set(k, p, fetchOpts.options)\n      index = this.keyMap.get(k)\n    } else {\n      this.valList[index] = p\n    }\n    return p\n  }\n\n  isBackgroundFetch(p) {\n    return (\n      p &&\n      typeof p === 'object' &&\n      typeof p.then === 'function' &&\n      Object.prototype.hasOwnProperty.call(\n        p,\n        '__staleWhileFetching'\n      ) &&\n      Object.prototype.hasOwnProperty.call(p, '__returned') &&\n      (p.__returned === p || p.__returned === null)\n    )\n  }\n\n  // this takes the union of get() and set() opts, because it does both\n  async fetch(\n    k,\n    {\n      // get options\n      allowStale = this.allowStale,\n      updateAgeOnGet = this.updateAgeOnGet,\n      noDeleteOnStaleGet = this.noDeleteOnStaleGet,\n      // set options\n      ttl = this.ttl,\n      noDisposeOnSet = this.noDisposeOnSet,\n      size = 0,\n      sizeCalculation = this.sizeCalculation,\n      noUpdateTTL = this.noUpdateTTL,\n      // fetch exclusive options\n      noDeleteOnFetchRejection = this.noDeleteOnFetchRejection,\n      fetchContext = this.fetchContext,\n      forceRefresh = false,\n    } = {}\n  ) {\n    if (!this.fetchMethod) {\n      return this.get(k, {\n        allowStale,\n        updateAgeOnGet,\n        noDeleteOnStaleGet,\n      })\n    }\n\n    const options = {\n      allowStale,\n      updateAgeOnGet,\n      noDeleteOnStaleGet,\n      ttl,\n      noDisposeOnSet,\n      size,\n      sizeCalculation,\n      noUpdateTTL,\n      noDeleteOnFetchRejection,\n    }\n\n    let index = this.keyMap.get(k)\n    if (index === undefined) {\n      const p = this.backgroundFetch(k, index, options, fetchContext)\n      return (p.__returned = p)\n    } else {\n      // in cache, maybe already fetching\n      const v = this.valList[index]\n      if (this.isBackgroundFetch(v)) {\n        return allowStale && v.__staleWhileFetching !== undefined\n          ? v.__staleWhileFetching\n          : (v.__returned = v)\n      }\n\n      // if we force a refresh, that means do NOT serve the cached value,\n      // unless we are already in the process of refreshing the cache.\n      if (!forceRefresh && !this.isStale(index)) {\n        this.moveToTail(index)\n        if (updateAgeOnGet) {\n          this.updateItemAge(index)\n        }\n        return v\n      }\n\n      // ok, it is stale or a forced refresh, and not already fetching.\n      // refresh the cache.\n      const p = this.backgroundFetch(k, index, options, fetchContext)\n      return allowStale && p.__staleWhileFetching !== undefined\n        ? p.__staleWhileFetching\n        : (p.__returned = p)\n    }\n  }\n\n  get(\n    k,\n    {\n      allowStale = this.allowStale,\n      updateAgeOnGet = this.updateAgeOnGet,\n      noDeleteOnStaleGet = this.noDeleteOnStaleGet,\n    } = {}\n  ) {\n    const index = this.keyMap.get(k)\n    if (index !== undefined) {\n      const value = this.valList[index]\n      const fetching = this.isBackgroundFetch(value)\n      if (this.isStale(index)) {\n        // delete only if not an in-flight background fetch\n        if (!fetching) {\n          if (!noDeleteOnStaleGet) {\n            this.delete(k)\n          }\n          return allowStale ? value : undefined\n        } else {\n          return allowStale ? value.__staleWhileFetching : undefined\n        }\n      } else {\n        // if we're currently fetching it, we don't actually have it yet\n        // it's not stale, which means this isn't a staleWhileRefetching,\n        // so we just return undefined\n        if (fetching) {\n          return undefined\n        }\n        this.moveToTail(index)\n        if (updateAgeOnGet) {\n          this.updateItemAge(index)\n        }\n        return value\n      }\n    }\n  }\n\n  connect(p, n) {\n    this.prev[n] = p\n    this.next[p] = n\n  }\n\n  moveToTail(index) {\n    // if tail already, nothing to do\n    // if head, move head to next[index]\n    // else\n    //   move next[prev[index]] to next[index] (head has no prev)\n    //   move prev[next[index]] to prev[index]\n    // prev[index] = tail\n    // next[tail] = index\n    // tail = index\n    if (index !== this.tail) {\n      if (index === this.head) {\n        this.head = this.next[index]\n      } else {\n        this.connect(this.prev[index], this.next[index])\n      }\n      this.connect(this.tail, index)\n      this.tail = index\n    }\n  }\n\n  get del() {\n    deprecatedMethod('del', 'delete')\n    return this.delete\n  }\n\n  delete(k) {\n    let deleted = false\n    if (this.size !== 0) {\n      const index = this.keyMap.get(k)\n      if (index !== undefined) {\n        deleted = true\n        if (this.size === 1) {\n          this.clear()\n        } else {\n          this.removeItemSize(index)\n          const v = this.valList[index]\n          if (this.isBackgroundFetch(v)) {\n            v.__abortController.abort()\n          } else {\n            this.dispose(v, k, 'delete')\n            if (this.disposeAfter) {\n              this.disposed.push([v, k, 'delete'])\n            }\n          }\n          this.keyMap.delete(k)\n          this.keyList[index] = null\n          this.valList[index] = null\n          if (index === this.tail) {\n            this.tail = this.prev[index]\n          } else if (index === this.head) {\n            this.head = this.next[index]\n          } else {\n            this.next[this.prev[index]] = this.next[index]\n            this.prev[this.next[index]] = this.prev[index]\n          }\n          this.size--\n          this.free.push(index)\n        }\n      }\n    }\n    if (this.disposed) {\n      while (this.disposed.length) {\n        this.disposeAfter(...this.disposed.shift())\n      }\n    }\n    return deleted\n  }\n\n  clear() {\n    for (const index of this.rindexes({ allowStale: true })) {\n      const v = this.valList[index]\n      if (this.isBackgroundFetch(v)) {\n        v.__abortController.abort()\n      } else {\n        const k = this.keyList[index]\n        this.dispose(v, k, 'delete')\n        if (this.disposeAfter) {\n          this.disposed.push([v, k, 'delete'])\n        }\n      }\n    }\n\n    this.keyMap.clear()\n    this.valList.fill(null)\n    this.keyList.fill(null)\n    if (this.ttls) {\n      this.ttls.fill(0)\n      this.starts.fill(0)\n    }\n    if (this.sizes) {\n      this.sizes.fill(0)\n    }\n    this.head = 0\n    this.tail = 0\n    this.initialFill = 1\n    this.free.length = 0\n    this.calculatedSize = 0\n    this.size = 0\n    if (this.disposed) {\n      while (this.disposed.length) {\n        this.disposeAfter(...this.disposed.shift())\n      }\n    }\n  }\n\n  get reset() {\n    deprecatedMethod('reset', 'clear')\n    return this.clear\n  }\n\n  get length() {\n    deprecatedProperty('length', 'size')\n    return this.size\n  }\n\n  static get AbortController() {\n    return AC\n  }\n  static get AbortSignal() {\n    return AS\n  }\n}\n\nmodule.exports = LRUCache\n","/* global define */\n\n(function (root, pluralize) {\n  /* istanbul ignore else */\n  if (typeof require === 'function' && typeof exports === 'object' && typeof module === 'object') {\n    // Node.\n    module.exports = pluralize();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD, registers as an anonymous module.\n    define(function () {\n      return pluralize();\n    });\n  } else {\n    // Browser global.\n    root.pluralize = pluralize();\n  }\n})(this, function () {\n  // Rule storage - pluralize and singularize need to be run sequentially,\n  // while other rules can be optimized using an object for instant lookups.\n  var pluralRules = [];\n  var singularRules = [];\n  var uncountables = {};\n  var irregularPlurals = {};\n  var irregularSingles = {};\n\n  /**\n   * Sanitize a pluralization rule to a usable regular expression.\n   *\n   * @param  {(RegExp|string)} rule\n   * @return {RegExp}\n   */\n  function sanitizeRule (rule) {\n    if (typeof rule === 'string') {\n      return new RegExp('^' + rule + '$', 'i');\n    }\n\n    return rule;\n  }\n\n  /**\n   * Pass in a word token to produce a function that can replicate the case on\n   * another word.\n   *\n   * @param  {string}   word\n   * @param  {string}   token\n   * @return {Function}\n   */\n  function restoreCase (word, token) {\n    // Tokens are an exact match.\n    if (word === token) return token;\n\n    // Lower cased words. E.g. \"hello\".\n    if (word === word.toLowerCase()) return token.toLowerCase();\n\n    // Upper cased words. E.g. \"WHISKY\".\n    if (word === word.toUpperCase()) return token.toUpperCase();\n\n    // Title cased words. E.g. \"Title\".\n    if (word[0] === word[0].toUpperCase()) {\n      return token.charAt(0).toUpperCase() + token.substr(1).toLowerCase();\n    }\n\n    // Lower cased words. E.g. \"test\".\n    return token.toLowerCase();\n  }\n\n  /**\n   * Interpolate a regexp string.\n   *\n   * @param  {string} str\n   * @param  {Array}  args\n   * @return {string}\n   */\n  function interpolate (str, args) {\n    return str.replace(/\\$(\\d{1,2})/g, function (match, index) {\n      return args[index] || '';\n    });\n  }\n\n  /**\n   * Replace a word using a rule.\n   *\n   * @param  {string} word\n   * @param  {Array}  rule\n   * @return {string}\n   */\n  function replace (word, rule) {\n    return word.replace(rule[0], function (match, index) {\n      var result = interpolate(rule[1], arguments);\n\n      if (match === '') {\n        return restoreCase(word[index - 1], result);\n      }\n\n      return restoreCase(match, result);\n    });\n  }\n\n  /**\n   * Sanitize a word by passing in the word and sanitization rules.\n   *\n   * @param  {string}   token\n   * @param  {string}   word\n   * @param  {Array}    rules\n   * @return {string}\n   */\n  function sanitizeWord (token, word, rules) {\n    // Empty string or doesn't need fixing.\n    if (!token.length || uncountables.hasOwnProperty(token)) {\n      return word;\n    }\n\n    var len = rules.length;\n\n    // Iterate over the sanitization rules and use the first one to match.\n    while (len--) {\n      var rule = rules[len];\n\n      if (rule[0].test(word)) return replace(word, rule);\n    }\n\n    return word;\n  }\n\n  /**\n   * Replace a word with the updated word.\n   *\n   * @param  {Object}   replaceMap\n   * @param  {Object}   keepMap\n   * @param  {Array}    rules\n   * @return {Function}\n   */\n  function replaceWord (replaceMap, keepMap, rules) {\n    return function (word) {\n      // Get the correct token and case restoration functions.\n      var token = word.toLowerCase();\n\n      // Check against the keep object map.\n      if (keepMap.hasOwnProperty(token)) {\n        return restoreCase(word, token);\n      }\n\n      // Check against the replacement map for a direct word replacement.\n      if (replaceMap.hasOwnProperty(token)) {\n        return restoreCase(word, replaceMap[token]);\n      }\n\n      // Run all the rules against the word.\n      return sanitizeWord(token, word, rules);\n    };\n  }\n\n  /**\n   * Check if a word is part of the map.\n   */\n  function checkWord (replaceMap, keepMap, rules, bool) {\n    return function (word) {\n      var token = word.toLowerCase();\n\n      if (keepMap.hasOwnProperty(token)) return true;\n      if (replaceMap.hasOwnProperty(token)) return false;\n\n      return sanitizeWord(token, token, rules) === token;\n    };\n  }\n\n  /**\n   * Pluralize or singularize a word based on the passed in count.\n   *\n   * @param  {string}  word      The word to pluralize\n   * @param  {number}  count     How many of the word exist\n   * @param  {boolean} inclusive Whether to prefix with the number (e.g. 3 ducks)\n   * @return {string}\n   */\n  function pluralize (word, count, inclusive) {\n    var pluralized = count === 1\n      ? pluralize.singular(word) : pluralize.plural(word);\n\n    return (inclusive ? count + ' ' : '') + pluralized;\n  }\n\n  /**\n   * Pluralize a word.\n   *\n   * @type {Function}\n   */\n  pluralize.plural = replaceWord(\n    irregularSingles, irregularPlurals, pluralRules\n  );\n\n  /**\n   * Check if a word is plural.\n   *\n   * @type {Function}\n   */\n  pluralize.isPlural = checkWord(\n    irregularSingles, irregularPlurals, pluralRules\n  );\n\n  /**\n   * Singularize a word.\n   *\n   * @type {Function}\n   */\n  pluralize.singular = replaceWord(\n    irregularPlurals, irregularSingles, singularRules\n  );\n\n  /**\n   * Check if a word is singular.\n   *\n   * @type {Function}\n   */\n  pluralize.isSingular = checkWord(\n    irregularPlurals, irregularSingles, singularRules\n  );\n\n  /**\n   * Add a pluralization rule to the collection.\n   *\n   * @param {(string|RegExp)} rule\n   * @param {string}          replacement\n   */\n  pluralize.addPluralRule = function (rule, replacement) {\n    pluralRules.push([sanitizeRule(rule), replacement]);\n  };\n\n  /**\n   * Add a singularization rule to the collection.\n   *\n   * @param {(string|RegExp)} rule\n   * @param {string}          replacement\n   */\n  pluralize.addSingularRule = function (rule, replacement) {\n    singularRules.push([sanitizeRule(rule), replacement]);\n  };\n\n  /**\n   * Add an uncountable word rule.\n   *\n   * @param {(string|RegExp)} word\n   */\n  pluralize.addUncountableRule = function (word) {\n    if (typeof word === 'string') {\n      uncountables[word.toLowerCase()] = true;\n      return;\n    }\n\n    // Set singular and plural references for the word.\n    pluralize.addPluralRule(word, '$0');\n    pluralize.addSingularRule(word, '$0');\n  };\n\n  /**\n   * Add an irregular word definition.\n   *\n   * @param {string} single\n   * @param {string} plural\n   */\n  pluralize.addIrregularRule = function (single, plural) {\n    plural = plural.toLowerCase();\n    single = single.toLowerCase();\n\n    irregularSingles[single] = plural;\n    irregularPlurals[plural] = single;\n  };\n\n  /**\n   * Irregular rules.\n   */\n  [\n    // Pronouns.\n    ['I', 'we'],\n    ['me', 'us'],\n    ['he', 'they'],\n    ['she', 'they'],\n    ['them', 'them'],\n    ['myself', 'ourselves'],\n    ['yourself', 'yourselves'],\n    ['itself', 'themselves'],\n    ['herself', 'themselves'],\n    ['himself', 'themselves'],\n    ['themself', 'themselves'],\n    ['is', 'are'],\n    ['was', 'were'],\n    ['has', 'have'],\n    ['this', 'these'],\n    ['that', 'those'],\n    // Words ending in with a consonant and `o`.\n    ['echo', 'echoes'],\n    ['dingo', 'dingoes'],\n    ['volcano', 'volcanoes'],\n    ['tornado', 'tornadoes'],\n    ['torpedo', 'torpedoes'],\n    // Ends with `us`.\n    ['genus', 'genera'],\n    ['viscus', 'viscera'],\n    // Ends with `ma`.\n    ['stigma', 'stigmata'],\n    ['stoma', 'stomata'],\n    ['dogma', 'dogmata'],\n    ['lemma', 'lemmata'],\n    ['schema', 'schemata'],\n    ['anathema', 'anathemata'],\n    // Other irregular rules.\n    ['ox', 'oxen'],\n    ['axe', 'axes'],\n    ['die', 'dice'],\n    ['yes', 'yeses'],\n    ['foot', 'feet'],\n    ['eave', 'eaves'],\n    ['goose', 'geese'],\n    ['tooth', 'teeth'],\n    ['quiz', 'quizzes'],\n    ['human', 'humans'],\n    ['proof', 'proofs'],\n    ['carve', 'carves'],\n    ['valve', 'valves'],\n    ['looey', 'looies'],\n    ['thief', 'thieves'],\n    ['groove', 'grooves'],\n    ['pickaxe', 'pickaxes'],\n    ['passerby', 'passersby']\n  ].forEach(function (rule) {\n    return pluralize.addIrregularRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Pluralization rules.\n   */\n  [\n    [/s?$/i, 's'],\n    [/[^\\u0000-\\u007F]$/i, '$0'],\n    [/([^aeiou]ese)$/i, '$1'],\n    [/(ax|test)is$/i, '$1es'],\n    [/(alias|[^aou]us|t[lm]as|gas|ris)$/i, '$1es'],\n    [/(e[mn]u)s?$/i, '$1s'],\n    [/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i, '$1'],\n    [/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i, '$1i'],\n    [/(alumn|alg|vertebr)(?:a|ae)$/i, '$1ae'],\n    [/(seraph|cherub)(?:im)?$/i, '$1im'],\n    [/(her|at|gr)o$/i, '$1oes'],\n    [/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i, '$1a'],\n    [/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i, '$1a'],\n    [/sis$/i, 'ses'],\n    [/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i, '$1$2ves'],\n    [/([^aeiouy]|qu)y$/i, '$1ies'],\n    [/([^ch][ieo][ln])ey$/i, '$1ies'],\n    [/(x|ch|ss|sh|zz)$/i, '$1es'],\n    [/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i, '$1ices'],\n    [/\\b((?:tit)?m|l)(?:ice|ouse)$/i, '$1ice'],\n    [/(pe)(?:rson|ople)$/i, '$1ople'],\n    [/(child)(?:ren)?$/i, '$1ren'],\n    [/eaux$/i, '$0'],\n    [/m[ae]n$/i, 'men'],\n    ['thou', 'you']\n  ].forEach(function (rule) {\n    return pluralize.addPluralRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Singularization rules.\n   */\n  [\n    [/s$/i, ''],\n    [/(ss)$/i, '$1'],\n    [/(wi|kni|(?:after|half|high|low|mid|non|night|[^\\w]|^)li)ves$/i, '$1fe'],\n    [/(ar|(?:wo|[ae])l|[eo][ao])ves$/i, '$1f'],\n    [/ies$/i, 'y'],\n    [/\\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i, '$1ie'],\n    [/\\b(mon|smil)ies$/i, '$1ey'],\n    [/\\b((?:tit)?m|l)ice$/i, '$1ouse'],\n    [/(seraph|cherub)im$/i, '$1'],\n    [/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i, '$1'],\n    [/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i, '$1sis'],\n    [/(movie|twelve|abuse|e[mn]u)s$/i, '$1'],\n    [/(test)(?:is|es)$/i, '$1is'],\n    [/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i, '$1us'],\n    [/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i, '$1um'],\n    [/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i, '$1on'],\n    [/(alumn|alg|vertebr)ae$/i, '$1a'],\n    [/(cod|mur|sil|vert|ind)ices$/i, '$1ex'],\n    [/(matr|append)ices$/i, '$1ix'],\n    [/(pe)(rson|ople)$/i, '$1rson'],\n    [/(child)ren$/i, '$1'],\n    [/(eau)x?$/i, '$1'],\n    [/men$/i, 'man']\n  ].forEach(function (rule) {\n    return pluralize.addSingularRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Uncountable rules.\n   */\n  [\n    // Singular words with no plurals.\n    'adulthood',\n    'advice',\n    'agenda',\n    'aid',\n    'aircraft',\n    'alcohol',\n    'ammo',\n    'analytics',\n    'anime',\n    'athletics',\n    'audio',\n    'bison',\n    'blood',\n    'bream',\n    'buffalo',\n    'butter',\n    'carp',\n    'cash',\n    'chassis',\n    'chess',\n    'clothing',\n    'cod',\n    'commerce',\n    'cooperation',\n    'corps',\n    'debris',\n    'diabetes',\n    'digestion',\n    'elk',\n    'energy',\n    'equipment',\n    'excretion',\n    'expertise',\n    'firmware',\n    'flounder',\n    'fun',\n    'gallows',\n    'garbage',\n    'graffiti',\n    'hardware',\n    'headquarters',\n    'health',\n    'herpes',\n    'highjinks',\n    'homework',\n    'housework',\n    'information',\n    'jeans',\n    'justice',\n    'kudos',\n    'labour',\n    'literature',\n    'machinery',\n    'mackerel',\n    'mail',\n    'media',\n    'mews',\n    'moose',\n    'music',\n    'mud',\n    'manga',\n    'news',\n    'only',\n    'personnel',\n    'pike',\n    'plankton',\n    'pliers',\n    'police',\n    'pollution',\n    'premises',\n    'rain',\n    'research',\n    'rice',\n    'salmon',\n    'scissors',\n    'series',\n    'sewage',\n    'shambles',\n    'shrimp',\n    'software',\n    'species',\n    'staff',\n    'swine',\n    'tennis',\n    'traffic',\n    'transportation',\n    'trout',\n    'tuna',\n    'wealth',\n    'welfare',\n    'whiting',\n    'wildebeest',\n    'wildlife',\n    'you',\n    /pok[eé]mon$/i,\n    // Regexes.\n    /[^aeiou]ese$/i, // \"chinese\", \"japanese\"\n    /deer$/i, // \"deer\", \"reindeer\"\n    /fish$/i, // \"fish\", \"blowfish\", \"angelfish\"\n    /measles$/i,\n    /o[iu]s$/i, // \"carnivorous\"\n    /pox$/i, // \"chickpox\", \"smallpox\"\n    /sheep$/i\n  ].forEach(pluralize.addUncountableRule);\n\n  return pluralize;\n});\n","/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\n\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView;\n\n// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.1\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n    var it;\n    if (hasMap && (a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      return true;\n    }\n\n    if (hasSet && (a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      return true;\n    }\n    // END: Modifications\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    // END: fast-deep-equal\n\n    // START: react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element) return false;\n\n    // custom handling for React/Preact\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n\n        continue;\n      }\n\n      // all other properties should be traversed as usual\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    // END: react-fast-compare\n\n    // START: fast-deep-equal\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (((error.message || '').match(/stack|recursion/i))) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _Highlighter = __webpack_require__(2);\n\t\n\tvar _Highlighter2 = _interopRequireDefault(_Highlighter);\n\n\texports['default'] = _Highlighter2['default'];\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports['default'] = Highlighter;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\t\n\tvar _highlightWordsCore = __webpack_require__(3);\n\t\n\tvar _propTypes = __webpack_require__(4);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _react = __webpack_require__(14);\n\t\n\tvar _memoizeOne = __webpack_require__(15);\n\t\n\tvar _memoizeOne2 = _interopRequireDefault(_memoizeOne);\n\t\n\tHighlighter.propTypes = {\n\t  activeClassName: _propTypes2['default'].string,\n\t  activeIndex: _propTypes2['default'].number,\n\t  activeStyle: _propTypes2['default'].object,\n\t  autoEscape: _propTypes2['default'].bool,\n\t  className: _propTypes2['default'].string,\n\t  findChunks: _propTypes2['default'].func,\n\t  highlightClassName: _propTypes2['default'].oneOfType([_propTypes2['default'].object, _propTypes2['default'].string]),\n\t  highlightStyle: _propTypes2['default'].object,\n\t  highlightTag: _propTypes2['default'].oneOfType([_propTypes2['default'].node, _propTypes2['default'].func, _propTypes2['default'].string]),\n\t  sanitize: _propTypes2['default'].func,\n\t  searchWords: _propTypes2['default'].arrayOf(_propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].instanceOf(RegExp)])).isRequired,\n\t  textToHighlight: _propTypes2['default'].string.isRequired,\n\t  unhighlightClassName: _propTypes2['default'].string,\n\t  unhighlightStyle: _propTypes2['default'].object\n\t};\n\t\n\t/**\r\n\t * Highlights all occurrences of search terms (searchText) within a string (textToHighlight).\r\n\t * This function returns an array of strings and <span>s (wrapping highlighted words).\r\n\t */\n\t\n\tfunction Highlighter(_ref) {\n\t  var _ref$activeClassName = _ref.activeClassName;\n\t  var activeClassName = _ref$activeClassName === undefined ? '' : _ref$activeClassName;\n\t  var _ref$activeIndex = _ref.activeIndex;\n\t  var activeIndex = _ref$activeIndex === undefined ? -1 : _ref$activeIndex;\n\t  var activeStyle = _ref.activeStyle;\n\t  var autoEscape = _ref.autoEscape;\n\t  var _ref$caseSensitive = _ref.caseSensitive;\n\t  var caseSensitive = _ref$caseSensitive === undefined ? false : _ref$caseSensitive;\n\t  var className = _ref.className;\n\t  var findChunks = _ref.findChunks;\n\t  var _ref$highlightClassName = _ref.highlightClassName;\n\t  var highlightClassName = _ref$highlightClassName === undefined ? '' : _ref$highlightClassName;\n\t  var _ref$highlightStyle = _ref.highlightStyle;\n\t  var highlightStyle = _ref$highlightStyle === undefined ? {} : _ref$highlightStyle;\n\t  var _ref$highlightTag = _ref.highlightTag;\n\t  var highlightTag = _ref$highlightTag === undefined ? 'mark' : _ref$highlightTag;\n\t  var sanitize = _ref.sanitize;\n\t  var searchWords = _ref.searchWords;\n\t  var textToHighlight = _ref.textToHighlight;\n\t  var _ref$unhighlightClassName = _ref.unhighlightClassName;\n\t  var unhighlightClassName = _ref$unhighlightClassName === undefined ? '' : _ref$unhighlightClassName;\n\t  var unhighlightStyle = _ref.unhighlightStyle;\n\t\n\t  var rest = _objectWithoutProperties(_ref, ['activeClassName', 'activeIndex', 'activeStyle', 'autoEscape', 'caseSensitive', 'className', 'findChunks', 'highlightClassName', 'highlightStyle', 'highlightTag', 'sanitize', 'searchWords', 'textToHighlight', 'unhighlightClassName', 'unhighlightStyle']);\n\t\n\t  var chunks = (0, _highlightWordsCore.findAll)({\n\t    autoEscape: autoEscape,\n\t    caseSensitive: caseSensitive,\n\t    findChunks: findChunks,\n\t    sanitize: sanitize,\n\t    searchWords: searchWords,\n\t    textToHighlight: textToHighlight\n\t  });\n\t  var HighlightTag = highlightTag;\n\t  var highlightIndex = -1;\n\t  var highlightClassNames = '';\n\t  var highlightStyles = undefined;\n\t\n\t  var lowercaseProps = function lowercaseProps(object) {\n\t    var mapped = {};\n\t    for (var key in object) {\n\t      mapped[key.toLowerCase()] = object[key];\n\t    }\n\t    return mapped;\n\t  };\n\t  var memoizedLowercaseProps = (0, _memoizeOne2['default'])(lowercaseProps);\n\t\n\t  return (0, _react.createElement)('span', _extends({\n\t    className: className\n\t  }, rest, {\n\t    children: chunks.map(function (chunk, index) {\n\t      var text = textToHighlight.substr(chunk.start, chunk.end - chunk.start);\n\t\n\t      if (chunk.highlight) {\n\t        highlightIndex++;\n\t\n\t        var highlightClass = undefined;\n\t        if (typeof highlightClassName === 'object') {\n\t          if (!caseSensitive) {\n\t            highlightClassName = memoizedLowercaseProps(highlightClassName);\n\t            highlightClass = highlightClassName[text.toLowerCase()];\n\t          } else {\n\t            highlightClass = highlightClassName[text];\n\t          }\n\t        } else {\n\t          highlightClass = highlightClassName;\n\t        }\n\t\n\t        var isActive = highlightIndex === +activeIndex;\n\t\n\t        highlightClassNames = highlightClass + ' ' + (isActive ? activeClassName : '');\n\t        highlightStyles = isActive === true && activeStyle != null ? Object.assign({}, highlightStyle, activeStyle) : highlightStyle;\n\t\n\t        var props = {\n\t          children: text,\n\t          className: highlightClassNames,\n\t          key: index,\n\t          style: highlightStyles\n\t        };\n\t\n\t        // Don't attach arbitrary props to DOM elements; this triggers React DEV warnings (https://fb.me/react-unknown-prop)\n\t        // Only pass through the highlightIndex attribute for custom components.\n\t        if (typeof HighlightTag !== 'string') {\n\t          props.highlightIndex = highlightIndex;\n\t        }\n\t\n\t        return (0, _react.createElement)(HighlightTag, props);\n\t      } else {\n\t        return (0, _react.createElement)('span', {\n\t          children: text,\n\t          className: unhighlightClassName,\n\t          key: index,\n\t          style: unhighlightStyle\n\t        });\n\t      }\n\t    })\n\t  }));\n\t}\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports =\n\t/******/ (function(modules) { // webpackBootstrap\n\t/******/ \t// The module cache\n\t/******/ \tvar installedModules = {};\n\t/******/\n\t/******/ \t// The require function\n\t/******/ \tfunction __webpack_require__(moduleId) {\n\t/******/\n\t/******/ \t\t// Check if module is in cache\n\t/******/ \t\tif(installedModules[moduleId])\n\t/******/ \t\t\treturn installedModules[moduleId].exports;\n\t/******/\n\t/******/ \t\t// Create a new module (and put it into the cache)\n\t/******/ \t\tvar module = installedModules[moduleId] = {\n\t/******/ \t\t\texports: {},\n\t/******/ \t\t\tid: moduleId,\n\t/******/ \t\t\tloaded: false\n\t/******/ \t\t};\n\t/******/\n\t/******/ \t\t// Execute the module function\n\t/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\t/******/\n\t/******/ \t\t// Flag the module as loaded\n\t/******/ \t\tmodule.loaded = true;\n\t/******/\n\t/******/ \t\t// Return the exports of the module\n\t/******/ \t\treturn module.exports;\n\t/******/ \t}\n\t/******/\n\t/******/\n\t/******/ \t// expose the modules object (__webpack_modules__)\n\t/******/ \t__webpack_require__.m = modules;\n\t/******/\n\t/******/ \t// expose the module cache\n\t/******/ \t__webpack_require__.c = installedModules;\n\t/******/\n\t/******/ \t// __webpack_public_path__\n\t/******/ \t__webpack_require__.p = \"\";\n\t/******/\n\t/******/ \t// Load entry module and return exports\n\t/******/ \treturn __webpack_require__(0);\n\t/******/ })\n\t/************************************************************************/\n\t/******/ ([\n\t/* 0 */\n\t/***/ (function(module, exports, __webpack_require__) {\n\t\n\t\tmodule.exports = __webpack_require__(1);\n\t\n\t\n\t/***/ }),\n\t/* 1 */\n\t/***/ (function(module, exports, __webpack_require__) {\n\t\n\t\t'use strict';\n\t\t\n\t\tObject.defineProperty(exports, \"__esModule\", {\n\t\t  value: true\n\t\t});\n\t\t\n\t\tvar _utils = __webpack_require__(2);\n\t\t\n\t\tObject.defineProperty(exports, 'combineChunks', {\n\t\t  enumerable: true,\n\t\t  get: function get() {\n\t\t    return _utils.combineChunks;\n\t\t  }\n\t\t});\n\t\tObject.defineProperty(exports, 'fillInChunks', {\n\t\t  enumerable: true,\n\t\t  get: function get() {\n\t\t    return _utils.fillInChunks;\n\t\t  }\n\t\t});\n\t\tObject.defineProperty(exports, 'findAll', {\n\t\t  enumerable: true,\n\t\t  get: function get() {\n\t\t    return _utils.findAll;\n\t\t  }\n\t\t});\n\t\tObject.defineProperty(exports, 'findChunks', {\n\t\t  enumerable: true,\n\t\t  get: function get() {\n\t\t    return _utils.findChunks;\n\t\t  }\n\t\t});\n\t\n\t/***/ }),\n\t/* 2 */\n\t/***/ (function(module, exports) {\n\t\n\t\t'use strict';\n\t\t\n\t\tObject.defineProperty(exports, \"__esModule\", {\n\t\t  value: true\n\t\t});\n\t\t/**\n\t\t * Creates an array of chunk objects representing both higlightable and non highlightable pieces of text that match each search word.\n\t\t * @return Array of \"chunks\" (where a Chunk is { start:number, end:number, highlight:boolean })\n\t\t */\n\t\tvar findAll = exports.findAll = function findAll(_ref) {\n\t\t  var autoEscape = _ref.autoEscape,\n\t\t      _ref$caseSensitive = _ref.caseSensitive,\n\t\t      caseSensitive = _ref$caseSensitive === undefined ? false : _ref$caseSensitive,\n\t\t      _ref$findChunks = _ref.findChunks,\n\t\t      findChunks = _ref$findChunks === undefined ? defaultFindChunks : _ref$findChunks,\n\t\t      sanitize = _ref.sanitize,\n\t\t      searchWords = _ref.searchWords,\n\t\t      textToHighlight = _ref.textToHighlight;\n\t\t  return fillInChunks({\n\t\t    chunksToHighlight: combineChunks({\n\t\t      chunks: findChunks({\n\t\t        autoEscape: autoEscape,\n\t\t        caseSensitive: caseSensitive,\n\t\t        sanitize: sanitize,\n\t\t        searchWords: searchWords,\n\t\t        textToHighlight: textToHighlight\n\t\t      })\n\t\t    }),\n\t\t    totalLength: textToHighlight ? textToHighlight.length : 0\n\t\t  });\n\t\t};\n\t\t\n\t\t/**\n\t\t * Takes an array of {start:number, end:number} objects and combines chunks that overlap into single chunks.\n\t\t * @return {start:number, end:number}[]\n\t\t */\n\t\tvar combineChunks = exports.combineChunks = function combineChunks(_ref2) {\n\t\t  var chunks = _ref2.chunks;\n\t\t\n\t\t  chunks = chunks.sort(function (first, second) {\n\t\t    return first.start - second.start;\n\t\t  }).reduce(function (processedChunks, nextChunk) {\n\t\t    // First chunk just goes straight in the array...\n\t\t    if (processedChunks.length === 0) {\n\t\t      return [nextChunk];\n\t\t    } else {\n\t\t      // ... subsequent chunks get checked to see if they overlap...\n\t\t      var prevChunk = processedChunks.pop();\n\t\t      if (nextChunk.start <= prevChunk.end) {\n\t\t        // It may be the case that prevChunk completely surrounds nextChunk, so take the\n\t\t        // largest of the end indeces.\n\t\t        var endIndex = Math.max(prevChunk.end, nextChunk.end);\n\t\t        processedChunks.push({ start: prevChunk.start, end: endIndex });\n\t\t      } else {\n\t\t        processedChunks.push(prevChunk, nextChunk);\n\t\t      }\n\t\t      return processedChunks;\n\t\t    }\n\t\t  }, []);\n\t\t\n\t\t  return chunks;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Examine text for any matches.\n\t\t * If we find matches, add them to the returned array as a \"chunk\" object ({start:number, end:number}).\n\t\t * @return {start:number, end:number}[]\n\t\t */\n\t\tvar defaultFindChunks = function defaultFindChunks(_ref3) {\n\t\t  var autoEscape = _ref3.autoEscape,\n\t\t      caseSensitive = _ref3.caseSensitive,\n\t\t      _ref3$sanitize = _ref3.sanitize,\n\t\t      sanitize = _ref3$sanitize === undefined ? identity : _ref3$sanitize,\n\t\t      searchWords = _ref3.searchWords,\n\t\t      textToHighlight = _ref3.textToHighlight;\n\t\t\n\t\t  textToHighlight = sanitize(textToHighlight);\n\t\t\n\t\t  return searchWords.filter(function (searchWord) {\n\t\t    return searchWord;\n\t\t  }) // Remove empty words\n\t\t  .reduce(function (chunks, searchWord) {\n\t\t    searchWord = sanitize(searchWord);\n\t\t\n\t\t    if (autoEscape) {\n\t\t      searchWord = escapeRegExpFn(searchWord);\n\t\t    }\n\t\t\n\t\t    var regex = new RegExp(searchWord, caseSensitive ? 'g' : 'gi');\n\t\t\n\t\t    var match = void 0;\n\t\t    while (match = regex.exec(textToHighlight)) {\n\t\t      var start = match.index;\n\t\t      var end = regex.lastIndex;\n\t\t      // We do not return zero-length matches\n\t\t      if (end > start) {\n\t\t        chunks.push({ start: start, end: end });\n\t\t      }\n\t\t\n\t\t      // Prevent browsers like Firefox from getting stuck in an infinite loop\n\t\t      // See http://www.regexguru.com/2008/04/watch-out-for-zero-length-matches/\n\t\t      if (match.index == regex.lastIndex) {\n\t\t        regex.lastIndex++;\n\t\t      }\n\t\t    }\n\t\t\n\t\t    return chunks;\n\t\t  }, []);\n\t\t};\n\t\t// Allow the findChunks to be overridden in findAll,\n\t\t// but for backwards compatibility we export as the old name\n\t\texports.findChunks = defaultFindChunks;\n\t\t\n\t\t/**\n\t\t * Given a set of chunks to highlight, create an additional set of chunks\n\t\t * to represent the bits of text between the highlighted text.\n\t\t * @param chunksToHighlight {start:number, end:number}[]\n\t\t * @param totalLength number\n\t\t * @return {start:number, end:number, highlight:boolean}[]\n\t\t */\n\t\t\n\t\tvar fillInChunks = exports.fillInChunks = function fillInChunks(_ref4) {\n\t\t  var chunksToHighlight = _ref4.chunksToHighlight,\n\t\t      totalLength = _ref4.totalLength;\n\t\t\n\t\t  var allChunks = [];\n\t\t  var append = function append(start, end, highlight) {\n\t\t    if (end - start > 0) {\n\t\t      allChunks.push({\n\t\t        start: start,\n\t\t        end: end,\n\t\t        highlight: highlight\n\t\t      });\n\t\t    }\n\t\t  };\n\t\t\n\t\t  if (chunksToHighlight.length === 0) {\n\t\t    append(0, totalLength, false);\n\t\t  } else {\n\t\t    var lastIndex = 0;\n\t\t    chunksToHighlight.forEach(function (chunk) {\n\t\t      append(lastIndex, chunk.start, false);\n\t\t      append(chunk.start, chunk.end, true);\n\t\t      lastIndex = chunk.end;\n\t\t    });\n\t\t    append(lastIndex, totalLength, false);\n\t\t  }\n\t\t  return allChunks;\n\t\t};\n\t\t\n\t\tfunction identity(value) {\n\t\t  return value;\n\t\t}\n\t\t\n\t\tfunction escapeRegExpFn(str) {\n\t\t  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n\t\t}\n\t\n\t/***/ })\n\t/******/ ]);\n\t//# sourceMappingURL=index.js.map\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\tif (process.env.NODE_ENV !== 'production') {\n\t  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n\t    Symbol.for &&\n\t    Symbol.for('react.element')) ||\n\t    0xeac7;\n\t\n\t  var isValidElement = function(object) {\n\t    return typeof object === 'object' &&\n\t      object !== null &&\n\t      object.$$typeof === REACT_ELEMENT_TYPE;\n\t  };\n\t\n\t  // By explicitly using `prop-types` you are opting into new development behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  var throwOnDirectAccess = true;\n\t  module.exports = __webpack_require__(6)(isValidElement, throwOnDirectAccess);\n\t} else {\n\t  // By explicitly using `prop-types` you are opting into new production behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  module.exports = __webpack_require__(13)();\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(5)))\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\tprocess.prependListener = noop;\n\tprocess.prependOnceListener = noop;\n\t\n\tprocess.listeners = function (name) { return [] }\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tvar emptyFunction = __webpack_require__(7);\n\tvar invariant = __webpack_require__(8);\n\tvar warning = __webpack_require__(9);\n\tvar assign = __webpack_require__(10);\n\t\n\tvar ReactPropTypesSecret = __webpack_require__(11);\n\tvar checkPropTypes = __webpack_require__(12);\n\t\n\tmodule.exports = function(isValidElement, throwOnDirectAccess) {\n\t  /* global Symbol */\n\t  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n\t  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\t\n\t  /**\n\t   * Returns the iterator method function contained on the iterable object.\n\t   *\n\t   * Be sure to invoke the function with the iterable as context:\n\t   *\n\t   *     var iteratorFn = getIteratorFn(myIterable);\n\t   *     if (iteratorFn) {\n\t   *       var iterator = iteratorFn.call(myIterable);\n\t   *       ...\n\t   *     }\n\t   *\n\t   * @param {?object} maybeIterable\n\t   * @return {?function}\n\t   */\n\t  function getIteratorFn(maybeIterable) {\n\t    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n\t    if (typeof iteratorFn === 'function') {\n\t      return iteratorFn;\n\t    }\n\t  }\n\t\n\t  /**\n\t   * Collection of methods that allow declaration and validation of props that are\n\t   * supplied to React components. Example usage:\n\t   *\n\t   *   var Props = require('ReactPropTypes');\n\t   *   var MyArticle = React.createClass({\n\t   *     propTypes: {\n\t   *       // An optional string prop named \"description\".\n\t   *       description: Props.string,\n\t   *\n\t   *       // A required enum prop named \"category\".\n\t   *       category: Props.oneOf(['News','Photos']).isRequired,\n\t   *\n\t   *       // A prop named \"dialog\" that requires an instance of Dialog.\n\t   *       dialog: Props.instanceOf(Dialog).isRequired\n\t   *     },\n\t   *     render: function() { ... }\n\t   *   });\n\t   *\n\t   * A more formal specification of how these methods are used:\n\t   *\n\t   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n\t   *   decl := ReactPropTypes.{type}(.isRequired)?\n\t   *\n\t   * Each and every declaration produces a function with the same signature. This\n\t   * allows the creation of custom validation functions. For example:\n\t   *\n\t   *  var MyLink = React.createClass({\n\t   *    propTypes: {\n\t   *      // An optional string or URI prop named \"href\".\n\t   *      href: function(props, propName, componentName) {\n\t   *        var propValue = props[propName];\n\t   *        if (propValue != null && typeof propValue !== 'string' &&\n\t   *            !(propValue instanceof URI)) {\n\t   *          return new Error(\n\t   *            'Expected a string or an URI for ' + propName + ' in ' +\n\t   *            componentName\n\t   *          );\n\t   *        }\n\t   *      }\n\t   *    },\n\t   *    render: function() {...}\n\t   *  });\n\t   *\n\t   * @internal\n\t   */\n\t\n\t  var ANONYMOUS = '<<anonymous>>';\n\t\n\t  // Important!\n\t  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n\t  var ReactPropTypes = {\n\t    array: createPrimitiveTypeChecker('array'),\n\t    bool: createPrimitiveTypeChecker('boolean'),\n\t    func: createPrimitiveTypeChecker('function'),\n\t    number: createPrimitiveTypeChecker('number'),\n\t    object: createPrimitiveTypeChecker('object'),\n\t    string: createPrimitiveTypeChecker('string'),\n\t    symbol: createPrimitiveTypeChecker('symbol'),\n\t\n\t    any: createAnyTypeChecker(),\n\t    arrayOf: createArrayOfTypeChecker,\n\t    element: createElementTypeChecker(),\n\t    instanceOf: createInstanceTypeChecker,\n\t    node: createNodeChecker(),\n\t    objectOf: createObjectOfTypeChecker,\n\t    oneOf: createEnumTypeChecker,\n\t    oneOfType: createUnionTypeChecker,\n\t    shape: createShapeTypeChecker,\n\t    exact: createStrictShapeTypeChecker,\n\t  };\n\t\n\t  /**\n\t   * inlined Object.is polyfill to avoid requiring consumers ship their own\n\t   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n\t   */\n\t  /*eslint-disable no-self-compare*/\n\t  function is(x, y) {\n\t    // SameValue algorithm\n\t    if (x === y) {\n\t      // Steps 1-5, 7-10\n\t      // Steps 6.b-6.e: +0 != -0\n\t      return x !== 0 || 1 / x === 1 / y;\n\t    } else {\n\t      // Step 6.a: NaN == NaN\n\t      return x !== x && y !== y;\n\t    }\n\t  }\n\t  /*eslint-enable no-self-compare*/\n\t\n\t  /**\n\t   * We use an Error-like object for backward compatibility as people may call\n\t   * PropTypes directly and inspect their output. However, we don't use real\n\t   * Errors anymore. We don't inspect their stack anyway, and creating them\n\t   * is prohibitively expensive if they are created too often, such as what\n\t   * happens in oneOfType() for any type before the one that matched.\n\t   */\n\t  function PropTypeError(message) {\n\t    this.message = message;\n\t    this.stack = '';\n\t  }\n\t  // Make `instanceof Error` still work for returned errors.\n\t  PropTypeError.prototype = Error.prototype;\n\t\n\t  function createChainableTypeChecker(validate) {\n\t    if (process.env.NODE_ENV !== 'production') {\n\t      var manualPropTypeCallCache = {};\n\t      var manualPropTypeWarningCount = 0;\n\t    }\n\t    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n\t      componentName = componentName || ANONYMOUS;\n\t      propFullName = propFullName || propName;\n\t\n\t      if (secret !== ReactPropTypesSecret) {\n\t        if (throwOnDirectAccess) {\n\t          // New behavior only for users of `prop-types` package\n\t          invariant(\n\t            false,\n\t            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n\t            'Use `PropTypes.checkPropTypes()` to call them. ' +\n\t            'Read more at http://fb.me/use-check-prop-types'\n\t          );\n\t        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n\t          // Old behavior for people using React.PropTypes\n\t          var cacheKey = componentName + ':' + propName;\n\t          if (\n\t            !manualPropTypeCallCache[cacheKey] &&\n\t            // Avoid spamming the console because they are often not actionable except for lib authors\n\t            manualPropTypeWarningCount < 3\n\t          ) {\n\t            warning(\n\t              false,\n\t              'You are manually calling a React.PropTypes validation ' +\n\t              'function for the `%s` prop on `%s`. This is deprecated ' +\n\t              'and will throw in the standalone `prop-types` package. ' +\n\t              'You may be seeing this warning due to a third-party PropTypes ' +\n\t              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.',\n\t              propFullName,\n\t              componentName\n\t            );\n\t            manualPropTypeCallCache[cacheKey] = true;\n\t            manualPropTypeWarningCount++;\n\t          }\n\t        }\n\t      }\n\t      if (props[propName] == null) {\n\t        if (isRequired) {\n\t          if (props[propName] === null) {\n\t            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n\t          }\n\t          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n\t        }\n\t        return null;\n\t      } else {\n\t        return validate(props, propName, componentName, location, propFullName);\n\t      }\n\t    }\n\t\n\t    var chainedCheckType = checkType.bind(null, false);\n\t    chainedCheckType.isRequired = checkType.bind(null, true);\n\t\n\t    return chainedCheckType;\n\t  }\n\t\n\t  function createPrimitiveTypeChecker(expectedType) {\n\t    function validate(props, propName, componentName, location, propFullName, secret) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== expectedType) {\n\t        // `propValue` being instance of, say, date/regexp, pass the 'object'\n\t        // check, but we can offer a more precise error message here rather than\n\t        // 'of type `object`'.\n\t        var preciseType = getPreciseType(propValue);\n\t\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createAnyTypeChecker() {\n\t    return createChainableTypeChecker(emptyFunction.thatReturnsNull);\n\t  }\n\t\n\t  function createArrayOfTypeChecker(typeChecker) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (typeof typeChecker !== 'function') {\n\t        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n\t      }\n\t      var propValue = props[propName];\n\t      if (!Array.isArray(propValue)) {\n\t        var propType = getPropType(propValue);\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n\t      }\n\t      for (var i = 0; i < propValue.length; i++) {\n\t        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n\t        if (error instanceof Error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createElementTypeChecker() {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      if (!isValidElement(propValue)) {\n\t        var propType = getPropType(propValue);\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createInstanceTypeChecker(expectedClass) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (!(props[propName] instanceof expectedClass)) {\n\t        var expectedClassName = expectedClass.name || ANONYMOUS;\n\t        var actualClassName = getClassName(props[propName]);\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createEnumTypeChecker(expectedValues) {\n\t    if (!Array.isArray(expectedValues)) {\n\t      process.env.NODE_ENV !== 'production' ? warning(false, 'Invalid argument supplied to oneOf, expected an instance of array.') : void 0;\n\t      return emptyFunction.thatReturnsNull;\n\t    }\n\t\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      for (var i = 0; i < expectedValues.length; i++) {\n\t        if (is(propValue, expectedValues[i])) {\n\t          return null;\n\t        }\n\t      }\n\t\n\t      var valuesString = JSON.stringify(expectedValues);\n\t      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + propValue + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createObjectOfTypeChecker(typeChecker) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (typeof typeChecker !== 'function') {\n\t        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n\t      }\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n\t      }\n\t      for (var key in propValue) {\n\t        if (propValue.hasOwnProperty(key)) {\n\t          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n\t          if (error instanceof Error) {\n\t            return error;\n\t          }\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createUnionTypeChecker(arrayOfTypeCheckers) {\n\t    if (!Array.isArray(arrayOfTypeCheckers)) {\n\t      process.env.NODE_ENV !== 'production' ? warning(false, 'Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n\t      return emptyFunction.thatReturnsNull;\n\t    }\n\t\n\t    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n\t      var checker = arrayOfTypeCheckers[i];\n\t      if (typeof checker !== 'function') {\n\t        warning(\n\t          false,\n\t          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n\t          'received %s at index %s.',\n\t          getPostfixForTypeWarning(checker),\n\t          i\n\t        );\n\t        return emptyFunction.thatReturnsNull;\n\t      }\n\t    }\n\t\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n\t        var checker = arrayOfTypeCheckers[i];\n\t        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n\t          return null;\n\t        }\n\t      }\n\t\n\t      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createNodeChecker() {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      if (!isNode(props[propName])) {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createShapeTypeChecker(shapeTypes) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n\t      }\n\t      for (var key in shapeTypes) {\n\t        var checker = shapeTypes[key];\n\t        if (!checker) {\n\t          continue;\n\t        }\n\t        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n\t        if (error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function createStrictShapeTypeChecker(shapeTypes) {\n\t    function validate(props, propName, componentName, location, propFullName) {\n\t      var propValue = props[propName];\n\t      var propType = getPropType(propValue);\n\t      if (propType !== 'object') {\n\t        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n\t      }\n\t      // We need to check all keys in case some are required but missing from\n\t      // props.\n\t      var allKeys = assign({}, props[propName], shapeTypes);\n\t      for (var key in allKeys) {\n\t        var checker = shapeTypes[key];\n\t        if (!checker) {\n\t          return new PropTypeError(\n\t            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n\t            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n\t            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n\t          );\n\t        }\n\t        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n\t        if (error) {\n\t          return error;\n\t        }\n\t      }\n\t      return null;\n\t    }\n\t\n\t    return createChainableTypeChecker(validate);\n\t  }\n\t\n\t  function isNode(propValue) {\n\t    switch (typeof propValue) {\n\t      case 'number':\n\t      case 'string':\n\t      case 'undefined':\n\t        return true;\n\t      case 'boolean':\n\t        return !propValue;\n\t      case 'object':\n\t        if (Array.isArray(propValue)) {\n\t          return propValue.every(isNode);\n\t        }\n\t        if (propValue === null || isValidElement(propValue)) {\n\t          return true;\n\t        }\n\t\n\t        var iteratorFn = getIteratorFn(propValue);\n\t        if (iteratorFn) {\n\t          var iterator = iteratorFn.call(propValue);\n\t          var step;\n\t          if (iteratorFn !== propValue.entries) {\n\t            while (!(step = iterator.next()).done) {\n\t              if (!isNode(step.value)) {\n\t                return false;\n\t              }\n\t            }\n\t          } else {\n\t            // Iterator will provide entry [k,v] tuples rather than values.\n\t            while (!(step = iterator.next()).done) {\n\t              var entry = step.value;\n\t              if (entry) {\n\t                if (!isNode(entry[1])) {\n\t                  return false;\n\t                }\n\t              }\n\t            }\n\t          }\n\t        } else {\n\t          return false;\n\t        }\n\t\n\t        return true;\n\t      default:\n\t        return false;\n\t    }\n\t  }\n\t\n\t  function isSymbol(propType, propValue) {\n\t    // Native Symbol.\n\t    if (propType === 'symbol') {\n\t      return true;\n\t    }\n\t\n\t    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n\t    if (propValue['@@toStringTag'] === 'Symbol') {\n\t      return true;\n\t    }\n\t\n\t    // Fallback for non-spec compliant Symbols which are polyfilled.\n\t    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  }\n\t\n\t  // Equivalent of `typeof` but with special handling for array and regexp.\n\t  function getPropType(propValue) {\n\t    var propType = typeof propValue;\n\t    if (Array.isArray(propValue)) {\n\t      return 'array';\n\t    }\n\t    if (propValue instanceof RegExp) {\n\t      // Old webkits (at least until Android 4.0) return 'function' rather than\n\t      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n\t      // passes PropTypes.object.\n\t      return 'object';\n\t    }\n\t    if (isSymbol(propType, propValue)) {\n\t      return 'symbol';\n\t    }\n\t    return propType;\n\t  }\n\t\n\t  // This handles more types than `getPropType`. Only used for error messages.\n\t  // See `createPrimitiveTypeChecker`.\n\t  function getPreciseType(propValue) {\n\t    if (typeof propValue === 'undefined' || propValue === null) {\n\t      return '' + propValue;\n\t    }\n\t    var propType = getPropType(propValue);\n\t    if (propType === 'object') {\n\t      if (propValue instanceof Date) {\n\t        return 'date';\n\t      } else if (propValue instanceof RegExp) {\n\t        return 'regexp';\n\t      }\n\t    }\n\t    return propType;\n\t  }\n\t\n\t  // Returns a string that is postfixed to a warning about an invalid type.\n\t  // For example, \"undefined\" or \"of type array\"\n\t  function getPostfixForTypeWarning(value) {\n\t    var type = getPreciseType(value);\n\t    switch (type) {\n\t      case 'array':\n\t      case 'object':\n\t        return 'an ' + type;\n\t      case 'boolean':\n\t      case 'date':\n\t      case 'regexp':\n\t        return 'a ' + type;\n\t      default:\n\t        return type;\n\t    }\n\t  }\n\t\n\t  // Returns class name of the object, if any.\n\t  function getClassName(propValue) {\n\t    if (!propValue.constructor || !propValue.constructor.name) {\n\t      return ANONYMOUS;\n\t    }\n\t    return propValue.constructor.name;\n\t  }\n\t\n\t  ReactPropTypes.checkPropTypes = checkPropTypes;\n\t  ReactPropTypes.PropTypes = ReactPropTypes;\n\t\n\t  return ReactPropTypes;\n\t};\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(5)))\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * \n\t */\n\t\n\tfunction makeEmptyFunction(arg) {\n\t  return function () {\n\t    return arg;\n\t  };\n\t}\n\t\n\t/**\n\t * This function accepts and discards inputs; it has no side effects. This is\n\t * primarily useful idiomatically for overridable function endpoints which\n\t * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n\t */\n\tvar emptyFunction = function emptyFunction() {};\n\t\n\temptyFunction.thatReturns = makeEmptyFunction;\n\temptyFunction.thatReturnsFalse = makeEmptyFunction(false);\n\temptyFunction.thatReturnsTrue = makeEmptyFunction(true);\n\temptyFunction.thatReturnsNull = makeEmptyFunction(null);\n\temptyFunction.thatReturnsThis = function () {\n\t  return this;\n\t};\n\temptyFunction.thatReturnsArgument = function (arg) {\n\t  return arg;\n\t};\n\t\n\tmodule.exports = emptyFunction;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t */\n\t\n\t'use strict';\n\t\n\t/**\n\t * Use invariant() to assert state which your program assumes to be true.\n\t *\n\t * Provide sprintf-style format (only %s is supported) and arguments\n\t * to provide information about what broke and what you were\n\t * expecting.\n\t *\n\t * The invariant message will be stripped in production, but the invariant\n\t * will remain to ensure logic does not differ in production.\n\t */\n\t\n\tvar validateFormat = function validateFormat(format) {};\n\t\n\tif (process.env.NODE_ENV !== 'production') {\n\t  validateFormat = function validateFormat(format) {\n\t    if (format === undefined) {\n\t      throw new Error('invariant requires an error message argument');\n\t    }\n\t  };\n\t}\n\t\n\tfunction invariant(condition, format, a, b, c, d, e, f) {\n\t  validateFormat(format);\n\t\n\t  if (!condition) {\n\t    var error;\n\t    if (format === undefined) {\n\t      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n\t    } else {\n\t      var args = [a, b, c, d, e, f];\n\t      var argIndex = 0;\n\t      error = new Error(format.replace(/%s/g, function () {\n\t        return args[argIndex++];\n\t      }));\n\t      error.name = 'Invariant Violation';\n\t    }\n\t\n\t    error.framesToPop = 1; // we don't care about invariant's own frame\n\t    throw error;\n\t  }\n\t}\n\t\n\tmodule.exports = invariant;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(5)))\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * Copyright (c) 2014-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t */\n\t\n\t'use strict';\n\t\n\tvar emptyFunction = __webpack_require__(7);\n\t\n\t/**\n\t * Similar to invariant but only logs a warning if the condition is not met.\n\t * This can be used to log issues in development environments in critical\n\t * paths. Removing the logging code for production environments will keep the\n\t * same logic and follow the same code paths.\n\t */\n\t\n\tvar warning = emptyFunction;\n\t\n\tif (process.env.NODE_ENV !== 'production') {\n\t  var printWarning = function printWarning(format) {\n\t    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t      args[_key - 1] = arguments[_key];\n\t    }\n\t\n\t    var argIndex = 0;\n\t    var message = 'Warning: ' + format.replace(/%s/g, function () {\n\t      return args[argIndex++];\n\t    });\n\t    if (typeof console !== 'undefined') {\n\t      console.error(message);\n\t    }\n\t    try {\n\t      // --- Welcome to debugging React ---\n\t      // This error was thrown as a convenience so that you can use this stack\n\t      // to find the callsite that caused this warning to fire.\n\t      throw new Error(message);\n\t    } catch (x) {}\n\t  };\n\t\n\t  warning = function warning(condition, format) {\n\t    if (format === undefined) {\n\t      throw new Error('`warning(condition, format, ...args)` requires a warning ' + 'message argument');\n\t    }\n\t\n\t    if (format.indexOf('Failed Composite propType: ') === 0) {\n\t      return; // Ignore CompositeComponent proptype check.\n\t    }\n\t\n\t    if (!condition) {\n\t      for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n\t        args[_key2 - 2] = arguments[_key2];\n\t      }\n\t\n\t      printWarning.apply(undefined, [format].concat(args));\n\t    }\n\t  };\n\t}\n\t\n\tmodule.exports = warning;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(5)))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\t/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/\n\t\n\t'use strict';\n\t/* eslint-disable no-unused-vars */\n\tvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\t\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\t\n\t\treturn Object(val);\n\t}\n\t\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\t\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\t\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (getOwnPropertySymbols) {\n\t\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn to;\n\t};\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\t\n\tmodule.exports = ReactPropTypesSecret;\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tif (process.env.NODE_ENV !== 'production') {\n\t  var invariant = __webpack_require__(8);\n\t  var warning = __webpack_require__(9);\n\t  var ReactPropTypesSecret = __webpack_require__(11);\n\t  var loggedTypeFailures = {};\n\t}\n\t\n\t/**\n\t * Assert that the values match with the type specs.\n\t * Error messages are memorized and will only be shown once.\n\t *\n\t * @param {object} typeSpecs Map of name to a ReactPropType\n\t * @param {object} values Runtime values that need to be type-checked\n\t * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n\t * @param {string} componentName Name of the component for error messages.\n\t * @param {?Function} getStack Returns the component stack.\n\t * @private\n\t */\n\tfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n\t  if (process.env.NODE_ENV !== 'production') {\n\t    for (var typeSpecName in typeSpecs) {\n\t      if (typeSpecs.hasOwnProperty(typeSpecName)) {\n\t        var error;\n\t        // Prop type validation may throw. In case they do, we don't want to\n\t        // fail the render phase where it didn't fail before. So we log it.\n\t        // After these have been cleaned up, we'll let them throw.\n\t        try {\n\t          // This is intentionally an invariant that gets caught. It's the same\n\t          // behavior as without this statement except with a better message.\n\t          invariant(typeof typeSpecs[typeSpecName] === 'function', '%s: %s type `%s` is invalid; it must be a function, usually from ' + 'the `prop-types` package, but received `%s`.', componentName || 'React class', location, typeSpecName, typeof typeSpecs[typeSpecName]);\n\t          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n\t        } catch (ex) {\n\t          error = ex;\n\t        }\n\t        warning(!error || error instanceof Error, '%s: type specification of %s `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error);\n\t        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n\t          // Only monitor this failure once because there tends to be a lot of the\n\t          // same error.\n\t          loggedTypeFailures[error.message] = true;\n\t\n\t          var stack = getStack ? getStack() : '';\n\t\n\t          warning(false, 'Failed %s type: %s%s', location, error.message, stack != null ? stack : '');\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\tmodule.exports = checkPropTypes;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(5)))\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tvar emptyFunction = __webpack_require__(7);\n\tvar invariant = __webpack_require__(8);\n\tvar ReactPropTypesSecret = __webpack_require__(11);\n\t\n\tmodule.exports = function() {\n\t  function shim(props, propName, componentName, location, propFullName, secret) {\n\t    if (secret === ReactPropTypesSecret) {\n\t      // It is still safe when called from React.\n\t      return;\n\t    }\n\t    invariant(\n\t      false,\n\t      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n\t      'Use PropTypes.checkPropTypes() to call them. ' +\n\t      'Read more at http://fb.me/use-check-prop-types'\n\t    );\n\t  };\n\t  shim.isRequired = shim;\n\t  function getShim() {\n\t    return shim;\n\t  };\n\t  // Important!\n\t  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\t  var ReactPropTypes = {\n\t    array: shim,\n\t    bool: shim,\n\t    func: shim,\n\t    number: shim,\n\t    object: shim,\n\t    string: shim,\n\t    symbol: shim,\n\t\n\t    any: shim,\n\t    arrayOf: getShim,\n\t    element: shim,\n\t    instanceOf: getShim,\n\t    node: shim,\n\t    objectOf: getShim,\n\t    oneOf: getShim,\n\t    oneOfType: getShim,\n\t    shape: getShim,\n\t    exact: getShim\n\t  };\n\t\n\t  ReactPropTypes.checkPropTypes = emptyFunction;\n\t  ReactPropTypes.PropTypes = ReactPropTypes;\n\t\n\t  return ReactPropTypes;\n\t};\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = require(\"react\");\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar simpleIsEqual = function simpleIsEqual(a, b) {\n\t  return a === b;\n\t};\n\t\n\tfunction index (resultFn) {\n\t  var isEqual = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : simpleIsEqual;\n\t\n\t  var lastThis = void 0;\n\t  var lastArgs = [];\n\t  var lastResult = void 0;\n\t  var calledOnce = false;\n\t\n\t  var isNewArgEqualToLast = function isNewArgEqualToLast(newArg, index) {\n\t    return isEqual(newArg, lastArgs[index]);\n\t  };\n\t\n\t  var result = function result() {\n\t    for (var _len = arguments.length, newArgs = Array(_len), _key = 0; _key < _len; _key++) {\n\t      newArgs[_key] = arguments[_key];\n\t    }\n\t\n\t    if (calledOnce && lastThis === this && newArgs.length === lastArgs.length && newArgs.every(isNewArgEqualToLast)) {\n\t      return lastResult;\n\t    }\n\t\n\t    calledOnce = true;\n\t    lastThis = this;\n\t    lastArgs = newArgs;\n\t    lastResult = resultFn.apply(this, newArgs);\n\t    return lastResult;\n\t  };\n\t\n\t  return result;\n\t}\n\t\n\tmodule.exports = index;\n\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=main.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__7644__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3305__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3545__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7388__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5980__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3342__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2650__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2729__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3929__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3129__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1177__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/public/plugins/victoriametrics-datasource/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t1261: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk\"] = self[\"webpackChunk\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","import { css, cx } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useTheme2, stylesFactory, Button, ButtonProps } from '@grafana/ui';\n\ninterface AccessoryButtonProps extends ButtonProps {}\n\nexport const AccessoryButton: React.FC<AccessoryButtonProps> = ({ className, ...props }) => {\n  const theme = useTheme2();\n  const styles = getButtonStyles(theme);\n\n  return <Button {...props} className={cx(className, styles.button)} />;\n};\n\nconst getButtonStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  button: css({\n    paddingLeft: theme.spacing(3 / 2),\n    paddingRight: theme.spacing(3 / 2),\n  }),\n}));\n","import { css } from '@emotion/css';\nimport React, { CSSProperties, useCallback } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\ninterface StackProps {\n  direction?: CSSProperties['flexDirection'];\n  alignItems?: CSSProperties['alignItems'];\n  wrap?: boolean;\n  gap?: number;\n  flexGrow?: CSSProperties['flexGrow'];\n}\n\nexport const Stack: React.FC<StackProps> = ({ children, ...props }) => {\n  const styles = useStyles2(useCallback((theme) => getStyles(theme, props), [props]));\n\n  return <div className={styles.root}>{children}</div>;\n};\n\nconst getStyles = (theme: GrafanaTheme2, props: StackProps) => ({\n  root: css({\n    display: 'flex',\n    flexDirection: props.direction ?? 'row',\n    flexWrap: props.wrap ?? true ? 'wrap' : undefined,\n    alignItems: props.alignItems,\n    gap: theme.spacing(props.gap ?? 2),\n    flexGrow: props.flexGrow,\n  }),\n});\n","import React from 'react';\n\nimport { Stack } from './Stack';\n\ninterface EditorFieldGroupProps {}\n\nexport const EditorFieldGroup: React.FC<EditorFieldGroupProps> = ({ children }) => {\n  return <Stack gap={1}>{children}</Stack>;\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { stylesFactory, useTheme2 } from '@grafana/ui';\n\ninterface EditorHeaderProps {}\n\nexport const EditorHeader: React.FC<EditorHeaderProps> = ({ children }) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  return <div className={styles.root}>{children}</div>;\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  root: css({\n    display: 'flex',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    gap: theme.spacing(3),\n    minHeight: theme.spacing(4),\n  }),\n}));\n","import { css, cx } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { stylesFactory, useTheme2 } from '@grafana/ui';\n\nexport interface SpaceProps {\n  v?: number;\n  h?: number;\n  layout?: 'block' | 'inline';\n}\n\nexport const Space = (props: SpaceProps) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme, props);\n\n  return <span className={cx(styles.wrapper)} />;\n};\n\nSpace.defaultProps = {\n  v: 0,\n  h: 0,\n  layout: 'block',\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2, props: SpaceProps) => ({\n  wrapper: css([\n    {\n      paddingRight: theme.spacing(props.h ?? 0),\n      paddingBottom: theme.spacing(props.v ?? 0),\n    },\n    props.layout === 'inline' && {\n      display: 'inline-block',\n    },\n    props.layout === 'block' && {\n      display: 'block',\n    },\n  ]),\n}));\n","import { css } from '@emotion/css';\nimport React, { ComponentProps } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { stylesFactory, useTheme2, ReactUtils, Field, Icon, PopoverContent, Tooltip } from '@grafana/ui';\n\nimport { Space } from './Space';\n\ninterface EditorFieldProps extends ComponentProps<typeof Field> {\n  label: string;\n  children: React.ReactElement;\n  width?: number | string;\n  optional?: boolean;\n  tooltip?: PopoverContent;\n}\n\nexport const EditorField: React.FC<EditorFieldProps> = (props) => {\n  const { label, optional, tooltip, children, width, ...fieldProps } = props;\n\n  const theme = useTheme2();\n  const styles = getStyles(theme, width);\n\n  // Null check for backward compatibility\n  const childInputId = fieldProps?.htmlFor || ReactUtils?.getChildId(children);\n\n  const labelEl = (\n    <>\n      <label className={styles.label} htmlFor={childInputId}>\n        {label}\n        {optional && <span className={styles.optional}> - optional</span>}\n        {tooltip && (\n          <Tooltip placement=\"top\" content={tooltip} theme=\"info\">\n            <Icon name=\"info-circle\" size=\"sm\" className={styles.icon} />\n          </Tooltip>\n        )}\n      </label>\n      <Space v={0.5} />\n    </>\n  );\n\n  return (\n    <div className={styles.root}>\n      <Field className={styles.field} label={labelEl} {...fieldProps}>\n        {children}\n      </Field>\n    </div>\n  );\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2, width?: number | string) => {\n  return {\n    root: css({\n      minWidth: theme.spacing(width ?? 0),\n    }),\n    label: css({\n      fontSize: 12,\n      fontWeight: theme.typography.fontWeightMedium,\n    }),\n    optional: css({\n      fontStyle: 'italic',\n      color: theme.colors.text.secondary,\n    }),\n    field: css({\n      marginBottom: 0, // GrafanaUI/Field has a bottom margin which we must remove\n    }),\n    icon: css({\n      color: theme.colors.text.secondary,\n      marginLeft: theme.spacing(1),\n      ':hover': {\n        color: theme.colors.text.primary,\n      },\n    }),\n  };\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { Stack } from './Stack';\n\ninterface EditorRowProps {}\n\nexport const EditorRow: React.FC<EditorRowProps> = ({ children }) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.root}>\n      <Stack gap={2}>{children}</Stack>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    root: css({\n      padding: theme.spacing(1),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.borderRadius(1),\n    }),\n  };\n};\n","import React from 'react';\n\nimport { Button } from '@grafana/ui';\n\nimport { Stack } from './Stack';\n\ninterface EditorListProps<T> {\n  items: Array<Partial<T>>;\n  renderItem: (\n    item: Partial<T>,\n    onChangeItem: (item: Partial<T>) => void,\n    onDeleteItem: () => void\n  ) => React.ReactElement;\n  onChange: (items: Array<Partial<T>>) => void;\n}\n\nexport function EditorList<T>({ items, renderItem, onChange }: EditorListProps<T>) {\n  const onAddItem = () => {\n    const newItems = [...items, {}];\n\n    onChange(newItems);\n  };\n\n  const onChangeItem = (itemIndex: number, newItem: Partial<T>) => {\n    const newItems = [...items];\n    newItems[itemIndex] = newItem;\n    onChange(newItems);\n  };\n\n  const onDeleteItem = (itemIndex: number) => {\n    const newItems = [...items];\n    newItems.splice(itemIndex, 1);\n    onChange(newItems);\n  };\n  return (\n    <Stack>\n      {items.map((item, index) => (\n        <div key={index}>\n          {renderItem(\n            item,\n            (newItem) => onChangeItem(index, newItem),\n            () => onDeleteItem(index)\n          )}\n        </div>\n      ))}\n      <Button onClick={onAddItem} variant=\"secondary\" size=\"md\" icon=\"plus\" aria-label=\"Add\" type=\"button\" />\n    </Stack>\n  );\n}\n","import React from 'react';\n\nimport { Stack } from './Stack';\n\ninterface EditorRowsProps {}\n\nexport const EditorRows: React.FC<EditorRowsProps> = ({ children }) => {\n  return (\n    <Stack gap={0.5} direction=\"column\">\n      {children}\n    </Stack>\n  );\n};\n","import { css } from '@emotion/css';\nimport React, { ComponentProps } from 'react';\n\nimport { Switch } from '@grafana/ui';\n\n// Wrapper component around <Switch /> that properly aligns it in <EditorField />\nexport const EditorSwitch: React.FC<ComponentProps<typeof Switch>> = (props) => {\n  const styles = getStyles();\n\n  return (\n    <div className={styles.switch}>\n      <Switch {...props} />\n    </div>\n  );\n};\n\nconst getStyles = () => {\n  return {\n    switch: css({\n      display: 'flex',\n      alignItems: 'center',\n      minHeight: 30,\n    }),\n  };\n};\n","import React from 'react';\n\ninterface FlexItemProps {\n  grow?: number;\n  shrink?: number;\n}\n\nexport const FlexItem: React.FC<FlexItemProps> = ({ grow, shrink }) => {\n  return <div style={{ display: 'block', flexGrow: grow, flexShrink: shrink }} />;\n};\n","import { css, cx } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { GroupBase } from 'react-select';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport {\n  stylesFactory,\n  useTheme2,\n  Select,\n  SelectContainerProps,\n  SelectContainer as BaseSelectContainer,\n  SelectCommonProps\n} from '@grafana/ui';\n\ninterface InlineSelectProps<T> extends SelectCommonProps<T> {\n  label?: string;\n}\n\nexport function InlineSelect<T>({ label: labelProp, ...props }: InlineSelectProps<T>) {\n  const theme = useTheme2();\n  const [id] = useState(() => Math.random().toString(16).slice(2));\n  const styles = getSelectStyles(theme);\n  const components = {\n    SelectContainer,\n    ValueContainer,\n    SingleValue: ValueContainer,\n  };\n\n  return (\n    <div className={styles.root}>\n      {labelProp && (\n        <label className={styles.label} htmlFor={id}>\n          {labelProp}\n          {':'}&nbsp;\n        </label>\n      )}\n      {/* @ts-ignore */}\n      <Select openMenuOnFocus inputId={id} {...props} components={components} />\n    </div>\n  );\n}\n\nconst SelectContainer = <Option, isMulti extends boolean, Group extends GroupBase<Option>>(\n  props: SelectContainerProps<Option, isMulti, Group>\n) => {\n  const { children } = props;\n\n  const theme = useTheme2();\n  const styles = getSelectStyles(theme);\n\n  return (\n    <BaseSelectContainer {...props} className={cx(props.className, styles.container)}>\n      {children}\n    </BaseSelectContainer>\n  );\n};\n\nconst ValueContainer = <Option, isMulti extends boolean, Group extends GroupBase<Option>>(\n  props: SelectContainerProps<Option, isMulti, Group>\n) => {\n  const { className, children } = props;\n  const theme = useTheme2();\n  const styles = getSelectStyles(theme);\n\n  return <div className={cx(className, styles.valueContainer)}>{children}</div>;\n};\n\nconst getSelectStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  root: css({\n    display: 'flex',\n    fontSize: 12,\n    alignItems: 'center',\n  }),\n\n  label: css({\n    color: theme.colors.text.secondary,\n    whiteSpace: 'nowrap',\n  }),\n\n  container: css({\n    background: 'none',\n    borderColor: 'transparent',\n  }),\n\n  valueContainer: css({\n    display: 'flex',\n    alignItems: 'center',\n    flex: 'initial',\n    color: theme.colors.text.secondary,\n    fontSize: 12,\n  }),\n}));\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { useStyles2 } from '@grafana/ui';\n\ninterface InputGroupProps {}\n\nexport const InputGroup: React.FC<InputGroupProps> = ({ children }) => {\n  const styles = useStyles2(getStyles);\n\n  return <div className={styles.root}>{children}</div>;\n};\n\nconst getStyles = () => ({\n  root: css({\n    display: 'flex',\n\n    // Style the direct children of the component\n    '> *': {\n      '&:not(:first-child)': {\n        // Negative margin hides the double-border on adjacent selects\n        marginLeft: -1,\n      },\n\n      '&:first-child': {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0,\n      },\n\n      '&:last-child': {\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n      },\n\n      '&:not(:first-child):not(:last-child)': {\n        borderRadius: 0,\n      },\n\n      //\n      position: 'relative',\n      zIndex: 1,\n\n      '&:hover': {\n        zIndex: 2,\n      },\n      '&:focus-within': {\n        zIndex: 2,\n      },\n    },\n  }),\n});\n","import { Grammar } from 'prismjs';\n\nimport { CompletionItem } from '@grafana/ui';\n\n\n// When changing RATE_RANGES, check if Loki/LogQL ranges should be changed too\nexport const RATE_RANGES: CompletionItem[] = [\n  { label: '$__interval', sortValue: '$__interval' },\n  { label: '$__rate_interval', sortValue: '$__rate_interval' },\n  { label: '$__range', sortValue: '$__range' },\n  { label: '1m', sortValue: '00:01:00' },\n  { label: '5m', sortValue: '00:05:00' },\n  { label: '10m', sortValue: '00:10:00' },\n  { label: '30m', sortValue: '00:30:00' },\n  { label: '1h', sortValue: '01:00:00' },\n  { label: '1d', sortValue: '24:00:00' },\n];\n\nexport const OPERATORS = ['by', 'group_left', 'group_right', 'ignoring', 'on', 'offset', 'without'];\nexport const LOGICAL_OPERATORS = ['or', 'and', 'unless'];\n\nconst ROLLUP_FUNCTIONS: CompletionItem[] = [\n  {\n    label: 'absent_over_time',\n    insertText: 'absent_over_time',\n    detail: 'absent_over_time(series_selector[d])',\n    documentation: 'returns 1 if the given lookbehind window `d` doesn\\'t contain raw samples. Otherwise it returns an empty result. See also `present_over_time`.'\n  },\n  {\n    label: 'aggr_over_time',\n    insertText: 'aggr_over_time',\n    detail: 'aggr_over_time((\"rollup_func1\", \"rollup_func2\", ...), series_selector[d])',\n    documentation: 'calculates all the listed `rollup_func*` for raw samples on the given lookbehind window `d`. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). `rollup_func*` can contain any rollup function. For instance, `aggr_over_time((\"min_over_time\", \"max_over_time\", \"rate\"), m[d])` would calculate `min_over_time` for `m[d]`.'\n  },\n  {\n    label: 'ascent_over_time',\n    insertText: 'ascent_over_time',\n    detail: 'ascent_over_time(series_selector[d])',\n    documentation: 'calculates ascent of raw sample values on the given lookbehind window `d`. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Useful for tracking height gains in GPS tracking. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'avg_over_time',\n    insertText: 'avg_over_time',\n    detail: 'avg_over_time(series_selector[d])',\n    documentation: 'calculates the average value over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `median_over_time`.'\n  },\n  {\n    label: 'changes',\n    insertText: 'changes',\n    detail: 'changes(series_selector[d])',\n    documentation: 'calculates the number of times the raw samples changed on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Unlike `changes()` in Prometheus it takes into account the change from the last sample before the given lookbehind window `d`. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'changes_prometheus',\n    insertText: 'changes_prometheus',\n    detail: 'changes_prometheus(series_selector[d])',\n    documentation: 'calculates the number of times the raw samples changed on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It doesn\\'t take into account the change from the last sample before the given lookbehind window `d` in the same way as Prometheus does. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'count_eq_over_time',\n    insertText: 'count_eq_over_time',\n    detail: 'count_eq_over_time(series_selector[d], eq)',\n    documentation: 'calculates the number of raw samples on the given lookbehind window `d`, which are equal to `eq`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'count_gt_over_time',\n    insertText: 'count_gt_over_time',\n    detail: 'count_gt_over_time(series_selector[d], gt)',\n    documentation: 'calculates the number of raw samples on the given lookbehind window `d`, which are bigger than `gt`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'count_le_over_time',\n    insertText: 'count_le_over_time',\n    detail: 'count_le_over_time(series_selector[d], le)',\n    documentation: 'calculates the number of raw samples on the given lookbehind window `d`, which don\\'t exceed `le`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'count_ne_over_time',\n    insertText: 'count_ne_over_time',\n    detail: 'count_ne_over_time(series_selector[d], ne)',\n    documentation: 'calculates the number of raw samples on the given lookbehind window `d`, which aren\\'t equal to `ne`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'count_over_time',\n    insertText: 'count_over_time',\n    detail: 'count_over_time(series_selector[d])',\n    documentation: 'calculates the number of raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'decreases_over_time',\n    insertText: 'decreases_over_time',\n    detail: 'decreases_over_time(series_selector[d])',\n    documentation: 'calculates the number of raw sample value decreases over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'default_rollup',\n    insertText: 'default_rollup',\n    detail: 'default_rollup(series_selector[d])',\n    documentation: 'returns the last raw sample value on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering).'\n  },\n  {\n    label: 'delta',\n    insertText: 'delta',\n    detail: 'delta(series_selector[d])',\n    documentation: 'calculates the difference between the last sample before the given lookbehind window `d` and the last sample at the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The behaviour of `delta()` function in MetricsQL is slightly different to the behaviour of `delta()` function in Prometheus. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'delta_prometheus',\n    insertText: 'delta_prometheus',\n    detail: 'delta_prometheus(series_selector[d])',\n    documentation: 'calculates the difference between the first and the last samples at the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The behaviour of `delta_prometheus()` is close to the behaviour of `delta()` function in Prometheus. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'deriv',\n    insertText: 'deriv',\n    detail: 'deriv(series_selector[d])',\n    documentation: 'calculates per-second derivative over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The derivative is calculated using linear regression. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'deriv_fast',\n    insertText: 'deriv_fast',\n    detail: 'deriv_fast(series_selector[d])',\n    documentation: 'calculates per-second derivative using the first and the last raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'descent_over_time',\n    insertText: 'descent_over_time',\n    detail: 'descent_over_time(series_selector[d])',\n    documentation: 'calculates descent of raw sample values on the given lookbehind window `d`. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Useful for tracking height loss in GPS tracking. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'distinct_over_time',\n    insertText: 'distinct_over_time',\n    detail: 'distinct_over_time(series_selector[d])',\n    documentation: 'returns the number of distinct raw sample values on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'duration_over_time',\n    insertText: 'duration_over_time',\n    detail: 'duration_over_time(series_selector[d], max_interval)',\n    documentation: 'returns the duration in seconds when time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering) were present over the given lookbehind window `d`. It is expected that intervals between adjacent samples per each series don\\'t exceed the `max_interval`. Otherwise such intervals are considered as gaps and aren\\'t counted. See also `lifetime`.'\n  },\n  {\n    label: 'first_over_time',\n    insertText: 'first_over_time',\n    detail: 'first_over_time(series_selector[d])',\n    documentation: 'returns the first raw sample value on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `last_over_time`.'\n  },\n  {\n    label: 'geomean_over_time',\n    insertText: 'geomean_over_time',\n    detail: 'geomean_over_time(series_selector[d])',\n    documentation: 'calculates [geometric mean](https://en.wikipedia.org/wiki/Geometric_mean) over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'histogram_over_time',\n    insertText: 'histogram_over_time',\n    detail: 'histogram_over_time(series_selector[d])',\n    documentation: 'calculates [VictoriaMetrics histogram](https://godoc.org/github.com/VictoriaMetrics/metrics#Histogram) over raw samples on the given lookbehind window `d`. It is calculated individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The resulting histograms are useful to pass to `histogram_quantile``.'\n  },\n  {\n    label: 'hoeffding_bound_lower',\n    insertText: 'hoeffding_bound_lower',\n    detail: 'hoeffding_bound_lower(phi, series_selector[d])',\n    documentation: 'calculates lower [Hoeffding bound](https://en.wikipedia.org/wiki/Hoeffding%27s_inequality) for the given `phi` in the range `[0...1]`. See also `hoeffding_bound_upper`.'\n  },\n  {\n    label: 'hoeffding_bound_upper',\n    insertText: 'hoeffding_bound_upper',\n    detail: 'hoeffding_bound_upper(phi, series_selector[d])',\n    documentation: 'calculates upper [Hoeffding bound](https://en.wikipedia.org/wiki/Hoeffding%27s_inequality) for the given `phi` in the range `[0...1]`. See also `hoeffding_bound_lower`.'\n  },\n  {\n    label: 'holt_winters',\n    insertText: 'holt_winters',\n    detail: 'holt_winters(series_selector[d], sf, tf)',\n    documentation: 'calculates Holt-Winters value (aka [double exponential smoothing](https://en.wikipedia.org/wiki/Exponential_smoothing#Double_exponential_smoothing)) for raw samples over the given lookbehind window `d` using the given smoothing factor `sf` and the given trend factor `tf`. Both `sf` and `tf` must be in the range `[0...1]`. It is expected that the [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering) returns time series of [gauge type](https://docs.victoriametrics.com/keyConcepts.html#gauge).'\n  },\n  {\n    label: 'idelta',\n    insertText: 'idelta',\n    detail: 'idelta(series_selector[d])',\n    documentation: 'calculates the difference between the last two raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'ideriv',\n    insertText: 'ideriv',\n    detail: 'ideriv(series_selector[d])',\n    documentation: 'calculates the per-second derivative based on the last two raw samples over the given lookbehind window `d`. The derivative is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'increase',\n    insertText: 'increase',\n    detail: 'increase(series_selector[d])',\n    documentation: 'calculates the increase over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that the `series_selector` returns time series of [counter type](https://docs.victoriametrics.com/keyConcepts.html#counter). Unlike Prometheus it takes into account the last sample before the given lookbehind window `d` when calculating the result. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'increase_prometheus',\n    insertText: 'increase_prometheus',\n    detail: 'increase_prometheus(series_selector[d])',\n    documentation: 'calculates the increase over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that the `series_selector` returns time series of [counter type](https://docs.victoriametrics.com/keyConcepts.html#counter). It doesn\\'t take into account the last sample before the given lookbehind window `d` when calculating the result in the same way as Prometheus does. See [this article](https://medium.com/@romanhavronenko/victoriametrics-promql-compliance-d4318203f51e) for details. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'increase_pure',\n    insertText: 'increase_pure',\n    detail: 'increase_pure(series_selector[d])',\n    documentation: 'works the same as `increase` ignores the first value in a series if it is too big.'\n  },\n  {\n    label: 'increases_over_time',\n    insertText: 'increases_over_time',\n    detail: 'increases_over_time(series_selector[d])',\n    documentation: 'calculates the number of raw sample value increases over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'integrate',\n    insertText: 'integrate',\n    detail: 'integrate(series_selector[d])',\n    documentation: 'calculates the integral over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'irate',\n    insertText: 'irate',\n    detail: 'irate(series_selector[d])',\n    documentation: 'calculates the \"instant\" per-second increase rate over the last two raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that the `series_selector` returns time series of [counter type](https://docs.victoriametrics.com/keyConcepts.html#counter). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'lag',\n    insertText: 'lag',\n    detail: 'lag(series_selector[d])',\n    documentation: 'returns the duration in seconds between the last sample on the given lookbehind window `d` and the timestamp of the current point. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'last_over_time',\n    insertText: 'last_over_time',\n    detail: 'last_over_time(series_selector[d])',\n    documentation: 'returns the last raw sample value on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `first_over_time`.'\n  },\n  {\n    label: 'lifetime',\n    insertText: 'lifetime',\n    detail: 'lifetime(series_selector[d])',\n    documentation: 'returns the duration in seconds between the last and the first sample on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'max_over_time',\n    insertText: 'max_over_time',\n    detail: 'max_over_time(series_selector[d])',\n    documentation: 'calculates the maximum value over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `tmax_over_time`.'\n  },\n  {\n    label: 'median_over_time',\n    insertText: 'median_over_time',\n    detail: 'median_over_time(series_selector[d])',\n    documentation: 'calculates median value over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `avg_over_time`.'\n  },\n  {\n    label: 'min_over_time',\n    insertText: 'min_over_time',\n    detail: 'min_over_time(series_selector[d])',\n    documentation: 'calculates the minimum value over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). See also `tmin_over_time`.'\n  },\n  {\n    label: 'mode_over_time',\n    insertText: 'mode_over_time',\n    detail: 'mode_over_time(series_selector[d])',\n    documentation: 'calculates [mode](https://en.wikipedia.org/wiki/Mode_(statistics)) for raw samples on the given lookbehind window `d`. It is calculated individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that raw sample values are discrete.'\n  },\n  {\n    label: 'predict_linear',\n    insertText: 'predict_linear',\n    detail: 'predict_linear(series_selector[d], t)',\n    documentation: 'calculates the value `t` seconds in the future using linear interpolation over raw samples on the given lookbehind window `d`. The predicted value is calculated individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering).'\n  },\n  {\n    label: 'present_over_time',\n    insertText: 'present_over_time',\n    detail: 'present_over_time(series_selector[d])',\n    documentation: 'returns 1 if there is at least a single raw sample on the given lookbehind window `d`. Otherwise an empty result is returned. Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'quantile_over_time',\n    insertText: 'quantile_over_time',\n    detail: 'quantile_over_time(phi, series_selector[d])',\n    documentation: 'calculates `phi`-quantile over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The `phi` value must be in the range `[0...1]`. See also `quantiles_over_time`.'\n  },\n  {\n    label: 'quantiles_over_time',\n    insertText: 'quantiles_over_time',\n    detail: 'quantiles_over_time(\"phiLabel\", phi1, ..., phiN, series_selector[d])',\n    documentation: 'calculates `phi*`-quantiles over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). The function returns individual series per each `phi*` with `{phiLabel=\"phi*\"}` label. `phi*` values must be in the range `[0...1]`. See also `quantile_over_time`.'\n  },\n  {\n    label: 'range_over_time',\n    insertText: 'range_over_time',\n    detail: 'range_over_time(series_selector[d])',\n    documentation: 'calculates value range over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). E.g. it calculates `max_over_time(series_selector[d]) - min_over_time(series_selector[d])`. Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'rate',\n    insertText: 'rate',\n    detail: 'rate(series_selector[d])',\n    documentation: 'calculates the average per-second increase rate over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that the `series_selector` returns time series of [counter type](https://docs.victoriametrics.com/keyConcepts.html#counter). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'rate_over_sum',\n    insertText: 'rate_over_sum',\n    detail: 'rate_over_sum(series_selector[d])',\n    documentation: 'calculates per-second rate over the sum of raw samples on the given lookbehind window `d`. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'resets',\n    insertText: 'resets',\n    detail: 'resets(series_selector[d])',\n    documentation: 'returns the number of [counter](https://docs.victoriametrics.com/keyConcepts.html#counter) resets over the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). It is expected that the `series_selector` returns time series of [counter type](https://docs.victoriametrics.com/keyConcepts.html#counter). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'rollup',\n    insertText: 'rollup',\n    detail: 'rollup(series_selector[d])',\n    documentation: 'calculates `min`, `max` and `avg` values for raw samples on the given lookbehind window `d`. These values are calculated individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering).'\n  },\n  {\n    label: 'rollup_candlestick',\n    insertText: 'rollup_candlestick',\n    detail: 'rollup_candlestick(series_selector[d])',\n    documentation: 'calculates `open`, `high`, `low` and `close` values (aka OHLC) over raw samples on the given lookbehind window `d`. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). This function is useful for financial applications.'\n  },\n  {\n    label: 'rollup_delta',\n    insertText: 'rollup_delta',\n    detail: 'rollup_delta(series_selector[d])',\n    documentation: 'calculates differences between adjacent raw samples on the given lookbehind window `d` and returns `min`, `max` and `avg` values for the calculated differences. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'rollup_deriv',\n    insertText: 'rollup_deriv',\n    detail: 'rollup_deriv(series_selector[d])',\n    documentation: 'calculates per-second derivatives for adjacent raw samples on the given lookbehind window `d` and returns `min`, `max` and `avg` values for the calculated per-second derivatives. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'rollup_increase',\n    insertText: 'rollup_increase',\n    detail: 'rollup_increase(series_selector[d])',\n    documentation: 'calculates increases for adjacent raw samples on the given lookbehind window `d` and returns `min`, `max` and `avg` values for the calculated increases. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'rollup_rate',\n    insertText: 'rollup_rate',\n    detail: 'rollup_rate(series_selector[d])',\n    documentation: 'calculates per-second change rates for adjacent raw samples on the given lookbehind window `d` and returns `min`, `max` and `avg` values for the calculated per-second change rates. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'rollup_scrape_interval',\n    insertText: 'rollup_scrape_interval',\n    detail: 'rollup_scrape_interval(series_selector[d])',\n    documentation: 'calculates the interval in seconds between adjacent raw samples on the given lookbehind window `d` and returns `min`, `max` and `avg` values for the calculated interval. The calculations are performed individually per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'scrape_interval',\n    insertText: 'scrape_interval',\n    detail: 'scrape_interval(series_selector[d])',\n    documentation: 'calculates the average interval in seconds between raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'share_gt_over_time',\n    insertText: 'share_gt_over_time',\n    detail: 'share_gt_over_time(series_selector[d], gt)',\n    documentation: 'returns share (in the range `[0...1]`) of raw samples on the given lookbehind window `d`, which are bigger than `gt`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'share_le_over_time',\n    insertText: 'share_le_over_time',\n    detail: 'share_le_over_time(series_selector[d], le)',\n    documentation: 'returns share (in the range `[0...1]`) of raw samples on the given lookbehind window `d`, which are smaller or equal to `le`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'stale_samples_over_time',\n    insertText: 'stale_samples_over_time',\n    detail: 'stale_samples_over_time(series_selector[d])',\n    documentation: 'calculates the number of [staleness markers](https://docs.victoriametrics.com/vmagent.html#prometheus-staleness-markers) on the given lookbehind window `d` per each time series matching the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'stddev_over_time',\n    insertText: 'stddev_over_time',\n    detail: 'stddev_over_time(series_selector[d])',\n    documentation: 'calculates standard deviation over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'stdvar_over_time',\n    insertText: 'stdvar_over_time',\n    detail: 'stdvar_over_time(series_selector[d])',\n    documentation: 'calculates standard variance over raw samples on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'sum_over_time',\n    insertText: 'sum_over_time',\n    detail: 'sum_over_time(series_selector[d])',\n    documentation: 'calculates the sum of raw sample values on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'sum2_over_time',\n    insertText: 'sum2_over_time',\n    detail: 'sum2_over_time(series_selector[d])',\n    documentation: 'calculates the sum of squares for raw sample values on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'timestamp',\n    insertText: 'timestamp',\n    detail: 'timestamp(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the last raw sample on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'timestamp_with_name',\n    insertText: 'timestamp_with_name',\n    detail: 'timestamp_with_name(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the last raw sample on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are preserved in the resulting rollups. See also `timestamp`.'\n  },\n  {\n    label: 'tfirst_over_time',\n    insertText: 'tfirst_over_time',\n    detail: 'tfirst_over_time(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the first raw sample on the given lookbehind window `d` per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'tlast_change_over_time',\n    insertText: 'tlast_change_over_time',\n    detail: 'tlast_change_over_time(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the last change per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering) on the given lookbehind window `d`. Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'tlast_over_time',\n    insertText: 'tlast_over_time',\n    detail: 'tlast_over_time(series_selector[d])',\n    documentation: 'is an alias for `timestamp`.'\n  },\n  {\n    label: 'tmax_over_time',\n    insertText: 'tmax_over_time',\n    detail: 'tmax_over_time(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the raw sample with the maximum value on the given lookbehind window `d`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'tmin_over_time',\n    insertText: 'tmin_over_time',\n    detail: 'tmin_over_time(series_selector[d])',\n    documentation: 'returns the timestamp in seconds for the raw sample with the minimum value on the given lookbehind window `d`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names`.'\n  },\n  {\n    label: 'zscore_over_time',\n    insertText: 'zscore_over_time',\n    detail: 'zscore_over_time(series_selector[d])',\n    documentation: 'calculates returns [z-score](https://en.wikipedia.org/wiki/Standard_score) for raw samples on the given lookbehind window `d`. It is calculated independently per each time series returned from the given [series_selector](https://docs.victoriametrics.com/keyConcepts.html#filtering). Metric names are stripped from the resulting rollups. Add `keep_metric_names` modifier in order to keep metric names.'\n  }\n]\n\nconst TRANSFORM_FUNCTIONS: CompletionItem[] = [\n  {\n    label: 'abs',\n    insertText: 'abs',\n    detail: 'abs(q)',\n    documentation: 'calculates the absolute value for every point of every time series returned by `q`.'\n  },\n  {\n    label: 'absent',\n    insertText: 'absent',\n    detail: 'absent(q)',\n    documentation: 'returns 1 if `q` has no points. Otherwise returns an empty result.'\n  },\n  {\n    label: 'acos',\n    insertText: 'acos',\n    detail: 'acos(q)',\n    documentation: 'returns [inverse cosine](https://en.wikipedia.org/wiki/Inverse_trigonometric_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'acosh',\n    insertText: 'acosh',\n    detail: 'acosh(q)',\n    documentation: 'returns [inverse hyperbolic cosine](https://en.wikipedia.org/wiki/Inverse_hyperbolic_functions#Inverse_hyperbolic_cosine) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'asin',\n    insertText: 'asin',\n    detail: 'asin(q)',\n    documentation: 'returns [inverse sine](https://en.wikipedia.org/wiki/Inverse_trigonometric_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'asinh',\n    insertText: 'asinh',\n    detail: 'asinh(q)',\n    documentation: 'returns [inverse hyperbolic sine](https://en.wikipedia.org/wiki/Inverse_hyperbolic_functions#Inverse_hyperbolic_sine) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'atan',\n    insertText: 'atan',\n    detail: 'atan(q)',\n    documentation: 'returns [inverse tangent](https://en.wikipedia.org/wiki/Inverse_trigonometric_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'atanh',\n    insertText: 'atanh',\n    detail: 'atanh(q)',\n    documentation: 'returns [inverse hyperbolic tangent](https://en.wikipedia.org/wiki/Inverse_hyperbolic_functions#Inverse_hyperbolic_tangent) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'bitmap_and',\n    insertText: 'bitmap_and',\n    detail: 'bitmap_and(q, mask)',\n    documentation: '- calculates bitwise `v & mask` for every `v` point of every time series returned from `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'bitmap_or',\n    insertText: 'bitmap_or',\n    detail: 'bitmap_or(q, mask)',\n    documentation: 'calculates bitwise `v | mask` for every `v` point of every time series returned from `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'bitmap_xor',\n    insertText: 'bitmap_xor',\n    detail: 'bitmap_xor(q, mask)',\n    documentation: 'calculates bitwise `v ^ mask` for every `v` point of every time series returned from `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'buckets_limit',\n    insertText: 'buckets_limit',\n    detail: 'buckets_limit(limit, buckets)',\n    documentation: 'limits the number of [histogram buckets](https://valyala.medium.com/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350) to the given `limit`. See also `prometheus_buckets`.'\n  },\n  {\n    label: 'ceil',\n    insertText: 'ceil',\n    detail: 'ceil(q)',\n    documentation: 'rounds every point for every time series returned by `q` to the upper nearest integer. See also `floor`.'\n  },\n  {\n    label: 'clamp',\n    insertText: 'clamp',\n    detail: 'clamp(q, min, max)',\n    documentation: 'clamps every point for every time series returned by `q` with the given `min` and `max` values. See also `clamp_min`.'\n  },\n  {\n    label: 'clamp_max',\n    insertText: 'clamp_max',\n    detail: 'clamp_max(q, max)',\n    documentation: 'clamps every point for every time series returned by `q` with the given `max` value. See also `clamp`.'\n  },\n  {\n    label: 'clamp_min',\n    insertText: 'clamp_min',\n    detail: 'clamp_min(q, min)',\n    documentation: 'clamps every point for every time series returned by `q` with the given `min` value. See also `clamp`.'\n  },\n  {\n    label: 'cos',\n    insertText: 'cos',\n    detail: 'cos(q)',\n    documentation: 'returns `cos(v)` for every `v` point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'cosh',\n    insertText: 'cosh',\n    detail: 'cosh(q)',\n    documentation: 'returns [hyperbolic cosine](https://en.wikipedia.org/wiki/Hyperbolic_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'day_of_month',\n    insertText: 'day_of_month',\n    detail: 'day_of_month(q)',\n    documentation: 'returns the day of month for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[1...31]`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'day_of_week',\n    insertText: 'day_of_week',\n    detail: 'day_of_week(q)',\n    documentation: 'returns the day of week for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[0...6]`, where `0` means Sunday and `6` means Saturday. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'days_in_month',\n    insertText: 'days_in_month',\n    detail: 'days_in_month(q)',\n    documentation: 'returns the number of days in the month identified by every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[28...31]`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'deg',\n    insertText: 'deg',\n    detail: 'deg(q)',\n    documentation: 'converts [Radians to degrees](https://en.wikipedia.org/wiki/Radian#Conversions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'end',\n    insertText: 'end',\n    detail: 'end()',\n    documentation: 'returns the unix timestamp in seconds for the last point. See also `start`.'\n  },\n  {\n    label: 'exp',\n    insertText: 'exp',\n    detail: 'exp(q)',\n    documentation: 'calculates the `e^v` for every point `v` of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'floor',\n    insertText: 'floor',\n    detail: 'floor(q)',\n    documentation: 'rounds every point for every time series returned by `q` to the lower nearest integer. See also `ceil`.'\n  },\n  {\n    label: 'histogram_avg',\n    insertText: 'histogram_avg',\n    detail: 'histogram_avg(buckets)',\n    documentation: 'calculates the average value for the given `buckets`. It can be used for calculating the average over the given time range across multiple time series. For example, `histogram_avg(sum(histogram_over_time(response_time_duration_seconds[5m])) by (vmrange,job))` would return the average response time per each `job` over the last 5 minutes.'\n  },\n  {\n    label: 'histogram_quantile',\n    insertText: 'histogram_quantile',\n    detail: 'histogram_quantile(phi, buckets)',\n    documentation: 'calculates `phi`-quantile over the given [histogram buckets](https://valyala.medium.com/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350). `phi` must be in the range `[0...1]`. For example, `histogram_quantile(0.5, sum(rate(http_request_duration_seconds_bucket[5m]) by (le))` would return median request duration for all the requests during the last 5 minutes. It accepts optional third arg - `boundsLabel`. In this case it returns `lower` and `upper` bounds for the estimated percentile. See [this issue for details](https://github.com/prometheus/prometheus/issues/5706). This function is supported by PromQL (except of the `boundLabel` arg). See also `histogram_quantiles`.'\n  },\n  {\n    label: 'histogram_quantiles',\n    insertText: 'histogram_quantiles',\n    detail: 'histogram_quantiles(\"phiLabel\", phi1, ..., phiN, buckets)',\n    documentation: 'calculates the given `phi*`-quantiles over the given [histogram buckets](https://valyala.medium.com/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350). Argument `phi*` must be in the range `[0...1]`. For example, `histogram_quantiles(\\'le\\', 0.3, 0.5, sum(rate(http_request_duration_seconds_bucket[5m]) by (le))`. Each calculated quantile is returned in a separate time series with the corresponding `{phiLabel=\"phi*\"}` label. See also `histogram_quantile`.'\n  },\n  {\n    label: 'histogram_share',\n    insertText: 'histogram_share',\n    detail: 'histogram_share(le, buckets)',\n    documentation: 'calculates the share (in the range `[0...1]`) for `buckets` that fall below `le`. Useful for calculating SLI and SLO. This is inverse to `histogram_quantile`.'\n  },\n  {\n    label: 'histogram_stddev',\n    insertText: 'histogram_stddev',\n    detail: 'histogram_stddev(buckets)',\n    documentation: 'calculates standard deviation for the given `buckets`.'\n  },\n  {\n    label: 'histogram_stdvar',\n    insertText: 'histogram_stdvar',\n    detail: 'histogram_stdvar(buckets)',\n    documentation: 'calculates standard variance for the given `buckets`. It can be used for calculating standard deviation over the given time range across multiple time series. For example, `histogram_stdvar(sum(histogram_over_time(temperature[24])) by (vmrange,country))` would return standard deviation for the temperature per each country over the last 24 hours.'\n  },\n  {\n    label: 'hour',\n    insertText: 'hour',\n    detail: 'hour(q)',\n    documentation: 'returns the hour for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[0...23]`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'interpolate',\n    insertText: 'interpolate',\n    detail: 'interpolate(q)',\n    documentation: 'fills gaps with linearly interpolated values calculated from the last and the next non-empty points per each time series returned by `q`. See also `keep_last_value`.'\n  },\n  {\n    label: 'keep_last_value',\n    insertText: 'keep_last_value',\n    detail: 'keep_last_value(q)',\n    documentation: 'fills gaps with the value of the last non-empty point in every time series returned by `q`. See also `keep_next_value`.'\n  },\n  {\n    label: 'keep_next_value',\n    insertText: 'keep_next_value',\n    detail: 'keep_next_value(q)',\n    documentation: 'fills gaps with the value of the next non-empty point in every time series returned by `q`. See also `keep_last_value`.'\n  },\n  {\n    label: 'limit_offset',\n    insertText: 'limit_offset',\n    detail: 'limit_offset(limit, offset, q)',\n    documentation: 'skips `offset` time series from series returned by `q` and then returns up to `limit` of the remaining time series per each group. This allows implementing simple paging for `q` time series. See also `limitk`.'\n  },\n  {\n    label: 'ln',\n    insertText: 'ln',\n    detail: 'ln(q)',\n    documentation: 'calculates `ln(v)` for every point `v` of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'log2',\n    insertText: 'log2',\n    detail: 'log2(q)',\n    documentation: 'calculates `log2(v)` for every point `v` of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'log10',\n    insertText: 'log10',\n    detail: 'log10(q)',\n    documentation: 'calculates `log10(v)` for every point `v` of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'minute',\n    insertText: 'minute',\n    detail: 'minute(q)',\n    documentation: 'returns the minute for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[0...59]`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'month',\n    insertText: 'month',\n    detail: 'month(q)',\n    documentation: 'returns the month for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. The returned values are in the range `[1...12]`, where `1` means January and `12` means December. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'now',\n    insertText: 'now',\n    detail: 'now()',\n    documentation: 'returns the current timestamp as a floating-point value in seconds. See also `time`.'\n  },\n  {\n    label: 'pi',\n    insertText: 'pi',\n    detail: 'pi()',\n    documentation: 'returns [Pi number](https://en.wikipedia.org/wiki/Pi).'\n  },\n  {\n    label: 'rad',\n    insertText: 'rad',\n    detail: 'rad(q)',\n    documentation: 'converts [degrees to Radians](https://en.wikipedia.org/wiki/Radian#Conversions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'prometheus_buckets',\n    insertText: 'prometheus_buckets',\n    detail: 'prometheus_buckets(buckets)',\n    documentation: 'converts [VictoriaMetrics histogram buckets](https://valyala.medium.com/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350) with `vmrange` labels to Prometheus histogram buckets with `le` labels. This may be useful for building heatmaps in Grafana. See also `histogram_quantile`.'\n  },\n  {\n    label: 'rand',\n    insertText: 'rand',\n    detail: 'rand(seed)',\n    documentation: 'returns pseudo-random numbers on the range `[0...1]` with even distribution. Optional `seed` can be used as a seed for pseudo-random number generator. See also `rand_normal`.'\n  },\n  {\n    label: 'rand_exponential',\n    insertText: 'rand_exponential',\n    detail: 'rand_exponential(seed)',\n    documentation: 'returns pseudo-random numbers with [exponential distribution](https://en.wikipedia.org/wiki/Exponential_distribution). Optional `seed` can be used as a seed for pseudo-random number generator. See also `rand`.'\n  },\n  {\n    label: 'rand_normal',\n    insertText: 'rand_normal',\n    detail: 'rand_normal(seed)',\n    documentation: 'returns pseudo-random numbers with [normal distribution](https://en.wikipedia.org/wiki/Normal_distribution). Optional `seed` can be used as a seed for pseudo-random number generator. See also `rand`.'\n  },\n  {\n    label: 'range_avg',\n    insertText: 'range_avg',\n    detail: 'range_avg(q)',\n    documentation: 'calculates the avg value across points per each time series returned by `q`.'\n  },\n  {\n    label: 'range_first',\n    insertText: 'range_first',\n    detail: 'range_first(q)',\n    documentation: 'returns the value for the first point per each time series returned by `q`.'\n  },\n  {\n    label: 'range_last',\n    insertText: 'range_last',\n    detail: 'range_last(q)',\n    documentation: 'returns the value for the last point per each time series returned by `q`.'\n  },\n  {\n    label: 'range_max',\n    insertText: 'range_max',\n    detail: 'range_max(q)',\n    documentation: 'calculates the max value across points per each time series returned by `q`.'\n  },\n  {\n    label: 'range_median',\n    insertText: 'range_median',\n    detail: 'range_median(q)',\n    documentation: 'calculates the median value across points per each time series returned by `q`.'\n  },\n  {\n    label: 'range_min',\n    insertText: 'range_min',\n    detail: 'range_min(q)',\n    documentation: 'calculates the min value across points per each time series returned by `q`.'\n  },\n  {\n    label: 'range_quantile',\n    insertText: 'range_quantile',\n    detail: 'range_quantile(phi, q)',\n    documentation: 'returns `phi`-quantile across points per each time series returned by `q`. `phi` must be in the range `[0...1]`.'\n  },\n  {\n    label: 'range_sum',\n    insertText: 'range_sum',\n    detail: 'range_sum(q)',\n    documentation: 'calculates the sum of points per each time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'remove_resets',\n    insertText: 'remove_resets',\n    detail: 'remove_resets(q)',\n    documentation: 'removes counter resets from time series returned by `q`.'\n  },\n  {\n    label: 'round',\n    insertText: 'round',\n    detail: 'round(q, nearest)',\n    documentation: 'round every point of every time series returned by `q` to the `nearest` multiple. If `nearest` is missing then the rounding is performed to the nearest integer. See also `floor`.'\n  },\n  {\n    label: 'ru',\n    insertText: 'ru',\n    detail: 'ru(free, max)',\n    documentation: 'calculates resource utilization in the range `[0%...100%]` for the given `free` and `max` resources. For instance, `ru(node_memory_MemFree_bytes, node_memory_MemTotal_bytes)` returns memory utilization over [node_exporter](https://github.com/prometheus/node_exporter) metrics.'\n  },\n  {\n    label: 'running_avg',\n    insertText: 'running_avg',\n    detail: 'running_avg(q)',\n    documentation: 'calculates the running avg per each time series returned by `q`.'\n  },\n  {\n    label: 'running_max',\n    insertText: 'running_max',\n    detail: 'running_max(q)',\n    documentation: 'calculates the running max per each time series returned by `q`.'\n  },\n  {\n    label: 'running_min',\n    insertText: 'running_min',\n    detail: 'running_min(q)',\n    documentation: 'calculates the running min per each time series returned by `q`.'\n  },\n  {\n    label: 'running_sum',\n    insertText: 'running_sum',\n    detail: 'running_sum(q)',\n    documentation: 'calculates the running sum per each time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'scalar',\n    insertText: 'scalar',\n    detail: 'scalar(q)',\n    documentation: 'returns `q` if `q` contains only a single time series. Otherwise it returns nothing.'\n  },\n  {\n    label: 'sgn',\n    insertText: 'sgn',\n    detail: 'sgn(q)',\n    documentation: 'returns `1` if `v>0`, `-1` if `v<0` and `0` if `v==0` for every point `v` of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'sin',\n    insertText: 'sin',\n    detail: 'sin(q)',\n    documentation: 'returns `sin(v)` for every `v` point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'sinh',\n    insertText: 'sinh',\n    detail: 'sinh(q)',\n    documentation: 'returns [hyperbolic sine](https://en.wikipedia.org/wiki/Hyperbolic_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'tan',\n    insertText: 'tan',\n    detail: 'tan(q)',\n    documentation: 'returns `tan(v)` for every `v` point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'tanh',\n    insertText: 'tanh',\n    detail: 'tanh(q)',\n    documentation: 'returns [hyperbolic tangent](https://en.wikipedia.org/wiki/Hyperbolic_functions) for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names`.'\n  },\n  {\n    label: 'smooth_exponential',\n    insertText: 'smooth_exponential',\n    detail: 'smooth_exponential(q, sf)',\n    documentation: 'smooths points per each time series returned by `q` using [exponential moving average](https://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average) with the given smooth factor `sf`.'\n  },\n  {\n    label: 'sort',\n    insertText: 'sort',\n    detail: 'sort(q)',\n    documentation: 'sorts series in ascending order by the last point in every time series returned by `q`. See also `sort_desc`.'\n  },\n  {\n    label: 'sort_by_label',\n    insertText: 'sort_by_label',\n    detail: 'sort_by_label(q, label1, ... labelN)',\n    documentation: 'sorts series in ascending order by the given set of labels. For example, `sort_by_label(foo, \"bar\")` would sort `foo` series by values of the label `bar` in these series. See also `sort_by_label_desc`.'\n  },\n  {\n    label: 'sort_by_label_desc',\n    insertText: 'sort_by_label_desc',\n    detail: 'sort_by_label_desc(q, label1, ... labelN)',\n    documentation: 'sorts series in descending order by the given set of labels. For example, `sort_by_label(foo, \"bar\")` would sort `foo` series by values of the label `bar` in these series. See also `sort_by_label`.'\n  },\n  {\n    label: 'sort_by_label_numeric',\n    insertText: 'sort_by_label_numeric',\n    detail: 'sort_by_label_numeric(q, label1, ... labelN)',\n    documentation: 'sorts series in ascending order by the given set of labels using [numeric sort](https://www.gnu.org/software/coreutils/manual/html_node/Version-sort-is-not-the-same-as-numeric-sort.html). For example, if `foo` series have `bar` label with values `1`, `101`, `15` and `2`, then `sort_by_label_numeric(foo, \"bar\")` would return series in the following order of `bar` label values: `1`, `2`, `15` and `101`.'\n  },\n  {\n    label: 'sort_by_label_numeric_desc',\n    insertText: 'sort_by_label_numeric_desc',\n    detail: 'sort_by_label_numeric_desc(q, label1, ... labelN)',\n    documentation: 'sorts series in descending order by the given set of labels using [numeric sort](https://www.gnu.org/software/coreutils/manual/html_node/Version-sort-is-not-the-same-as-numeric-sort.html). For example, if `foo` series have `bar` label with values `1`, `101`, `15` and `2`, then `sort_by_label_numeric(foo, \"bar\")` would return series in the following order of `bar` label values: `101`, `15`, `2` and `1`.'\n  },\n  {\n    label: 'sort_desc',\n    insertText: 'sort_desc',\n    detail: 'sort_desc(q)',\n    documentation: 'sorts series in descending order by the last point in every time series returned by `q`. See also `sort`.'\n  },\n  {\n    label: 'sqrt',\n    insertText: 'sqrt',\n    detail: 'sqrt(q)',\n    documentation: 'calculates square root for every point of every time series returned by `q`. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  },\n  {\n    label: 'start',\n    insertText: 'start',\n    detail: 'start()',\n    documentation: 'returns unix timestamp in seconds for the first point. See also `end`.'\n  },\n  {\n    label: 'step',\n    insertText: 'step',\n    detail: 'step()',\n    documentation: 'returns the step in seconds (aka interval) between the returned points. It is known as `step` query arg passed to [/api/v1/query_range](https://docs.victoriametrics.com/keyConcepts.html#range-query).'\n  },\n  {\n    label: 'time',\n    insertText: 'time',\n    detail: 'time()',\n    documentation: 'returns unix timestamp for every returned point.'\n  },\n  {\n    label: 'timezone_offset',\n    insertText: 'timezone_offset',\n    detail: 'timezone_offset(tz)',\n    documentation: 'returns offset in seconds for the given timezone `tz` relative to UTC. This can be useful when combining with datetime-related functions. For example, `day_of_week(time()+timezone_offset(\"America/Los_Angeles\"))` would return weekdays for `America/Los_Angeles` time zone. Special `Local` time zone can be used for returning an offset for the time zone set on the host where VictoriaMetrics runs. See [the list of supported timezones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones).'\n  },\n  {\n    label: 'ttf',\n    insertText: 'ttf',\n    detail: 'ttf(free)',\n    documentation: 'estimates the time in seconds needed to exhaust `free` resources. For instance, `ttf(node_filesystem_avail_byte)` returns the time to storage space exhaustion. This function may be useful for capacity planning.'\n  },\n  {\n    label: 'union',\n    insertText: 'union',\n    detail: 'union(q1, ..., qN)',\n    documentation: 'returns a union of time series returned from `q1`, ..., `qN`. The `union` function name can be skipped - the following queries are equivalent: `union(q1, q2)` and `(q1, q2)`. It is expected that each `q*` query returns time series with unique sets of labels. Otherwise only the first time series out of series with identical set of labels is returned. Use `alias` functions for giving unique labelsets per each `q*` query:'\n  },\n  {\n    label: 'vector',\n    insertText: 'vector',\n    detail: 'vector(q)',\n    documentation: 'returns `q`, e.g. it does nothing in MetricsQL.'\n  },\n  {\n    label: 'year',\n    insertText: 'year',\n    detail: 'year(q)',\n    documentation: 'returns the year for every point of every time series returned by `q`. It is expected that `q` returns unix timestamps. Metric names are stripped from the resulting series. Add `keep_metric_names` modifier in order to keep metric names.'\n  }\n]\n\nconst MANIPULATION_FUNCTIONS: CompletionItem[] = [\n  {\n    label: 'alias',\n    insertText: 'alias',\n    detail: 'alias(q, \"name\")',\n    documentation: 'sets the given `name` to all the time series returned by `q`. For example, `alias(up, \"foobar\")` would rename `up` series to `foobar` series.'\n  },\n  {\n    label: 'drop_common_labels',\n    insertText: 'drop_common_labels',\n    detail: 'drop_common_labels(q1, ...., qN)',\n    documentation: 'drops common `label=\"value\"` pairs among time series returned from `q1, ..., qN`.'\n  },\n  {\n    label: 'label_copy',\n    insertText: 'label_copy',\n    detail: 'label_copy(q, \"src_label1\", \"dst_label1\", ..., \"src_labelN\", \"dst_labelN\")',\n    documentation: 'copies label values from `src_label*` to `dst_label*` for all the time series returned by `q`. If `src_label` is empty, then the corresponding `dst_label` is left untouched.'\n  },\n  {\n    label: 'label_del',\n    insertText: 'label_del',\n    detail: 'label_del(q, \"label1\", ..., \"labelN\")',\n    documentation: 'deletes the given `label*` labels from all the time series returned by `q`.'\n  },\n  {\n    label: 'label_graphite_group',\n    insertText: 'label_graphite_group',\n    detail: 'label_graphite_group(q, groupNum1, ... groupNumN)',\n    documentation: 'replaces metric names returned from `q` with the given Graphite group values concatenated via `.` char. For example, `label_graphite_group({__graphite__=\"foo*.bar.*\"}, 0, 2)` would substitute `foo<any_value>.bar.<other_value>` metric names with `foo<any_value>.<other_value>`. This function is useful for aggregating Graphite metrics with `aggregate functions`. For example, the following query would return per-app memory usage:'\n  },\n  {\n    label: 'label_join',\n    insertText: 'label_join',\n    detail: 'label_join(q, \"dst_label\", \"separator\", \"src_label1\", ..., \"src_labelN\")',\n    documentation: 'joins `src_label*` values with the given `separator` and stores the result in `dst_label`. This is performed individually per each time series returned by `q`. For example, `label_join(up{instance=\"xxx\",job=\"yyy\"}, \"foo\", \"-\", \"instance\", \"job\")` would store `xxx-yyy` label value into `foo` label.'\n  },\n  {\n    label: 'label_keep',\n    insertText: 'label_keep',\n    detail: 'label_keep(q, \"label1\", ..., \"labelN\")',\n    documentation: 'deletes all the labels except of the listed `label*` labels in all the time series returned by `q`.'\n  },\n  {\n    label: 'label_lowercase',\n    insertText: 'label_lowercase',\n    detail: 'label_lowercase(q, \"label1\", ..., \"labelN\")',\n    documentation: 'lowercases values for the given `label*` labels in all the time series returned by `q`.'\n  },\n  {\n    label: 'label_map',\n    insertText: 'label_map',\n    detail: 'label_map(q, \"label\", \"src_value1\", \"dst_value1\", ..., \"src_valueN\", \"dst_valueN\")',\n    documentation: 'maps `label` values from `src_*` to `dst*` for all the time series returned by `q`.'\n  },\n  {\n    label: 'label_match',\n    insertText: 'label_match',\n    detail: 'label_match(q, \"label\", \"regexp\")',\n    documentation: 'drops time series from `q` with `label` not matching the given `regexp`. This function can be useful after `rollup`.'\n  },\n  {\n    label: 'label_mismatch',\n    insertText: 'label_mismatch',\n    detail: 'label_mismatch(q, \"label\", \"regexp\")',\n    documentation: 'drops time series from `q` with `label` matching the given `regexp`. This function can be useful after `rollup`.'\n  },\n  {\n    label: 'label_move',\n    insertText: 'label_move',\n    detail: 'label_move(q, \"src_label1\", \"dst_label1\", ..., \"src_labelN\", \"dst_labelN\")',\n    documentation: 'moves label values from `src_label*` to `dst_label*` for all the time series returned by `q`. If `src_label` is empty, then the corresponding `dst_label` is left untouched.'\n  },\n  {\n    label: 'label_replace',\n    insertText: 'label_replace',\n    detail: 'label_replace(q, \"dst_label\", \"replacement\", \"src_label\", \"regex\")',\n    documentation: 'applies the given `regex` to `src_label` and stores the `replacement` in `dst_label` if the given `regex` matches `src_label`. The `replacement` may contain references to regex captures such as `$1`, `$2`, etc. These references are substituted by the corresponding regex captures. For example, `label_replace(up{job=\"node-exporter\"}, \"foo\", \"bar-$1\", \"job\", \"node-(.+)\")` would store `bar-exporter` label value into `foo` label.'\n  },\n  {\n    label: 'label_set',\n    insertText: 'label_set',\n    detail: 'label_set(q, \"label1\", \"value1\", ..., \"labelN\", \"valueN\")',\n    documentation: 'sets `{label1=\"value1\", ..., labelN=\"valueN\"}` labels to all the time series returned by `q`.'\n  },\n  {\n    label: 'label_transform',\n    insertText: 'label_transform',\n    detail: 'label_transform(q, \"label\", \"regexp\", \"replacement\")',\n    documentation: 'substitutes all the `regexp` occurrences by the given `replacement` in the given `label`.'\n  },\n  {\n    label: 'label_uppercase',\n    insertText: 'label_uppercase',\n    detail: 'label_uppercase(q, \"label1\", ..., \"labelN\")',\n    documentation: 'uppercases values for the given `label*` labels in all the time series returned by `q`.'\n  },\n  {\n    label: 'label_value',\n    insertText: 'label_value',\n    detail: 'label_value(q, \"label\")',\n    documentation: 'returns number values for the given `label` for every time series returned by `q`. For example, if `label_value(foo, \"bar\")` is applied to `foo{bar=\"1.234\"}`, then it will return a time series `foo{bar=\"1.234\"}` with `1.234` value.'\n  }\n]\n\nconst AGGREGATE_FUNCTIONS: CompletionItem[] = [\n  {\n    label: 'any',\n    insertText: 'any',\n    detail: 'any(q) by (group_labels)',\n    documentation: 'returns a single series per `group_labels` out of time series returned by `q`. See also `group`.'\n  },\n  {\n    label: 'avg',\n    insertText: 'avg',\n    detail: 'avg(q) by (group_labels)',\n    documentation: 'returns the average value per `group_labels` for time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'bottomk',\n    insertText: 'bottomk',\n    detail: 'bottomk(k, q)',\n    documentation: 'returns up to `k` points with the smallest values across all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp. See also `topk`.'\n  },\n  {\n    label: 'bottomk_avg',\n    insertText: 'bottomk_avg',\n    detail: 'bottomk_avg(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the smallest averages. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `bottomk_avg(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the smallest averages plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `topk_avg`.'\n  },\n  {\n    label: 'bottomk_last',\n    insertText: 'bottomk_last',\n    detail: 'bottomk_last(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the smallest last values. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `bottomk_max(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the smallest maximums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `topk_last`.'\n  },\n  {\n    label: 'bottomk_max',\n    insertText: 'bottomk_max',\n    detail: 'bottomk_max(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the smallest maximums. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `bottomk_max(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the smallest maximums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `topk_max`.'\n  },\n  {\n    label: 'bottomk_median',\n    insertText: 'bottomk_median',\n    detail: 'bottomk_median(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q with the smallest medians. If an optional`other_label=other_value`arg is set, then the sum of the remaining time series is returned with the given label. For example,`bottomk_median(3, sum(process_resident_memory_bytes) by (job), \"job=other\")`would return up to 3 time series with the smallest medians plus a time series with`{job=\"other\"}\\\\` label with the sum of the remaining series if any. See also `topk_median`.'\n  },\n  {\n    label: 'bottomk_min',\n    insertText: 'bottomk_min',\n    detail: 'bottomk_min(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the smallest minimums. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `bottomk_min(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the smallest minimums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `topk_min`.'\n  },\n  {\n    label: 'count',\n    insertText: 'count',\n    detail: 'count(q) by (group_labels)',\n    documentation: 'returns the number of non-empty points per `group_labels` for time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'count_values',\n    insertText: 'count_values',\n    detail: 'count_values(\"label\", q)',\n    documentation: 'counts the number of points with the same value and stores the counts in a time series with an additional `label`, which contains each initial value. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'distinct',\n    insertText: 'distinct',\n    detail: 'distinct(q)',\n    documentation: 'calculates the number of unique values per each group of points with the same timestamp.'\n  },\n  {\n    label: 'geomean',\n    insertText: 'geomean',\n    detail: 'geomean(q)',\n    documentation: 'calculates geometric mean per each group of points with the same timestamp.'\n  },\n  {\n    label: 'group',\n    insertText: 'group',\n    detail: 'group(q) by (group_labels)',\n    documentation: 'returns `1` per each `group_labels` for time series returned by `q`. See also `any`.'\n  },\n  {\n    label: 'histogram',\n    insertText: 'histogram',\n    detail: 'histogram(q)',\n    documentation: 'calculates [VictoriaMetrics histogram](https://valyala.medium.com/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350) per each group of points with the same timestamp. Useful for visualizing big number of time series via a heatmap. See [this article](https://medium.com/@valyala/improving-histogram-usability-for-prometheus-and-grafana-bc7e5df0e350) for more details.'\n  },\n  {\n    label: 'limitk',\n    insertText: 'limitk',\n    detail: 'limitk(k, q) by (group_labels)',\n    documentation: 'returns up to `k` time series per each `group_labels` out of time series returned by `q`. The returned set of time series remain the same across calls. See also `limit_offset`.'\n  },\n  {\n    label: 'mad',\n    insertText: 'mad',\n    detail: 'mad(q) by (group_labels)',\n    documentation: 'returns the [Median absolute deviation](https://en.wikipedia.org/wiki/Median_absolute_deviation) per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp. See also `outliers_mad`.'\n  },\n  {\n    label: 'max',\n    insertText: 'max',\n    detail: 'max(q) by (group_labels)',\n    documentation: 'returns the maximum value per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'median',\n    insertText: 'median',\n    detail: 'median(q) by (group_labels)',\n    documentation: 'returns the median value per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'min',\n    insertText: 'min',\n    detail: 'min(q) by (group_labels)',\n    documentation: 'returns the minimum value per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'mode',\n    insertText: 'mode',\n    detail: 'mode(q) by (group_labels)',\n    documentation: 'returns [mode](https://en.wikipedia.org/wiki/Mode_(statistics)) per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'outliers_mad',\n    insertText: 'outliers_mad',\n    detail: 'outliers_mad(tolerance, q)',\n    documentation: 'returns time series from `q` with at least a single point outside [Median absolute deviation](https://en.wikipedia.org/wiki/Median_absolute_deviation) (aka MAD) multiplied by `tolerance`. E.g. it returns time series with at least a single point below `median(q) - mad(q)` or a single point above `median(q) + mad(q)`. See also `outliersk`.'\n  },\n  {\n    label: 'outliersk',\n    insertText: 'outliersk',\n    detail: 'outliersk(k, q)',\n    documentation: 'returns up to `k` time series with the biggest standard deviation (aka outliers) out of time series returned by `q`. See also `outliers_mad`.'\n  },\n  {\n    label: 'quantile',\n    insertText: 'quantile',\n    detail: 'quantile(phi, q) by (group_labels)',\n    documentation: 'calculates `phi`-quantile per each `group_labels` for all the time series returned by `q`. `phi` must be in the range `[0...1]`. The aggregate is calculated individually per each group of points with the same timestamp. See also `quantiles`.'\n  },\n  {\n    label: 'quantiles',\n    insertText: 'quantiles',\n    detail: 'quantiles(\"phiLabel\", phi1, ..., phiN, q)',\n    documentation: 'calculates `phi*`-quantiles for all the time series returned by `q` and return them in time series with `{phiLabel=\"phi*\"}` label. `phi*` must be in the range `[0...1]`. The aggregate is calculated individually per each group of points with the same timestamp. See also `quantile`.'\n  },\n  {\n    label: 'stddev',\n    insertText: 'stddev',\n    detail: 'stddev(q) by (group_labels)',\n    documentation: 'calculates standard deviation per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'stdvar',\n    insertText: 'stdvar',\n    detail: 'stdvar(q) by (group_labels)',\n    documentation: 'calculates standard variance per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'sum',\n    insertText: 'sum',\n    detail: 'sum(q) by (group_labels)',\n    documentation: 'returns the sum per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'sum2',\n    insertText: 'sum2',\n    detail: 'sum2(q) by (group_labels)',\n    documentation: 'calculates the sum of squares per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp.'\n  },\n  {\n    label: 'topk',\n    insertText: 'topk',\n    detail: 'topk(k, q)',\n    documentation: 'returns up to `k` points with the biggest values across all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp. See also `bottomk`.'\n  },\n  {\n    label: 'topk_avg',\n    insertText: 'topk_avg',\n    detail: 'topk_avg(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the biggest averages. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `topk_avg(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the biggest averages plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `bottomk_avg`.'\n  },\n  {\n    label: 'topk_last',\n    insertText: 'topk_last',\n    detail: 'topk_last(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the biggest last values. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `topk_max(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the biggest maximums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `bottomk_last`.'\n  },\n  {\n    label: 'topk_max',\n    insertText: 'topk_max',\n    detail: 'topk_max(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the biggest maximums. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `topk_max(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the biggest maximums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `bottomk_max`.'\n  },\n  {\n    label: 'topk_median',\n    insertText: 'topk_median',\n    detail: 'topk_median(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the biggest medians. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `topk_median(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the biggest medians plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `bottomk_median`.'\n  },\n  {\n    label: 'topk_min',\n    insertText: 'topk_min',\n    detail: 'topk_min(k, q, \"other_label=other_value\")',\n    documentation: 'returns up to `k` time series from `q` with the biggest minimums. If an optional `other_label=other_value` arg is set, then the sum of the remaining time series is returned with the given label. For example, `topk_min(3, sum(process_resident_memory_bytes) by (job), \"job=other\")` would return up to 3 time series with the biggest minimums plus a time series with `{job=\"other\"}` label with the sum of the remaining series if any. See also `bottomk_min`.'\n  },\n  {\n    label: 'zscore',\n    insertText: 'zscore',\n    detail: 'zscore(q) by (group_labels)',\n    documentation: 'returns [z-score](https://en.wikipedia.org/wiki/Standard_score) values per each `group_labels` for all the time series returned by `q`. The aggregate is calculated individually per each group of points with the same timestamp. Useful for detecting anomalies in the group of related time series.'\n  }\n]\n\nexport const FUNCTIONS = [\n  ...ROLLUP_FUNCTIONS,\n  ...TRANSFORM_FUNCTIONS,\n  ...MANIPULATION_FUNCTIONS,\n  ...AGGREGATE_FUNCTIONS,\n  {\n    insertText: 'count_scalar',\n    label: 'count_scalar',\n    detail: 'count_scalar(v instant-vector)',\n    documentation:\n      'Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause.',\n  }\n];\n\nexport const metricsqlGrammar: Grammar = {\n  comment: {\n    pattern: /#.*/,\n  },\n  'context-aggregation': {\n    pattern: /((by|without)\\s*)\\([^)]*\\)/, // by ()\n    lookbehind: true,\n    inside: {\n      'label-key': {\n        pattern: /[^(),\\s][^,)]*[^),\\s]*/,\n        alias: 'attr-name',\n      },\n      punctuation: /[()]/,\n    },\n  },\n  'context-labels': {\n    pattern: /\\{[^}]*(?=}?)/,\n    greedy: true,\n    inside: {\n      comment: {\n        pattern: /#.*/,\n      },\n      'label-key': {\n        pattern: /[a-z_]\\w*(?=\\s*(=|!=|=~|!~))/,\n        alias: 'attr-name',\n        greedy: true,\n      },\n      'label-value': {\n        pattern: /\"(?:\\\\.|[^\\\\\"])*\"/,\n        greedy: true,\n        alias: 'attr-value',\n      },\n      punctuation: /[{]/,\n    },\n  },\n  function: new RegExp(`\\\\b(?:${FUNCTIONS.map((f) => f.label).join('|')})(?=\\\\s*\\\\()`, 'i'),\n  'context-range': [\n    {\n      pattern: /\\[[^\\]]*(?=])/, // [1m]\n      inside: {\n        'range-duration': {\n          pattern: /\\b\\d+[smhdwy]\\b/i,\n          alias: 'number',\n        },\n      },\n    },\n    {\n      pattern: /(offset\\s+)\\w+/, // offset 1m\n      lookbehind: true,\n      inside: {\n        'range-duration': {\n          pattern: /\\b\\d+[smhdwy]\\b/i,\n          alias: 'number',\n        },\n      },\n    },\n  ],\n  idList: {\n    pattern: /\\d+(\\|\\d+)+/,\n    alias: 'number',\n  },\n  number: /\\b-?\\d+((\\.\\d*)?([eE][+-]?\\d+)?)?\\b/,\n  operator: new RegExp(`/[-+*/=%^~]|&&?|\\\\|?\\\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\\\b(?:${OPERATORS.join('|')})\\\\b`, 'i'),\n  punctuation: /[{};()`,.]/,\n};\n\nexport default metricsqlGrammar;\n","import { VisualQueryBinary } from './shared/LokiAndPromQueryModellerBase';\nimport { QueryBuilderLabelFilter, QueryBuilderOperation } from './shared/types';\n\n/**\n * Visual query model\n */\nexport interface PromVisualQuery {\n  metric: string;\n  labels: QueryBuilderLabelFilter[];\n  operations: QueryBuilderOperation[];\n  binaryQueries?: PromVisualQueryBinary[];\n}\n\nexport type PromVisualQueryBinary = VisualQueryBinary<PromVisualQuery>;\n\nexport enum PromVisualQueryOperationCategory {\n  Aggregations = 'Aggregations',\n  RangeFunctions = 'Range functions',\n  Functions = 'Functions',\n  BinaryOps = 'Binary operations',\n  Trigonometric = 'Trigonometric',\n  Time = 'Time Functions',\n}\n\nexport enum PromOperationId {\n  Abs = 'abs',\n  Absent = 'absent',\n  AbsentOverTime = 'absent_over_time',\n  Acos = 'acos',\n  Acosh = 'acosh',\n  Asin = 'asin',\n  Asinh = 'asinh',\n  Atan = 'atan',\n  Atanh = 'atanh',\n  Avg = 'avg',\n  AvgOverTime = 'avg_over_time',\n  BottomK = 'bottomk',\n  Ceil = 'ceil',\n  Changes = 'changes',\n  Clamp = 'clamp',\n  ClampMax = 'clamp_max',\n  ClampMin = 'clamp_min',\n  Cos = 'cos',\n  Cosh = 'cosh',\n  Count = 'count',\n  CountOverTime = 'count_over_time',\n  CountScalar = 'count_scalar',\n  CountValues = 'count_values',\n  DayOfMonth = 'day_of_month',\n  DayOfWeek = 'day_of_week',\n  DaysInMonth = 'days_in_month',\n  Deg = 'deg',\n  Delta = 'delta',\n  Deriv = 'deriv',\n  DropCommonLabels = 'drop_common_labels',\n  Exp = 'exp',\n  Floor = 'floor',\n  Group = 'group',\n  HistogramQuantile = 'histogram_quantile',\n  HoltWinters = 'holt_winters',\n  Hour = 'hour',\n  Idelta = 'idelta',\n  Increase = 'increase',\n  Irate = 'irate',\n  LabelJoin = 'label_join',\n  LabelReplace = 'label_replace',\n  Last = 'last',\n  LastOverTime = 'last_over_time',\n  Ln = 'ln',\n  Log10 = 'log10',\n  Log2 = 'log2',\n  Max = 'max',\n  MaxOverTime = 'max_over_time',\n  Min = 'min',\n  MinOverTime = 'min_over_time',\n  Minute = 'minute',\n  Month = 'month',\n  Pi = 'pi',\n  PredictLinear = 'predict_linear',\n  Present = 'present',\n  PresentOverTime = 'present_over_time',\n  Quantile = 'quantile',\n  QuantileOverTime = 'quantile_over_time',\n  Rad = 'rad',\n  Rate = 'rate',\n  Resets = 'resets',\n  Round = 'round',\n  Scalar = 'scalar',\n  Sgn = 'sgn',\n  Sin = 'sin',\n  Sinh = 'sinh',\n  Sort = 'sort',\n  SortDesc = 'sort_desc',\n  Sqrt = 'sqrt',\n  Stddev = 'stddev',\n  StddevOverTime = 'stddev_over_time',\n  Sum = 'sum',\n  SumOverTime = 'sum_over_time',\n  Tan = 'tan',\n  Tanh = 'tanh',\n  Time = 'time',\n  Timestamp = 'timestamp',\n  TopK = 'topk',\n  Vector = 'vector',\n  Year = 'year',\n  // Binary ops\n  Addition = '__addition',\n  Subtraction = '__subtraction',\n  MultiplyBy = '__multiply_by',\n  DivideBy = '__divide_by',\n  Modulo = '__modulo',\n  Exponent = '__exponent',\n  NestedQuery = '__nested_query',\n  EqualTo = '__equal_to',\n  NotEqualTo = '__not_equal_to',\n  GreaterThan = '__greater_than',\n  LessThan = '__less_than',\n  GreaterOrEqual = '__greater_or_equal',\n  LessOrEqual = '__less_or_equal',\n}\n\nexport interface PromQueryPattern {\n  name: string;\n  operations: QueryBuilderOperation[];\n}\n","import React, { useState } from 'react';\n\nimport { DataSourceApi, SelectableValue, toOption } from '@grafana/data';\nimport { Select } from '@grafana/ui';\n\nimport { promQueryModeller } from '../PromQueryModeller';\nimport { getOperationParamId } from '../shared/operationUtils';\nimport { QueryBuilderLabelFilter, QueryBuilderOperationParamEditorProps } from '../shared/types';\nimport { PromVisualQuery } from '../types';\n\nexport function LabelParamEditor({\n  onChange,\n  index,\n  operationIndex,\n  value,\n  query,\n  datasource,\n}: QueryBuilderOperationParamEditorProps) {\n  const [state, setState] = useState<{\n    options?: Array<SelectableValue<any>>;\n    isLoading?: boolean;\n  }>({});\n\n  return (\n    <Select\n      inputId={getOperationParamId(operationIndex, index)}\n      autoFocus={value === '' ? true : undefined}\n      openMenuOnFocus\n      onOpenMenu={async () => {\n        setState({ isLoading: true });\n        const options = await loadGroupByLabels(query, datasource);\n        setState({ options, isLoading: undefined });\n      }}\n      isLoading={state.isLoading}\n      allowCustomValue\n      noOptionsMessage=\"No labels found\"\n      loadingMessage=\"Loading labels\"\n      options={state.options}\n      value={toOption(value as string)}\n      onChange={(value) => onChange(index, value.value!)}\n    />\n  );\n}\n\nasync function loadGroupByLabels(\n  query: PromVisualQuery,\n  datasource: DataSourceApi\n): Promise<Array<SelectableValue<any>>> {\n  let labels: QueryBuilderLabelFilter[] = query.labels;\n\n  // This function is used by both Prometheus and Loki and this the only difference.\n  if (datasource.type === 'prometheus') {\n    labels = [{ label: '__name__', op: '=', value: query.metric }, ...query.labels];\n  }\n\n  const expr = promQueryModeller.renderLabels(labels);\n  const result = await datasource.languageProvider.fetchSeriesLabels(expr);\n\n  return Object.keys(result).map((x) => ({\n    label: x,\n    value: x,\n  }));\n}\n","import { capitalize } from 'lodash';\nimport pluralize from 'pluralize';\n\nimport { SelectableValue } from '@grafana/data';\n\nimport { LabelParamEditor } from '../components/LabelParamEditor';\nimport { PromVisualQueryOperationCategory } from '../types';\n\nimport {\n  QueryBuilderOperation,\n  QueryBuilderOperationDef,\n  QueryBuilderOperationParamDef,\n  QueryBuilderOperationParamValue,\n  QueryWithOperations,\n} from './types';\n\nexport function functionRendererLeft(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n  const params = renderParams(model, def, innerExpr);\n  const str = model.id + '(';\n\n  if (innerExpr) {\n    params.push(innerExpr);\n  }\n\n  return str + params.join(', ') + ')';\n}\n\nexport function functionRendererRight(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n  const params = renderParams(model, def, innerExpr);\n  const str = model.id + '(';\n\n  if (innerExpr) {\n    params.unshift(innerExpr);\n  }\n\n  return str + params.join(', ') + ')';\n}\n\nfunction rangeRendererWithParams(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string,\n  renderLeft: boolean\n) {\n  if (def.params.length < 2) {\n    throw `Cannot render a function with params of length [${def.params.length}]`;\n  }\n\n  let rangeVector = (model.params ?? [])[0] ?? '5m';\n\n  // Next frame the remaining parameters, but get rid of the first one because it's used to move the\n  // instant vector into a range vector.\n  const params = renderParams(\n    {\n      ...model,\n      params: model.params.slice(1),\n    },\n    {\n      ...def,\n      params: def.params.slice(1),\n      defaultParams: def.defaultParams.slice(1),\n    },\n    innerExpr\n  );\n\n  const str = model.id + '(';\n\n  // Depending on the renderLeft variable, render parameters to the left or right\n  // renderLeft === true (renderLeft) => (param1, param2, rangeVector[...])\n  // renderLeft === false (renderRight) => (rangeVector[...], param1, param2)\n  if (innerExpr) {\n    renderLeft ? params.push(`${innerExpr}[${rangeVector}]`) : params.unshift(`${innerExpr}[${rangeVector}]`);\n  }\n\n  // stick everything together\n  return str + params.join(', ') + ')';\n}\n\nexport function rangeRendererRightWithParams(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string\n) {\n  return rangeRendererWithParams(model, def, innerExpr, false);\n}\n\nexport function rangeRendererLeftWithParams(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string\n) {\n  return rangeRendererWithParams(model, def, innerExpr, true);\n}\n\nfunction renderParams(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n  return (model.params ?? []).map((value, index) => {\n    const paramDef = def.params[index];\n    if (paramDef.type === 'string') {\n      return '\"' + value + '\"';\n    }\n\n    return value;\n  });\n}\n\nexport function defaultAddOperationHandler<T extends QueryWithOperations>(def: QueryBuilderOperationDef, query: T) {\n  const newOperation: QueryBuilderOperation = {\n    id: def.id,\n    params: def.defaultParams,\n  };\n\n  return {\n    ...query,\n    operations: [...query.operations, newOperation],\n  };\n}\n\nexport function getPromAndLokiOperationDisplayName(funcName: string) {\n  return capitalize(funcName.replace(/_/g, ' '));\n}\n\nexport function getOperationParamId(operationIndex: number, paramIndex: number) {\n  return `operations.${operationIndex}.param.${paramIndex}`;\n}\n\nexport function getRangeVectorParamDef(withRateInterval = false): QueryBuilderOperationParamDef {\n  const param: QueryBuilderOperationParamDef = {\n    name: 'Range',\n    type: 'string',\n    options: [\n      {\n        label: '$__interval',\n        value: '$__interval',\n        // tooltip: 'Dynamic interval based on max data points, scrape and min interval',\n      },\n      { label: '1m', value: '1m' },\n      { label: '5m', value: '5m' },\n      { label: '10m', value: '10m' },\n      { label: '1h', value: '1h' },\n      { label: '24h', value: '24h' },\n    ],\n  };\n\n  if (withRateInterval) {\n    (param.options as Array<SelectableValue<string>>).unshift({\n      label: '$__rate_interval',\n      value: '$__rate_interval',\n      // tooltip: 'Always above 4x scrape interval',\n    });\n  }\n\n  return param;\n}\n\n/**\n * This function is shared between Prometheus and Loki variants\n */\nexport function createAggregationOperation<T extends QueryWithOperations>(\n  name: string,\n  overrides: Partial<QueryBuilderOperationDef> = {}\n): QueryBuilderOperationDef[] {\n  const operations: QueryBuilderOperationDef[] = [\n    {\n      id: name,\n      name: getPromAndLokiOperationDisplayName(name),\n      params: [\n        {\n          name: 'By label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n        },\n      ],\n      defaultParams: [],\n      alternativesKey: 'plain aggregations',\n      category: PromVisualQueryOperationCategory.Aggregations,\n      renderer: functionRendererLeft,\n      paramChangedHandler: getOnLabelAddedHandler(`__${name}_by`),\n      explainHandler: getAggregationExplainer(name, ''),\n      addOperationHandler: defaultAddOperationHandler,\n      ...overrides,\n    },\n    {\n      id: `__${name}_by`,\n      name: `${getPromAndLokiOperationDisplayName(name)} by`,\n      params: [\n        {\n          name: 'Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          editor: LabelParamEditor,\n        },\n      ],\n      defaultParams: [''],\n      alternativesKey: 'aggregations by',\n      category: PromVisualQueryOperationCategory.Aggregations,\n      renderer: getAggregationByRenderer(name),\n      paramChangedHandler: getLastLabelRemovedHandler(name),\n      explainHandler: getAggregationExplainer(name, 'by'),\n      addOperationHandler: defaultAddOperationHandler,\n      hideFromList: true,\n      ...overrides,\n    },\n    {\n      id: `__${name}_without`,\n      name: `${getPromAndLokiOperationDisplayName(name)} without`,\n      params: [\n        {\n          name: 'Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          editor: LabelParamEditor,\n        },\n      ],\n      defaultParams: [''],\n      alternativesKey: 'aggregations by',\n      category: PromVisualQueryOperationCategory.Aggregations,\n      renderer: getAggregationWithoutRenderer(name),\n      paramChangedHandler: getLastLabelRemovedHandler(name),\n      explainHandler: getAggregationExplainer(name, 'without'),\n      addOperationHandler: defaultAddOperationHandler,\n      hideFromList: true,\n      ...overrides,\n    },\n  ];\n\n  return operations;\n}\n\nexport function createAggregationOperationWithParam(\n  name: string,\n  paramsDef: { params: QueryBuilderOperationParamDef[]; defaultParams: QueryBuilderOperationParamValue[] },\n  overrides: Partial<QueryBuilderOperationDef> = {}\n): QueryBuilderOperationDef[] {\n  const operations = createAggregationOperation(name, overrides);\n  operations[0].params.unshift(...paramsDef.params);\n  operations[1].params.unshift(...paramsDef.params);\n  operations[2].params.unshift(...paramsDef.params);\n  operations[0].defaultParams = paramsDef.defaultParams;\n  operations[1].defaultParams = [...paramsDef.defaultParams, ''];\n  operations[2].defaultParams = [...paramsDef.defaultParams, ''];\n  operations[1].renderer = getAggregationByRendererWithParameter(name);\n  operations[2].renderer = getAggregationByRendererWithParameter(name);\n  return operations;\n}\n\nfunction getAggregationByRenderer(aggregation: string) {\n  return function aggregationRenderer(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n    return `${aggregation} by(${model.params.join(', ')}) (${innerExpr})`;\n  };\n}\n\nfunction getAggregationWithoutRenderer(aggregation: string) {\n  return function aggregationRenderer(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n    return `${aggregation} without(${model.params.join(', ')}) (${innerExpr})`;\n  };\n}\n\n/**\n * Very simple poc implementation, needs to be modified to support all aggregation operators\n */\nfunction getAggregationExplainer(aggregationName: string, mode: 'by' | 'without' | '') {\n  return function aggregationExplainer(model: QueryBuilderOperation) {\n    const labels = model.params.map((label) => `\\`${label}\\``).join(' and ');\n    const labelWord = pluralize('label', model.params.length);\n\n    switch (mode) {\n      case 'by':\n        return `Calculates ${aggregationName} over dimensions while preserving ${labelWord} ${labels}.`;\n      case 'without':\n        return `Calculates ${aggregationName} over the dimensions ${labels}. All other labels are preserved.`;\n      default:\n        return `Calculates ${aggregationName} over the dimensions.`;\n    }\n  };\n}\n\nfunction getAggregationByRendererWithParameter(aggregation: string) {\n  return function aggregationRenderer(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n    const restParamIndex = def.params.findIndex((param) => param.restParam);\n    const params = model.params.slice(0, restParamIndex);\n    const restParams = model.params.slice(restParamIndex);\n\n    return `${aggregation} by(${restParams.join(', ')}) (${params\n      .map((param, idx) => (def.params[idx].type === 'string' ? `\\\"${param}\\\"` : param))\n      .join(', ')}, ${innerExpr})`;\n  };\n}\n\n/**\n * This function will transform operations without labels to their plan aggregation operation\n */\nfunction getLastLabelRemovedHandler(changeToOperationId: string) {\n  return function onParamChanged(index: number, op: QueryBuilderOperation, def: QueryBuilderOperationDef) {\n    // If definition has more params then is defined there are no optional rest params anymore.\n    // We then transform this operation into a different one\n    if (op.params.length < def.params.length) {\n      return {\n        ...op,\n        id: changeToOperationId,\n      };\n    }\n\n    return op;\n  };\n}\n\nfunction getOnLabelAddedHandler(changeToOperationId: string) {\n  return function onParamChanged(index: number, op: QueryBuilderOperation, def: QueryBuilderOperationDef) {\n    // Check if we actually have the label param. As it's optional the aggregation can have one less, which is the\n    // case of just simple aggregation without label. When user adds the label it now has the same number of params\n    // as its definition, and now we can change it to its `_by` variant.\n    if (op.params.length === def.params.length) {\n      return {\n        ...op,\n        id: changeToOperationId,\n      };\n    }\n    return op;\n  };\n}\n","import { defaultAddOperationHandler } from './shared/operationUtils';\nimport { QueryBuilderOperation, QueryBuilderOperationDef, QueryBuilderOperationParamDef } from './shared/types';\nimport { PromOperationId, PromVisualQueryOperationCategory } from './types';\n\nexport const binaryScalarDefs = [\n  {\n    id: PromOperationId.Addition,\n    name: 'Add scalar',\n    sign: '+',\n  },\n  {\n    id: PromOperationId.Subtraction,\n    name: 'Subtract scalar',\n    sign: '-',\n  },\n  {\n    id: PromOperationId.MultiplyBy,\n    name: 'Multiply by scalar',\n    sign: '*',\n  },\n  {\n    id: PromOperationId.DivideBy,\n    name: 'Divide by scalar',\n    sign: '/',\n  },\n  {\n    id: PromOperationId.Modulo,\n    name: 'Modulo by scalar',\n    sign: '%',\n  },\n  {\n    id: PromOperationId.Exponent,\n    name: 'Exponent',\n    sign: '^',\n  },\n  {\n    id: PromOperationId.EqualTo,\n    name: 'Equal to',\n    sign: '==',\n    comparison: true,\n  },\n  {\n    id: PromOperationId.NotEqualTo,\n    name: 'Not equal to',\n    sign: '!=',\n    comparison: true,\n  },\n  {\n    id: PromOperationId.GreaterThan,\n    name: 'Greater than',\n    sign: '>',\n    comparison: true,\n  },\n  {\n    id: PromOperationId.LessThan,\n    name: 'Less than',\n    sign: '<',\n    comparison: true,\n  },\n  {\n    id: PromOperationId.GreaterOrEqual,\n    name: 'Greater or equal to',\n    sign: '>=',\n    comparison: true,\n  },\n  {\n    id: PromOperationId.LessOrEqual,\n    name: 'Less or equal to',\n    sign: '<=',\n    comparison: true,\n  },\n];\n\nexport const binaryScalarOperatorToOperatorName = binaryScalarDefs.reduce((acc, def) => {\n  acc[def.sign] = {\n    id: def.id,\n    comparison: def.comparison,\n  };\n  return acc;\n}, {} as Record<string, { id: string; comparison?: boolean }>);\n\n// Not sure about this one. It could also be a more generic 'Simple math operation' where user specifies\n// both the operator and the operand in a single input\nexport const binaryScalarOperations: QueryBuilderOperationDef[] = binaryScalarDefs.map((opDef) => {\n  const params: QueryBuilderOperationParamDef[] = [{ name: 'Value', type: 'number' }];\n  const defaultParams: any[] = [2];\n  if (opDef.comparison) {\n    params.push({\n      name: 'Bool',\n      type: 'boolean',\n      description: 'If checked comparison will return 0 or 1 for the value rather than filtering.',\n    });\n    defaultParams.push(false);\n  }\n\n  return {\n    id: opDef.id,\n    name: opDef.name,\n    params,\n    defaultParams,\n    alternativesKey: 'binary scalar operations',\n    category: PromVisualQueryOperationCategory.BinaryOps,\n    renderer: getSimpleBinaryRenderer(opDef.sign),\n    addOperationHandler: defaultAddOperationHandler,\n  };\n});\n\nfunction getSimpleBinaryRenderer(operator: string) {\n  return function binaryRenderer(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n    let param = model.params[0];\n    let bool = '';\n    if (model.params.length === 2) {\n      bool = model.params[1] ? ' bool' : '';\n    }\n\n    return `${innerExpr} ${operator}${bool} ${param}`;\n  };\n}\n","import { binaryScalarOperations } from './binaryScalarOperations';\nimport { LabelParamEditor } from './components/LabelParamEditor';\nimport {\n  defaultAddOperationHandler,\n  functionRendererLeft,\n  functionRendererRight,\n  getPromAndLokiOperationDisplayName,\n  getRangeVectorParamDef,\n  rangeRendererLeftWithParams,\n  rangeRendererRightWithParams,\n} from './shared/operationUtils';\nimport {\n  QueryBuilderOperation,\n  QueryBuilderOperationDef,\n  QueryWithOperations,\n  VisualQueryModeller,\n} from './shared/types';\nimport { PromOperationId, PromVisualQuery, PromVisualQueryOperationCategory } from './types';\n\nexport function getOperationDefinitions(): QueryBuilderOperationDef[] {\n  const list: QueryBuilderOperationDef[] = [\n    {\n      id: PromOperationId.HistogramQuantile,\n      name: 'Histogram quantile',\n      params: [{ name: 'Quantile', type: 'number', options: [0.99, 0.95, 0.9, 0.75, 0.5, 0.25] }],\n      defaultParams: [0.9],\n      category: PromVisualQueryOperationCategory.Functions,\n      renderer: functionRendererLeft,\n      addOperationHandler: defaultAddOperationHandler,\n    },\n    {\n      id: PromOperationId.LabelReplace,\n      name: 'Label replace',\n      params: [\n        { name: 'Destination label', type: 'string' },\n        { name: 'Replacement', type: 'string' },\n        { name: 'Source label', type: 'string' },\n        { name: 'Regex', type: 'string' },\n      ],\n      category: PromVisualQueryOperationCategory.Functions,\n      defaultParams: ['', '$1', '', '(.*)'],\n      renderer: functionRendererRight,\n      addOperationHandler: defaultAddOperationHandler,\n    },\n    {\n      id: PromOperationId.Ln,\n      name: 'Ln',\n      params: [],\n      defaultParams: [],\n      category: PromVisualQueryOperationCategory.Functions,\n      renderer: functionRendererLeft,\n      addOperationHandler: defaultAddOperationHandler,\n    },\n    createRangeFunction(PromOperationId.Changes),\n    createRangeFunction(PromOperationId.Rate, true),\n    createRangeFunction(PromOperationId.Irate),\n    createRangeFunction(PromOperationId.Increase, true),\n    createRangeFunction(PromOperationId.Idelta),\n    createRangeFunction(PromOperationId.Delta),\n    createFunction({\n      id: PromOperationId.HoltWinters,\n      params: [\n        getRangeVectorParamDef(),\n        { name: 'Smoothing Factor', type: 'number' },\n        { name: 'Trend Factor', type: 'number' },\n      ],\n      defaultParams: ['$__interval', 0.5, 0.5],\n      alternativesKey: 'range function',\n      category: PromVisualQueryOperationCategory.RangeFunctions,\n      renderer: rangeRendererRightWithParams,\n      addOperationHandler: addOperationWithRangeVector,\n      changeTypeHandler: operationTypeChangedHandlerForRangeFunction,\n    }),\n    createFunction({\n      id: PromOperationId.PredictLinear,\n      params: [getRangeVectorParamDef(), { name: 'Seconds from now', type: 'number' }],\n      defaultParams: ['$__interval', 60],\n      alternativesKey: 'range function',\n      category: PromVisualQueryOperationCategory.RangeFunctions,\n      renderer: rangeRendererRightWithParams,\n      addOperationHandler: addOperationWithRangeVector,\n      changeTypeHandler: operationTypeChangedHandlerForRangeFunction,\n    }),\n    createFunction({\n      id: PromOperationId.QuantileOverTime,\n      params: [getRangeVectorParamDef(), { name: 'Quantile', type: 'number' }],\n      defaultParams: ['$__interval', 0.5],\n      alternativesKey: 'overtime function',\n      category: PromVisualQueryOperationCategory.RangeFunctions,\n      renderer: rangeRendererLeftWithParams,\n      addOperationHandler: addOperationWithRangeVector,\n      changeTypeHandler: operationTypeChangedHandlerForRangeFunction,\n    }),\n    ...binaryScalarOperations,\n    {\n      id: PromOperationId.NestedQuery,\n      name: 'Binary operation with query',\n      params: [],\n      defaultParams: [],\n      category: PromVisualQueryOperationCategory.BinaryOps,\n      renderer: (model, def, innerExpr) => innerExpr,\n      addOperationHandler: addNestedQueryHandler,\n    },\n    createFunction({ id: PromOperationId.Absent }),\n    createFunction({\n      id: PromOperationId.Acos,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Acosh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Asin,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Asinh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Atan,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Atanh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({ id: PromOperationId.Ceil }),\n    createFunction({\n      id: PromOperationId.Clamp,\n      name: 'Clamp',\n      params: [\n        { name: 'Minimum Scalar', type: 'number' },\n        { name: 'Maximum Scalar', type: 'number' },\n      ],\n      defaultParams: [1, 1],\n    }),\n\n    createFunction({\n      id: PromOperationId.ClampMax,\n      params: [{ name: 'Maximum Scalar', type: 'number' }],\n      defaultParams: [1],\n    }),\n    createFunction({\n      id: PromOperationId.ClampMin,\n      params: [{ name: 'Minimum Scalar', type: 'number' }],\n      defaultParams: [1],\n    }),\n    createFunction({\n      id: PromOperationId.Cos,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Cosh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.DayOfMonth,\n      category: PromVisualQueryOperationCategory.Time,\n    }),\n    createFunction({\n      id: PromOperationId.DayOfWeek,\n      category: PromVisualQueryOperationCategory.Time,\n    }),\n    createFunction({\n      id: PromOperationId.DaysInMonth,\n      category: PromVisualQueryOperationCategory.Time,\n    }),\n    createFunction({ id: PromOperationId.Deg }),\n    createRangeFunction(PromOperationId.Deriv),\n    //\n    createFunction({ id: PromOperationId.Exp }),\n    createFunction({ id: PromOperationId.Floor }),\n    createFunction({ id: PromOperationId.Group }),\n    createFunction({ id: PromOperationId.Hour }),\n    createFunction({\n      id: PromOperationId.LabelJoin,\n      params: [\n        {\n          name: 'Destination Label',\n          type: 'string',\n          editor: LabelParamEditor,\n        },\n        {\n          name: 'Separator',\n          type: 'string',\n        },\n        {\n          name: 'Source Label',\n          type: 'string',\n          restParam: true,\n          optional: true,\n          editor: LabelParamEditor,\n        },\n      ],\n      defaultParams: ['', ',', ''],\n      renderer: labelJoinRenderer,\n      addOperationHandler: labelJoinAddOperationHandler,\n    }),\n    createFunction({ id: PromOperationId.Log10 }),\n    createFunction({ id: PromOperationId.Log2 }),\n    createFunction({ id: PromOperationId.Minute }),\n    createFunction({ id: PromOperationId.Month }),\n    createFunction({\n      id: PromOperationId.Pi,\n      renderer: (model) => `${model.id}()`,\n    }),\n    createFunction({\n      id: PromOperationId.Quantile,\n      params: [{ name: 'Value', type: 'number' }],\n      defaultParams: [1],\n      renderer: functionRendererLeft,\n    }),\n    createFunction({ id: PromOperationId.Rad }),\n    createRangeFunction(PromOperationId.Resets),\n    createFunction({\n      id: PromOperationId.Round,\n      category: PromVisualQueryOperationCategory.Functions,\n      params: [{ name: 'To Nearest', type: 'number' }],\n      defaultParams: [1],\n    }),\n    createFunction({ id: PromOperationId.Scalar }),\n    createFunction({ id: PromOperationId.Sgn }),\n    createFunction({ id: PromOperationId.Sin, category: PromVisualQueryOperationCategory.Trigonometric }),\n    createFunction({\n      id: PromOperationId.Sinh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({ id: PromOperationId.Sort }),\n    createFunction({ id: PromOperationId.SortDesc }),\n    createFunction({ id: PromOperationId.Sqrt }),\n    createFunction({ id: PromOperationId.Stddev }),\n    createFunction({\n      id: PromOperationId.Tan,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Tanh,\n      category: PromVisualQueryOperationCategory.Trigonometric,\n    }),\n    createFunction({\n      id: PromOperationId.Time,\n      renderer: (model) => `${model.id}()`,\n    }),\n    createFunction({ id: PromOperationId.Timestamp }),\n    createFunction({\n      id: PromOperationId.Vector,\n      params: [{ name: 'Value', type: 'number' }],\n      defaultParams: [1],\n      renderer: (model) => `${model.id}(${model.params[0]})`,\n    }),\n    createFunction({ id: PromOperationId.Year }),\n  ];\n\n  return list;\n}\n\nexport function createFunction(definition: Partial<QueryBuilderOperationDef>): QueryBuilderOperationDef {\n  return {\n    ...definition,\n    id: definition.id!,\n    name: definition.name ?? getPromAndLokiOperationDisplayName(definition.id!),\n    params: definition.params ?? [],\n    defaultParams: definition.defaultParams ?? [],\n    category: definition.category ?? PromVisualQueryOperationCategory.Functions,\n    renderer: definition.renderer ?? (definition.params ? functionRendererRight : functionRendererLeft),\n    addOperationHandler: definition.addOperationHandler ?? defaultAddOperationHandler,\n  };\n}\n\nexport function createRangeFunction(name: string, withRateInterval = false): QueryBuilderOperationDef {\n  return {\n    id: name,\n    name: getPromAndLokiOperationDisplayName(name),\n    params: [getRangeVectorParamDef(withRateInterval)],\n    defaultParams: [withRateInterval ? '$__rate_interval' : '$__interval'],\n    alternativesKey: 'range function',\n    category: PromVisualQueryOperationCategory.RangeFunctions,\n    renderer: operationWithRangeVectorRenderer,\n    addOperationHandler: addOperationWithRangeVector,\n    changeTypeHandler: operationTypeChangedHandlerForRangeFunction,\n  };\n}\n\nfunction operationTypeChangedHandlerForRangeFunction(\n  operation: QueryBuilderOperation,\n  newDef: QueryBuilderOperationDef\n) {\n  // validate current parameter\n  if (operation.params[0] === '$__rate_interval' && newDef.defaultParams[0] !== '$__rate_interval') {\n    operation.params = newDef.defaultParams;\n  } else if (operation.params[0] === '$__interval' && newDef.defaultParams[0] !== '$__interval') {\n    operation.params = newDef.defaultParams;\n  }\n\n  return operation;\n}\n\nexport function operationWithRangeVectorRenderer(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string\n) {\n  let rangeVector = (model.params ?? [])[0] ?? '5m';\n  return `${def.id}(${innerExpr}[${rangeVector}])`;\n}\n\n/**\n * Since there can only be one operation with range vector this will replace the current one (if one was added )\n */\nexport function addOperationWithRangeVector(\n  def: QueryBuilderOperationDef,\n  query: PromVisualQuery,\n  modeller: VisualQueryModeller\n) {\n  const newOperation: QueryBuilderOperation = {\n    id: def.id,\n    params: def.defaultParams,\n  };\n\n  if (query.operations.length > 0) {\n    // If operation exists it has to be in the registry so no point to check if it was found\n    const firstOp = modeller.getOperationDef(query.operations[0].id)!;\n\n    if (firstOp.addOperationHandler === addOperationWithRangeVector) {\n      return {\n        ...query,\n        operations: [newOperation, ...query.operations.slice(1)],\n      };\n    }\n  }\n\n  return {\n    ...query,\n    operations: [newOperation, ...query.operations],\n  };\n}\n\nfunction addNestedQueryHandler(def: QueryBuilderOperationDef, query: PromVisualQuery): PromVisualQuery {\n  return {\n    ...query,\n    binaryQueries: [\n      ...(query.binaryQueries ?? []),\n      {\n        operator: '/',\n        query,\n      },\n    ],\n  };\n}\n\nfunction labelJoinRenderer(model: QueryBuilderOperation, def: QueryBuilderOperationDef, innerExpr: string) {\n  if (typeof model.params[1] !== 'string') {\n    throw 'The separator must be a string';\n  }\n  const separator = `\"${model.params[1]}\"`;\n  return `${model.id}(${innerExpr}, \"${model.params[0]}\", ${separator}, \"${model.params.slice(2).join(separator)}\")`;\n}\n\nfunction labelJoinAddOperationHandler<T extends QueryWithOperations>(def: QueryBuilderOperationDef, query: T) {\n  const newOperation: QueryBuilderOperation = {\n    id: def.id,\n    params: def.defaultParams,\n  };\n\n  return {\n    ...query,\n    operations: [...query.operations, newOperation],\n  };\n}\n","import { addOperationWithRangeVector } from './operations';\nimport {\n  createAggregationOperation,\n  createAggregationOperationWithParam,\n  getPromAndLokiOperationDisplayName,\n  getRangeVectorParamDef,\n} from './shared/operationUtils';\nimport { QueryBuilderOperation, QueryBuilderOperationDef } from './shared/types';\nimport { PromVisualQueryOperationCategory, PromOperationId } from './types';\n\nexport function getAggregationOperations(): QueryBuilderOperationDef[] {\n  return [\n    ...createAggregationOperation(PromOperationId.Sum),\n    ...createAggregationOperation(PromOperationId.Avg),\n    ...createAggregationOperation(PromOperationId.Min),\n    ...createAggregationOperation(PromOperationId.Max),\n    ...createAggregationOperation(PromOperationId.Count),\n    ...createAggregationOperationWithParam(PromOperationId.TopK, {\n      params: [{ name: 'K-value', type: 'number' }],\n      defaultParams: [5],\n    }),\n    ...createAggregationOperationWithParam(PromOperationId.BottomK, {\n      params: [{ name: 'K-value', type: 'number' }],\n      defaultParams: [5],\n    }),\n    ...createAggregationOperationWithParam(PromOperationId.CountValues, {\n      params: [{ name: 'Identifier', type: 'string' }],\n      defaultParams: ['count'],\n    }),\n    createAggregationOverTime(PromOperationId.SumOverTime),\n    createAggregationOverTime(PromOperationId.AvgOverTime),\n    createAggregationOverTime(PromOperationId.MinOverTime),\n    createAggregationOverTime(PromOperationId.MaxOverTime),\n    createAggregationOverTime(PromOperationId.CountOverTime),\n    createAggregationOverTime(PromOperationId.LastOverTime),\n    createAggregationOverTime(PromOperationId.PresentOverTime),\n    createAggregationOverTime(PromOperationId.AbsentOverTime),\n    createAggregationOverTime(PromOperationId.StddevOverTime),\n  ];\n}\n\nfunction createAggregationOverTime(name: string): QueryBuilderOperationDef {\n  return {\n    id: name,\n    name: getPromAndLokiOperationDisplayName(name),\n    params: [getRangeVectorParamDef()],\n    defaultParams: ['$__interval'],\n    alternativesKey: 'overtime function',\n    category: PromVisualQueryOperationCategory.RangeFunctions,\n    renderer: operationWithRangeVectorRenderer,\n    addOperationHandler: addOperationWithRangeVector,\n  };\n}\n\nfunction operationWithRangeVectorRenderer(\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string\n) {\n  let rangeVector = (model.params ?? [])[0] ?? '$__interval';\n  return `${def.id}(${innerExpr}[${rangeVector}])`;\n}\n","import { FUNCTIONS } from '../metricsql';\n\nimport { getAggregationOperations } from './aggregations';\nimport { getOperationDefinitions } from './operations';\nimport { LokiAndPromQueryModellerBase } from './shared/LokiAndPromQueryModellerBase';\nimport { PromQueryPattern, PromVisualQueryOperationCategory } from './types';\n\nexport class PromQueryModeller extends LokiAndPromQueryModellerBase {\n  constructor() {\n    super(() => {\n      const allOperations = [...getOperationDefinitions(), ...getAggregationOperations()];\n      for (const op of allOperations) {\n        const func = FUNCTIONS.find((x) => x.insertText === op.id);\n        if (func) {\n          op.documentation = func.documentation;\n        }\n      }\n      return allOperations;\n    });\n\n    this.setOperationCategories([\n      PromVisualQueryOperationCategory.Aggregations,\n      PromVisualQueryOperationCategory.RangeFunctions,\n      PromVisualQueryOperationCategory.Functions,\n      PromVisualQueryOperationCategory.BinaryOps,\n      PromVisualQueryOperationCategory.Trigonometric,\n      PromVisualQueryOperationCategory.Time,\n    ]);\n  }\n\n  getQueryPatterns(): PromQueryPattern[] {\n    return [\n      {\n        name: 'Rate then sum',\n        operations: [\n          { id: 'rate', params: ['$__rate_interval'] },\n          { id: 'sum', params: [] },\n        ],\n      },\n      {\n        name: 'Rate then sum by(label) then avg',\n        operations: [\n          { id: 'rate', params: ['$__rate_interval'] },\n          { id: '__sum_by', params: [''] },\n          { id: 'avg', params: [] },\n        ],\n      },\n      {\n        name: 'Histogram quantile on rate',\n        operations: [\n          { id: 'rate', params: ['$__rate_interval'] },\n          { id: '__sum_by', params: ['le'] },\n          { id: 'histogram_quantile', params: [0.95] },\n        ],\n      },\n      {\n        name: 'Histogram quantile on increase ',\n        operations: [\n          { id: 'increase', params: ['$__rate_interval'] },\n          { id: '__max_by', params: ['le'] },\n          { id: 'histogram_quantile', params: [0.95] },\n        ],\n      },\n    ];\n  }\n}\n\nexport const promQueryModeller = new PromQueryModeller();\n","import { Registry } from '@grafana/data';\n\nimport { PromVisualQueryOperationCategory } from '../types';\n\nimport { QueryBuilderLabelFilter, QueryBuilderOperation, QueryBuilderOperationDef, VisualQueryModeller } from './types';\n\nexport interface VisualQueryBinary<T> {\n  operator: string;\n  vectorMatchesType?: 'on' | 'ignoring';\n  vectorMatches?: string;\n  query: T;\n}\n\nexport interface PromLokiVisualQuery {\n  metric?: string;\n  labels: QueryBuilderLabelFilter[];\n  operations: QueryBuilderOperation[];\n  binaryQueries?: Array<VisualQueryBinary<PromLokiVisualQuery>>;\n}\n\nexport abstract class LokiAndPromQueryModellerBase implements VisualQueryModeller {\n  protected operationsRegistry: Registry<QueryBuilderOperationDef>;\n  private categories: string[] = [];\n\n  constructor(getOperations: () => QueryBuilderOperationDef[]) {\n    this.operationsRegistry = new Registry<QueryBuilderOperationDef>(getOperations);\n  }\n\n  protected setOperationCategories(categories: string[]) {\n    this.categories = categories;\n  }\n\n  getOperationsForCategory(category: string) {\n    return this.operationsRegistry.list().filter((op) => op.category === category && !op.hideFromList);\n  }\n\n  getAlternativeOperations(key: string) {\n    return this.operationsRegistry.list().filter((op) => op.alternativesKey && op.alternativesKey === key);\n  }\n\n  getCategories() {\n    return this.categories;\n  }\n\n  getOperationDef(id: string): QueryBuilderOperationDef | undefined {\n    return this.operationsRegistry.getIfExists(id);\n  }\n\n  renderOperations(queryString: string, operations: QueryBuilderOperation[]) {\n    for (const operation of operations) {\n      const def = this.operationsRegistry.getIfExists(operation.id);\n      if (!def) {\n        throw new Error(`Could not find operation ${operation.id} in the registry`);\n      }\n      queryString = def.renderer(operation, def, queryString);\n    }\n\n    return queryString;\n  }\n\n  renderBinaryQueries(queryString: string, binaryQueries?: Array<VisualQueryBinary<PromLokiVisualQuery>>) {\n    if (binaryQueries) {\n      for (const binQuery of binaryQueries) {\n        queryString = `${this.renderBinaryQuery(queryString, binQuery)}`;\n      }\n    }\n    return queryString;\n  }\n\n  private renderBinaryQuery(leftOperand: string, binaryQuery: VisualQueryBinary<PromLokiVisualQuery>) {\n    let result = leftOperand + ` ${binaryQuery.operator} `;\n\n    if (binaryQuery.vectorMatches) {\n      result += `${binaryQuery.vectorMatchesType}(${binaryQuery.vectorMatches}) `;\n    }\n\n    return result + this.renderQuery(binaryQuery.query, true);\n  }\n\n  renderLabels(labels: QueryBuilderLabelFilter[]) {\n    if (labels.length === 0) {\n      return '';\n    }\n\n    let expr = '{';\n    for (const filter of labels) {\n      if (expr !== '{') {\n        expr += ', ';\n      }\n\n      expr += `${filter.label}${filter.op}\"${filter.value}\"`;\n    }\n\n    return expr + `}`;\n  }\n\n  renderQuery(query: PromLokiVisualQuery, nested?: boolean) {\n    let queryString = `${query.metric ?? ''}${this.renderLabels(query.labels)}`;\n    queryString = this.renderOperations(queryString, query.operations);\n\n    if (!nested && this.hasBinaryOp(query) && Boolean(query.binaryQueries?.length)) {\n      queryString = `(${queryString})`;\n    }\n\n    queryString = this.renderBinaryQueries(queryString, query.binaryQueries);\n\n    if (nested && (this.hasBinaryOp(query) || Boolean(query.binaryQueries?.length))) {\n      queryString = `(${queryString})`;\n    }\n\n    return queryString;\n  }\n\n  hasBinaryOp(query: PromLokiVisualQuery): boolean {\n    return (\n      query.operations.find((op) => {\n        const def = this.getOperationDef(op.id);\n        return def?.category === PromVisualQueryOperationCategory.BinaryOps;\n      }) !== undefined\n    );\n  }\n}\n","// FIXME profile adding a per-Tree TreeNode cache, validating it by\n// parent pointer\n/// The default maximum length of a `TreeBuffer` node.\nconst DefaultBufferLength = 1024;\nlet nextPropID = 0;\nclass Range {\n    constructor(from, to) {\n        this.from = from;\n        this.to = to;\n    }\n}\n/// Each [node type](#common.NodeType) or [individual tree](#common.Tree)\n/// can have metadata associated with it in props. Instances of this\n/// class represent prop names.\nclass NodeProp {\n    /// Create a new node prop type.\n    constructor(config = {}) {\n        this.id = nextPropID++;\n        this.perNode = !!config.perNode;\n        this.deserialize = config.deserialize || (() => {\n            throw new Error(\"This node type doesn't define a deserialize function\");\n        });\n    }\n    /// This is meant to be used with\n    /// [`NodeSet.extend`](#common.NodeSet.extend) or\n    /// [`LRParser.configure`](#lr.ParserConfig.props) to compute\n    /// prop values for each node type in the set. Takes a [match\n    /// object](#common.NodeType^match) or function that returns undefined\n    /// if the node type doesn't get this prop, and the prop's value if\n    /// it does.\n    add(match) {\n        if (this.perNode)\n            throw new RangeError(\"Can't add per-node props to node types\");\n        if (typeof match != \"function\")\n            match = NodeType.match(match);\n        return (type) => {\n            let result = match(type);\n            return result === undefined ? null : [this, result];\n        };\n    }\n}\n/// Prop that is used to describe matching delimiters. For opening\n/// delimiters, this holds an array of node names (written as a\n/// space-separated string when declaring this prop in a grammar)\n/// for the node types of closing delimiters that match it.\nNodeProp.closedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/// The inverse of [`closedBy`](#common.NodeProp^closedBy). This is\n/// attached to closing delimiters, holding an array of node names\n/// of types of matching opening delimiters.\nNodeProp.openedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/// Used to assign node types to groups (for example, all node\n/// types that represent an expression could be tagged with an\n/// `\"Expression\"` group).\nNodeProp.group = new NodeProp({ deserialize: str => str.split(\" \") });\n/// The hash of the [context](#lr.ContextTracker.constructor)\n/// that the node was parsed in, if any. Used to limit reuse of\n/// contextual nodes.\nNodeProp.contextHash = new NodeProp({ perNode: true });\n/// The distance beyond the end of the node that the tokenizer\n/// looked ahead for any of the tokens inside the node. (The LR\n/// parser only stores this when it is larger than 25, for\n/// efficiency reasons.)\nNodeProp.lookAhead = new NodeProp({ perNode: true });\n/// This per-node prop is used to replace a given node, or part of a\n/// node, with another tree. This is useful to include trees from\n/// different languages in mixed-language parsers.\nNodeProp.mounted = new NodeProp({ perNode: true });\n/// A mounted tree, which can be [stored](#common.NodeProp^mounted) on\n/// a tree node to indicate that parts of its content are\n/// represented by another tree.\nclass MountedTree {\n    constructor(\n    /// The inner tree.\n    tree, \n    /// If this is null, this tree replaces the entire node (it will\n    /// be included in the regular iteration instead of its host\n    /// node). If not, only the given ranges are considered to be\n    /// covered by this tree. This is used for trees that are mixed in\n    /// a way that isn't strictly hierarchical. Such mounted trees are\n    /// only entered by [`resolveInner`](#common.Tree.resolveInner)\n    /// and [`enter`](#common.SyntaxNode.enter).\n    overlay, \n    /// The parser used to create this subtree.\n    parser) {\n        this.tree = tree;\n        this.overlay = overlay;\n        this.parser = parser;\n    }\n}\nconst noProps = Object.create(null);\n/// Each node in a syntax tree has a node type associated with it.\nclass NodeType {\n    /// @internal\n    constructor(\n    /// The name of the node type. Not necessarily unique, but if the\n    /// grammar was written properly, different node types with the\n    /// same name within a node set should play the same semantic\n    /// role.\n    name, \n    /// @internal\n    props, \n    /// The id of this node in its set. Corresponds to the term ids\n    /// used in the parser.\n    id, \n    /// @internal\n    flags = 0) {\n        this.name = name;\n        this.props = props;\n        this.id = id;\n        this.flags = flags;\n    }\n    /// Define a node type.\n    static define(spec) {\n        let props = spec.props && spec.props.length ? Object.create(null) : noProps;\n        let flags = (spec.top ? 1 /* Top */ : 0) | (spec.skipped ? 2 /* Skipped */ : 0) |\n            (spec.error ? 4 /* Error */ : 0) | (spec.name == null ? 8 /* Anonymous */ : 0);\n        let type = new NodeType(spec.name || \"\", props, spec.id, flags);\n        if (spec.props)\n            for (let src of spec.props) {\n                if (!Array.isArray(src))\n                    src = src(type);\n                if (src) {\n                    if (src[0].perNode)\n                        throw new RangeError(\"Can't store a per-node prop on a node type\");\n                    props[src[0].id] = src[1];\n                }\n            }\n        return type;\n    }\n    /// Retrieves a node prop for this type. Will return `undefined` if\n    /// the prop isn't present on this node.\n    prop(prop) { return this.props[prop.id]; }\n    /// True when this is the top node of a grammar.\n    get isTop() { return (this.flags & 1 /* Top */) > 0; }\n    /// True when this node is produced by a skip rule.\n    get isSkipped() { return (this.flags & 2 /* Skipped */) > 0; }\n    /// Indicates whether this is an error node.\n    get isError() { return (this.flags & 4 /* Error */) > 0; }\n    /// When true, this node type doesn't correspond to a user-declared\n    /// named node, for example because it is used to cache repetition.\n    get isAnonymous() { return (this.flags & 8 /* Anonymous */) > 0; }\n    /// Returns true when this node's name or one of its\n    /// [groups](#common.NodeProp^group) matches the given string.\n    is(name) {\n        if (typeof name == 'string') {\n            if (this.name == name)\n                return true;\n            let group = this.prop(NodeProp.group);\n            return group ? group.indexOf(name) > -1 : false;\n        }\n        return this.id == name;\n    }\n    /// Create a function from node types to arbitrary values by\n    /// specifying an object whose property names are node or\n    /// [group](#common.NodeProp^group) names. Often useful with\n    /// [`NodeProp.add`](#common.NodeProp.add). You can put multiple\n    /// names, separated by spaces, in a single property name to map\n    /// multiple node names to a single value.\n    static match(map) {\n        let direct = Object.create(null);\n        for (let prop in map)\n            for (let name of prop.split(\" \"))\n                direct[name] = map[prop];\n        return (node) => {\n            for (let groups = node.prop(NodeProp.group), i = -1; i < (groups ? groups.length : 0); i++) {\n                let found = direct[i < 0 ? node.name : groups[i]];\n                if (found)\n                    return found;\n            }\n        };\n    }\n}\n/// An empty dummy node type to use when no actual type is available.\nNodeType.none = new NodeType(\"\", Object.create(null), 0, 8 /* Anonymous */);\n/// A node set holds a collection of node types. It is used to\n/// compactly represent trees by storing their type ids, rather than a\n/// full pointer to the type object, in a numeric array. Each parser\n/// [has](#lr.LRParser.nodeSet) a node set, and [tree\n/// buffers](#common.TreeBuffer) can only store collections of nodes\n/// from the same set. A set can have a maximum of 2**16 (65536) node\n/// types in it, so that the ids fit into 16-bit typed array slots.\nclass NodeSet {\n    /// Create a set with the given types. The `id` property of each\n    /// type should correspond to its position within the array.\n    constructor(\n    /// The node types in this set, by id.\n    types) {\n        this.types = types;\n        for (let i = 0; i < types.length; i++)\n            if (types[i].id != i)\n                throw new RangeError(\"Node type ids should correspond to array positions when creating a node set\");\n    }\n    /// Create a copy of this set with some node properties added. The\n    /// arguments to this method can be created with\n    /// [`NodeProp.add`](#common.NodeProp.add).\n    extend(...props) {\n        let newTypes = [];\n        for (let type of this.types) {\n            let newProps = null;\n            for (let source of props) {\n                let add = source(type);\n                if (add) {\n                    if (!newProps)\n                        newProps = Object.assign({}, type.props);\n                    newProps[add[0].id] = add[1];\n                }\n            }\n            newTypes.push(newProps ? new NodeType(type.name, newProps, type.id, type.flags) : type);\n        }\n        return new NodeSet(newTypes);\n    }\n}\nconst CachedNode = new WeakMap(), CachedInnerNode = new WeakMap();\n/// Options that control iteration. Can be combined with the `|`\n/// operator to enable multiple ones.\nvar IterMode;\n(function (IterMode) {\n    /// When enabled, iteration will only visit [`Tree`](#common.Tree)\n    /// objects, not nodes packed into\n    /// [`TreeBuffer`](#common.TreeBuffer)s.\n    IterMode[IterMode[\"ExcludeBuffers\"] = 1] = \"ExcludeBuffers\";\n    /// Enable this to make iteration include anonymous nodes (such as\n    /// the nodes that wrap repeated grammar constructs into a balanced\n    /// tree).\n    IterMode[IterMode[\"IncludeAnonymous\"] = 2] = \"IncludeAnonymous\";\n    /// By default, regular [mounted](#common.NodeProp^mounted) nodes\n    /// replace their base node in iteration. Enable this to ignore them\n    /// instead.\n    IterMode[IterMode[\"IgnoreMounts\"] = 4] = \"IgnoreMounts\";\n    /// This option only applies in\n    /// [`enter`](#common.SyntaxNode.enter)-style methods. It tells the\n    /// library to not enter mounted overlays if one covers the given\n    /// position.\n    IterMode[IterMode[\"IgnoreOverlays\"] = 8] = \"IgnoreOverlays\";\n})(IterMode || (IterMode = {}));\n/// A piece of syntax tree. There are two ways to approach these\n/// trees: the way they are actually stored in memory, and the\n/// convenient way.\n///\n/// Syntax trees are stored as a tree of `Tree` and `TreeBuffer`\n/// objects. By packing detail information into `TreeBuffer` leaf\n/// nodes, the representation is made a lot more memory-efficient.\n///\n/// However, when you want to actually work with tree nodes, this\n/// representation is very awkward, so most client code will want to\n/// use the [`TreeCursor`](#common.TreeCursor) or\n/// [`SyntaxNode`](#common.SyntaxNode) interface instead, which provides\n/// a view on some part of this data structure, and can be used to\n/// move around to adjacent nodes.\nclass Tree {\n    /// Construct a new tree. See also [`Tree.build`](#common.Tree^build).\n    constructor(\n    /// The type of the top node.\n    type, \n    /// This node's child nodes.\n    children, \n    /// The positions (offsets relative to the start of this tree) of\n    /// the children.\n    positions, \n    /// The total length of this tree\n    length, \n    /// Per-node [node props](#common.NodeProp) to associate with this node.\n    props) {\n        this.type = type;\n        this.children = children;\n        this.positions = positions;\n        this.length = length;\n        /// @internal\n        this.props = null;\n        if (props && props.length) {\n            this.props = Object.create(null);\n            for (let [prop, value] of props)\n                this.props[typeof prop == \"number\" ? prop : prop.id] = value;\n        }\n    }\n    /// @internal\n    toString() {\n        let mounted = this.prop(NodeProp.mounted);\n        if (mounted && !mounted.overlay)\n            return mounted.tree.toString();\n        let children = \"\";\n        for (let ch of this.children) {\n            let str = ch.toString();\n            if (str) {\n                if (children)\n                    children += \",\";\n                children += str;\n            }\n        }\n        return !this.type.name ? children :\n            (/\\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) +\n                (children.length ? \"(\" + children + \")\" : \"\");\n    }\n    /// Get a [tree cursor](#common.TreeCursor) positioned at the top of\n    /// the tree. Mode can be used to [control](#common.IterMode) which\n    /// nodes the cursor visits.\n    cursor(mode = 0) {\n        return new TreeCursor(this.topNode, mode);\n    }\n    /// Get a [tree cursor](#common.TreeCursor) pointing into this tree\n    /// at the given position and side (see\n    /// [`moveTo`](#common.TreeCursor.moveTo).\n    cursorAt(pos, side = 0, mode = 0) {\n        let scope = CachedNode.get(this) || this.topNode;\n        let cursor = new TreeCursor(scope);\n        cursor.moveTo(pos, side);\n        CachedNode.set(this, cursor._tree);\n        return cursor;\n    }\n    /// Get a [syntax node](#common.SyntaxNode) object for the top of the\n    /// tree.\n    get topNode() {\n        return new TreeNode(this, 0, 0, null);\n    }\n    /// Get the [syntax node](#common.SyntaxNode) at the given position.\n    /// If `side` is -1, this will move into nodes that end at the\n    /// position. If 1, it'll move into nodes that start at the\n    /// position. With 0, it'll only enter nodes that cover the position\n    /// from both sides.\n    ///\n    /// Note that this will not enter\n    /// [overlays](#common.MountedTree.overlay), and you often want\n    /// [`resolveInner`](#common.Tree.resolveInner) instead.\n    resolve(pos, side = 0) {\n        let node = resolveNode(CachedNode.get(this) || this.topNode, pos, side, false);\n        CachedNode.set(this, node);\n        return node;\n    }\n    /// Like [`resolve`](#common.Tree.resolve), but will enter\n    /// [overlaid](#common.MountedTree.overlay) nodes, producing a syntax node\n    /// pointing into the innermost overlaid tree at the given position\n    /// (with parent links going through all parent structure, including\n    /// the host trees).\n    resolveInner(pos, side = 0) {\n        let node = resolveNode(CachedInnerNode.get(this) || this.topNode, pos, side, true);\n        CachedInnerNode.set(this, node);\n        return node;\n    }\n    /// Iterate over the tree and its children, calling `enter` for any\n    /// node that touches the `from`/`to` region (if given) before\n    /// running over such a node's children, and `leave` (if given) when\n    /// leaving the node. When `enter` returns `false`, that node will\n    /// not have its children iterated over (or `leave` called).\n    iterate(spec) {\n        let { enter, leave, from = 0, to = this.length } = spec;\n        for (let c = this.cursor((spec.mode || 0) | IterMode.IncludeAnonymous);;) {\n            let entered = false;\n            if (c.from <= to && c.to >= from && (c.type.isAnonymous || enter(c) !== false)) {\n                if (c.firstChild())\n                    continue;\n                entered = true;\n            }\n            for (;;) {\n                if (entered && leave && !c.type.isAnonymous)\n                    leave(c);\n                if (c.nextSibling())\n                    break;\n                if (!c.parent())\n                    return;\n                entered = true;\n            }\n        }\n    }\n    /// Get the value of the given [node prop](#common.NodeProp) for this\n    /// node. Works with both per-node and per-type props.\n    prop(prop) {\n        return !prop.perNode ? this.type.prop(prop) : this.props ? this.props[prop.id] : undefined;\n    }\n    /// Returns the node's [per-node props](#common.NodeProp.perNode) in a\n    /// format that can be passed to the [`Tree`](#common.Tree)\n    /// constructor.\n    get propValues() {\n        let result = [];\n        if (this.props)\n            for (let id in this.props)\n                result.push([+id, this.props[id]]);\n        return result;\n    }\n    /// Balance the direct children of this tree, producing a copy of\n    /// which may have children grouped into subtrees with type\n    /// [`NodeType.none`](#common.NodeType^none).\n    balance(config = {}) {\n        return this.children.length <= 8 /* BranchFactor */ ? this :\n            balanceRange(NodeType.none, this.children, this.positions, 0, this.children.length, 0, this.length, (children, positions, length) => new Tree(this.type, children, positions, length, this.propValues), config.makeTree || ((children, positions, length) => new Tree(NodeType.none, children, positions, length)));\n    }\n    /// Build a tree from a postfix-ordered buffer of node information,\n    /// or a cursor over such a buffer.\n    static build(data) { return buildTree(data); }\n}\n/// The empty tree\nTree.empty = new Tree(NodeType.none, [], [], 0);\nclass FlatBufferCursor {\n    constructor(buffer, index) {\n        this.buffer = buffer;\n        this.index = index;\n    }\n    get id() { return this.buffer[this.index - 4]; }\n    get start() { return this.buffer[this.index - 3]; }\n    get end() { return this.buffer[this.index - 2]; }\n    get size() { return this.buffer[this.index - 1]; }\n    get pos() { return this.index; }\n    next() { this.index -= 4; }\n    fork() { return new FlatBufferCursor(this.buffer, this.index); }\n}\n/// Tree buffers contain (type, start, end, endIndex) quads for each\n/// node. In such a buffer, nodes are stored in prefix order (parents\n/// before children, with the endIndex of the parent indicating which\n/// children belong to it).\nclass TreeBuffer {\n    /// Create a tree buffer.\n    constructor(\n    /// The buffer's content.\n    buffer, \n    /// The total length of the group of nodes in the buffer.\n    length, \n    /// The node set used in this buffer.\n    set) {\n        this.buffer = buffer;\n        this.length = length;\n        this.set = set;\n    }\n    /// @internal\n    get type() { return NodeType.none; }\n    /// @internal\n    toString() {\n        let result = [];\n        for (let index = 0; index < this.buffer.length;) {\n            result.push(this.childString(index));\n            index = this.buffer[index + 3];\n        }\n        return result.join(\",\");\n    }\n    /// @internal\n    childString(index) {\n        let id = this.buffer[index], endIndex = this.buffer[index + 3];\n        let type = this.set.types[id], result = type.name;\n        if (/\\W/.test(result) && !type.isError)\n            result = JSON.stringify(result);\n        index += 4;\n        if (endIndex == index)\n            return result;\n        let children = [];\n        while (index < endIndex) {\n            children.push(this.childString(index));\n            index = this.buffer[index + 3];\n        }\n        return result + \"(\" + children.join(\",\") + \")\";\n    }\n    /// @internal\n    findChild(startIndex, endIndex, dir, pos, side) {\n        let { buffer } = this, pick = -1;\n        for (let i = startIndex; i != endIndex; i = buffer[i + 3]) {\n            if (checkSide(side, pos, buffer[i + 1], buffer[i + 2])) {\n                pick = i;\n                if (dir > 0)\n                    break;\n            }\n        }\n        return pick;\n    }\n    /// @internal\n    slice(startI, endI, from, to) {\n        let b = this.buffer;\n        let copy = new Uint16Array(endI - startI);\n        for (let i = startI, j = 0; i < endI;) {\n            copy[j++] = b[i++];\n            copy[j++] = b[i++] - from;\n            copy[j++] = b[i++] - from;\n            copy[j++] = b[i++] - startI;\n        }\n        return new TreeBuffer(copy, to - from, this.set);\n    }\n}\nfunction checkSide(side, pos, from, to) {\n    switch (side) {\n        case -2 /* Before */: return from < pos;\n        case -1 /* AtOrBefore */: return to >= pos && from < pos;\n        case 0 /* Around */: return from < pos && to > pos;\n        case 1 /* AtOrAfter */: return from <= pos && to > pos;\n        case 2 /* After */: return to > pos;\n        case 4 /* DontCare */: return true;\n    }\n}\nfunction enterUnfinishedNodesBefore(node, pos) {\n    let scan = node.childBefore(pos);\n    while (scan) {\n        let last = scan.lastChild;\n        if (!last || last.to != scan.to)\n            break;\n        if (last.type.isError && last.from == last.to) {\n            node = scan;\n            scan = last.prevSibling;\n        }\n        else {\n            scan = last;\n        }\n    }\n    return node;\n}\nfunction resolveNode(node, pos, side, overlays) {\n    var _a;\n    // Move up to a node that actually holds the position, if possible\n    while (node.from == node.to ||\n        (side < 1 ? node.from >= pos : node.from > pos) ||\n        (side > -1 ? node.to <= pos : node.to < pos)) {\n        let parent = !overlays && node instanceof TreeNode && node.index < 0 ? null : node.parent;\n        if (!parent)\n            return node;\n        node = parent;\n    }\n    let mode = overlays ? 0 : IterMode.IgnoreOverlays;\n    // Must go up out of overlays when those do not overlap with pos\n    if (overlays)\n        for (let scan = node, parent = scan.parent; parent; scan = parent, parent = scan.parent) {\n            if (scan instanceof TreeNode && scan.index < 0 && ((_a = parent.enter(pos, side, mode)) === null || _a === void 0 ? void 0 : _a.from) != scan.from)\n                node = parent;\n        }\n    for (;;) {\n        let inner = node.enter(pos, side, mode);\n        if (!inner)\n            return node;\n        node = inner;\n    }\n}\nclass TreeNode {\n    constructor(_tree, from, \n    // Index in parent node, set to -1 if the node is not a direct child of _parent.node (overlay)\n    index, _parent) {\n        this._tree = _tree;\n        this.from = from;\n        this.index = index;\n        this._parent = _parent;\n    }\n    get type() { return this._tree.type; }\n    get name() { return this._tree.type.name; }\n    get to() { return this.from + this._tree.length; }\n    nextChild(i, dir, pos, side, mode = 0) {\n        for (let parent = this;;) {\n            for (let { children, positions } = parent._tree, e = dir > 0 ? children.length : -1; i != e; i += dir) {\n                let next = children[i], start = positions[i] + parent.from;\n                if (!checkSide(side, pos, start, start + next.length))\n                    continue;\n                if (next instanceof TreeBuffer) {\n                    if (mode & IterMode.ExcludeBuffers)\n                        continue;\n                    let index = next.findChild(0, next.buffer.length, dir, pos - start, side);\n                    if (index > -1)\n                        return new BufferNode(new BufferContext(parent, next, i, start), null, index);\n                }\n                else if ((mode & IterMode.IncludeAnonymous) || (!next.type.isAnonymous || hasChild(next))) {\n                    let mounted;\n                    if (!(mode & IterMode.IgnoreMounts) &&\n                        next.props && (mounted = next.prop(NodeProp.mounted)) && !mounted.overlay)\n                        return new TreeNode(mounted.tree, start, i, parent);\n                    let inner = new TreeNode(next, start, i, parent);\n                    return (mode & IterMode.IncludeAnonymous) || !inner.type.isAnonymous ? inner\n                        : inner.nextChild(dir < 0 ? next.children.length - 1 : 0, dir, pos, side);\n                }\n            }\n            if ((mode & IterMode.IncludeAnonymous) || !parent.type.isAnonymous)\n                return null;\n            if (parent.index >= 0)\n                i = parent.index + dir;\n            else\n                i = dir < 0 ? -1 : parent._parent._tree.children.length;\n            parent = parent._parent;\n            if (!parent)\n                return null;\n        }\n    }\n    get firstChild() { return this.nextChild(0, 1, 0, 4 /* DontCare */); }\n    get lastChild() { return this.nextChild(this._tree.children.length - 1, -1, 0, 4 /* DontCare */); }\n    childAfter(pos) { return this.nextChild(0, 1, pos, 2 /* After */); }\n    childBefore(pos) { return this.nextChild(this._tree.children.length - 1, -1, pos, -2 /* Before */); }\n    enter(pos, side, mode = 0) {\n        let mounted;\n        if (!(mode & IterMode.IgnoreOverlays) && (mounted = this._tree.prop(NodeProp.mounted)) && mounted.overlay) {\n            let rPos = pos - this.from;\n            for (let { from, to } of mounted.overlay) {\n                if ((side > 0 ? from <= rPos : from < rPos) &&\n                    (side < 0 ? to >= rPos : to > rPos))\n                    return new TreeNode(mounted.tree, mounted.overlay[0].from + this.from, -1, this);\n            }\n        }\n        return this.nextChild(0, 1, pos, side, mode);\n    }\n    nextSignificantParent() {\n        let val = this;\n        while (val.type.isAnonymous && val._parent)\n            val = val._parent;\n        return val;\n    }\n    get parent() {\n        return this._parent ? this._parent.nextSignificantParent() : null;\n    }\n    get nextSibling() {\n        return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4 /* DontCare */) : null;\n    }\n    get prevSibling() {\n        return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4 /* DontCare */) : null;\n    }\n    cursor(mode = 0) { return new TreeCursor(this, mode); }\n    get tree() { return this._tree; }\n    toTree() { return this._tree; }\n    resolve(pos, side = 0) {\n        return resolveNode(this, pos, side, false);\n    }\n    resolveInner(pos, side = 0) {\n        return resolveNode(this, pos, side, true);\n    }\n    enterUnfinishedNodesBefore(pos) { return enterUnfinishedNodesBefore(this, pos); }\n    getChild(type, before = null, after = null) {\n        let r = getChildren(this, type, before, after);\n        return r.length ? r[0] : null;\n    }\n    getChildren(type, before = null, after = null) {\n        return getChildren(this, type, before, after);\n    }\n    /// @internal\n    toString() { return this._tree.toString(); }\n    get node() { return this; }\n    matchContext(context) { return matchNodeContext(this, context); }\n}\nfunction getChildren(node, type, before, after) {\n    let cur = node.cursor(), result = [];\n    if (!cur.firstChild())\n        return result;\n    if (before != null)\n        while (!cur.type.is(before))\n            if (!cur.nextSibling())\n                return result;\n    for (;;) {\n        if (after != null && cur.type.is(after))\n            return result;\n        if (cur.type.is(type))\n            result.push(cur.node);\n        if (!cur.nextSibling())\n            return after == null ? result : [];\n    }\n}\nfunction matchNodeContext(node, context, i = context.length - 1) {\n    for (let p = node.parent; i >= 0; p = p.parent) {\n        if (!p)\n            return false;\n        if (!p.type.isAnonymous) {\n            if (context[i] && context[i] != p.name)\n                return false;\n            i--;\n        }\n    }\n    return true;\n}\nclass BufferContext {\n    constructor(parent, buffer, index, start) {\n        this.parent = parent;\n        this.buffer = buffer;\n        this.index = index;\n        this.start = start;\n    }\n}\nclass BufferNode {\n    constructor(context, _parent, index) {\n        this.context = context;\n        this._parent = _parent;\n        this.index = index;\n        this.type = context.buffer.set.types[context.buffer.buffer[index]];\n    }\n    get name() { return this.type.name; }\n    get from() { return this.context.start + this.context.buffer.buffer[this.index + 1]; }\n    get to() { return this.context.start + this.context.buffer.buffer[this.index + 2]; }\n    child(dir, pos, side) {\n        let { buffer } = this.context;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.context.start, side);\n        return index < 0 ? null : new BufferNode(this.context, this, index);\n    }\n    get firstChild() { return this.child(1, 0, 4 /* DontCare */); }\n    get lastChild() { return this.child(-1, 0, 4 /* DontCare */); }\n    childAfter(pos) { return this.child(1, pos, 2 /* After */); }\n    childBefore(pos) { return this.child(-1, pos, -2 /* Before */); }\n    enter(pos, side, mode = 0) {\n        if (mode & IterMode.ExcludeBuffers)\n            return null;\n        let { buffer } = this.context;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], side > 0 ? 1 : -1, pos - this.context.start, side);\n        return index < 0 ? null : new BufferNode(this.context, this, index);\n    }\n    get parent() {\n        return this._parent || this.context.parent.nextSignificantParent();\n    }\n    externalSibling(dir) {\n        return this._parent ? null : this.context.parent.nextChild(this.context.index + dir, dir, 0, 4 /* DontCare */);\n    }\n    get nextSibling() {\n        let { buffer } = this.context;\n        let after = buffer.buffer[this.index + 3];\n        if (after < (this._parent ? buffer.buffer[this._parent.index + 3] : buffer.buffer.length))\n            return new BufferNode(this.context, this._parent, after);\n        return this.externalSibling(1);\n    }\n    get prevSibling() {\n        let { buffer } = this.context;\n        let parentStart = this._parent ? this._parent.index + 4 : 0;\n        if (this.index == parentStart)\n            return this.externalSibling(-1);\n        return new BufferNode(this.context, this._parent, buffer.findChild(parentStart, this.index, -1, 0, 4 /* DontCare */));\n    }\n    cursor(mode = 0) { return new TreeCursor(this, mode); }\n    get tree() { return null; }\n    toTree() {\n        let children = [], positions = [];\n        let { buffer } = this.context;\n        let startI = this.index + 4, endI = buffer.buffer[this.index + 3];\n        if (endI > startI) {\n            let from = buffer.buffer[this.index + 1], to = buffer.buffer[this.index + 2];\n            children.push(buffer.slice(startI, endI, from, to));\n            positions.push(0);\n        }\n        return new Tree(this.type, children, positions, this.to - this.from);\n    }\n    resolve(pos, side = 0) {\n        return resolveNode(this, pos, side, false);\n    }\n    resolveInner(pos, side = 0) {\n        return resolveNode(this, pos, side, true);\n    }\n    enterUnfinishedNodesBefore(pos) { return enterUnfinishedNodesBefore(this, pos); }\n    /// @internal\n    toString() { return this.context.buffer.childString(this.index); }\n    getChild(type, before = null, after = null) {\n        let r = getChildren(this, type, before, after);\n        return r.length ? r[0] : null;\n    }\n    getChildren(type, before = null, after = null) {\n        return getChildren(this, type, before, after);\n    }\n    get node() { return this; }\n    matchContext(context) { return matchNodeContext(this, context); }\n}\n/// A tree cursor object focuses on a given node in a syntax tree, and\n/// allows you to move to adjacent nodes.\nclass TreeCursor {\n    /// @internal\n    constructor(node, \n    /// @internal\n    mode = 0) {\n        this.mode = mode;\n        /// @internal\n        this.buffer = null;\n        this.stack = [];\n        /// @internal\n        this.index = 0;\n        this.bufferNode = null;\n        if (node instanceof TreeNode) {\n            this.yieldNode(node);\n        }\n        else {\n            this._tree = node.context.parent;\n            this.buffer = node.context;\n            for (let n = node._parent; n; n = n._parent)\n                this.stack.unshift(n.index);\n            this.bufferNode = node;\n            this.yieldBuf(node.index);\n        }\n    }\n    /// Shorthand for `.type.name`.\n    get name() { return this.type.name; }\n    yieldNode(node) {\n        if (!node)\n            return false;\n        this._tree = node;\n        this.type = node.type;\n        this.from = node.from;\n        this.to = node.to;\n        return true;\n    }\n    yieldBuf(index, type) {\n        this.index = index;\n        let { start, buffer } = this.buffer;\n        this.type = type || buffer.set.types[buffer.buffer[index]];\n        this.from = start + buffer.buffer[index + 1];\n        this.to = start + buffer.buffer[index + 2];\n        return true;\n    }\n    yield(node) {\n        if (!node)\n            return false;\n        if (node instanceof TreeNode) {\n            this.buffer = null;\n            return this.yieldNode(node);\n        }\n        this.buffer = node.context;\n        return this.yieldBuf(node.index, node.type);\n    }\n    /// @internal\n    toString() {\n        return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();\n    }\n    /// @internal\n    enterChild(dir, pos, side) {\n        if (!this.buffer)\n            return this.yield(this._tree.nextChild(dir < 0 ? this._tree._tree.children.length - 1 : 0, dir, pos, side, this.mode));\n        let { buffer } = this.buffer;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.buffer.start, side);\n        if (index < 0)\n            return false;\n        this.stack.push(this.index);\n        return this.yieldBuf(index);\n    }\n    /// Move the cursor to this node's first child. When this returns\n    /// false, the node has no child, and the cursor has not been moved.\n    firstChild() { return this.enterChild(1, 0, 4 /* DontCare */); }\n    /// Move the cursor to this node's last child.\n    lastChild() { return this.enterChild(-1, 0, 4 /* DontCare */); }\n    /// Move the cursor to the first child that ends after `pos`.\n    childAfter(pos) { return this.enterChild(1, pos, 2 /* After */); }\n    /// Move to the last child that starts before `pos`.\n    childBefore(pos) { return this.enterChild(-1, pos, -2 /* Before */); }\n    /// Move the cursor to the child around `pos`. If side is -1 the\n    /// child may end at that position, when 1 it may start there. This\n    /// will also enter [overlaid](#common.MountedTree.overlay)\n    /// [mounted](#common.NodeProp^mounted) trees unless `overlays` is\n    /// set to false.\n    enter(pos, side, mode = this.mode) {\n        if (!this.buffer)\n            return this.yield(this._tree.enter(pos, side, mode));\n        return mode & IterMode.ExcludeBuffers ? false : this.enterChild(1, pos, side);\n    }\n    /// Move to the node's parent node, if this isn't the top node.\n    parent() {\n        if (!this.buffer)\n            return this.yieldNode((this.mode & IterMode.IncludeAnonymous) ? this._tree._parent : this._tree.parent);\n        if (this.stack.length)\n            return this.yieldBuf(this.stack.pop());\n        let parent = (this.mode & IterMode.IncludeAnonymous) ? this.buffer.parent : this.buffer.parent.nextSignificantParent();\n        this.buffer = null;\n        return this.yieldNode(parent);\n    }\n    /// @internal\n    sibling(dir) {\n        if (!this.buffer)\n            return !this._tree._parent ? false\n                : this.yield(this._tree.index < 0 ? null\n                    : this._tree._parent.nextChild(this._tree.index + dir, dir, 0, 4 /* DontCare */, this.mode));\n        let { buffer } = this.buffer, d = this.stack.length - 1;\n        if (dir < 0) {\n            let parentStart = d < 0 ? 0 : this.stack[d] + 4;\n            if (this.index != parentStart)\n                return this.yieldBuf(buffer.findChild(parentStart, this.index, -1, 0, 4 /* DontCare */));\n        }\n        else {\n            let after = buffer.buffer[this.index + 3];\n            if (after < (d < 0 ? buffer.buffer.length : buffer.buffer[this.stack[d] + 3]))\n                return this.yieldBuf(after);\n        }\n        return d < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + dir, dir, 0, 4 /* DontCare */, this.mode)) : false;\n    }\n    /// Move to this node's next sibling, if any.\n    nextSibling() { return this.sibling(1); }\n    /// Move to this node's previous sibling, if any.\n    prevSibling() { return this.sibling(-1); }\n    atLastNode(dir) {\n        let index, parent, { buffer } = this;\n        if (buffer) {\n            if (dir > 0) {\n                if (this.index < buffer.buffer.buffer.length)\n                    return false;\n            }\n            else {\n                for (let i = 0; i < this.index; i++)\n                    if (buffer.buffer.buffer[i + 3] < this.index)\n                        return false;\n            }\n            ({ index, parent } = buffer);\n        }\n        else {\n            ({ index, _parent: parent } = this._tree);\n        }\n        for (; parent; { index, _parent: parent } = parent) {\n            if (index > -1)\n                for (let i = index + dir, e = dir < 0 ? -1 : parent._tree.children.length; i != e; i += dir) {\n                    let child = parent._tree.children[i];\n                    if ((this.mode & IterMode.IncludeAnonymous) ||\n                        child instanceof TreeBuffer ||\n                        !child.type.isAnonymous ||\n                        hasChild(child))\n                        return false;\n                }\n        }\n        return true;\n    }\n    move(dir, enter) {\n        if (enter && this.enterChild(dir, 0, 4 /* DontCare */))\n            return true;\n        for (;;) {\n            if (this.sibling(dir))\n                return true;\n            if (this.atLastNode(dir) || !this.parent())\n                return false;\n        }\n    }\n    /// Move to the next node in a\n    /// [pre-order](https://en.wikipedia.org/wiki/Tree_traversal#Pre-order_(NLR))\n    /// traversal, going from a node to its first child or, if the\n    /// current node is empty or `enter` is false, its next sibling or\n    /// the next sibling of the first parent node that has one.\n    next(enter = true) { return this.move(1, enter); }\n    /// Move to the next node in a last-to-first pre-order traveral. A\n    /// node is followed by its last child or, if it has none, its\n    /// previous sibling or the previous sibling of the first parent\n    /// node that has one.\n    prev(enter = true) { return this.move(-1, enter); }\n    /// Move the cursor to the innermost node that covers `pos`. If\n    /// `side` is -1, it will enter nodes that end at `pos`. If it is 1,\n    /// it will enter nodes that start at `pos`.\n    moveTo(pos, side = 0) {\n        // Move up to a node that actually holds the position, if possible\n        while (this.from == this.to ||\n            (side < 1 ? this.from >= pos : this.from > pos) ||\n            (side > -1 ? this.to <= pos : this.to < pos))\n            if (!this.parent())\n                break;\n        // Then scan down into child nodes as far as possible\n        while (this.enterChild(1, pos, side)) { }\n        return this;\n    }\n    /// Get a [syntax node](#common.SyntaxNode) at the cursor's current\n    /// position.\n    get node() {\n        if (!this.buffer)\n            return this._tree;\n        let cache = this.bufferNode, result = null, depth = 0;\n        if (cache && cache.context == this.buffer) {\n            scan: for (let index = this.index, d = this.stack.length; d >= 0;) {\n                for (let c = cache; c; c = c._parent)\n                    if (c.index == index) {\n                        if (index == this.index)\n                            return c;\n                        result = c;\n                        depth = d + 1;\n                        break scan;\n                    }\n                index = this.stack[--d];\n            }\n        }\n        for (let i = depth; i < this.stack.length; i++)\n            result = new BufferNode(this.buffer, result, this.stack[i]);\n        return this.bufferNode = new BufferNode(this.buffer, result, this.index);\n    }\n    /// Get the [tree](#common.Tree) that represents the current node, if\n    /// any. Will return null when the node is in a [tree\n    /// buffer](#common.TreeBuffer).\n    get tree() {\n        return this.buffer ? null : this._tree._tree;\n    }\n    /// Iterate over the current node and all its descendants, calling\n    /// `enter` when entering a node and `leave`, if given, when leaving\n    /// one. When `enter` returns `false`, any children of that node are\n    /// skipped, and `leave` isn't called for it.\n    iterate(enter, leave) {\n        for (let depth = 0;;) {\n            let mustLeave = false;\n            if (this.type.isAnonymous || enter(this) !== false) {\n                if (this.firstChild()) {\n                    depth++;\n                    continue;\n                }\n                if (!this.type.isAnonymous)\n                    mustLeave = true;\n            }\n            for (;;) {\n                if (mustLeave && leave)\n                    leave(this);\n                mustLeave = this.type.isAnonymous;\n                if (this.nextSibling())\n                    break;\n                if (!depth)\n                    return;\n                this.parent();\n                depth--;\n                mustLeave = true;\n            }\n        }\n    }\n    /// Test whether the current node matches a given context—a sequence\n    /// of direct parent node names. Empty strings in the context array\n    /// are treated as wildcards.\n    matchContext(context) {\n        if (!this.buffer)\n            return matchNodeContext(this.node, context);\n        let { buffer } = this.buffer, { types } = buffer.set;\n        for (let i = context.length - 1, d = this.stack.length - 1; i >= 0; d--) {\n            if (d < 0)\n                return matchNodeContext(this.node, context, i);\n            let type = types[buffer.buffer[this.stack[d]]];\n            if (!type.isAnonymous) {\n                if (context[i] && context[i] != type.name)\n                    return false;\n                i--;\n            }\n        }\n        return true;\n    }\n}\nfunction hasChild(tree) {\n    return tree.children.some(ch => ch instanceof TreeBuffer || !ch.type.isAnonymous || hasChild(ch));\n}\nfunction buildTree(data) {\n    var _a;\n    let { buffer, nodeSet, maxBufferLength = DefaultBufferLength, reused = [], minRepeatType = nodeSet.types.length } = data;\n    let cursor = Array.isArray(buffer) ? new FlatBufferCursor(buffer, buffer.length) : buffer;\n    let types = nodeSet.types;\n    let contextHash = 0, lookAhead = 0;\n    function takeNode(parentStart, minPos, children, positions, inRepeat) {\n        let { id, start, end, size } = cursor;\n        let lookAheadAtStart = lookAhead;\n        while (size < 0) {\n            cursor.next();\n            if (size == -1 /* Reuse */) {\n                let node = reused[id];\n                children.push(node);\n                positions.push(start - parentStart);\n                return;\n            }\n            else if (size == -3 /* ContextChange */) { // Context change\n                contextHash = id;\n                return;\n            }\n            else if (size == -4 /* LookAhead */) {\n                lookAhead = id;\n                return;\n            }\n            else {\n                throw new RangeError(`Unrecognized record size: ${size}`);\n            }\n        }\n        let type = types[id], node, buffer;\n        let startPos = start - parentStart;\n        if (end - start <= maxBufferLength && (buffer = findBufferSize(cursor.pos - minPos, inRepeat))) {\n            // Small enough for a buffer, and no reused nodes inside\n            let data = new Uint16Array(buffer.size - buffer.skip);\n            let endPos = cursor.pos - buffer.size, index = data.length;\n            while (cursor.pos > endPos)\n                index = copyToBuffer(buffer.start, data, index);\n            node = new TreeBuffer(data, end - buffer.start, nodeSet);\n            startPos = buffer.start - parentStart;\n        }\n        else { // Make it a node\n            let endPos = cursor.pos - size;\n            cursor.next();\n            let localChildren = [], localPositions = [];\n            let localInRepeat = id >= minRepeatType ? id : -1;\n            let lastGroup = 0, lastEnd = end;\n            while (cursor.pos > endPos) {\n                if (localInRepeat >= 0 && cursor.id == localInRepeat && cursor.size >= 0) {\n                    if (cursor.end <= lastEnd - maxBufferLength) {\n                        makeRepeatLeaf(localChildren, localPositions, start, lastGroup, cursor.end, lastEnd, localInRepeat, lookAheadAtStart);\n                        lastGroup = localChildren.length;\n                        lastEnd = cursor.end;\n                    }\n                    cursor.next();\n                }\n                else {\n                    takeNode(start, endPos, localChildren, localPositions, localInRepeat);\n                }\n            }\n            if (localInRepeat >= 0 && lastGroup > 0 && lastGroup < localChildren.length)\n                makeRepeatLeaf(localChildren, localPositions, start, lastGroup, start, lastEnd, localInRepeat, lookAheadAtStart);\n            localChildren.reverse();\n            localPositions.reverse();\n            if (localInRepeat > -1 && lastGroup > 0) {\n                let make = makeBalanced(type);\n                node = balanceRange(type, localChildren, localPositions, 0, localChildren.length, 0, end - start, make, make);\n            }\n            else {\n                node = makeTree(type, localChildren, localPositions, end - start, lookAheadAtStart - end);\n            }\n        }\n        children.push(node);\n        positions.push(startPos);\n    }\n    function makeBalanced(type) {\n        return (children, positions, length) => {\n            let lookAhead = 0, lastI = children.length - 1, last, lookAheadProp;\n            if (lastI >= 0 && (last = children[lastI]) instanceof Tree) {\n                if (!lastI && last.type == type && last.length == length)\n                    return last;\n                if (lookAheadProp = last.prop(NodeProp.lookAhead))\n                    lookAhead = positions[lastI] + last.length + lookAheadProp;\n            }\n            return makeTree(type, children, positions, length, lookAhead);\n        };\n    }\n    function makeRepeatLeaf(children, positions, base, i, from, to, type, lookAhead) {\n        let localChildren = [], localPositions = [];\n        while (children.length > i) {\n            localChildren.push(children.pop());\n            localPositions.push(positions.pop() + base - from);\n        }\n        children.push(makeTree(nodeSet.types[type], localChildren, localPositions, to - from, lookAhead - to));\n        positions.push(from - base);\n    }\n    function makeTree(type, children, positions, length, lookAhead = 0, props) {\n        if (contextHash) {\n            let pair = [NodeProp.contextHash, contextHash];\n            props = props ? [pair].concat(props) : [pair];\n        }\n        if (lookAhead > 25) {\n            let pair = [NodeProp.lookAhead, lookAhead];\n            props = props ? [pair].concat(props) : [pair];\n        }\n        return new Tree(type, children, positions, length, props);\n    }\n    function findBufferSize(maxSize, inRepeat) {\n        // Scan through the buffer to find previous siblings that fit\n        // together in a TreeBuffer, and don't contain any reused nodes\n        // (which can't be stored in a buffer).\n        // If `inRepeat` is > -1, ignore node boundaries of that type for\n        // nesting, but make sure the end falls either at the start\n        // (`maxSize`) or before such a node.\n        let fork = cursor.fork();\n        let size = 0, start = 0, skip = 0, minStart = fork.end - maxBufferLength;\n        let result = { size: 0, start: 0, skip: 0 };\n        scan: for (let minPos = fork.pos - maxSize; fork.pos > minPos;) {\n            let nodeSize = fork.size;\n            // Pretend nested repeat nodes of the same type don't exist\n            if (fork.id == inRepeat && nodeSize >= 0) {\n                // Except that we store the current state as a valid return\n                // value.\n                result.size = size;\n                result.start = start;\n                result.skip = skip;\n                skip += 4;\n                size += 4;\n                fork.next();\n                continue;\n            }\n            let startPos = fork.pos - nodeSize;\n            if (nodeSize < 0 || startPos < minPos || fork.start < minStart)\n                break;\n            let localSkipped = fork.id >= minRepeatType ? 4 : 0;\n            let nodeStart = fork.start;\n            fork.next();\n            while (fork.pos > startPos) {\n                if (fork.size < 0) {\n                    if (fork.size == -3 /* ContextChange */)\n                        localSkipped += 4;\n                    else\n                        break scan;\n                }\n                else if (fork.id >= minRepeatType) {\n                    localSkipped += 4;\n                }\n                fork.next();\n            }\n            start = nodeStart;\n            size += nodeSize;\n            skip += localSkipped;\n        }\n        if (inRepeat < 0 || size == maxSize) {\n            result.size = size;\n            result.start = start;\n            result.skip = skip;\n        }\n        return result.size > 4 ? result : undefined;\n    }\n    function copyToBuffer(bufferStart, buffer, index) {\n        let { id, start, end, size } = cursor;\n        cursor.next();\n        if (size >= 0 && id < minRepeatType) {\n            let startIndex = index;\n            if (size > 4) {\n                let endPos = cursor.pos - (size - 4);\n                while (cursor.pos > endPos)\n                    index = copyToBuffer(bufferStart, buffer, index);\n            }\n            buffer[--index] = startIndex;\n            buffer[--index] = end - bufferStart;\n            buffer[--index] = start - bufferStart;\n            buffer[--index] = id;\n        }\n        else if (size == -3 /* ContextChange */) {\n            contextHash = id;\n        }\n        else if (size == -4 /* LookAhead */) {\n            lookAhead = id;\n        }\n        return index;\n    }\n    let children = [], positions = [];\n    while (cursor.pos > 0)\n        takeNode(data.start || 0, data.bufferStart || 0, children, positions, -1);\n    let length = (_a = data.length) !== null && _a !== void 0 ? _a : (children.length ? positions[0] + children[0].length : 0);\n    return new Tree(types[data.topID], children.reverse(), positions.reverse(), length);\n}\nconst nodeSizeCache = new WeakMap;\nfunction nodeSize(balanceType, node) {\n    if (!balanceType.isAnonymous || node instanceof TreeBuffer || node.type != balanceType)\n        return 1;\n    let size = nodeSizeCache.get(node);\n    if (size == null) {\n        size = 1;\n        for (let child of node.children) {\n            if (child.type != balanceType || !(child instanceof Tree)) {\n                size = 1;\n                break;\n            }\n            size += nodeSize(balanceType, child);\n        }\n        nodeSizeCache.set(node, size);\n    }\n    return size;\n}\nfunction balanceRange(\n// The type the balanced tree's inner nodes.\nbalanceType, \n// The direct children and their positions\nchildren, positions, \n// The index range in children/positions to use\nfrom, to, \n// The start position of the nodes, relative to their parent.\nstart, \n// Length of the outer node\nlength, \n// Function to build the top node of the balanced tree\nmkTop, \n// Function to build internal nodes for the balanced tree\nmkTree) {\n    let total = 0;\n    for (let i = from; i < to; i++)\n        total += nodeSize(balanceType, children[i]);\n    let maxChild = Math.ceil((total * 1.5) / 8 /* BranchFactor */);\n    let localChildren = [], localPositions = [];\n    function divide(children, positions, from, to, offset) {\n        for (let i = from; i < to;) {\n            let groupFrom = i, groupStart = positions[i], groupSize = nodeSize(balanceType, children[i]);\n            i++;\n            for (; i < to; i++) {\n                let nextSize = nodeSize(balanceType, children[i]);\n                if (groupSize + nextSize >= maxChild)\n                    break;\n                groupSize += nextSize;\n            }\n            if (i == groupFrom + 1) {\n                if (groupSize > maxChild) {\n                    let only = children[groupFrom]; // Only trees can have a size > 1\n                    divide(only.children, only.positions, 0, only.children.length, positions[groupFrom] + offset);\n                    continue;\n                }\n                localChildren.push(children[groupFrom]);\n            }\n            else {\n                let length = positions[i - 1] + children[i - 1].length - groupStart;\n                localChildren.push(balanceRange(balanceType, children, positions, groupFrom, i, groupStart, length, null, mkTree));\n            }\n            localPositions.push(groupStart + offset - start);\n        }\n    }\n    divide(children, positions, from, to, 0);\n    return (mkTop || mkTree)(localChildren, localPositions, length);\n}\n/// Provides a way to associate values with pieces of trees. As long\n/// as that part of the tree is reused, the associated values can be\n/// retrieved from an updated tree.\nclass NodeWeakMap {\n    constructor() {\n        this.map = new WeakMap();\n    }\n    setBuffer(buffer, index, value) {\n        let inner = this.map.get(buffer);\n        if (!inner)\n            this.map.set(buffer, inner = new Map);\n        inner.set(index, value);\n    }\n    getBuffer(buffer, index) {\n        let inner = this.map.get(buffer);\n        return inner && inner.get(index);\n    }\n    /// Set the value for this syntax node.\n    set(node, value) {\n        if (node instanceof BufferNode)\n            this.setBuffer(node.context.buffer, node.index, value);\n        else if (node instanceof TreeNode)\n            this.map.set(node.tree, value);\n    }\n    /// Retrieve value for this syntax node, if it exists in the map.\n    get(node) {\n        return node instanceof BufferNode ? this.getBuffer(node.context.buffer, node.index)\n            : node instanceof TreeNode ? this.map.get(node.tree) : undefined;\n    }\n    /// Set the value for the node that a cursor currently points to.\n    cursorSet(cursor, value) {\n        if (cursor.buffer)\n            this.setBuffer(cursor.buffer.buffer, cursor.index, value);\n        else\n            this.map.set(cursor.tree, value);\n    }\n    /// Retrieve the value for the node that a cursor currently points\n    /// to.\n    cursorGet(cursor) {\n        return cursor.buffer ? this.getBuffer(cursor.buffer.buffer, cursor.index) : this.map.get(cursor.tree);\n    }\n}\n\n/// Tree fragments are used during [incremental\n/// parsing](#common.Parser.startParse) to track parts of old trees\n/// that can be reused in a new parse. An array of fragments is used\n/// to track regions of an old tree whose nodes might be reused in new\n/// parses. Use the static\n/// [`applyChanges`](#common.TreeFragment^applyChanges) method to\n/// update fragments for document changes.\nclass TreeFragment {\n    /// Construct a tree fragment. You'll usually want to use\n    /// [`addTree`](#common.TreeFragment^addTree) and\n    /// [`applyChanges`](#common.TreeFragment^applyChanges) instead of\n    /// calling this directly.\n    constructor(\n    /// The start of the unchanged range pointed to by this fragment.\n    /// This refers to an offset in the _updated_ document (as opposed\n    /// to the original tree).\n    from, \n    /// The end of the unchanged range.\n    to, \n    /// The tree that this fragment is based on.\n    tree, \n    /// The offset between the fragment's tree and the document that\n    /// this fragment can be used against. Add this when going from\n    /// document to tree positions, subtract it to go from tree to\n    /// document positions.\n    offset, openStart = false, openEnd = false) {\n        this.from = from;\n        this.to = to;\n        this.tree = tree;\n        this.offset = offset;\n        this.open = (openStart ? 1 /* Start */ : 0) | (openEnd ? 2 /* End */ : 0);\n    }\n    /// Whether the start of the fragment represents the start of a\n    /// parse, or the end of a change. (In the second case, it may not\n    /// be safe to reuse some nodes at the start, depending on the\n    /// parsing algorithm.)\n    get openStart() { return (this.open & 1 /* Start */) > 0; }\n    /// Whether the end of the fragment represents the end of a\n    /// full-document parse, or the start of a change.\n    get openEnd() { return (this.open & 2 /* End */) > 0; }\n    /// Create a set of fragments from a freshly parsed tree, or update\n    /// an existing set of fragments by replacing the ones that overlap\n    /// with a tree with content from the new tree. When `partial` is\n    /// true, the parse is treated as incomplete, and the resulting\n    /// fragment has [`openEnd`](#common.TreeFragment.openEnd) set to\n    /// true.\n    static addTree(tree, fragments = [], partial = false) {\n        let result = [new TreeFragment(0, tree.length, tree, 0, false, partial)];\n        for (let f of fragments)\n            if (f.to > tree.length)\n                result.push(f);\n        return result;\n    }\n    /// Apply a set of edits to an array of fragments, removing or\n    /// splitting fragments as necessary to remove edited ranges, and\n    /// adjusting offsets for fragments that moved.\n    static applyChanges(fragments, changes, minGap = 128) {\n        if (!changes.length)\n            return fragments;\n        let result = [];\n        let fI = 1, nextF = fragments.length ? fragments[0] : null;\n        for (let cI = 0, pos = 0, off = 0;; cI++) {\n            let nextC = cI < changes.length ? changes[cI] : null;\n            let nextPos = nextC ? nextC.fromA : 1e9;\n            if (nextPos - pos >= minGap)\n                while (nextF && nextF.from < nextPos) {\n                    let cut = nextF;\n                    if (pos >= cut.from || nextPos <= cut.to || off) {\n                        let fFrom = Math.max(cut.from, pos) - off, fTo = Math.min(cut.to, nextPos) - off;\n                        cut = fFrom >= fTo ? null : new TreeFragment(fFrom, fTo, cut.tree, cut.offset + off, cI > 0, !!nextC);\n                    }\n                    if (cut)\n                        result.push(cut);\n                    if (nextF.to > nextPos)\n                        break;\n                    nextF = fI < fragments.length ? fragments[fI++] : null;\n                }\n            if (!nextC)\n                break;\n            pos = nextC.toA;\n            off = nextC.toA - nextC.toB;\n        }\n        return result;\n    }\n}\n/// A superclass that parsers should extend.\nclass Parser {\n    /// Start a parse, returning a [partial parse](#common.PartialParse)\n    /// object. [`fragments`](#common.TreeFragment) can be passed in to\n    /// make the parse incremental.\n    ///\n    /// By default, the entire input is parsed. You can pass `ranges`,\n    /// which should be a sorted array of non-empty, non-overlapping\n    /// ranges, to parse only those ranges. The tree returned in that\n    /// case will start at `ranges[0].from`.\n    startParse(input, fragments, ranges) {\n        if (typeof input == \"string\")\n            input = new StringInput(input);\n        ranges = !ranges ? [new Range(0, input.length)] : ranges.length ? ranges.map(r => new Range(r.from, r.to)) : [new Range(0, 0)];\n        return this.createParse(input, fragments || [], ranges);\n    }\n    /// Run a full parse, returning the resulting tree.\n    parse(input, fragments, ranges) {\n        let parse = this.startParse(input, fragments, ranges);\n        for (;;) {\n            let done = parse.advance();\n            if (done)\n                return done;\n        }\n    }\n}\nclass StringInput {\n    constructor(string) {\n        this.string = string;\n    }\n    get length() { return this.string.length; }\n    chunk(from) { return this.string.slice(from); }\n    get lineChunks() { return false; }\n    read(from, to) { return this.string.slice(from, to); }\n}\n\n/// Create a parse wrapper that, after the inner parse completes,\n/// scans its tree for mixed language regions with the `nest`\n/// function, runs the resulting [inner parses](#common.NestedParse),\n/// and then [mounts](#common.NodeProp^mounted) their results onto the\n/// tree.\nfunction parseMixed(nest) {\n    return (parse, input, fragments, ranges) => new MixedParse(parse, nest, input, fragments, ranges);\n}\nclass InnerParse {\n    constructor(parser, parse, overlay, target, ranges) {\n        this.parser = parser;\n        this.parse = parse;\n        this.overlay = overlay;\n        this.target = target;\n        this.ranges = ranges;\n    }\n}\nclass ActiveOverlay {\n    constructor(parser, predicate, mounts, index, start, target, prev) {\n        this.parser = parser;\n        this.predicate = predicate;\n        this.mounts = mounts;\n        this.index = index;\n        this.start = start;\n        this.target = target;\n        this.prev = prev;\n        this.depth = 0;\n        this.ranges = [];\n    }\n}\nconst stoppedInner = new NodeProp({ perNode: true });\nclass MixedParse {\n    constructor(base, nest, input, fragments, ranges) {\n        this.nest = nest;\n        this.input = input;\n        this.fragments = fragments;\n        this.ranges = ranges;\n        this.inner = [];\n        this.innerDone = 0;\n        this.baseTree = null;\n        this.stoppedAt = null;\n        this.baseParse = base;\n    }\n    advance() {\n        if (this.baseParse) {\n            let done = this.baseParse.advance();\n            if (!done)\n                return null;\n            this.baseParse = null;\n            this.baseTree = done;\n            this.startInner();\n            if (this.stoppedAt != null)\n                for (let inner of this.inner)\n                    inner.parse.stopAt(this.stoppedAt);\n        }\n        if (this.innerDone == this.inner.length) {\n            let result = this.baseTree;\n            if (this.stoppedAt != null)\n                result = new Tree(result.type, result.children, result.positions, result.length, result.propValues.concat([[stoppedInner, this.stoppedAt]]));\n            return result;\n        }\n        let inner = this.inner[this.innerDone], done = inner.parse.advance();\n        if (done) {\n            this.innerDone++;\n            // This is a somewhat dodgy but super helpful hack where we\n            // patch up nodes created by the inner parse (and thus\n            // presumably not aliased anywhere else) to hold the information\n            // about the inner parse.\n            let props = Object.assign(Object.create(null), inner.target.props);\n            props[NodeProp.mounted.id] = new MountedTree(done, inner.overlay, inner.parser);\n            inner.target.props = props;\n        }\n        return null;\n    }\n    get parsedPos() {\n        if (this.baseParse)\n            return 0;\n        let pos = this.input.length;\n        for (let i = this.innerDone; i < this.inner.length; i++) {\n            if (this.inner[i].ranges[0].from < pos)\n                pos = Math.min(pos, this.inner[i].parse.parsedPos);\n        }\n        return pos;\n    }\n    stopAt(pos) {\n        this.stoppedAt = pos;\n        if (this.baseParse)\n            this.baseParse.stopAt(pos);\n        else\n            for (let i = this.innerDone; i < this.inner.length; i++)\n                this.inner[i].parse.stopAt(pos);\n    }\n    startInner() {\n        let fragmentCursor = new FragmentCursor(this.fragments);\n        let overlay = null;\n        let covered = null;\n        let cursor = new TreeCursor(new TreeNode(this.baseTree, this.ranges[0].from, 0, null), IterMode.IncludeAnonymous | IterMode.IgnoreMounts);\n        scan: for (let nest, isCovered; this.stoppedAt == null || cursor.from < this.stoppedAt;) {\n            let enter = true, range;\n            if (fragmentCursor.hasNode(cursor)) {\n                if (overlay) {\n                    let match = overlay.mounts.find(m => m.frag.from <= cursor.from && m.frag.to >= cursor.to && m.mount.overlay);\n                    if (match)\n                        for (let r of match.mount.overlay) {\n                            let from = r.from + match.pos, to = r.to + match.pos;\n                            if (from >= cursor.from && to <= cursor.to && !overlay.ranges.some(r => r.from < to && r.to > from))\n                                overlay.ranges.push({ from, to });\n                        }\n                }\n                enter = false;\n            }\n            else if (covered && (isCovered = checkCover(covered.ranges, cursor.from, cursor.to))) {\n                enter = isCovered != 2 /* Full */;\n            }\n            else if (!cursor.type.isAnonymous && cursor.from < cursor.to && (nest = this.nest(cursor, this.input))) {\n                if (!cursor.tree)\n                    materialize(cursor);\n                let oldMounts = fragmentCursor.findMounts(cursor.from, nest.parser);\n                if (typeof nest.overlay == \"function\") {\n                    overlay = new ActiveOverlay(nest.parser, nest.overlay, oldMounts, this.inner.length, cursor.from, cursor.tree, overlay);\n                }\n                else {\n                    let ranges = punchRanges(this.ranges, nest.overlay || [new Range(cursor.from, cursor.to)]);\n                    if (ranges.length)\n                        this.inner.push(new InnerParse(nest.parser, nest.parser.startParse(this.input, enterFragments(oldMounts, ranges), ranges), nest.overlay ? nest.overlay.map(r => new Range(r.from - cursor.from, r.to - cursor.from)) : null, cursor.tree, ranges));\n                    if (!nest.overlay)\n                        enter = false;\n                    else if (ranges.length)\n                        covered = { ranges, depth: 0, prev: covered };\n                }\n            }\n            else if (overlay && (range = overlay.predicate(cursor))) {\n                if (range === true)\n                    range = new Range(cursor.from, cursor.to);\n                if (range.from < range.to)\n                    overlay.ranges.push(range);\n            }\n            if (enter && cursor.firstChild()) {\n                if (overlay)\n                    overlay.depth++;\n                if (covered)\n                    covered.depth++;\n            }\n            else {\n                for (;;) {\n                    if (cursor.nextSibling())\n                        break;\n                    if (!cursor.parent())\n                        break scan;\n                    if (overlay && !--overlay.depth) {\n                        let ranges = punchRanges(this.ranges, overlay.ranges);\n                        if (ranges.length)\n                            this.inner.splice(overlay.index, 0, new InnerParse(overlay.parser, overlay.parser.startParse(this.input, enterFragments(overlay.mounts, ranges), ranges), overlay.ranges.map(r => new Range(r.from - overlay.start, r.to - overlay.start)), overlay.target, ranges));\n                        overlay = overlay.prev;\n                    }\n                    if (covered && !--covered.depth)\n                        covered = covered.prev;\n                }\n            }\n        }\n    }\n}\nfunction checkCover(covered, from, to) {\n    for (let range of covered) {\n        if (range.from >= to)\n            break;\n        if (range.to > from)\n            return range.from <= from && range.to >= to ? 2 /* Full */ : 1 /* Partial */;\n    }\n    return 0 /* None */;\n}\n// Take a piece of buffer and convert it into a stand-alone\n// TreeBuffer.\nfunction sliceBuf(buf, startI, endI, nodes, positions, off) {\n    if (startI < endI) {\n        let from = buf.buffer[startI + 1], to = buf.buffer[endI - 2];\n        nodes.push(buf.slice(startI, endI, from, to));\n        positions.push(from - off);\n    }\n}\n// This function takes a node that's in a buffer, and converts it, and\n// its parent buffer nodes, into a Tree. This is again acting on the\n// assumption that the trees and buffers have been constructed by the\n// parse that was ran via the mix parser, and thus aren't shared with\n// any other code, making violations of the immutability safe.\nfunction materialize(cursor) {\n    let { node } = cursor, depth = 0;\n    // Scan up to the nearest tree\n    do {\n        cursor.parent();\n        depth++;\n    } while (!cursor.tree);\n    // Find the index of the buffer in that tree\n    let i = 0, base = cursor.tree, off = 0;\n    for (;; i++) {\n        off = base.positions[i] + cursor.from;\n        if (off <= node.from && off + base.children[i].length >= node.to)\n            break;\n    }\n    let buf = base.children[i], b = buf.buffer;\n    // Split a level in the buffer, putting the nodes before and after\n    // the child that contains `node` into new buffers.\n    function split(startI, endI, type, innerOffset, length) {\n        let i = startI;\n        while (b[i + 2] + off <= node.from)\n            i = b[i + 3];\n        let children = [], positions = [];\n        sliceBuf(buf, startI, i, children, positions, innerOffset);\n        let from = b[i + 1], to = b[i + 2];\n        let isTarget = from + off == node.from && to + off == node.to && b[i] == node.type.id;\n        children.push(isTarget ? node.toTree() : split(i + 4, b[i + 3], buf.set.types[b[i]], from, to - from));\n        positions.push(from - innerOffset);\n        sliceBuf(buf, b[i + 3], endI, children, positions, innerOffset);\n        return new Tree(type, children, positions, length);\n    }\n    base.children[i] = split(0, b.length, NodeType.none, 0, buf.length);\n    // Move the cursor back to the target node\n    for (let d = 0; d <= depth; d++)\n        cursor.childAfter(node.from);\n}\nclass StructureCursor {\n    constructor(root, offset) {\n        this.offset = offset;\n        this.done = false;\n        this.cursor = root.cursor(IterMode.IncludeAnonymous | IterMode.IgnoreMounts);\n    }\n    // Move to the first node (in pre-order) that starts at or after `pos`.\n    moveTo(pos) {\n        let { cursor } = this, p = pos - this.offset;\n        while (!this.done && cursor.from < p) {\n            if (cursor.to >= pos && cursor.enter(p, 1, IterMode.IgnoreOverlays | IterMode.ExcludeBuffers)) ;\n            else if (!cursor.next(false))\n                this.done = true;\n        }\n    }\n    hasNode(cursor) {\n        this.moveTo(cursor.from);\n        if (!this.done && this.cursor.from + this.offset == cursor.from && this.cursor.tree) {\n            for (let tree = this.cursor.tree;;) {\n                if (tree == cursor.tree)\n                    return true;\n                if (tree.children.length && tree.positions[0] == 0 && tree.children[0] instanceof Tree)\n                    tree = tree.children[0];\n                else\n                    break;\n            }\n        }\n        return false;\n    }\n}\nclass FragmentCursor {\n    constructor(fragments) {\n        var _a;\n        this.fragments = fragments;\n        this.curTo = 0;\n        this.fragI = 0;\n        if (fragments.length) {\n            let first = this.curFrag = fragments[0];\n            this.curTo = (_a = first.tree.prop(stoppedInner)) !== null && _a !== void 0 ? _a : first.to;\n            this.inner = new StructureCursor(first.tree, -first.offset);\n        }\n        else {\n            this.curFrag = this.inner = null;\n        }\n    }\n    hasNode(node) {\n        while (this.curFrag && node.from >= this.curTo)\n            this.nextFrag();\n        return this.curFrag && this.curFrag.from <= node.from && this.curTo >= node.to && this.inner.hasNode(node);\n    }\n    nextFrag() {\n        var _a;\n        this.fragI++;\n        if (this.fragI == this.fragments.length) {\n            this.curFrag = this.inner = null;\n        }\n        else {\n            let frag = this.curFrag = this.fragments[this.fragI];\n            this.curTo = (_a = frag.tree.prop(stoppedInner)) !== null && _a !== void 0 ? _a : frag.to;\n            this.inner = new StructureCursor(frag.tree, -frag.offset);\n        }\n    }\n    findMounts(pos, parser) {\n        var _a;\n        let result = [];\n        if (this.inner) {\n            this.inner.cursor.moveTo(pos, 1);\n            for (let pos = this.inner.cursor.node; pos; pos = pos.parent) {\n                let mount = (_a = pos.tree) === null || _a === void 0 ? void 0 : _a.prop(NodeProp.mounted);\n                if (mount && mount.parser == parser) {\n                    for (let i = this.fragI; i < this.fragments.length; i++) {\n                        let frag = this.fragments[i];\n                        if (frag.from >= pos.to)\n                            break;\n                        if (frag.tree == this.curFrag.tree)\n                            result.push({\n                                frag,\n                                pos: pos.from - frag.offset,\n                                mount\n                            });\n                    }\n                }\n            }\n        }\n        return result;\n    }\n}\nfunction punchRanges(outer, ranges) {\n    let copy = null, current = ranges;\n    for (let i = 1, j = 0; i < outer.length; i++) {\n        let gapFrom = outer[i - 1].to, gapTo = outer[i].from;\n        for (; j < current.length; j++) {\n            let r = current[j];\n            if (r.from >= gapTo)\n                break;\n            if (r.to <= gapFrom)\n                continue;\n            if (!copy)\n                current = copy = ranges.slice();\n            if (r.from < gapFrom) {\n                copy[j] = new Range(r.from, gapFrom);\n                if (r.to > gapTo)\n                    copy.splice(j + 1, 0, new Range(gapTo, r.to));\n            }\n            else if (r.to > gapTo) {\n                copy[j--] = new Range(gapTo, r.to);\n            }\n            else {\n                copy.splice(j--, 1);\n            }\n        }\n    }\n    return current;\n}\nfunction findCoverChanges(a, b, from, to) {\n    let iA = 0, iB = 0, inA = false, inB = false, pos = -1e9;\n    let result = [];\n    for (;;) {\n        let nextA = iA == a.length ? 1e9 : inA ? a[iA].to : a[iA].from;\n        let nextB = iB == b.length ? 1e9 : inB ? b[iB].to : b[iB].from;\n        if (inA != inB) {\n            let start = Math.max(pos, from), end = Math.min(nextA, nextB, to);\n            if (start < end)\n                result.push(new Range(start, end));\n        }\n        pos = Math.min(nextA, nextB);\n        if (pos == 1e9)\n            break;\n        if (nextA == pos) {\n            if (!inA)\n                inA = true;\n            else {\n                inA = false;\n                iA++;\n            }\n        }\n        if (nextB == pos) {\n            if (!inB)\n                inB = true;\n            else {\n                inB = false;\n                iB++;\n            }\n        }\n    }\n    return result;\n}\n// Given a number of fragments for the outer tree, and a set of ranges\n// to parse, find fragments for inner trees mounted around those\n// ranges, if any.\nfunction enterFragments(mounts, ranges) {\n    let result = [];\n    for (let { pos, mount, frag } of mounts) {\n        let startPos = pos + (mount.overlay ? mount.overlay[0].from : 0), endPos = startPos + mount.tree.length;\n        let from = Math.max(frag.from, startPos), to = Math.min(frag.to, endPos);\n        if (mount.overlay) {\n            let overlay = mount.overlay.map(r => new Range(r.from + pos, r.to + pos));\n            let changes = findCoverChanges(ranges, overlay, from, to);\n            for (let i = 0, pos = from;; i++) {\n                let last = i == changes.length, end = last ? to : changes[i].from;\n                if (end > pos)\n                    result.push(new TreeFragment(pos, end, mount.tree, -startPos, frag.from >= pos || frag.openStart, frag.to <= end || frag.openEnd));\n                if (last)\n                    break;\n                pos = changes[i].to;\n            }\n        }\n        else {\n            result.push(new TreeFragment(from, to, mount.tree, -startPos, frag.from >= startPos || frag.openStart, frag.to <= endPos || frag.openEnd));\n        }\n    }\n    return result;\n}\n\nexport { DefaultBufferLength, IterMode, MountedTree, NodeProp, NodeSet, NodeType, NodeWeakMap, Parser, Tree, TreeBuffer, TreeCursor, TreeFragment, parseMixed };\n","import { Parser, NodeSet, NodeType, DefaultBufferLength, NodeProp, Tree, IterMode } from '@lezer/common';\n\n/// A parse stack. These are used internally by the parser to track\n/// parsing progress. They also provide some properties and methods\n/// that external code such as a tokenizer can use to get information\n/// about the parse state.\nclass Stack {\n    /// @internal\n    constructor(\n    /// The parse that this stack is part of @internal\n    p, \n    /// Holds state, input pos, buffer index triplets for all but the\n    /// top state @internal\n    stack, \n    /// The current parse state @internal\n    state, \n    // The position at which the next reduce should take place. This\n    // can be less than `this.pos` when skipped expressions have been\n    // added to the stack (which should be moved outside of the next\n    // reduction)\n    /// @internal\n    reducePos, \n    /// The input position up to which this stack has parsed.\n    pos, \n    /// The dynamic score of the stack, including dynamic precedence\n    /// and error-recovery penalties\n    /// @internal\n    score, \n    // The output buffer. Holds (type, start, end, size) quads\n    // representing nodes created by the parser, where `size` is\n    // amount of buffer array entries covered by this node.\n    /// @internal\n    buffer, \n    // The base offset of the buffer. When stacks are split, the split\n    // instance shared the buffer history with its parent up to\n    // `bufferBase`, which is the absolute offset (including the\n    // offset of previous splits) into the buffer at which this stack\n    // starts writing.\n    /// @internal\n    bufferBase, \n    /// @internal\n    curContext, \n    /// @internal\n    lookAhead = 0, \n    // A parent stack from which this was split off, if any. This is\n    // set up so that it always points to a stack that has some\n    // additional buffer content, never to a stack with an equal\n    // `bufferBase`.\n    /// @internal\n    parent) {\n        this.p = p;\n        this.stack = stack;\n        this.state = state;\n        this.reducePos = reducePos;\n        this.pos = pos;\n        this.score = score;\n        this.buffer = buffer;\n        this.bufferBase = bufferBase;\n        this.curContext = curContext;\n        this.lookAhead = lookAhead;\n        this.parent = parent;\n    }\n    /// @internal\n    toString() {\n        return `[${this.stack.filter((_, i) => i % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? \"!\" + this.score : \"\"}`;\n    }\n    // Start an empty stack\n    /// @internal\n    static start(p, state, pos = 0) {\n        let cx = p.parser.context;\n        return new Stack(p, [], state, pos, pos, 0, [], 0, cx ? new StackContext(cx, cx.start) : null, 0, null);\n    }\n    /// The stack's current [context](#lr.ContextTracker) value, if\n    /// any. Its type will depend on the context tracker's type\n    /// parameter, or it will be `null` if there is no context\n    /// tracker.\n    get context() { return this.curContext ? this.curContext.context : null; }\n    // Push a state onto the stack, tracking its start position as well\n    // as the buffer base at that point.\n    /// @internal\n    pushState(state, start) {\n        this.stack.push(this.state, start, this.bufferBase + this.buffer.length);\n        this.state = state;\n    }\n    // Apply a reduce action\n    /// @internal\n    reduce(action) {\n        let depth = action >> 19 /* ReduceDepthShift */, type = action & 65535 /* ValueMask */;\n        let { parser } = this.p;\n        let dPrec = parser.dynamicPrecedence(type);\n        if (dPrec)\n            this.score += dPrec;\n        if (depth == 0) {\n            this.pushState(parser.getGoto(this.state, type, true), this.reducePos);\n            // Zero-depth reductions are a special case—they add stuff to\n            // the stack without popping anything off.\n            if (type < parser.minRepeatTerm)\n                this.storeNode(type, this.reducePos, this.reducePos, 4, true);\n            this.reduceContext(type, this.reducePos);\n            return;\n        }\n        // Find the base index into `this.stack`, content after which will\n        // be dropped. Note that with `StayFlag` reductions we need to\n        // consume two extra frames (the dummy parent node for the skipped\n        // expression and the state that we'll be staying in, which should\n        // be moved to `this.state`).\n        let base = this.stack.length - ((depth - 1) * 3) - (action & 262144 /* StayFlag */ ? 6 : 0);\n        let start = this.stack[base - 2];\n        let bufferBase = this.stack[base - 1], count = this.bufferBase + this.buffer.length - bufferBase;\n        // Store normal terms or `R -> R R` repeat reductions\n        if (type < parser.minRepeatTerm || (action & 131072 /* RepeatFlag */)) {\n            let pos = parser.stateFlag(this.state, 1 /* Skipped */) ? this.pos : this.reducePos;\n            this.storeNode(type, start, pos, count + 4, true);\n        }\n        if (action & 262144 /* StayFlag */) {\n            this.state = this.stack[base];\n        }\n        else {\n            let baseStateID = this.stack[base - 3];\n            this.state = parser.getGoto(baseStateID, type, true);\n        }\n        while (this.stack.length > base)\n            this.stack.pop();\n        this.reduceContext(type, start);\n    }\n    // Shift a value into the buffer\n    /// @internal\n    storeNode(term, start, end, size = 4, isReduce = false) {\n        if (term == 0 /* Err */ &&\n            (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {\n            // Try to omit/merge adjacent error nodes\n            let cur = this, top = this.buffer.length;\n            if (top == 0 && cur.parent) {\n                top = cur.bufferBase - cur.parent.bufferBase;\n                cur = cur.parent;\n            }\n            if (top > 0 && cur.buffer[top - 4] == 0 /* Err */ && cur.buffer[top - 1] > -1) {\n                if (start == end)\n                    return;\n                if (cur.buffer[top - 2] >= start) {\n                    cur.buffer[top - 2] = end;\n                    return;\n                }\n            }\n        }\n        if (!isReduce || this.pos == end) { // Simple case, just append\n            this.buffer.push(term, start, end, size);\n        }\n        else { // There may be skipped nodes that have to be moved forward\n            let index = this.buffer.length;\n            if (index > 0 && this.buffer[index - 4] != 0 /* Err */)\n                while (index > 0 && this.buffer[index - 2] > end) {\n                    // Move this record forward\n                    this.buffer[index] = this.buffer[index - 4];\n                    this.buffer[index + 1] = this.buffer[index - 3];\n                    this.buffer[index + 2] = this.buffer[index - 2];\n                    this.buffer[index + 3] = this.buffer[index - 1];\n                    index -= 4;\n                    if (size > 4)\n                        size -= 4;\n                }\n            this.buffer[index] = term;\n            this.buffer[index + 1] = start;\n            this.buffer[index + 2] = end;\n            this.buffer[index + 3] = size;\n        }\n    }\n    // Apply a shift action\n    /// @internal\n    shift(action, next, nextEnd) {\n        let start = this.pos;\n        if (action & 131072 /* GotoFlag */) {\n            this.pushState(action & 65535 /* ValueMask */, this.pos);\n        }\n        else if ((action & 262144 /* StayFlag */) == 0) { // Regular shift\n            let nextState = action, { parser } = this.p;\n            if (nextEnd > this.pos || next <= parser.maxNode) {\n                this.pos = nextEnd;\n                if (!parser.stateFlag(nextState, 1 /* Skipped */))\n                    this.reducePos = nextEnd;\n            }\n            this.pushState(nextState, start);\n            this.shiftContext(next, start);\n            if (next <= parser.maxNode)\n                this.buffer.push(next, start, nextEnd, 4);\n        }\n        else { // Shift-and-stay, which means this is a skipped token\n            this.pos = nextEnd;\n            this.shiftContext(next, start);\n            if (next <= this.p.parser.maxNode)\n                this.buffer.push(next, start, nextEnd, 4);\n        }\n    }\n    // Apply an action\n    /// @internal\n    apply(action, next, nextEnd) {\n        if (action & 65536 /* ReduceFlag */)\n            this.reduce(action);\n        else\n            this.shift(action, next, nextEnd);\n    }\n    // Add a prebuilt (reused) node into the buffer.\n    /// @internal\n    useNode(value, next) {\n        let index = this.p.reused.length - 1;\n        if (index < 0 || this.p.reused[index] != value) {\n            this.p.reused.push(value);\n            index++;\n        }\n        let start = this.pos;\n        this.reducePos = this.pos = start + value.length;\n        this.pushState(next, start);\n        this.buffer.push(index, start, this.reducePos, -1 /* size == -1 means this is a reused value */);\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.reuse(this.curContext.context, value, this, this.p.stream.reset(this.pos - value.length)));\n    }\n    // Split the stack. Due to the buffer sharing and the fact\n    // that `this.stack` tends to stay quite shallow, this isn't very\n    // expensive.\n    /// @internal\n    split() {\n        let parent = this;\n        let off = parent.buffer.length;\n        // Because the top of the buffer (after this.pos) may be mutated\n        // to reorder reductions and skipped tokens, and shared buffers\n        // should be immutable, this copies any outstanding skipped tokens\n        // to the new buffer, and puts the base pointer before them.\n        while (off > 0 && parent.buffer[off - 2] > parent.reducePos)\n            off -= 4;\n        let buffer = parent.buffer.slice(off), base = parent.bufferBase + off;\n        // Make sure parent points to an actual parent with content, if there is such a parent.\n        while (parent && base == parent.bufferBase)\n            parent = parent.parent;\n        return new Stack(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, buffer, base, this.curContext, this.lookAhead, parent);\n    }\n    // Try to recover from an error by 'deleting' (ignoring) one token.\n    /// @internal\n    recoverByDelete(next, nextEnd) {\n        let isNode = next <= this.p.parser.maxNode;\n        if (isNode)\n            this.storeNode(next, this.pos, nextEnd, 4);\n        this.storeNode(0 /* Err */, this.pos, nextEnd, isNode ? 8 : 4);\n        this.pos = this.reducePos = nextEnd;\n        this.score -= 190 /* Delete */;\n    }\n    /// Check if the given term would be able to be shifted (optionally\n    /// after some reductions) on this stack. This can be useful for\n    /// external tokenizers that want to make sure they only provide a\n    /// given token when it applies.\n    canShift(term) {\n        for (let sim = new SimulatedStack(this);;) {\n            let action = this.p.parser.stateSlot(sim.state, 4 /* DefaultReduce */) || this.p.parser.hasAction(sim.state, term);\n            if ((action & 65536 /* ReduceFlag */) == 0)\n                return true;\n            if (action == 0)\n                return false;\n            sim.reduce(action);\n        }\n    }\n    // Apply up to Recover.MaxNext recovery actions that conceptually\n    // inserts some missing token or rule.\n    /// @internal\n    recoverByInsert(next) {\n        if (this.stack.length >= 300 /* MaxInsertStackDepth */)\n            return [];\n        let nextStates = this.p.parser.nextStates(this.state);\n        if (nextStates.length > 4 /* MaxNext */ << 1 || this.stack.length >= 120 /* DampenInsertStackDepth */) {\n            let best = [];\n            for (let i = 0, s; i < nextStates.length; i += 2) {\n                if ((s = nextStates[i + 1]) != this.state && this.p.parser.hasAction(s, next))\n                    best.push(nextStates[i], s);\n            }\n            if (this.stack.length < 120 /* DampenInsertStackDepth */)\n                for (let i = 0; best.length < 4 /* MaxNext */ << 1 && i < nextStates.length; i += 2) {\n                    let s = nextStates[i + 1];\n                    if (!best.some((v, i) => (i & 1) && v == s))\n                        best.push(nextStates[i], s);\n                }\n            nextStates = best;\n        }\n        let result = [];\n        for (let i = 0; i < nextStates.length && result.length < 4 /* MaxNext */; i += 2) {\n            let s = nextStates[i + 1];\n            if (s == this.state)\n                continue;\n            let stack = this.split();\n            stack.pushState(s, this.pos);\n            stack.storeNode(0 /* Err */, stack.pos, stack.pos, 4, true);\n            stack.shiftContext(nextStates[i], this.pos);\n            stack.score -= 200 /* Insert */;\n            result.push(stack);\n        }\n        return result;\n    }\n    // Force a reduce, if possible. Return false if that can't\n    // be done.\n    /// @internal\n    forceReduce() {\n        let reduce = this.p.parser.stateSlot(this.state, 5 /* ForcedReduce */);\n        if ((reduce & 65536 /* ReduceFlag */) == 0)\n            return false;\n        let { parser } = this.p;\n        if (!parser.validAction(this.state, reduce)) {\n            let depth = reduce >> 19 /* ReduceDepthShift */, term = reduce & 65535 /* ValueMask */;\n            let target = this.stack.length - depth * 3;\n            if (target < 0 || parser.getGoto(this.stack[target], term, false) < 0)\n                return false;\n            this.storeNode(0 /* Err */, this.reducePos, this.reducePos, 4, true);\n            this.score -= 100 /* Reduce */;\n        }\n        this.reducePos = this.pos;\n        this.reduce(reduce);\n        return true;\n    }\n    /// @internal\n    forceAll() {\n        while (!this.p.parser.stateFlag(this.state, 2 /* Accepting */)) {\n            if (!this.forceReduce()) {\n                this.storeNode(0 /* Err */, this.pos, this.pos, 4, true);\n                break;\n            }\n        }\n        return this;\n    }\n    /// Check whether this state has no further actions (assumed to be a direct descendant of the\n    /// top state, since any other states must be able to continue\n    /// somehow). @internal\n    get deadEnd() {\n        if (this.stack.length != 3)\n            return false;\n        let { parser } = this.p;\n        return parser.data[parser.stateSlot(this.state, 1 /* Actions */)] == 65535 /* End */ &&\n            !parser.stateSlot(this.state, 4 /* DefaultReduce */);\n    }\n    /// Restart the stack (put it back in its start state). Only safe\n    /// when this.stack.length == 3 (state is directly below the top\n    /// state). @internal\n    restart() {\n        this.state = this.stack[0];\n        this.stack.length = 0;\n    }\n    /// @internal\n    sameState(other) {\n        if (this.state != other.state || this.stack.length != other.stack.length)\n            return false;\n        for (let i = 0; i < this.stack.length; i += 3)\n            if (this.stack[i] != other.stack[i])\n                return false;\n        return true;\n    }\n    /// Get the parser used by this stack.\n    get parser() { return this.p.parser; }\n    /// Test whether a given dialect (by numeric ID, as exported from\n    /// the terms file) is enabled.\n    dialectEnabled(dialectID) { return this.p.parser.dialect.flags[dialectID]; }\n    shiftContext(term, start) {\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.shift(this.curContext.context, term, this, this.p.stream.reset(start)));\n    }\n    reduceContext(term, start) {\n        if (this.curContext)\n            this.updateContext(this.curContext.tracker.reduce(this.curContext.context, term, this, this.p.stream.reset(start)));\n    }\n    /// @internal\n    emitContext() {\n        let last = this.buffer.length - 1;\n        if (last < 0 || this.buffer[last] != -3)\n            this.buffer.push(this.curContext.hash, this.reducePos, this.reducePos, -3);\n    }\n    /// @internal\n    emitLookAhead() {\n        let last = this.buffer.length - 1;\n        if (last < 0 || this.buffer[last] != -4)\n            this.buffer.push(this.lookAhead, this.reducePos, this.reducePos, -4);\n    }\n    updateContext(context) {\n        if (context != this.curContext.context) {\n            let newCx = new StackContext(this.curContext.tracker, context);\n            if (newCx.hash != this.curContext.hash)\n                this.emitContext();\n            this.curContext = newCx;\n        }\n    }\n    /// @internal\n    setLookAhead(lookAhead) {\n        if (lookAhead > this.lookAhead) {\n            this.emitLookAhead();\n            this.lookAhead = lookAhead;\n        }\n    }\n    /// @internal\n    close() {\n        if (this.curContext && this.curContext.tracker.strict)\n            this.emitContext();\n        if (this.lookAhead > 0)\n            this.emitLookAhead();\n    }\n}\nclass StackContext {\n    constructor(tracker, context) {\n        this.tracker = tracker;\n        this.context = context;\n        this.hash = tracker.strict ? tracker.hash(context) : 0;\n    }\n}\nvar Recover;\n(function (Recover) {\n    Recover[Recover[\"Insert\"] = 200] = \"Insert\";\n    Recover[Recover[\"Delete\"] = 190] = \"Delete\";\n    Recover[Recover[\"Reduce\"] = 100] = \"Reduce\";\n    Recover[Recover[\"MaxNext\"] = 4] = \"MaxNext\";\n    Recover[Recover[\"MaxInsertStackDepth\"] = 300] = \"MaxInsertStackDepth\";\n    Recover[Recover[\"DampenInsertStackDepth\"] = 120] = \"DampenInsertStackDepth\";\n})(Recover || (Recover = {}));\n// Used to cheaply run some reductions to scan ahead without mutating\n// an entire stack\nclass SimulatedStack {\n    constructor(start) {\n        this.start = start;\n        this.state = start.state;\n        this.stack = start.stack;\n        this.base = this.stack.length;\n    }\n    reduce(action) {\n        let term = action & 65535 /* ValueMask */, depth = action >> 19 /* ReduceDepthShift */;\n        if (depth == 0) {\n            if (this.stack == this.start.stack)\n                this.stack = this.stack.slice();\n            this.stack.push(this.state, 0, 0);\n            this.base += 3;\n        }\n        else {\n            this.base -= (depth - 1) * 3;\n        }\n        let goto = this.start.p.parser.getGoto(this.stack[this.base - 3], term, true);\n        this.state = goto;\n    }\n}\n// This is given to `Tree.build` to build a buffer, and encapsulates\n// the parent-stack-walking necessary to read the nodes.\nclass StackBufferCursor {\n    constructor(stack, pos, index) {\n        this.stack = stack;\n        this.pos = pos;\n        this.index = index;\n        this.buffer = stack.buffer;\n        if (this.index == 0)\n            this.maybeNext();\n    }\n    static create(stack, pos = stack.bufferBase + stack.buffer.length) {\n        return new StackBufferCursor(stack, pos, pos - stack.bufferBase);\n    }\n    maybeNext() {\n        let next = this.stack.parent;\n        if (next != null) {\n            this.index = this.stack.bufferBase - next.bufferBase;\n            this.stack = next;\n            this.buffer = next.buffer;\n        }\n    }\n    get id() { return this.buffer[this.index - 4]; }\n    get start() { return this.buffer[this.index - 3]; }\n    get end() { return this.buffer[this.index - 2]; }\n    get size() { return this.buffer[this.index - 1]; }\n    next() {\n        this.index -= 4;\n        this.pos -= 4;\n        if (this.index == 0)\n            this.maybeNext();\n    }\n    fork() {\n        return new StackBufferCursor(this.stack, this.pos, this.index);\n    }\n}\n\nclass CachedToken {\n    constructor() {\n        this.start = -1;\n        this.value = -1;\n        this.end = -1;\n        this.extended = -1;\n        this.lookAhead = 0;\n        this.mask = 0;\n        this.context = 0;\n    }\n}\nconst nullToken = new CachedToken;\n/// [Tokenizers](#lr.ExternalTokenizer) interact with the input\n/// through this interface. It presents the input as a stream of\n/// characters, tracking lookahead and hiding the complexity of\n/// [ranges](#common.Parser.parse^ranges) from tokenizer code.\nclass InputStream {\n    /// @internal\n    constructor(\n    /// @internal\n    input, \n    /// @internal\n    ranges) {\n        this.input = input;\n        this.ranges = ranges;\n        /// @internal\n        this.chunk = \"\";\n        /// @internal\n        this.chunkOff = 0;\n        /// Backup chunk\n        this.chunk2 = \"\";\n        this.chunk2Pos = 0;\n        /// The character code of the next code unit in the input, or -1\n        /// when the stream is at the end of the input.\n        this.next = -1;\n        /// @internal\n        this.token = nullToken;\n        this.rangeIndex = 0;\n        this.pos = this.chunkPos = ranges[0].from;\n        this.range = ranges[0];\n        this.end = ranges[ranges.length - 1].to;\n        this.readNext();\n    }\n    /// @internal\n    resolveOffset(offset, assoc) {\n        let range = this.range, index = this.rangeIndex;\n        let pos = this.pos + offset;\n        while (pos < range.from) {\n            if (!index)\n                return null;\n            let next = this.ranges[--index];\n            pos -= range.from - next.to;\n            range = next;\n        }\n        while (assoc < 0 ? pos > range.to : pos >= range.to) {\n            if (index == this.ranges.length - 1)\n                return null;\n            let next = this.ranges[++index];\n            pos += next.from - range.to;\n            range = next;\n        }\n        return pos;\n    }\n    /// Look at a code unit near the stream position. `.peek(0)` equals\n    /// `.next`, `.peek(-1)` gives you the previous character, and so\n    /// on.\n    ///\n    /// Note that looking around during tokenizing creates dependencies\n    /// on potentially far-away content, which may reduce the\n    /// effectiveness incremental parsing—when looking forward—or even\n    /// cause invalid reparses when looking backward more than 25 code\n    /// units, since the library does not track lookbehind.\n    peek(offset) {\n        let idx = this.chunkOff + offset, pos, result;\n        if (idx >= 0 && idx < this.chunk.length) {\n            pos = this.pos + offset;\n            result = this.chunk.charCodeAt(idx);\n        }\n        else {\n            let resolved = this.resolveOffset(offset, 1);\n            if (resolved == null)\n                return -1;\n            pos = resolved;\n            if (pos >= this.chunk2Pos && pos < this.chunk2Pos + this.chunk2.length) {\n                result = this.chunk2.charCodeAt(pos - this.chunk2Pos);\n            }\n            else {\n                let i = this.rangeIndex, range = this.range;\n                while (range.to <= pos)\n                    range = this.ranges[++i];\n                this.chunk2 = this.input.chunk(this.chunk2Pos = pos);\n                if (pos + this.chunk2.length > range.to)\n                    this.chunk2 = this.chunk2.slice(0, range.to - pos);\n                result = this.chunk2.charCodeAt(0);\n            }\n        }\n        if (pos >= this.token.lookAhead)\n            this.token.lookAhead = pos + 1;\n        return result;\n    }\n    /// Accept a token. By default, the end of the token is set to the\n    /// current stream position, but you can pass an offset (relative to\n    /// the stream position) to change that.\n    acceptToken(token, endOffset = 0) {\n        let end = endOffset ? this.resolveOffset(endOffset, -1) : this.pos;\n        if (end == null || end < this.token.start)\n            throw new RangeError(\"Token end out of bounds\");\n        this.token.value = token;\n        this.token.end = end;\n    }\n    getChunk() {\n        if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {\n            let { chunk, chunkPos } = this;\n            this.chunk = this.chunk2;\n            this.chunkPos = this.chunk2Pos;\n            this.chunk2 = chunk;\n            this.chunk2Pos = chunkPos;\n            this.chunkOff = this.pos - this.chunkPos;\n        }\n        else {\n            this.chunk2 = this.chunk;\n            this.chunk2Pos = this.chunkPos;\n            let nextChunk = this.input.chunk(this.pos);\n            let end = this.pos + nextChunk.length;\n            this.chunk = end > this.range.to ? nextChunk.slice(0, this.range.to - this.pos) : nextChunk;\n            this.chunkPos = this.pos;\n            this.chunkOff = 0;\n        }\n    }\n    readNext() {\n        if (this.chunkOff >= this.chunk.length) {\n            this.getChunk();\n            if (this.chunkOff == this.chunk.length)\n                return this.next = -1;\n        }\n        return this.next = this.chunk.charCodeAt(this.chunkOff);\n    }\n    /// Move the stream forward N (defaults to 1) code units. Returns\n    /// the new value of [`next`](#lr.InputStream.next).\n    advance(n = 1) {\n        this.chunkOff += n;\n        while (this.pos + n >= this.range.to) {\n            if (this.rangeIndex == this.ranges.length - 1)\n                return this.setDone();\n            n -= this.range.to - this.pos;\n            this.range = this.ranges[++this.rangeIndex];\n            this.pos = this.range.from;\n        }\n        this.pos += n;\n        if (this.pos >= this.token.lookAhead)\n            this.token.lookAhead = this.pos + 1;\n        return this.readNext();\n    }\n    setDone() {\n        this.pos = this.chunkPos = this.end;\n        this.range = this.ranges[this.rangeIndex = this.ranges.length - 1];\n        this.chunk = \"\";\n        return this.next = -1;\n    }\n    /// @internal\n    reset(pos, token) {\n        if (token) {\n            this.token = token;\n            token.start = pos;\n            token.lookAhead = pos + 1;\n            token.value = token.extended = -1;\n        }\n        else {\n            this.token = nullToken;\n        }\n        if (this.pos != pos) {\n            this.pos = pos;\n            if (pos == this.end) {\n                this.setDone();\n                return this;\n            }\n            while (pos < this.range.from)\n                this.range = this.ranges[--this.rangeIndex];\n            while (pos >= this.range.to)\n                this.range = this.ranges[++this.rangeIndex];\n            if (pos >= this.chunkPos && pos < this.chunkPos + this.chunk.length) {\n                this.chunkOff = pos - this.chunkPos;\n            }\n            else {\n                this.chunk = \"\";\n                this.chunkOff = 0;\n            }\n            this.readNext();\n        }\n        return this;\n    }\n    /// @internal\n    read(from, to) {\n        if (from >= this.chunkPos && to <= this.chunkPos + this.chunk.length)\n            return this.chunk.slice(from - this.chunkPos, to - this.chunkPos);\n        if (from >= this.chunk2Pos && to <= this.chunk2Pos + this.chunk2.length)\n            return this.chunk2.slice(from - this.chunk2Pos, to - this.chunk2Pos);\n        if (from >= this.range.from && to <= this.range.to)\n            return this.input.read(from, to);\n        let result = \"\";\n        for (let r of this.ranges) {\n            if (r.from >= to)\n                break;\n            if (r.to > from)\n                result += this.input.read(Math.max(r.from, from), Math.min(r.to, to));\n        }\n        return result;\n    }\n}\n/// @internal\nclass TokenGroup {\n    constructor(data, id) {\n        this.data = data;\n        this.id = id;\n    }\n    token(input, stack) { readToken(this.data, input, stack, this.id); }\n}\nTokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false;\n/// `@external tokens` declarations in the grammar should resolve to\n/// an instance of this class.\nclass ExternalTokenizer {\n    /// Create a tokenizer. The first argument is the function that,\n    /// given an input stream, scans for the types of tokens it\n    /// recognizes at the stream's position, and calls\n    /// [`acceptToken`](#lr.InputStream.acceptToken) when it finds\n    /// one.\n    constructor(\n    /// @internal\n    token, options = {}) {\n        this.token = token;\n        this.contextual = !!options.contextual;\n        this.fallback = !!options.fallback;\n        this.extend = !!options.extend;\n    }\n}\n// Tokenizer data is stored a big uint16 array containing, for each\n// state:\n//\n//  - A group bitmask, indicating what token groups are reachable from\n//    this state, so that paths that can only lead to tokens not in\n//    any of the current groups can be cut off early.\n//\n//  - The position of the end of the state's sequence of accepting\n//    tokens\n//\n//  - The number of outgoing edges for the state\n//\n//  - The accepting tokens, as (token id, group mask) pairs\n//\n//  - The outgoing edges, as (start character, end character, state\n//    index) triples, with end character being exclusive\n//\n// This function interprets that data, running through a stream as\n// long as new states with the a matching group mask can be reached,\n// and updating `token` when it matches a token.\nfunction readToken(data, input, stack, group) {\n    let state = 0, groupMask = 1 << group, { parser } = stack.p, { dialect } = parser;\n    scan: for (;;) {\n        if ((groupMask & data[state]) == 0)\n            break;\n        let accEnd = data[state + 1];\n        // Check whether this state can lead to a token in the current group\n        // Accept tokens in this state, possibly overwriting\n        // lower-precedence / shorter tokens\n        for (let i = state + 3; i < accEnd; i += 2)\n            if ((data[i + 1] & groupMask) > 0) {\n                let term = data[i];\n                if (dialect.allows(term) &&\n                    (input.token.value == -1 || input.token.value == term || parser.overrides(term, input.token.value))) {\n                    input.acceptToken(term);\n                    break;\n                }\n            }\n        // Do a binary search on the state's edges\n        for (let next = input.next, low = 0, high = data[state + 2]; low < high;) {\n            let mid = (low + high) >> 1;\n            let index = accEnd + mid + (mid << 1);\n            let from = data[index], to = data[index + 1];\n            if (next < from)\n                high = mid;\n            else if (next >= to)\n                low = mid + 1;\n            else {\n                state = data[index + 2];\n                input.advance();\n                continue scan;\n            }\n        }\n        break;\n    }\n}\n\n// See lezer-generator/src/encode.ts for comments about the encoding\n// used here\nfunction decodeArray(input, Type = Uint16Array) {\n    if (typeof input != \"string\")\n        return input;\n    let array = null;\n    for (let pos = 0, out = 0; pos < input.length;) {\n        let value = 0;\n        for (;;) {\n            let next = input.charCodeAt(pos++), stop = false;\n            if (next == 126 /* BigValCode */) {\n                value = 65535 /* BigVal */;\n                break;\n            }\n            if (next >= 92 /* Gap2 */)\n                next--;\n            if (next >= 34 /* Gap1 */)\n                next--;\n            let digit = next - 32 /* Start */;\n            if (digit >= 46 /* Base */) {\n                digit -= 46 /* Base */;\n                stop = true;\n            }\n            value += digit;\n            if (stop)\n                break;\n            value *= 46 /* Base */;\n        }\n        if (array)\n            array[out++] = value;\n        else\n            array = new Type(value);\n    }\n    return array;\n}\n\n// Environment variable used to control console output\nconst verbose = typeof process != \"undefined\" && process.env && /\\bparse\\b/.test(process.env.LOG);\nlet stackIDs = null;\nvar Safety;\n(function (Safety) {\n    Safety[Safety[\"Margin\"] = 25] = \"Margin\";\n})(Safety || (Safety = {}));\nfunction cutAt(tree, pos, side) {\n    let cursor = tree.cursor(IterMode.IncludeAnonymous);\n    cursor.moveTo(pos);\n    for (;;) {\n        if (!(side < 0 ? cursor.childBefore(pos) : cursor.childAfter(pos)))\n            for (;;) {\n                if ((side < 0 ? cursor.to < pos : cursor.from > pos) && !cursor.type.isError)\n                    return side < 0 ? Math.max(0, Math.min(cursor.to - 1, pos - 25 /* Margin */))\n                        : Math.min(tree.length, Math.max(cursor.from + 1, pos + 25 /* Margin */));\n                if (side < 0 ? cursor.prevSibling() : cursor.nextSibling())\n                    break;\n                if (!cursor.parent())\n                    return side < 0 ? 0 : tree.length;\n            }\n    }\n}\nclass FragmentCursor {\n    constructor(fragments, nodeSet) {\n        this.fragments = fragments;\n        this.nodeSet = nodeSet;\n        this.i = 0;\n        this.fragment = null;\n        this.safeFrom = -1;\n        this.safeTo = -1;\n        this.trees = [];\n        this.start = [];\n        this.index = [];\n        this.nextFragment();\n    }\n    nextFragment() {\n        let fr = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];\n        if (fr) {\n            this.safeFrom = fr.openStart ? cutAt(fr.tree, fr.from + fr.offset, 1) - fr.offset : fr.from;\n            this.safeTo = fr.openEnd ? cutAt(fr.tree, fr.to + fr.offset, -1) - fr.offset : fr.to;\n            while (this.trees.length) {\n                this.trees.pop();\n                this.start.pop();\n                this.index.pop();\n            }\n            this.trees.push(fr.tree);\n            this.start.push(-fr.offset);\n            this.index.push(0);\n            this.nextStart = this.safeFrom;\n        }\n        else {\n            this.nextStart = 1e9;\n        }\n    }\n    // `pos` must be >= any previously given `pos` for this cursor\n    nodeAt(pos) {\n        if (pos < this.nextStart)\n            return null;\n        while (this.fragment && this.safeTo <= pos)\n            this.nextFragment();\n        if (!this.fragment)\n            return null;\n        for (;;) {\n            let last = this.trees.length - 1;\n            if (last < 0) { // End of tree\n                this.nextFragment();\n                return null;\n            }\n            let top = this.trees[last], index = this.index[last];\n            if (index == top.children.length) {\n                this.trees.pop();\n                this.start.pop();\n                this.index.pop();\n                continue;\n            }\n            let next = top.children[index];\n            let start = this.start[last] + top.positions[index];\n            if (start > pos) {\n                this.nextStart = start;\n                return null;\n            }\n            if (next instanceof Tree) {\n                if (start == pos) {\n                    if (start < this.safeFrom)\n                        return null;\n                    let end = start + next.length;\n                    if (end <= this.safeTo) {\n                        let lookAhead = next.prop(NodeProp.lookAhead);\n                        if (!lookAhead || end + lookAhead < this.fragment.to)\n                            return next;\n                    }\n                }\n                this.index[last]++;\n                if (start + next.length >= Math.max(this.safeFrom, pos)) { // Enter this node\n                    this.trees.push(next);\n                    this.start.push(start);\n                    this.index.push(0);\n                }\n            }\n            else {\n                this.index[last]++;\n                this.nextStart = start + next.length;\n            }\n        }\n    }\n}\nclass TokenCache {\n    constructor(parser, stream) {\n        this.stream = stream;\n        this.tokens = [];\n        this.mainToken = null;\n        this.actions = [];\n        this.tokens = parser.tokenizers.map(_ => new CachedToken);\n    }\n    getActions(stack) {\n        let actionIndex = 0;\n        let main = null;\n        let { parser } = stack.p, { tokenizers } = parser;\n        let mask = parser.stateSlot(stack.state, 3 /* TokenizerMask */);\n        let context = stack.curContext ? stack.curContext.hash : 0;\n        let lookAhead = 0;\n        for (let i = 0; i < tokenizers.length; i++) {\n            if (((1 << i) & mask) == 0)\n                continue;\n            let tokenizer = tokenizers[i], token = this.tokens[i];\n            if (main && !tokenizer.fallback)\n                continue;\n            if (tokenizer.contextual || token.start != stack.pos || token.mask != mask || token.context != context) {\n                this.updateCachedToken(token, tokenizer, stack);\n                token.mask = mask;\n                token.context = context;\n            }\n            if (token.lookAhead > token.end + 25 /* Margin */)\n                lookAhead = Math.max(token.lookAhead, lookAhead);\n            if (token.value != 0 /* Err */) {\n                let startIndex = actionIndex;\n                if (token.extended > -1)\n                    actionIndex = this.addActions(stack, token.extended, token.end, actionIndex);\n                actionIndex = this.addActions(stack, token.value, token.end, actionIndex);\n                if (!tokenizer.extend) {\n                    main = token;\n                    if (actionIndex > startIndex)\n                        break;\n                }\n            }\n        }\n        while (this.actions.length > actionIndex)\n            this.actions.pop();\n        if (lookAhead)\n            stack.setLookAhead(lookAhead);\n        if (!main && stack.pos == this.stream.end) {\n            main = new CachedToken;\n            main.value = stack.p.parser.eofTerm;\n            main.start = main.end = stack.pos;\n            actionIndex = this.addActions(stack, main.value, main.end, actionIndex);\n        }\n        this.mainToken = main;\n        return this.actions;\n    }\n    getMainToken(stack) {\n        if (this.mainToken)\n            return this.mainToken;\n        let main = new CachedToken, { pos, p } = stack;\n        main.start = pos;\n        main.end = Math.min(pos + 1, p.stream.end);\n        main.value = pos == p.stream.end ? p.parser.eofTerm : 0 /* Err */;\n        return main;\n    }\n    updateCachedToken(token, tokenizer, stack) {\n        tokenizer.token(this.stream.reset(stack.pos, token), stack);\n        if (token.value > -1) {\n            let { parser } = stack.p;\n            for (let i = 0; i < parser.specialized.length; i++)\n                if (parser.specialized[i] == token.value) {\n                    let result = parser.specializers[i](this.stream.read(token.start, token.end), stack);\n                    if (result >= 0 && stack.p.parser.dialect.allows(result >> 1)) {\n                        if ((result & 1) == 0 /* Specialize */)\n                            token.value = result >> 1;\n                        else\n                            token.extended = result >> 1;\n                        break;\n                    }\n                }\n        }\n        else {\n            token.value = 0 /* Err */;\n            token.end = Math.min(stack.p.stream.end, stack.pos + 1);\n        }\n    }\n    putAction(action, token, end, index) {\n        // Don't add duplicate actions\n        for (let i = 0; i < index; i += 3)\n            if (this.actions[i] == action)\n                return index;\n        this.actions[index++] = action;\n        this.actions[index++] = token;\n        this.actions[index++] = end;\n        return index;\n    }\n    addActions(stack, token, end, index) {\n        let { state } = stack, { parser } = stack.p, { data } = parser;\n        for (let set = 0; set < 2; set++) {\n            for (let i = parser.stateSlot(state, set ? 2 /* Skip */ : 1 /* Actions */);; i += 3) {\n                if (data[i] == 65535 /* End */) {\n                    if (data[i + 1] == 1 /* Next */) {\n                        i = pair(data, i + 2);\n                    }\n                    else {\n                        if (index == 0 && data[i + 1] == 2 /* Other */)\n                            index = this.putAction(pair(data, i + 2), token, end, index);\n                        break;\n                    }\n                }\n                if (data[i] == token)\n                    index = this.putAction(pair(data, i + 1), token, end, index);\n            }\n        }\n        return index;\n    }\n}\nvar Rec;\n(function (Rec) {\n    Rec[Rec[\"Distance\"] = 5] = \"Distance\";\n    Rec[Rec[\"MaxRemainingPerStep\"] = 3] = \"MaxRemainingPerStep\";\n    // When two stacks have been running independently long enough to\n    // add this many elements to their buffers, prune one.\n    Rec[Rec[\"MinBufferLengthPrune\"] = 500] = \"MinBufferLengthPrune\";\n    Rec[Rec[\"ForceReduceLimit\"] = 10] = \"ForceReduceLimit\";\n    // Once a stack reaches this depth (in .stack.length) force-reduce\n    // it back to CutTo to avoid creating trees that overflow the stack\n    // on recursive traversal.\n    Rec[Rec[\"CutDepth\"] = 15000] = \"CutDepth\";\n    Rec[Rec[\"CutTo\"] = 9000] = \"CutTo\";\n})(Rec || (Rec = {}));\nclass Parse {\n    constructor(parser, input, fragments, ranges) {\n        this.parser = parser;\n        this.input = input;\n        this.ranges = ranges;\n        this.recovering = 0;\n        this.nextStackID = 0x2654; // ♔, ♕, ♖, ♗, ♘, ♙, ♠, ♡, ♢, ♣, ♤, ♥, ♦, ♧\n        this.minStackPos = 0;\n        this.reused = [];\n        this.stoppedAt = null;\n        this.stream = new InputStream(input, ranges);\n        this.tokens = new TokenCache(parser, this.stream);\n        this.topTerm = parser.top[1];\n        let { from } = ranges[0];\n        this.stacks = [Stack.start(this, parser.top[0], from)];\n        this.fragments = fragments.length && this.stream.end - from > parser.bufferLength * 4\n            ? new FragmentCursor(fragments, parser.nodeSet) : null;\n    }\n    get parsedPos() {\n        return this.minStackPos;\n    }\n    // Move the parser forward. This will process all parse stacks at\n    // `this.pos` and try to advance them to a further position. If no\n    // stack for such a position is found, it'll start error-recovery.\n    //\n    // When the parse is finished, this will return a syntax tree. When\n    // not, it returns `null`.\n    advance() {\n        let stacks = this.stacks, pos = this.minStackPos;\n        // This will hold stacks beyond `pos`.\n        let newStacks = this.stacks = [];\n        let stopped, stoppedTokens;\n        // Keep advancing any stacks at `pos` until they either move\n        // forward or can't be advanced. Gather stacks that can't be\n        // advanced further in `stopped`.\n        for (let i = 0; i < stacks.length; i++) {\n            let stack = stacks[i];\n            for (;;) {\n                this.tokens.mainToken = null;\n                if (stack.pos > pos) {\n                    newStacks.push(stack);\n                }\n                else if (this.advanceStack(stack, newStacks, stacks)) {\n                    continue;\n                }\n                else {\n                    if (!stopped) {\n                        stopped = [];\n                        stoppedTokens = [];\n                    }\n                    stopped.push(stack);\n                    let tok = this.tokens.getMainToken(stack);\n                    stoppedTokens.push(tok.value, tok.end);\n                }\n                break;\n            }\n        }\n        if (!newStacks.length) {\n            let finished = stopped && findFinished(stopped);\n            if (finished)\n                return this.stackToTree(finished);\n            if (this.parser.strict) {\n                if (verbose && stopped)\n                    console.log(\"Stuck with token \" + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : \"none\"));\n                throw new SyntaxError(\"No parse at \" + pos);\n            }\n            if (!this.recovering)\n                this.recovering = 5 /* Distance */;\n        }\n        if (this.recovering && stopped) {\n            let finished = this.stoppedAt != null && stopped[0].pos > this.stoppedAt ? stopped[0]\n                : this.runRecovery(stopped, stoppedTokens, newStacks);\n            if (finished)\n                return this.stackToTree(finished.forceAll());\n        }\n        if (this.recovering) {\n            let maxRemaining = this.recovering == 1 ? 1 : this.recovering * 3 /* MaxRemainingPerStep */;\n            if (newStacks.length > maxRemaining) {\n                newStacks.sort((a, b) => b.score - a.score);\n                while (newStacks.length > maxRemaining)\n                    newStacks.pop();\n            }\n            if (newStacks.some(s => s.reducePos > pos))\n                this.recovering--;\n        }\n        else if (newStacks.length > 1) {\n            // Prune stacks that are in the same state, or that have been\n            // running without splitting for a while, to avoid getting stuck\n            // with multiple successful stacks running endlessly on.\n            outer: for (let i = 0; i < newStacks.length - 1; i++) {\n                let stack = newStacks[i];\n                for (let j = i + 1; j < newStacks.length; j++) {\n                    let other = newStacks[j];\n                    if (stack.sameState(other) ||\n                        stack.buffer.length > 500 /* MinBufferLengthPrune */ && other.buffer.length > 500 /* MinBufferLengthPrune */) {\n                        if (((stack.score - other.score) || (stack.buffer.length - other.buffer.length)) > 0) {\n                            newStacks.splice(j--, 1);\n                        }\n                        else {\n                            newStacks.splice(i--, 1);\n                            continue outer;\n                        }\n                    }\n                }\n            }\n        }\n        this.minStackPos = newStacks[0].pos;\n        for (let i = 1; i < newStacks.length; i++)\n            if (newStacks[i].pos < this.minStackPos)\n                this.minStackPos = newStacks[i].pos;\n        return null;\n    }\n    stopAt(pos) {\n        if (this.stoppedAt != null && this.stoppedAt < pos)\n            throw new RangeError(\"Can't move stoppedAt forward\");\n        this.stoppedAt = pos;\n    }\n    // Returns an updated version of the given stack, or null if the\n    // stack can't advance normally. When `split` and `stacks` are\n    // given, stacks split off by ambiguous operations will be pushed to\n    // `split`, or added to `stacks` if they move `pos` forward.\n    advanceStack(stack, stacks, split) {\n        let start = stack.pos, { parser } = this;\n        let base = verbose ? this.stackID(stack) + \" -> \" : \"\";\n        if (this.stoppedAt != null && start > this.stoppedAt)\n            return stack.forceReduce() ? stack : null;\n        if (this.fragments) {\n            let strictCx = stack.curContext && stack.curContext.tracker.strict, cxHash = strictCx ? stack.curContext.hash : 0;\n            for (let cached = this.fragments.nodeAt(start); cached;) {\n                let match = this.parser.nodeSet.types[cached.type.id] == cached.type ? parser.getGoto(stack.state, cached.type.id) : -1;\n                if (match > -1 && cached.length && (!strictCx || (cached.prop(NodeProp.contextHash) || 0) == cxHash)) {\n                    stack.useNode(cached, match);\n                    if (verbose)\n                        console.log(base + this.stackID(stack) + ` (via reuse of ${parser.getName(cached.type.id)})`);\n                    return true;\n                }\n                if (!(cached instanceof Tree) || cached.children.length == 0 || cached.positions[0] > 0)\n                    break;\n                let inner = cached.children[0];\n                if (inner instanceof Tree && cached.positions[0] == 0)\n                    cached = inner;\n                else\n                    break;\n            }\n        }\n        let defaultReduce = parser.stateSlot(stack.state, 4 /* DefaultReduce */);\n        if (defaultReduce > 0) {\n            stack.reduce(defaultReduce);\n            if (verbose)\n                console.log(base + this.stackID(stack) + ` (via always-reduce ${parser.getName(defaultReduce & 65535 /* ValueMask */)})`);\n            return true;\n        }\n        if (stack.stack.length >= 15000 /* CutDepth */) {\n            while (stack.stack.length > 9000 /* CutTo */ && stack.forceReduce()) { }\n        }\n        let actions = this.tokens.getActions(stack);\n        for (let i = 0; i < actions.length;) {\n            let action = actions[i++], term = actions[i++], end = actions[i++];\n            let last = i == actions.length || !split;\n            let localStack = last ? stack : stack.split();\n            localStack.apply(action, term, end);\n            if (verbose)\n                console.log(base + this.stackID(localStack) + ` (via ${(action & 65536 /* ReduceFlag */) == 0 ? \"shift\"\n                    : `reduce of ${parser.getName(action & 65535 /* ValueMask */)}`} for ${parser.getName(term)} @ ${start}${localStack == stack ? \"\" : \", split\"})`);\n            if (last)\n                return true;\n            else if (localStack.pos > start)\n                stacks.push(localStack);\n            else\n                split.push(localStack);\n        }\n        return false;\n    }\n    // Advance a given stack forward as far as it will go. Returns the\n    // (possibly updated) stack if it got stuck, or null if it moved\n    // forward and was given to `pushStackDedup`.\n    advanceFully(stack, newStacks) {\n        let pos = stack.pos;\n        for (;;) {\n            if (!this.advanceStack(stack, null, null))\n                return false;\n            if (stack.pos > pos) {\n                pushStackDedup(stack, newStacks);\n                return true;\n            }\n        }\n    }\n    runRecovery(stacks, tokens, newStacks) {\n        let finished = null, restarted = false;\n        for (let i = 0; i < stacks.length; i++) {\n            let stack = stacks[i], token = tokens[i << 1], tokenEnd = tokens[(i << 1) + 1];\n            let base = verbose ? this.stackID(stack) + \" -> \" : \"\";\n            if (stack.deadEnd) {\n                if (restarted)\n                    continue;\n                restarted = true;\n                stack.restart();\n                if (verbose)\n                    console.log(base + this.stackID(stack) + \" (restarted)\");\n                let done = this.advanceFully(stack, newStacks);\n                if (done)\n                    continue;\n            }\n            let force = stack.split(), forceBase = base;\n            for (let j = 0; force.forceReduce() && j < 10 /* ForceReduceLimit */; j++) {\n                if (verbose)\n                    console.log(forceBase + this.stackID(force) + \" (via force-reduce)\");\n                let done = this.advanceFully(force, newStacks);\n                if (done)\n                    break;\n                if (verbose)\n                    forceBase = this.stackID(force) + \" -> \";\n            }\n            for (let insert of stack.recoverByInsert(token)) {\n                if (verbose)\n                    console.log(base + this.stackID(insert) + \" (via recover-insert)\");\n                this.advanceFully(insert, newStacks);\n            }\n            if (this.stream.end > stack.pos) {\n                if (tokenEnd == stack.pos) {\n                    tokenEnd++;\n                    token = 0 /* Err */;\n                }\n                stack.recoverByDelete(token, tokenEnd);\n                if (verbose)\n                    console.log(base + this.stackID(stack) + ` (via recover-delete ${this.parser.getName(token)})`);\n                pushStackDedup(stack, newStacks);\n            }\n            else if (!finished || finished.score < stack.score) {\n                finished = stack;\n            }\n        }\n        return finished;\n    }\n    // Convert the stack's buffer to a syntax tree.\n    stackToTree(stack) {\n        stack.close();\n        return Tree.build({ buffer: StackBufferCursor.create(stack),\n            nodeSet: this.parser.nodeSet,\n            topID: this.topTerm,\n            maxBufferLength: this.parser.bufferLength,\n            reused: this.reused,\n            start: this.ranges[0].from,\n            length: stack.pos - this.ranges[0].from,\n            minRepeatType: this.parser.minRepeatTerm });\n    }\n    stackID(stack) {\n        let id = (stackIDs || (stackIDs = new WeakMap)).get(stack);\n        if (!id)\n            stackIDs.set(stack, id = String.fromCodePoint(this.nextStackID++));\n        return id + stack;\n    }\n}\nfunction pushStackDedup(stack, newStacks) {\n    for (let i = 0; i < newStacks.length; i++) {\n        let other = newStacks[i];\n        if (other.pos == stack.pos && other.sameState(stack)) {\n            if (newStacks[i].score < stack.score)\n                newStacks[i] = stack;\n            return;\n        }\n    }\n    newStacks.push(stack);\n}\nclass Dialect {\n    constructor(source, flags, disabled) {\n        this.source = source;\n        this.flags = flags;\n        this.disabled = disabled;\n    }\n    allows(term) { return !this.disabled || this.disabled[term] == 0; }\n}\nconst id = x => x;\n/// Context trackers are used to track stateful context (such as\n/// indentation in the Python grammar, or parent elements in the XML\n/// grammar) needed by external tokenizers. You declare them in a\n/// grammar file as `@context exportName from \"module\"`.\n///\n/// Context values should be immutable, and can be updated (replaced)\n/// on shift or reduce actions.\n///\n/// The export used in a `@context` declaration should be of this\n/// type.\nclass ContextTracker {\n    /// Define a context tracker.\n    constructor(spec) {\n        this.start = spec.start;\n        this.shift = spec.shift || id;\n        this.reduce = spec.reduce || id;\n        this.reuse = spec.reuse || id;\n        this.hash = spec.hash || (() => 0);\n        this.strict = spec.strict !== false;\n    }\n}\n/// Holds the parse tables for a given grammar, as generated by\n/// `lezer-generator`, and provides [methods](#common.Parser) to parse\n/// content with.\nclass LRParser extends Parser {\n    /// @internal\n    constructor(spec) {\n        super();\n        /// @internal\n        this.wrappers = [];\n        if (spec.version != 14 /* Version */)\n            throw new RangeError(`Parser version (${spec.version}) doesn't match runtime version (${14 /* Version */})`);\n        let nodeNames = spec.nodeNames.split(\" \");\n        this.minRepeatTerm = nodeNames.length;\n        for (let i = 0; i < spec.repeatNodeCount; i++)\n            nodeNames.push(\"\");\n        let topTerms = Object.keys(spec.topRules).map(r => spec.topRules[r][1]);\n        let nodeProps = [];\n        for (let i = 0; i < nodeNames.length; i++)\n            nodeProps.push([]);\n        function setProp(nodeID, prop, value) {\n            nodeProps[nodeID].push([prop, prop.deserialize(String(value))]);\n        }\n        if (spec.nodeProps)\n            for (let propSpec of spec.nodeProps) {\n                let prop = propSpec[0];\n                if (typeof prop == \"string\")\n                    prop = NodeProp[prop];\n                for (let i = 1; i < propSpec.length;) {\n                    let next = propSpec[i++];\n                    if (next >= 0) {\n                        setProp(next, prop, propSpec[i++]);\n                    }\n                    else {\n                        let value = propSpec[i + -next];\n                        for (let j = -next; j > 0; j--)\n                            setProp(propSpec[i++], prop, value);\n                        i++;\n                    }\n                }\n            }\n        this.nodeSet = new NodeSet(nodeNames.map((name, i) => NodeType.define({\n            name: i >= this.minRepeatTerm ? undefined : name,\n            id: i,\n            props: nodeProps[i],\n            top: topTerms.indexOf(i) > -1,\n            error: i == 0,\n            skipped: spec.skippedNodes && spec.skippedNodes.indexOf(i) > -1\n        })));\n        if (spec.propSources)\n            this.nodeSet = this.nodeSet.extend(...spec.propSources);\n        this.strict = false;\n        this.bufferLength = DefaultBufferLength;\n        let tokenArray = decodeArray(spec.tokenData);\n        this.context = spec.context;\n        this.specialized = new Uint16Array(spec.specialized ? spec.specialized.length : 0);\n        this.specializers = [];\n        if (spec.specialized)\n            for (let i = 0; i < spec.specialized.length; i++) {\n                this.specialized[i] = spec.specialized[i].term;\n                this.specializers[i] = spec.specialized[i].get;\n            }\n        this.states = decodeArray(spec.states, Uint32Array);\n        this.data = decodeArray(spec.stateData);\n        this.goto = decodeArray(spec.goto);\n        this.maxTerm = spec.maxTerm;\n        this.tokenizers = spec.tokenizers.map(value => typeof value == \"number\" ? new TokenGroup(tokenArray, value) : value);\n        this.topRules = spec.topRules;\n        this.dialects = spec.dialects || {};\n        this.dynamicPrecedences = spec.dynamicPrecedences || null;\n        this.tokenPrecTable = spec.tokenPrec;\n        this.termNames = spec.termNames || null;\n        this.maxNode = this.nodeSet.types.length - 1;\n        this.dialect = this.parseDialect();\n        this.top = this.topRules[Object.keys(this.topRules)[0]];\n    }\n    createParse(input, fragments, ranges) {\n        let parse = new Parse(this, input, fragments, ranges);\n        for (let w of this.wrappers)\n            parse = w(parse, input, fragments, ranges);\n        return parse;\n    }\n    /// Get a goto table entry @internal\n    getGoto(state, term, loose = false) {\n        let table = this.goto;\n        if (term >= table[0])\n            return -1;\n        for (let pos = table[term + 1];;) {\n            let groupTag = table[pos++], last = groupTag & 1;\n            let target = table[pos++];\n            if (last && loose)\n                return target;\n            for (let end = pos + (groupTag >> 1); pos < end; pos++)\n                if (table[pos] == state)\n                    return target;\n            if (last)\n                return -1;\n        }\n    }\n    /// Check if this state has an action for a given terminal @internal\n    hasAction(state, terminal) {\n        let data = this.data;\n        for (let set = 0; set < 2; set++) {\n            for (let i = this.stateSlot(state, set ? 2 /* Skip */ : 1 /* Actions */), next;; i += 3) {\n                if ((next = data[i]) == 65535 /* End */) {\n                    if (data[i + 1] == 1 /* Next */)\n                        next = data[i = pair(data, i + 2)];\n                    else if (data[i + 1] == 2 /* Other */)\n                        return pair(data, i + 2);\n                    else\n                        break;\n                }\n                if (next == terminal || next == 0 /* Err */)\n                    return pair(data, i + 1);\n            }\n        }\n        return 0;\n    }\n    /// @internal\n    stateSlot(state, slot) {\n        return this.states[(state * 6 /* Size */) + slot];\n    }\n    /// @internal\n    stateFlag(state, flag) {\n        return (this.stateSlot(state, 0 /* Flags */) & flag) > 0;\n    }\n    /// @internal\n    validAction(state, action) {\n        if (action == this.stateSlot(state, 4 /* DefaultReduce */))\n            return true;\n        for (let i = this.stateSlot(state, 1 /* Actions */);; i += 3) {\n            if (this.data[i] == 65535 /* End */) {\n                if (this.data[i + 1] == 1 /* Next */)\n                    i = pair(this.data, i + 2);\n                else\n                    return false;\n            }\n            if (action == pair(this.data, i + 1))\n                return true;\n        }\n    }\n    /// Get the states that can follow this one through shift actions or\n    /// goto jumps. @internal\n    nextStates(state) {\n        let result = [];\n        for (let i = this.stateSlot(state, 1 /* Actions */);; i += 3) {\n            if (this.data[i] == 65535 /* End */) {\n                if (this.data[i + 1] == 1 /* Next */)\n                    i = pair(this.data, i + 2);\n                else\n                    break;\n            }\n            if ((this.data[i + 2] & (65536 /* ReduceFlag */ >> 16)) == 0) {\n                let value = this.data[i + 1];\n                if (!result.some((v, i) => (i & 1) && v == value))\n                    result.push(this.data[i], value);\n            }\n        }\n        return result;\n    }\n    /// @internal\n    overrides(token, prev) {\n        let iPrev = findOffset(this.data, this.tokenPrecTable, prev);\n        return iPrev < 0 || findOffset(this.data, this.tokenPrecTable, token) < iPrev;\n    }\n    /// Configure the parser. Returns a new parser instance that has the\n    /// given settings modified. Settings not provided in `config` are\n    /// kept from the original parser.\n    configure(config) {\n        // Hideous reflection-based kludge to make it easy to create a\n        // slightly modified copy of a parser.\n        let copy = Object.assign(Object.create(LRParser.prototype), this);\n        if (config.props)\n            copy.nodeSet = this.nodeSet.extend(...config.props);\n        if (config.top) {\n            let info = this.topRules[config.top];\n            if (!info)\n                throw new RangeError(`Invalid top rule name ${config.top}`);\n            copy.top = info;\n        }\n        if (config.tokenizers)\n            copy.tokenizers = this.tokenizers.map(t => {\n                let found = config.tokenizers.find(r => r.from == t);\n                return found ? found.to : t;\n            });\n        if (config.contextTracker)\n            copy.context = config.contextTracker;\n        if (config.dialect)\n            copy.dialect = this.parseDialect(config.dialect);\n        if (config.strict != null)\n            copy.strict = config.strict;\n        if (config.wrap)\n            copy.wrappers = copy.wrappers.concat(config.wrap);\n        if (config.bufferLength != null)\n            copy.bufferLength = config.bufferLength;\n        return copy;\n    }\n    /// Tells you whether any [parse wrappers](#lr.ParserConfig.wrap)\n    /// are registered for this parser.\n    hasWrappers() {\n        return this.wrappers.length > 0;\n    }\n    /// Returns the name associated with a given term. This will only\n    /// work for all terms when the parser was generated with the\n    /// `--names` option. By default, only the names of tagged terms are\n    /// stored.\n    getName(term) {\n        return this.termNames ? this.termNames[term] : String(term <= this.maxNode && this.nodeSet.types[term].name || term);\n    }\n    /// The eof term id is always allocated directly after the node\n    /// types. @internal\n    get eofTerm() { return this.maxNode + 1; }\n    /// The type of top node produced by the parser.\n    get topNode() { return this.nodeSet.types[this.top[1]]; }\n    /// @internal\n    dynamicPrecedence(term) {\n        let prec = this.dynamicPrecedences;\n        return prec == null ? 0 : prec[term] || 0;\n    }\n    /// @internal\n    parseDialect(dialect) {\n        let values = Object.keys(this.dialects), flags = values.map(() => false);\n        if (dialect)\n            for (let part of dialect.split(\" \")) {\n                let id = values.indexOf(part);\n                if (id >= 0)\n                    flags[id] = true;\n            }\n        let disabled = null;\n        for (let i = 0; i < values.length; i++)\n            if (!flags[i]) {\n                for (let j = this.dialects[values[i]], id; (id = this.data[j++]) != 65535 /* End */;)\n                    (disabled || (disabled = new Uint8Array(this.maxTerm + 1)))[id] = 1;\n            }\n        return new Dialect(dialect, flags, disabled);\n    }\n    /// (used by the output of the parser generator) @internal\n    static deserialize(spec) {\n        return new LRParser(spec);\n    }\n}\nfunction pair(data, off) { return data[off] | (data[off + 1] << 16); }\nfunction findOffset(data, start, term) {\n    for (let i = start, next; (next = data[i]) != 65535 /* End */; i++)\n        if (next == term)\n            return i - start;\n    return -1;\n}\nfunction findFinished(stacks) {\n    let best = null;\n    for (let stack of stacks) {\n        let stopped = stack.p.stoppedAt;\n        if ((stack.pos == stack.p.stream.end || stopped != null && stack.pos > stopped) &&\n            stack.p.parser.stateFlag(stack.state, 2 /* Accepting */) &&\n            (!best || best.score < stack.score))\n            best = stack;\n    }\n    return best;\n}\n\nexport { ContextTracker, ExternalTokenizer, InputStream, LRParser, Stack };\n","// FIXME profile adding a per-Tree TreeNode cache, validating it by\n// parent pointer\n/// The default maximum length of a `TreeBuffer` node.\nconst DefaultBufferLength = 1024;\nlet nextPropID = 0;\nclass Range {\n    constructor(from, to) {\n        this.from = from;\n        this.to = to;\n    }\n}\n/// Each [node type](#common.NodeType) or [individual tree](#common.Tree)\n/// can have metadata associated with it in props. Instances of this\n/// class represent prop names.\nclass NodeProp {\n    /// Create a new node prop type.\n    constructor(config = {}) {\n        this.id = nextPropID++;\n        this.perNode = !!config.perNode;\n        this.deserialize = config.deserialize || (() => {\n            throw new Error(\"This node type doesn't define a deserialize function\");\n        });\n    }\n    /// This is meant to be used with\n    /// [`NodeSet.extend`](#common.NodeSet.extend) or\n    /// [`LRParser.configure`](#lr.ParserConfig.props) to compute\n    /// prop values for each node type in the set. Takes a [match\n    /// object](#common.NodeType^match) or function that returns undefined\n    /// if the node type doesn't get this prop, and the prop's value if\n    /// it does.\n    add(match) {\n        if (this.perNode)\n            throw new RangeError(\"Can't add per-node props to node types\");\n        if (typeof match != \"function\")\n            match = NodeType.match(match);\n        return (type) => {\n            let result = match(type);\n            return result === undefined ? null : [this, result];\n        };\n    }\n}\n/// Prop that is used to describe matching delimiters. For opening\n/// delimiters, this holds an array of node names (written as a\n/// space-separated string when declaring this prop in a grammar)\n/// for the node types of closing delimiters that match it.\nNodeProp.closedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/// The inverse of [`closedBy`](#common.NodeProp^closedBy). This is\n/// attached to closing delimiters, holding an array of node names\n/// of types of matching opening delimiters.\nNodeProp.openedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/// Used to assign node types to groups (for example, all node\n/// types that represent an expression could be tagged with an\n/// `\"Expression\"` group).\nNodeProp.group = new NodeProp({ deserialize: str => str.split(\" \") });\n/// The hash of the [context](#lr.ContextTracker.constructor)\n/// that the node was parsed in, if any. Used to limit reuse of\n/// contextual nodes.\nNodeProp.contextHash = new NodeProp({ perNode: true });\n/// The distance beyond the end of the node that the tokenizer\n/// looked ahead for any of the tokens inside the node. (The LR\n/// parser only stores this when it is larger than 25, for\n/// efficiency reasons.)\nNodeProp.lookAhead = new NodeProp({ perNode: true });\n/// This per-node prop is used to replace a given node, or part of a\n/// node, with another tree. This is useful to include trees from\n/// different languages in mixed-language parsers.\nNodeProp.mounted = new NodeProp({ perNode: true });\n/// A mounted tree, which can be [stored](#common.NodeProp^mounted) on\n/// a tree node to indicate that parts of its content are\n/// represented by another tree.\nclass MountedTree {\n    constructor(\n    /// The inner tree.\n    tree, \n    /// If this is null, this tree replaces the entire node (it will\n    /// be included in the regular iteration instead of its host\n    /// node). If not, only the given ranges are considered to be\n    /// covered by this tree. This is used for trees that are mixed in\n    /// a way that isn't strictly hierarchical. Such mounted trees are\n    /// only entered by [`resolveInner`](#common.Tree.resolveInner)\n    /// and [`enter`](#common.SyntaxNode.enter).\n    overlay, \n    /// The parser used to create this subtree.\n    parser) {\n        this.tree = tree;\n        this.overlay = overlay;\n        this.parser = parser;\n    }\n}\nconst noProps = Object.create(null);\n/// Each node in a syntax tree has a node type associated with it.\nclass NodeType {\n    /// @internal\n    constructor(\n    /// The name of the node type. Not necessarily unique, but if the\n    /// grammar was written properly, different node types with the\n    /// same name within a node set should play the same semantic\n    /// role.\n    name, \n    /// @internal\n    props, \n    /// The id of this node in its set. Corresponds to the term ids\n    /// used in the parser.\n    id, \n    /// @internal\n    flags = 0) {\n        this.name = name;\n        this.props = props;\n        this.id = id;\n        this.flags = flags;\n    }\n    /// Define a node type.\n    static define(spec) {\n        let props = spec.props && spec.props.length ? Object.create(null) : noProps;\n        let flags = (spec.top ? 1 /* Top */ : 0) | (spec.skipped ? 2 /* Skipped */ : 0) |\n            (spec.error ? 4 /* Error */ : 0) | (spec.name == null ? 8 /* Anonymous */ : 0);\n        let type = new NodeType(spec.name || \"\", props, spec.id, flags);\n        if (spec.props)\n            for (let src of spec.props) {\n                if (!Array.isArray(src))\n                    src = src(type);\n                if (src) {\n                    if (src[0].perNode)\n                        throw new RangeError(\"Can't store a per-node prop on a node type\");\n                    props[src[0].id] = src[1];\n                }\n            }\n        return type;\n    }\n    /// Retrieves a node prop for this type. Will return `undefined` if\n    /// the prop isn't present on this node.\n    prop(prop) { return this.props[prop.id]; }\n    /// True when this is the top node of a grammar.\n    get isTop() { return (this.flags & 1 /* Top */) > 0; }\n    /// True when this node is produced by a skip rule.\n    get isSkipped() { return (this.flags & 2 /* Skipped */) > 0; }\n    /// Indicates whether this is an error node.\n    get isError() { return (this.flags & 4 /* Error */) > 0; }\n    /// When true, this node type doesn't correspond to a user-declared\n    /// named node, for example because it is used to cache repetition.\n    get isAnonymous() { return (this.flags & 8 /* Anonymous */) > 0; }\n    /// Returns true when this node's name or one of its\n    /// [groups](#common.NodeProp^group) matches the given string.\n    is(name) {\n        if (typeof name == 'string') {\n            if (this.name == name)\n                return true;\n            let group = this.prop(NodeProp.group);\n            return group ? group.indexOf(name) > -1 : false;\n        }\n        return this.id == name;\n    }\n    /// Create a function from node types to arbitrary values by\n    /// specifying an object whose property names are node or\n    /// [group](#common.NodeProp^group) names. Often useful with\n    /// [`NodeProp.add`](#common.NodeProp.add). You can put multiple\n    /// names, separated by spaces, in a single property name to map\n    /// multiple node names to a single value.\n    static match(map) {\n        let direct = Object.create(null);\n        for (let prop in map)\n            for (let name of prop.split(\" \"))\n                direct[name] = map[prop];\n        return (node) => {\n            for (let groups = node.prop(NodeProp.group), i = -1; i < (groups ? groups.length : 0); i++) {\n                let found = direct[i < 0 ? node.name : groups[i]];\n                if (found)\n                    return found;\n            }\n        };\n    }\n}\n/// An empty dummy node type to use when no actual type is available.\nNodeType.none = new NodeType(\"\", Object.create(null), 0, 8 /* Anonymous */);\n/// A node set holds a collection of node types. It is used to\n/// compactly represent trees by storing their type ids, rather than a\n/// full pointer to the type object, in a numeric array. Each parser\n/// [has](#lr.LRParser.nodeSet) a node set, and [tree\n/// buffers](#common.TreeBuffer) can only store collections of nodes\n/// from the same set. A set can have a maximum of 2**16 (65536) node\n/// types in it, so that the ids fit into 16-bit typed array slots.\nclass NodeSet {\n    /// Create a set with the given types. The `id` property of each\n    /// type should correspond to its position within the array.\n    constructor(\n    /// The node types in this set, by id.\n    types) {\n        this.types = types;\n        for (let i = 0; i < types.length; i++)\n            if (types[i].id != i)\n                throw new RangeError(\"Node type ids should correspond to array positions when creating a node set\");\n    }\n    /// Create a copy of this set with some node properties added. The\n    /// arguments to this method can be created with\n    /// [`NodeProp.add`](#common.NodeProp.add).\n    extend(...props) {\n        let newTypes = [];\n        for (let type of this.types) {\n            let newProps = null;\n            for (let source of props) {\n                let add = source(type);\n                if (add) {\n                    if (!newProps)\n                        newProps = Object.assign({}, type.props);\n                    newProps[add[0].id] = add[1];\n                }\n            }\n            newTypes.push(newProps ? new NodeType(type.name, newProps, type.id, type.flags) : type);\n        }\n        return new NodeSet(newTypes);\n    }\n}\nconst CachedNode = new WeakMap(), CachedInnerNode = new WeakMap();\n/// Options that control iteration. Can be combined with the `|`\n/// operator to enable multiple ones.\nvar IterMode;\n(function (IterMode) {\n    /// When enabled, iteration will only visit [`Tree`](#common.Tree)\n    /// objects, not nodes packed into\n    /// [`TreeBuffer`](#common.TreeBuffer)s.\n    IterMode[IterMode[\"ExcludeBuffers\"] = 1] = \"ExcludeBuffers\";\n    /// Enable this to make iteration include anonymous nodes (such as\n    /// the nodes that wrap repeated grammar constructs into a balanced\n    /// tree).\n    IterMode[IterMode[\"IncludeAnonymous\"] = 2] = \"IncludeAnonymous\";\n    /// By default, regular [mounted](#common.NodeProp^mounted) nodes\n    /// replace their base node in iteration. Enable this to ignore them\n    /// instead.\n    IterMode[IterMode[\"IgnoreMounts\"] = 4] = \"IgnoreMounts\";\n    /// This option only applies in\n    /// [`enter`](#common.SyntaxNode.enter)-style methods. It tells the\n    /// library to not enter mounted overlays if one covers the given\n    /// position.\n    IterMode[IterMode[\"IgnoreOverlays\"] = 8] = \"IgnoreOverlays\";\n})(IterMode || (IterMode = {}));\n/// A piece of syntax tree. There are two ways to approach these\n/// trees: the way they are actually stored in memory, and the\n/// convenient way.\n///\n/// Syntax trees are stored as a tree of `Tree` and `TreeBuffer`\n/// objects. By packing detail information into `TreeBuffer` leaf\n/// nodes, the representation is made a lot more memory-efficient.\n///\n/// However, when you want to actually work with tree nodes, this\n/// representation is very awkward, so most client code will want to\n/// use the [`TreeCursor`](#common.TreeCursor) or\n/// [`SyntaxNode`](#common.SyntaxNode) interface instead, which provides\n/// a view on some part of this data structure, and can be used to\n/// move around to adjacent nodes.\nclass Tree {\n    /// Construct a new tree. See also [`Tree.build`](#common.Tree^build).\n    constructor(\n    /// The type of the top node.\n    type, \n    /// This node's child nodes.\n    children, \n    /// The positions (offsets relative to the start of this tree) of\n    /// the children.\n    positions, \n    /// The total length of this tree\n    length, \n    /// Per-node [node props](#common.NodeProp) to associate with this node.\n    props) {\n        this.type = type;\n        this.children = children;\n        this.positions = positions;\n        this.length = length;\n        /// @internal\n        this.props = null;\n        if (props && props.length) {\n            this.props = Object.create(null);\n            for (let [prop, value] of props)\n                this.props[typeof prop == \"number\" ? prop : prop.id] = value;\n        }\n    }\n    /// @internal\n    toString() {\n        let mounted = this.prop(NodeProp.mounted);\n        if (mounted && !mounted.overlay)\n            return mounted.tree.toString();\n        let children = \"\";\n        for (let ch of this.children) {\n            let str = ch.toString();\n            if (str) {\n                if (children)\n                    children += \",\";\n                children += str;\n            }\n        }\n        return !this.type.name ? children :\n            (/\\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) +\n                (children.length ? \"(\" + children + \")\" : \"\");\n    }\n    /// Get a [tree cursor](#common.TreeCursor) positioned at the top of\n    /// the tree. Mode can be used to [control](#common.IterMode) which\n    /// nodes the cursor visits.\n    cursor(mode = 0) {\n        return new TreeCursor(this.topNode, mode);\n    }\n    /// Get a [tree cursor](#common.TreeCursor) pointing into this tree\n    /// at the given position and side (see\n    /// [`moveTo`](#common.TreeCursor.moveTo).\n    cursorAt(pos, side = 0, mode = 0) {\n        let scope = CachedNode.get(this) || this.topNode;\n        let cursor = new TreeCursor(scope);\n        cursor.moveTo(pos, side);\n        CachedNode.set(this, cursor._tree);\n        return cursor;\n    }\n    /// Get a [syntax node](#common.SyntaxNode) object for the top of the\n    /// tree.\n    get topNode() {\n        return new TreeNode(this, 0, 0, null);\n    }\n    /// Get the [syntax node](#common.SyntaxNode) at the given position.\n    /// If `side` is -1, this will move into nodes that end at the\n    /// position. If 1, it'll move into nodes that start at the\n    /// position. With 0, it'll only enter nodes that cover the position\n    /// from both sides.\n    ///\n    /// Note that this will not enter\n    /// [overlays](#common.MountedTree.overlay), and you often want\n    /// [`resolveInner`](#common.Tree.resolveInner) instead.\n    resolve(pos, side = 0) {\n        let node = resolveNode(CachedNode.get(this) || this.topNode, pos, side, false);\n        CachedNode.set(this, node);\n        return node;\n    }\n    /// Like [`resolve`](#common.Tree.resolve), but will enter\n    /// [overlaid](#common.MountedTree.overlay) nodes, producing a syntax node\n    /// pointing into the innermost overlaid tree at the given position\n    /// (with parent links going through all parent structure, including\n    /// the host trees).\n    resolveInner(pos, side = 0) {\n        let node = resolveNode(CachedInnerNode.get(this) || this.topNode, pos, side, true);\n        CachedInnerNode.set(this, node);\n        return node;\n    }\n    /// Iterate over the tree and its children, calling `enter` for any\n    /// node that touches the `from`/`to` region (if given) before\n    /// running over such a node's children, and `leave` (if given) when\n    /// leaving the node. When `enter` returns `false`, that node will\n    /// not have its children iterated over (or `leave` called).\n    iterate(spec) {\n        let { enter, leave, from = 0, to = this.length } = spec;\n        for (let c = this.cursor((spec.mode || 0) | IterMode.IncludeAnonymous);;) {\n            let entered = false;\n            if (c.from <= to && c.to >= from && (c.type.isAnonymous || enter(c) !== false)) {\n                if (c.firstChild())\n                    continue;\n                entered = true;\n            }\n            for (;;) {\n                if (entered && leave && !c.type.isAnonymous)\n                    leave(c);\n                if (c.nextSibling())\n                    break;\n                if (!c.parent())\n                    return;\n                entered = true;\n            }\n        }\n    }\n    /// Get the value of the given [node prop](#common.NodeProp) for this\n    /// node. Works with both per-node and per-type props.\n    prop(prop) {\n        return !prop.perNode ? this.type.prop(prop) : this.props ? this.props[prop.id] : undefined;\n    }\n    /// Returns the node's [per-node props](#common.NodeProp.perNode) in a\n    /// format that can be passed to the [`Tree`](#common.Tree)\n    /// constructor.\n    get propValues() {\n        let result = [];\n        if (this.props)\n            for (let id in this.props)\n                result.push([+id, this.props[id]]);\n        return result;\n    }\n    /// Balance the direct children of this tree, producing a copy of\n    /// which may have children grouped into subtrees with type\n    /// [`NodeType.none`](#common.NodeType^none).\n    balance(config = {}) {\n        return this.children.length <= 8 /* BranchFactor */ ? this :\n            balanceRange(NodeType.none, this.children, this.positions, 0, this.children.length, 0, this.length, (children, positions, length) => new Tree(this.type, children, positions, length, this.propValues), config.makeTree || ((children, positions, length) => new Tree(NodeType.none, children, positions, length)));\n    }\n    /// Build a tree from a postfix-ordered buffer of node information,\n    /// or a cursor over such a buffer.\n    static build(data) { return buildTree(data); }\n}\n/// The empty tree\nTree.empty = new Tree(NodeType.none, [], [], 0);\nclass FlatBufferCursor {\n    constructor(buffer, index) {\n        this.buffer = buffer;\n        this.index = index;\n    }\n    get id() { return this.buffer[this.index - 4]; }\n    get start() { return this.buffer[this.index - 3]; }\n    get end() { return this.buffer[this.index - 2]; }\n    get size() { return this.buffer[this.index - 1]; }\n    get pos() { return this.index; }\n    next() { this.index -= 4; }\n    fork() { return new FlatBufferCursor(this.buffer, this.index); }\n}\n/// Tree buffers contain (type, start, end, endIndex) quads for each\n/// node. In such a buffer, nodes are stored in prefix order (parents\n/// before children, with the endIndex of the parent indicating which\n/// children belong to it).\nclass TreeBuffer {\n    /// Create a tree buffer.\n    constructor(\n    /// The buffer's content.\n    buffer, \n    /// The total length of the group of nodes in the buffer.\n    length, \n    /// The node set used in this buffer.\n    set) {\n        this.buffer = buffer;\n        this.length = length;\n        this.set = set;\n    }\n    /// @internal\n    get type() { return NodeType.none; }\n    /// @internal\n    toString() {\n        let result = [];\n        for (let index = 0; index < this.buffer.length;) {\n            result.push(this.childString(index));\n            index = this.buffer[index + 3];\n        }\n        return result.join(\",\");\n    }\n    /// @internal\n    childString(index) {\n        let id = this.buffer[index], endIndex = this.buffer[index + 3];\n        let type = this.set.types[id], result = type.name;\n        if (/\\W/.test(result) && !type.isError)\n            result = JSON.stringify(result);\n        index += 4;\n        if (endIndex == index)\n            return result;\n        let children = [];\n        while (index < endIndex) {\n            children.push(this.childString(index));\n            index = this.buffer[index + 3];\n        }\n        return result + \"(\" + children.join(\",\") + \")\";\n    }\n    /// @internal\n    findChild(startIndex, endIndex, dir, pos, side) {\n        let { buffer } = this, pick = -1;\n        for (let i = startIndex; i != endIndex; i = buffer[i + 3]) {\n            if (checkSide(side, pos, buffer[i + 1], buffer[i + 2])) {\n                pick = i;\n                if (dir > 0)\n                    break;\n            }\n        }\n        return pick;\n    }\n    /// @internal\n    slice(startI, endI, from, to) {\n        let b = this.buffer;\n        let copy = new Uint16Array(endI - startI);\n        for (let i = startI, j = 0; i < endI;) {\n            copy[j++] = b[i++];\n            copy[j++] = b[i++] - from;\n            copy[j++] = b[i++] - from;\n            copy[j++] = b[i++] - startI;\n        }\n        return new TreeBuffer(copy, to - from, this.set);\n    }\n}\nfunction checkSide(side, pos, from, to) {\n    switch (side) {\n        case -2 /* Before */: return from < pos;\n        case -1 /* AtOrBefore */: return to >= pos && from < pos;\n        case 0 /* Around */: return from < pos && to > pos;\n        case 1 /* AtOrAfter */: return from <= pos && to > pos;\n        case 2 /* After */: return to > pos;\n        case 4 /* DontCare */: return true;\n    }\n}\nfunction enterUnfinishedNodesBefore(node, pos) {\n    let scan = node.childBefore(pos);\n    while (scan) {\n        let last = scan.lastChild;\n        if (!last || last.to != scan.to)\n            break;\n        if (last.type.isError && last.from == last.to) {\n            node = scan;\n            scan = last.prevSibling;\n        }\n        else {\n            scan = last;\n        }\n    }\n    return node;\n}\nfunction resolveNode(node, pos, side, overlays) {\n    var _a;\n    // Move up to a node that actually holds the position, if possible\n    while (node.from == node.to ||\n        (side < 1 ? node.from >= pos : node.from > pos) ||\n        (side > -1 ? node.to <= pos : node.to < pos)) {\n        let parent = !overlays && node instanceof TreeNode && node.index < 0 ? null : node.parent;\n        if (!parent)\n            return node;\n        node = parent;\n    }\n    let mode = overlays ? 0 : IterMode.IgnoreOverlays;\n    // Must go up out of overlays when those do not overlap with pos\n    if (overlays)\n        for (let scan = node, parent = scan.parent; parent; scan = parent, parent = scan.parent) {\n            if (scan instanceof TreeNode && scan.index < 0 && ((_a = parent.enter(pos, side, mode)) === null || _a === void 0 ? void 0 : _a.from) != scan.from)\n                node = parent;\n        }\n    for (;;) {\n        let inner = node.enter(pos, side, mode);\n        if (!inner)\n            return node;\n        node = inner;\n    }\n}\nclass TreeNode {\n    constructor(_tree, from, \n    // Index in parent node, set to -1 if the node is not a direct child of _parent.node (overlay)\n    index, _parent) {\n        this._tree = _tree;\n        this.from = from;\n        this.index = index;\n        this._parent = _parent;\n    }\n    get type() { return this._tree.type; }\n    get name() { return this._tree.type.name; }\n    get to() { return this.from + this._tree.length; }\n    nextChild(i, dir, pos, side, mode = 0) {\n        for (let parent = this;;) {\n            for (let { children, positions } = parent._tree, e = dir > 0 ? children.length : -1; i != e; i += dir) {\n                let next = children[i], start = positions[i] + parent.from;\n                if (!checkSide(side, pos, start, start + next.length))\n                    continue;\n                if (next instanceof TreeBuffer) {\n                    if (mode & IterMode.ExcludeBuffers)\n                        continue;\n                    let index = next.findChild(0, next.buffer.length, dir, pos - start, side);\n                    if (index > -1)\n                        return new BufferNode(new BufferContext(parent, next, i, start), null, index);\n                }\n                else if ((mode & IterMode.IncludeAnonymous) || (!next.type.isAnonymous || hasChild(next))) {\n                    let mounted;\n                    if (!(mode & IterMode.IgnoreMounts) &&\n                        next.props && (mounted = next.prop(NodeProp.mounted)) && !mounted.overlay)\n                        return new TreeNode(mounted.tree, start, i, parent);\n                    let inner = new TreeNode(next, start, i, parent);\n                    return (mode & IterMode.IncludeAnonymous) || !inner.type.isAnonymous ? inner\n                        : inner.nextChild(dir < 0 ? next.children.length - 1 : 0, dir, pos, side);\n                }\n            }\n            if ((mode & IterMode.IncludeAnonymous) || !parent.type.isAnonymous)\n                return null;\n            if (parent.index >= 0)\n                i = parent.index + dir;\n            else\n                i = dir < 0 ? -1 : parent._parent._tree.children.length;\n            parent = parent._parent;\n            if (!parent)\n                return null;\n        }\n    }\n    get firstChild() { return this.nextChild(0, 1, 0, 4 /* DontCare */); }\n    get lastChild() { return this.nextChild(this._tree.children.length - 1, -1, 0, 4 /* DontCare */); }\n    childAfter(pos) { return this.nextChild(0, 1, pos, 2 /* After */); }\n    childBefore(pos) { return this.nextChild(this._tree.children.length - 1, -1, pos, -2 /* Before */); }\n    enter(pos, side, mode = 0) {\n        let mounted;\n        if (!(mode & IterMode.IgnoreOverlays) && (mounted = this._tree.prop(NodeProp.mounted)) && mounted.overlay) {\n            let rPos = pos - this.from;\n            for (let { from, to } of mounted.overlay) {\n                if ((side > 0 ? from <= rPos : from < rPos) &&\n                    (side < 0 ? to >= rPos : to > rPos))\n                    return new TreeNode(mounted.tree, mounted.overlay[0].from + this.from, -1, this);\n            }\n        }\n        return this.nextChild(0, 1, pos, side, mode);\n    }\n    nextSignificantParent() {\n        let val = this;\n        while (val.type.isAnonymous && val._parent)\n            val = val._parent;\n        return val;\n    }\n    get parent() {\n        return this._parent ? this._parent.nextSignificantParent() : null;\n    }\n    get nextSibling() {\n        return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4 /* DontCare */) : null;\n    }\n    get prevSibling() {\n        return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4 /* DontCare */) : null;\n    }\n    cursor(mode = 0) { return new TreeCursor(this, mode); }\n    get tree() { return this._tree; }\n    toTree() { return this._tree; }\n    resolve(pos, side = 0) {\n        return resolveNode(this, pos, side, false);\n    }\n    resolveInner(pos, side = 0) {\n        return resolveNode(this, pos, side, true);\n    }\n    enterUnfinishedNodesBefore(pos) { return enterUnfinishedNodesBefore(this, pos); }\n    getChild(type, before = null, after = null) {\n        let r = getChildren(this, type, before, after);\n        return r.length ? r[0] : null;\n    }\n    getChildren(type, before = null, after = null) {\n        return getChildren(this, type, before, after);\n    }\n    /// @internal\n    toString() { return this._tree.toString(); }\n    get node() { return this; }\n    matchContext(context) { return matchNodeContext(this, context); }\n}\nfunction getChildren(node, type, before, after) {\n    let cur = node.cursor(), result = [];\n    if (!cur.firstChild())\n        return result;\n    if (before != null)\n        while (!cur.type.is(before))\n            if (!cur.nextSibling())\n                return result;\n    for (;;) {\n        if (after != null && cur.type.is(after))\n            return result;\n        if (cur.type.is(type))\n            result.push(cur.node);\n        if (!cur.nextSibling())\n            return after == null ? result : [];\n    }\n}\nfunction matchNodeContext(node, context, i = context.length - 1) {\n    for (let p = node.parent; i >= 0; p = p.parent) {\n        if (!p)\n            return false;\n        if (!p.type.isAnonymous) {\n            if (context[i] && context[i] != p.name)\n                return false;\n            i--;\n        }\n    }\n    return true;\n}\nclass BufferContext {\n    constructor(parent, buffer, index, start) {\n        this.parent = parent;\n        this.buffer = buffer;\n        this.index = index;\n        this.start = start;\n    }\n}\nclass BufferNode {\n    constructor(context, _parent, index) {\n        this.context = context;\n        this._parent = _parent;\n        this.index = index;\n        this.type = context.buffer.set.types[context.buffer.buffer[index]];\n    }\n    get name() { return this.type.name; }\n    get from() { return this.context.start + this.context.buffer.buffer[this.index + 1]; }\n    get to() { return this.context.start + this.context.buffer.buffer[this.index + 2]; }\n    child(dir, pos, side) {\n        let { buffer } = this.context;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.context.start, side);\n        return index < 0 ? null : new BufferNode(this.context, this, index);\n    }\n    get firstChild() { return this.child(1, 0, 4 /* DontCare */); }\n    get lastChild() { return this.child(-1, 0, 4 /* DontCare */); }\n    childAfter(pos) { return this.child(1, pos, 2 /* After */); }\n    childBefore(pos) { return this.child(-1, pos, -2 /* Before */); }\n    enter(pos, side, mode = 0) {\n        if (mode & IterMode.ExcludeBuffers)\n            return null;\n        let { buffer } = this.context;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], side > 0 ? 1 : -1, pos - this.context.start, side);\n        return index < 0 ? null : new BufferNode(this.context, this, index);\n    }\n    get parent() {\n        return this._parent || this.context.parent.nextSignificantParent();\n    }\n    externalSibling(dir) {\n        return this._parent ? null : this.context.parent.nextChild(this.context.index + dir, dir, 0, 4 /* DontCare */);\n    }\n    get nextSibling() {\n        let { buffer } = this.context;\n        let after = buffer.buffer[this.index + 3];\n        if (after < (this._parent ? buffer.buffer[this._parent.index + 3] : buffer.buffer.length))\n            return new BufferNode(this.context, this._parent, after);\n        return this.externalSibling(1);\n    }\n    get prevSibling() {\n        let { buffer } = this.context;\n        let parentStart = this._parent ? this._parent.index + 4 : 0;\n        if (this.index == parentStart)\n            return this.externalSibling(-1);\n        return new BufferNode(this.context, this._parent, buffer.findChild(parentStart, this.index, -1, 0, 4 /* DontCare */));\n    }\n    cursor(mode = 0) { return new TreeCursor(this, mode); }\n    get tree() { return null; }\n    toTree() {\n        let children = [], positions = [];\n        let { buffer } = this.context;\n        let startI = this.index + 4, endI = buffer.buffer[this.index + 3];\n        if (endI > startI) {\n            let from = buffer.buffer[this.index + 1], to = buffer.buffer[this.index + 2];\n            children.push(buffer.slice(startI, endI, from, to));\n            positions.push(0);\n        }\n        return new Tree(this.type, children, positions, this.to - this.from);\n    }\n    resolve(pos, side = 0) {\n        return resolveNode(this, pos, side, false);\n    }\n    resolveInner(pos, side = 0) {\n        return resolveNode(this, pos, side, true);\n    }\n    enterUnfinishedNodesBefore(pos) { return enterUnfinishedNodesBefore(this, pos); }\n    /// @internal\n    toString() { return this.context.buffer.childString(this.index); }\n    getChild(type, before = null, after = null) {\n        let r = getChildren(this, type, before, after);\n        return r.length ? r[0] : null;\n    }\n    getChildren(type, before = null, after = null) {\n        return getChildren(this, type, before, after);\n    }\n    get node() { return this; }\n    matchContext(context) { return matchNodeContext(this, context); }\n}\n/// A tree cursor object focuses on a given node in a syntax tree, and\n/// allows you to move to adjacent nodes.\nclass TreeCursor {\n    /// @internal\n    constructor(node, \n    /// @internal\n    mode = 0) {\n        this.mode = mode;\n        /// @internal\n        this.buffer = null;\n        this.stack = [];\n        /// @internal\n        this.index = 0;\n        this.bufferNode = null;\n        if (node instanceof TreeNode) {\n            this.yieldNode(node);\n        }\n        else {\n            this._tree = node.context.parent;\n            this.buffer = node.context;\n            for (let n = node._parent; n; n = n._parent)\n                this.stack.unshift(n.index);\n            this.bufferNode = node;\n            this.yieldBuf(node.index);\n        }\n    }\n    /// Shorthand for `.type.name`.\n    get name() { return this.type.name; }\n    yieldNode(node) {\n        if (!node)\n            return false;\n        this._tree = node;\n        this.type = node.type;\n        this.from = node.from;\n        this.to = node.to;\n        return true;\n    }\n    yieldBuf(index, type) {\n        this.index = index;\n        let { start, buffer } = this.buffer;\n        this.type = type || buffer.set.types[buffer.buffer[index]];\n        this.from = start + buffer.buffer[index + 1];\n        this.to = start + buffer.buffer[index + 2];\n        return true;\n    }\n    yield(node) {\n        if (!node)\n            return false;\n        if (node instanceof TreeNode) {\n            this.buffer = null;\n            return this.yieldNode(node);\n        }\n        this.buffer = node.context;\n        return this.yieldBuf(node.index, node.type);\n    }\n    /// @internal\n    toString() {\n        return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();\n    }\n    /// @internal\n    enterChild(dir, pos, side) {\n        if (!this.buffer)\n            return this.yield(this._tree.nextChild(dir < 0 ? this._tree._tree.children.length - 1 : 0, dir, pos, side, this.mode));\n        let { buffer } = this.buffer;\n        let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.buffer.start, side);\n        if (index < 0)\n            return false;\n        this.stack.push(this.index);\n        return this.yieldBuf(index);\n    }\n    /// Move the cursor to this node's first child. When this returns\n    /// false, the node has no child, and the cursor has not been moved.\n    firstChild() { return this.enterChild(1, 0, 4 /* DontCare */); }\n    /// Move the cursor to this node's last child.\n    lastChild() { return this.enterChild(-1, 0, 4 /* DontCare */); }\n    /// Move the cursor to the first child that ends after `pos`.\n    childAfter(pos) { return this.enterChild(1, pos, 2 /* After */); }\n    /// Move to the last child that starts before `pos`.\n    childBefore(pos) { return this.enterChild(-1, pos, -2 /* Before */); }\n    /// Move the cursor to the child around `pos`. If side is -1 the\n    /// child may end at that position, when 1 it may start there. This\n    /// will also enter [overlaid](#common.MountedTree.overlay)\n    /// [mounted](#common.NodeProp^mounted) trees unless `overlays` is\n    /// set to false.\n    enter(pos, side, mode = this.mode) {\n        if (!this.buffer)\n            return this.yield(this._tree.enter(pos, side, mode));\n        return mode & IterMode.ExcludeBuffers ? false : this.enterChild(1, pos, side);\n    }\n    /// Move to the node's parent node, if this isn't the top node.\n    parent() {\n        if (!this.buffer)\n            return this.yieldNode((this.mode & IterMode.IncludeAnonymous) ? this._tree._parent : this._tree.parent);\n        if (this.stack.length)\n            return this.yieldBuf(this.stack.pop());\n        let parent = (this.mode & IterMode.IncludeAnonymous) ? this.buffer.parent : this.buffer.parent.nextSignificantParent();\n        this.buffer = null;\n        return this.yieldNode(parent);\n    }\n    /// @internal\n    sibling(dir) {\n        if (!this.buffer)\n            return !this._tree._parent ? false\n                : this.yield(this._tree.index < 0 ? null\n                    : this._tree._parent.nextChild(this._tree.index + dir, dir, 0, 4 /* DontCare */, this.mode));\n        let { buffer } = this.buffer, d = this.stack.length - 1;\n        if (dir < 0) {\n            let parentStart = d < 0 ? 0 : this.stack[d] + 4;\n            if (this.index != parentStart)\n                return this.yieldBuf(buffer.findChild(parentStart, this.index, -1, 0, 4 /* DontCare */));\n        }\n        else {\n            let after = buffer.buffer[this.index + 3];\n            if (after < (d < 0 ? buffer.buffer.length : buffer.buffer[this.stack[d] + 3]))\n                return this.yieldBuf(after);\n        }\n        return d < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + dir, dir, 0, 4 /* DontCare */, this.mode)) : false;\n    }\n    /// Move to this node's next sibling, if any.\n    nextSibling() { return this.sibling(1); }\n    /// Move to this node's previous sibling, if any.\n    prevSibling() { return this.sibling(-1); }\n    atLastNode(dir) {\n        let index, parent, { buffer } = this;\n        if (buffer) {\n            if (dir > 0) {\n                if (this.index < buffer.buffer.buffer.length)\n                    return false;\n            }\n            else {\n                for (let i = 0; i < this.index; i++)\n                    if (buffer.buffer.buffer[i + 3] < this.index)\n                        return false;\n            }\n            ({ index, parent } = buffer);\n        }\n        else {\n            ({ index, _parent: parent } = this._tree);\n        }\n        for (; parent; { index, _parent: parent } = parent) {\n            if (index > -1)\n                for (let i = index + dir, e = dir < 0 ? -1 : parent._tree.children.length; i != e; i += dir) {\n                    let child = parent._tree.children[i];\n                    if ((this.mode & IterMode.IncludeAnonymous) ||\n                        child instanceof TreeBuffer ||\n                        !child.type.isAnonymous ||\n                        hasChild(child))\n                        return false;\n                }\n        }\n        return true;\n    }\n    move(dir, enter) {\n        if (enter && this.enterChild(dir, 0, 4 /* DontCare */))\n            return true;\n        for (;;) {\n            if (this.sibling(dir))\n                return true;\n            if (this.atLastNode(dir) || !this.parent())\n                return false;\n        }\n    }\n    /// Move to the next node in a\n    /// [pre-order](https://en.wikipedia.org/wiki/Tree_traversal#Pre-order_(NLR))\n    /// traversal, going from a node to its first child or, if the\n    /// current node is empty or `enter` is false, its next sibling or\n    /// the next sibling of the first parent node that has one.\n    next(enter = true) { return this.move(1, enter); }\n    /// Move to the next node in a last-to-first pre-order traveral. A\n    /// node is followed by its last child or, if it has none, its\n    /// previous sibling or the previous sibling of the first parent\n    /// node that has one.\n    prev(enter = true) { return this.move(-1, enter); }\n    /// Move the cursor to the innermost node that covers `pos`. If\n    /// `side` is -1, it will enter nodes that end at `pos`. If it is 1,\n    /// it will enter nodes that start at `pos`.\n    moveTo(pos, side = 0) {\n        // Move up to a node that actually holds the position, if possible\n        while (this.from == this.to ||\n            (side < 1 ? this.from >= pos : this.from > pos) ||\n            (side > -1 ? this.to <= pos : this.to < pos))\n            if (!this.parent())\n                break;\n        // Then scan down into child nodes as far as possible\n        while (this.enterChild(1, pos, side)) { }\n        return this;\n    }\n    /// Get a [syntax node](#common.SyntaxNode) at the cursor's current\n    /// position.\n    get node() {\n        if (!this.buffer)\n            return this._tree;\n        let cache = this.bufferNode, result = null, depth = 0;\n        if (cache && cache.context == this.buffer) {\n            scan: for (let index = this.index, d = this.stack.length; d >= 0;) {\n                for (let c = cache; c; c = c._parent)\n                    if (c.index == index) {\n                        if (index == this.index)\n                            return c;\n                        result = c;\n                        depth = d + 1;\n                        break scan;\n                    }\n                index = this.stack[--d];\n            }\n        }\n        for (let i = depth; i < this.stack.length; i++)\n            result = new BufferNode(this.buffer, result, this.stack[i]);\n        return this.bufferNode = new BufferNode(this.buffer, result, this.index);\n    }\n    /// Get the [tree](#common.Tree) that represents the current node, if\n    /// any. Will return null when the node is in a [tree\n    /// buffer](#common.TreeBuffer).\n    get tree() {\n        return this.buffer ? null : this._tree._tree;\n    }\n    /// Iterate over the current node and all its descendants, calling\n    /// `enter` when entering a node and `leave`, if given, when leaving\n    /// one. When `enter` returns `false`, any children of that node are\n    /// skipped, and `leave` isn't called for it.\n    iterate(enter, leave) {\n        for (let depth = 0;;) {\n            let mustLeave = false;\n            if (this.type.isAnonymous || enter(this) !== false) {\n                if (this.firstChild()) {\n                    depth++;\n                    continue;\n                }\n                if (!this.type.isAnonymous)\n                    mustLeave = true;\n            }\n            for (;;) {\n                if (mustLeave && leave)\n                    leave(this);\n                mustLeave = this.type.isAnonymous;\n                if (this.nextSibling())\n                    break;\n                if (!depth)\n                    return;\n                this.parent();\n                depth--;\n                mustLeave = true;\n            }\n        }\n    }\n    /// Test whether the current node matches a given context—a sequence\n    /// of direct parent node names. Empty strings in the context array\n    /// are treated as wildcards.\n    matchContext(context) {\n        if (!this.buffer)\n            return matchNodeContext(this.node, context);\n        let { buffer } = this.buffer, { types } = buffer.set;\n        for (let i = context.length - 1, d = this.stack.length - 1; i >= 0; d--) {\n            if (d < 0)\n                return matchNodeContext(this.node, context, i);\n            let type = types[buffer.buffer[this.stack[d]]];\n            if (!type.isAnonymous) {\n                if (context[i] && context[i] != type.name)\n                    return false;\n                i--;\n            }\n        }\n        return true;\n    }\n}\nfunction hasChild(tree) {\n    return tree.children.some(ch => ch instanceof TreeBuffer || !ch.type.isAnonymous || hasChild(ch));\n}\nfunction buildTree(data) {\n    var _a;\n    let { buffer, nodeSet, maxBufferLength = DefaultBufferLength, reused = [], minRepeatType = nodeSet.types.length } = data;\n    let cursor = Array.isArray(buffer) ? new FlatBufferCursor(buffer, buffer.length) : buffer;\n    let types = nodeSet.types;\n    let contextHash = 0, lookAhead = 0;\n    function takeNode(parentStart, minPos, children, positions, inRepeat) {\n        let { id, start, end, size } = cursor;\n        let lookAheadAtStart = lookAhead;\n        while (size < 0) {\n            cursor.next();\n            if (size == -1 /* Reuse */) {\n                let node = reused[id];\n                children.push(node);\n                positions.push(start - parentStart);\n                return;\n            }\n            else if (size == -3 /* ContextChange */) { // Context change\n                contextHash = id;\n                return;\n            }\n            else if (size == -4 /* LookAhead */) {\n                lookAhead = id;\n                return;\n            }\n            else {\n                throw new RangeError(`Unrecognized record size: ${size}`);\n            }\n        }\n        let type = types[id], node, buffer;\n        let startPos = start - parentStart;\n        if (end - start <= maxBufferLength && (buffer = findBufferSize(cursor.pos - minPos, inRepeat))) {\n            // Small enough for a buffer, and no reused nodes inside\n            let data = new Uint16Array(buffer.size - buffer.skip);\n            let endPos = cursor.pos - buffer.size, index = data.length;\n            while (cursor.pos > endPos)\n                index = copyToBuffer(buffer.start, data, index);\n            node = new TreeBuffer(data, end - buffer.start, nodeSet);\n            startPos = buffer.start - parentStart;\n        }\n        else { // Make it a node\n            let endPos = cursor.pos - size;\n            cursor.next();\n            let localChildren = [], localPositions = [];\n            let localInRepeat = id >= minRepeatType ? id : -1;\n            let lastGroup = 0, lastEnd = end;\n            while (cursor.pos > endPos) {\n                if (localInRepeat >= 0 && cursor.id == localInRepeat && cursor.size >= 0) {\n                    if (cursor.end <= lastEnd - maxBufferLength) {\n                        makeRepeatLeaf(localChildren, localPositions, start, lastGroup, cursor.end, lastEnd, localInRepeat, lookAheadAtStart);\n                        lastGroup = localChildren.length;\n                        lastEnd = cursor.end;\n                    }\n                    cursor.next();\n                }\n                else {\n                    takeNode(start, endPos, localChildren, localPositions, localInRepeat);\n                }\n            }\n            if (localInRepeat >= 0 && lastGroup > 0 && lastGroup < localChildren.length)\n                makeRepeatLeaf(localChildren, localPositions, start, lastGroup, start, lastEnd, localInRepeat, lookAheadAtStart);\n            localChildren.reverse();\n            localPositions.reverse();\n            if (localInRepeat > -1 && lastGroup > 0) {\n                let make = makeBalanced(type);\n                node = balanceRange(type, localChildren, localPositions, 0, localChildren.length, 0, end - start, make, make);\n            }\n            else {\n                node = makeTree(type, localChildren, localPositions, end - start, lookAheadAtStart - end);\n            }\n        }\n        children.push(node);\n        positions.push(startPos);\n    }\n    function makeBalanced(type) {\n        return (children, positions, length) => {\n            let lookAhead = 0, lastI = children.length - 1, last, lookAheadProp;\n            if (lastI >= 0 && (last = children[lastI]) instanceof Tree) {\n                if (!lastI && last.type == type && last.length == length)\n                    return last;\n                if (lookAheadProp = last.prop(NodeProp.lookAhead))\n                    lookAhead = positions[lastI] + last.length + lookAheadProp;\n            }\n            return makeTree(type, children, positions, length, lookAhead);\n        };\n    }\n    function makeRepeatLeaf(children, positions, base, i, from, to, type, lookAhead) {\n        let localChildren = [], localPositions = [];\n        while (children.length > i) {\n            localChildren.push(children.pop());\n            localPositions.push(positions.pop() + base - from);\n        }\n        children.push(makeTree(nodeSet.types[type], localChildren, localPositions, to - from, lookAhead - to));\n        positions.push(from - base);\n    }\n    function makeTree(type, children, positions, length, lookAhead = 0, props) {\n        if (contextHash) {\n            let pair = [NodeProp.contextHash, contextHash];\n            props = props ? [pair].concat(props) : [pair];\n        }\n        if (lookAhead > 25) {\n            let pair = [NodeProp.lookAhead, lookAhead];\n            props = props ? [pair].concat(props) : [pair];\n        }\n        return new Tree(type, children, positions, length, props);\n    }\n    function findBufferSize(maxSize, inRepeat) {\n        // Scan through the buffer to find previous siblings that fit\n        // together in a TreeBuffer, and don't contain any reused nodes\n        // (which can't be stored in a buffer).\n        // If `inRepeat` is > -1, ignore node boundaries of that type for\n        // nesting, but make sure the end falls either at the start\n        // (`maxSize`) or before such a node.\n        let fork = cursor.fork();\n        let size = 0, start = 0, skip = 0, minStart = fork.end - maxBufferLength;\n        let result = { size: 0, start: 0, skip: 0 };\n        scan: for (let minPos = fork.pos - maxSize; fork.pos > minPos;) {\n            let nodeSize = fork.size;\n            // Pretend nested repeat nodes of the same type don't exist\n            if (fork.id == inRepeat && nodeSize >= 0) {\n                // Except that we store the current state as a valid return\n                // value.\n                result.size = size;\n                result.start = start;\n                result.skip = skip;\n                skip += 4;\n                size += 4;\n                fork.next();\n                continue;\n            }\n            let startPos = fork.pos - nodeSize;\n            if (nodeSize < 0 || startPos < minPos || fork.start < minStart)\n                break;\n            let localSkipped = fork.id >= minRepeatType ? 4 : 0;\n            let nodeStart = fork.start;\n            fork.next();\n            while (fork.pos > startPos) {\n                if (fork.size < 0) {\n                    if (fork.size == -3 /* ContextChange */)\n                        localSkipped += 4;\n                    else\n                        break scan;\n                }\n                else if (fork.id >= minRepeatType) {\n                    localSkipped += 4;\n                }\n                fork.next();\n            }\n            start = nodeStart;\n            size += nodeSize;\n            skip += localSkipped;\n        }\n        if (inRepeat < 0 || size == maxSize) {\n            result.size = size;\n            result.start = start;\n            result.skip = skip;\n        }\n        return result.size > 4 ? result : undefined;\n    }\n    function copyToBuffer(bufferStart, buffer, index) {\n        let { id, start, end, size } = cursor;\n        cursor.next();\n        if (size >= 0 && id < minRepeatType) {\n            let startIndex = index;\n            if (size > 4) {\n                let endPos = cursor.pos - (size - 4);\n                while (cursor.pos > endPos)\n                    index = copyToBuffer(bufferStart, buffer, index);\n            }\n            buffer[--index] = startIndex;\n            buffer[--index] = end - bufferStart;\n            buffer[--index] = start - bufferStart;\n            buffer[--index] = id;\n        }\n        else if (size == -3 /* ContextChange */) {\n            contextHash = id;\n        }\n        else if (size == -4 /* LookAhead */) {\n            lookAhead = id;\n        }\n        return index;\n    }\n    let children = [], positions = [];\n    while (cursor.pos > 0)\n        takeNode(data.start || 0, data.bufferStart || 0, children, positions, -1);\n    let length = (_a = data.length) !== null && _a !== void 0 ? _a : (children.length ? positions[0] + children[0].length : 0);\n    return new Tree(types[data.topID], children.reverse(), positions.reverse(), length);\n}\nconst nodeSizeCache = new WeakMap;\nfunction nodeSize(balanceType, node) {\n    if (!balanceType.isAnonymous || node instanceof TreeBuffer || node.type != balanceType)\n        return 1;\n    let size = nodeSizeCache.get(node);\n    if (size == null) {\n        size = 1;\n        for (let child of node.children) {\n            if (child.type != balanceType || !(child instanceof Tree)) {\n                size = 1;\n                break;\n            }\n            size += nodeSize(balanceType, child);\n        }\n        nodeSizeCache.set(node, size);\n    }\n    return size;\n}\nfunction balanceRange(\n// The type the balanced tree's inner nodes.\nbalanceType, \n// The direct children and their positions\nchildren, positions, \n// The index range in children/positions to use\nfrom, to, \n// The start position of the nodes, relative to their parent.\nstart, \n// Length of the outer node\nlength, \n// Function to build the top node of the balanced tree\nmkTop, \n// Function to build internal nodes for the balanced tree\nmkTree) {\n    let total = 0;\n    for (let i = from; i < to; i++)\n        total += nodeSize(balanceType, children[i]);\n    let maxChild = Math.ceil((total * 1.5) / 8 /* BranchFactor */);\n    let localChildren = [], localPositions = [];\n    function divide(children, positions, from, to, offset) {\n        for (let i = from; i < to;) {\n            let groupFrom = i, groupStart = positions[i], groupSize = nodeSize(balanceType, children[i]);\n            i++;\n            for (; i < to; i++) {\n                let nextSize = nodeSize(balanceType, children[i]);\n                if (groupSize + nextSize >= maxChild)\n                    break;\n                groupSize += nextSize;\n            }\n            if (i == groupFrom + 1) {\n                if (groupSize > maxChild) {\n                    let only = children[groupFrom]; // Only trees can have a size > 1\n                    divide(only.children, only.positions, 0, only.children.length, positions[groupFrom] + offset);\n                    continue;\n                }\n                localChildren.push(children[groupFrom]);\n            }\n            else {\n                let length = positions[i - 1] + children[i - 1].length - groupStart;\n                localChildren.push(balanceRange(balanceType, children, positions, groupFrom, i, groupStart, length, null, mkTree));\n            }\n            localPositions.push(groupStart + offset - start);\n        }\n    }\n    divide(children, positions, from, to, 0);\n    return (mkTop || mkTree)(localChildren, localPositions, length);\n}\n/// Provides a way to associate values with pieces of trees. As long\n/// as that part of the tree is reused, the associated values can be\n/// retrieved from an updated tree.\nclass NodeWeakMap {\n    constructor() {\n        this.map = new WeakMap();\n    }\n    setBuffer(buffer, index, value) {\n        let inner = this.map.get(buffer);\n        if (!inner)\n            this.map.set(buffer, inner = new Map);\n        inner.set(index, value);\n    }\n    getBuffer(buffer, index) {\n        let inner = this.map.get(buffer);\n        return inner && inner.get(index);\n    }\n    /// Set the value for this syntax node.\n    set(node, value) {\n        if (node instanceof BufferNode)\n            this.setBuffer(node.context.buffer, node.index, value);\n        else if (node instanceof TreeNode)\n            this.map.set(node.tree, value);\n    }\n    /// Retrieve value for this syntax node, if it exists in the map.\n    get(node) {\n        return node instanceof BufferNode ? this.getBuffer(node.context.buffer, node.index)\n            : node instanceof TreeNode ? this.map.get(node.tree) : undefined;\n    }\n    /// Set the value for the node that a cursor currently points to.\n    cursorSet(cursor, value) {\n        if (cursor.buffer)\n            this.setBuffer(cursor.buffer.buffer, cursor.index, value);\n        else\n            this.map.set(cursor.tree, value);\n    }\n    /// Retrieve the value for the node that a cursor currently points\n    /// to.\n    cursorGet(cursor) {\n        return cursor.buffer ? this.getBuffer(cursor.buffer.buffer, cursor.index) : this.map.get(cursor.tree);\n    }\n}\n\n/// Tree fragments are used during [incremental\n/// parsing](#common.Parser.startParse) to track parts of old trees\n/// that can be reused in a new parse. An array of fragments is used\n/// to track regions of an old tree whose nodes might be reused in new\n/// parses. Use the static\n/// [`applyChanges`](#common.TreeFragment^applyChanges) method to\n/// update fragments for document changes.\nclass TreeFragment {\n    /// Construct a tree fragment. You'll usually want to use\n    /// [`addTree`](#common.TreeFragment^addTree) and\n    /// [`applyChanges`](#common.TreeFragment^applyChanges) instead of\n    /// calling this directly.\n    constructor(\n    /// The start of the unchanged range pointed to by this fragment.\n    /// This refers to an offset in the _updated_ document (as opposed\n    /// to the original tree).\n    from, \n    /// The end of the unchanged range.\n    to, \n    /// The tree that this fragment is based on.\n    tree, \n    /// The offset between the fragment's tree and the document that\n    /// this fragment can be used against. Add this when going from\n    /// document to tree positions, subtract it to go from tree to\n    /// document positions.\n    offset, openStart = false, openEnd = false) {\n        this.from = from;\n        this.to = to;\n        this.tree = tree;\n        this.offset = offset;\n        this.open = (openStart ? 1 /* Start */ : 0) | (openEnd ? 2 /* End */ : 0);\n    }\n    /// Whether the start of the fragment represents the start of a\n    /// parse, or the end of a change. (In the second case, it may not\n    /// be safe to reuse some nodes at the start, depending on the\n    /// parsing algorithm.)\n    get openStart() { return (this.open & 1 /* Start */) > 0; }\n    /// Whether the end of the fragment represents the end of a\n    /// full-document parse, or the start of a change.\n    get openEnd() { return (this.open & 2 /* End */) > 0; }\n    /// Create a set of fragments from a freshly parsed tree, or update\n    /// an existing set of fragments by replacing the ones that overlap\n    /// with a tree with content from the new tree. When `partial` is\n    /// true, the parse is treated as incomplete, and the resulting\n    /// fragment has [`openEnd`](#common.TreeFragment.openEnd) set to\n    /// true.\n    static addTree(tree, fragments = [], partial = false) {\n        let result = [new TreeFragment(0, tree.length, tree, 0, false, partial)];\n        for (let f of fragments)\n            if (f.to > tree.length)\n                result.push(f);\n        return result;\n    }\n    /// Apply a set of edits to an array of fragments, removing or\n    /// splitting fragments as necessary to remove edited ranges, and\n    /// adjusting offsets for fragments that moved.\n    static applyChanges(fragments, changes, minGap = 128) {\n        if (!changes.length)\n            return fragments;\n        let result = [];\n        let fI = 1, nextF = fragments.length ? fragments[0] : null;\n        for (let cI = 0, pos = 0, off = 0;; cI++) {\n            let nextC = cI < changes.length ? changes[cI] : null;\n            let nextPos = nextC ? nextC.fromA : 1e9;\n            if (nextPos - pos >= minGap)\n                while (nextF && nextF.from < nextPos) {\n                    let cut = nextF;\n                    if (pos >= cut.from || nextPos <= cut.to || off) {\n                        let fFrom = Math.max(cut.from, pos) - off, fTo = Math.min(cut.to, nextPos) - off;\n                        cut = fFrom >= fTo ? null : new TreeFragment(fFrom, fTo, cut.tree, cut.offset + off, cI > 0, !!nextC);\n                    }\n                    if (cut)\n                        result.push(cut);\n                    if (nextF.to > nextPos)\n                        break;\n                    nextF = fI < fragments.length ? fragments[fI++] : null;\n                }\n            if (!nextC)\n                break;\n            pos = nextC.toA;\n            off = nextC.toA - nextC.toB;\n        }\n        return result;\n    }\n}\n/// A superclass that parsers should extend.\nclass Parser {\n    /// Start a parse, returning a [partial parse](#common.PartialParse)\n    /// object. [`fragments`](#common.TreeFragment) can be passed in to\n    /// make the parse incremental.\n    ///\n    /// By default, the entire input is parsed. You can pass `ranges`,\n    /// which should be a sorted array of non-empty, non-overlapping\n    /// ranges, to parse only those ranges. The tree returned in that\n    /// case will start at `ranges[0].from`.\n    startParse(input, fragments, ranges) {\n        if (typeof input == \"string\")\n            input = new StringInput(input);\n        ranges = !ranges ? [new Range(0, input.length)] : ranges.length ? ranges.map(r => new Range(r.from, r.to)) : [new Range(0, 0)];\n        return this.createParse(input, fragments || [], ranges);\n    }\n    /// Run a full parse, returning the resulting tree.\n    parse(input, fragments, ranges) {\n        let parse = this.startParse(input, fragments, ranges);\n        for (;;) {\n            let done = parse.advance();\n            if (done)\n                return done;\n        }\n    }\n}\nclass StringInput {\n    constructor(string) {\n        this.string = string;\n    }\n    get length() { return this.string.length; }\n    chunk(from) { return this.string.slice(from); }\n    get lineChunks() { return false; }\n    read(from, to) { return this.string.slice(from, to); }\n}\n\n/// Create a parse wrapper that, after the inner parse completes,\n/// scans its tree for mixed language regions with the `nest`\n/// function, runs the resulting [inner parses](#common.NestedParse),\n/// and then [mounts](#common.NodeProp^mounted) their results onto the\n/// tree.\nfunction parseMixed(nest) {\n    return (parse, input, fragments, ranges) => new MixedParse(parse, nest, input, fragments, ranges);\n}\nclass InnerParse {\n    constructor(parser, parse, overlay, target, ranges) {\n        this.parser = parser;\n        this.parse = parse;\n        this.overlay = overlay;\n        this.target = target;\n        this.ranges = ranges;\n    }\n}\nclass ActiveOverlay {\n    constructor(parser, predicate, mounts, index, start, target, prev) {\n        this.parser = parser;\n        this.predicate = predicate;\n        this.mounts = mounts;\n        this.index = index;\n        this.start = start;\n        this.target = target;\n        this.prev = prev;\n        this.depth = 0;\n        this.ranges = [];\n    }\n}\nconst stoppedInner = new NodeProp({ perNode: true });\nclass MixedParse {\n    constructor(base, nest, input, fragments, ranges) {\n        this.nest = nest;\n        this.input = input;\n        this.fragments = fragments;\n        this.ranges = ranges;\n        this.inner = [];\n        this.innerDone = 0;\n        this.baseTree = null;\n        this.stoppedAt = null;\n        this.baseParse = base;\n    }\n    advance() {\n        if (this.baseParse) {\n            let done = this.baseParse.advance();\n            if (!done)\n                return null;\n            this.baseParse = null;\n            this.baseTree = done;\n            this.startInner();\n            if (this.stoppedAt != null)\n                for (let inner of this.inner)\n                    inner.parse.stopAt(this.stoppedAt);\n        }\n        if (this.innerDone == this.inner.length) {\n            let result = this.baseTree;\n            if (this.stoppedAt != null)\n                result = new Tree(result.type, result.children, result.positions, result.length, result.propValues.concat([[stoppedInner, this.stoppedAt]]));\n            return result;\n        }\n        let inner = this.inner[this.innerDone], done = inner.parse.advance();\n        if (done) {\n            this.innerDone++;\n            // This is a somewhat dodgy but super helpful hack where we\n            // patch up nodes created by the inner parse (and thus\n            // presumably not aliased anywhere else) to hold the information\n            // about the inner parse.\n            let props = Object.assign(Object.create(null), inner.target.props);\n            props[NodeProp.mounted.id] = new MountedTree(done, inner.overlay, inner.parser);\n            inner.target.props = props;\n        }\n        return null;\n    }\n    get parsedPos() {\n        if (this.baseParse)\n            return 0;\n        let pos = this.input.length;\n        for (let i = this.innerDone; i < this.inner.length; i++) {\n            if (this.inner[i].ranges[0].from < pos)\n                pos = Math.min(pos, this.inner[i].parse.parsedPos);\n        }\n        return pos;\n    }\n    stopAt(pos) {\n        this.stoppedAt = pos;\n        if (this.baseParse)\n            this.baseParse.stopAt(pos);\n        else\n            for (let i = this.innerDone; i < this.inner.length; i++)\n                this.inner[i].parse.stopAt(pos);\n    }\n    startInner() {\n        let fragmentCursor = new FragmentCursor(this.fragments);\n        let overlay = null;\n        let covered = null;\n        let cursor = new TreeCursor(new TreeNode(this.baseTree, this.ranges[0].from, 0, null), IterMode.IncludeAnonymous | IterMode.IgnoreMounts);\n        scan: for (let nest, isCovered; this.stoppedAt == null || cursor.from < this.stoppedAt;) {\n            let enter = true, range;\n            if (fragmentCursor.hasNode(cursor)) {\n                if (overlay) {\n                    let match = overlay.mounts.find(m => m.frag.from <= cursor.from && m.frag.to >= cursor.to && m.mount.overlay);\n                    if (match)\n                        for (let r of match.mount.overlay) {\n                            let from = r.from + match.pos, to = r.to + match.pos;\n                            if (from >= cursor.from && to <= cursor.to && !overlay.ranges.some(r => r.from < to && r.to > from))\n                                overlay.ranges.push({ from, to });\n                        }\n                }\n                enter = false;\n            }\n            else if (covered && (isCovered = checkCover(covered.ranges, cursor.from, cursor.to))) {\n                enter = isCovered != 2 /* Full */;\n            }\n            else if (!cursor.type.isAnonymous && cursor.from < cursor.to && (nest = this.nest(cursor, this.input))) {\n                if (!cursor.tree)\n                    materialize(cursor);\n                let oldMounts = fragmentCursor.findMounts(cursor.from, nest.parser);\n                if (typeof nest.overlay == \"function\") {\n                    overlay = new ActiveOverlay(nest.parser, nest.overlay, oldMounts, this.inner.length, cursor.from, cursor.tree, overlay);\n                }\n                else {\n                    let ranges = punchRanges(this.ranges, nest.overlay || [new Range(cursor.from, cursor.to)]);\n                    if (ranges.length)\n                        this.inner.push(new InnerParse(nest.parser, nest.parser.startParse(this.input, enterFragments(oldMounts, ranges), ranges), nest.overlay ? nest.overlay.map(r => new Range(r.from - cursor.from, r.to - cursor.from)) : null, cursor.tree, ranges));\n                    if (!nest.overlay)\n                        enter = false;\n                    else if (ranges.length)\n                        covered = { ranges, depth: 0, prev: covered };\n                }\n            }\n            else if (overlay && (range = overlay.predicate(cursor))) {\n                if (range === true)\n                    range = new Range(cursor.from, cursor.to);\n                if (range.from < range.to)\n                    overlay.ranges.push(range);\n            }\n            if (enter && cursor.firstChild()) {\n                if (overlay)\n                    overlay.depth++;\n                if (covered)\n                    covered.depth++;\n            }\n            else {\n                for (;;) {\n                    if (cursor.nextSibling())\n                        break;\n                    if (!cursor.parent())\n                        break scan;\n                    if (overlay && !--overlay.depth) {\n                        let ranges = punchRanges(this.ranges, overlay.ranges);\n                        if (ranges.length)\n                            this.inner.splice(overlay.index, 0, new InnerParse(overlay.parser, overlay.parser.startParse(this.input, enterFragments(overlay.mounts, ranges), ranges), overlay.ranges.map(r => new Range(r.from - overlay.start, r.to - overlay.start)), overlay.target, ranges));\n                        overlay = overlay.prev;\n                    }\n                    if (covered && !--covered.depth)\n                        covered = covered.prev;\n                }\n            }\n        }\n    }\n}\nfunction checkCover(covered, from, to) {\n    for (let range of covered) {\n        if (range.from >= to)\n            break;\n        if (range.to > from)\n            return range.from <= from && range.to >= to ? 2 /* Full */ : 1 /* Partial */;\n    }\n    return 0 /* None */;\n}\n// Take a piece of buffer and convert it into a stand-alone\n// TreeBuffer.\nfunction sliceBuf(buf, startI, endI, nodes, positions, off) {\n    if (startI < endI) {\n        let from = buf.buffer[startI + 1], to = buf.buffer[endI - 2];\n        nodes.push(buf.slice(startI, endI, from, to));\n        positions.push(from - off);\n    }\n}\n// This function takes a node that's in a buffer, and converts it, and\n// its parent buffer nodes, into a Tree. This is again acting on the\n// assumption that the trees and buffers have been constructed by the\n// parse that was ran via the mix parser, and thus aren't shared with\n// any other code, making violations of the immutability safe.\nfunction materialize(cursor) {\n    let { node } = cursor, depth = 0;\n    // Scan up to the nearest tree\n    do {\n        cursor.parent();\n        depth++;\n    } while (!cursor.tree);\n    // Find the index of the buffer in that tree\n    let i = 0, base = cursor.tree, off = 0;\n    for (;; i++) {\n        off = base.positions[i] + cursor.from;\n        if (off <= node.from && off + base.children[i].length >= node.to)\n            break;\n    }\n    let buf = base.children[i], b = buf.buffer;\n    // Split a level in the buffer, putting the nodes before and after\n    // the child that contains `node` into new buffers.\n    function split(startI, endI, type, innerOffset, length) {\n        let i = startI;\n        while (b[i + 2] + off <= node.from)\n            i = b[i + 3];\n        let children = [], positions = [];\n        sliceBuf(buf, startI, i, children, positions, innerOffset);\n        let from = b[i + 1], to = b[i + 2];\n        let isTarget = from + off == node.from && to + off == node.to && b[i] == node.type.id;\n        children.push(isTarget ? node.toTree() : split(i + 4, b[i + 3], buf.set.types[b[i]], from, to - from));\n        positions.push(from - innerOffset);\n        sliceBuf(buf, b[i + 3], endI, children, positions, innerOffset);\n        return new Tree(type, children, positions, length);\n    }\n    base.children[i] = split(0, b.length, NodeType.none, 0, buf.length);\n    // Move the cursor back to the target node\n    for (let d = 0; d <= depth; d++)\n        cursor.childAfter(node.from);\n}\nclass StructureCursor {\n    constructor(root, offset) {\n        this.offset = offset;\n        this.done = false;\n        this.cursor = root.cursor(IterMode.IncludeAnonymous | IterMode.IgnoreMounts);\n    }\n    // Move to the first node (in pre-order) that starts at or after `pos`.\n    moveTo(pos) {\n        let { cursor } = this, p = pos - this.offset;\n        while (!this.done && cursor.from < p) {\n            if (cursor.to >= pos && cursor.enter(p, 1, IterMode.IgnoreOverlays | IterMode.ExcludeBuffers)) ;\n            else if (!cursor.next(false))\n                this.done = true;\n        }\n    }\n    hasNode(cursor) {\n        this.moveTo(cursor.from);\n        if (!this.done && this.cursor.from + this.offset == cursor.from && this.cursor.tree) {\n            for (let tree = this.cursor.tree;;) {\n                if (tree == cursor.tree)\n                    return true;\n                if (tree.children.length && tree.positions[0] == 0 && tree.children[0] instanceof Tree)\n                    tree = tree.children[0];\n                else\n                    break;\n            }\n        }\n        return false;\n    }\n}\nclass FragmentCursor {\n    constructor(fragments) {\n        var _a;\n        this.fragments = fragments;\n        this.curTo = 0;\n        this.fragI = 0;\n        if (fragments.length) {\n            let first = this.curFrag = fragments[0];\n            this.curTo = (_a = first.tree.prop(stoppedInner)) !== null && _a !== void 0 ? _a : first.to;\n            this.inner = new StructureCursor(first.tree, -first.offset);\n        }\n        else {\n            this.curFrag = this.inner = null;\n        }\n    }\n    hasNode(node) {\n        while (this.curFrag && node.from >= this.curTo)\n            this.nextFrag();\n        return this.curFrag && this.curFrag.from <= node.from && this.curTo >= node.to && this.inner.hasNode(node);\n    }\n    nextFrag() {\n        var _a;\n        this.fragI++;\n        if (this.fragI == this.fragments.length) {\n            this.curFrag = this.inner = null;\n        }\n        else {\n            let frag = this.curFrag = this.fragments[this.fragI];\n            this.curTo = (_a = frag.tree.prop(stoppedInner)) !== null && _a !== void 0 ? _a : frag.to;\n            this.inner = new StructureCursor(frag.tree, -frag.offset);\n        }\n    }\n    findMounts(pos, parser) {\n        var _a;\n        let result = [];\n        if (this.inner) {\n            this.inner.cursor.moveTo(pos, 1);\n            for (let pos = this.inner.cursor.node; pos; pos = pos.parent) {\n                let mount = (_a = pos.tree) === null || _a === void 0 ? void 0 : _a.prop(NodeProp.mounted);\n                if (mount && mount.parser == parser) {\n                    for (let i = this.fragI; i < this.fragments.length; i++) {\n                        let frag = this.fragments[i];\n                        if (frag.from >= pos.to)\n                            break;\n                        if (frag.tree == this.curFrag.tree)\n                            result.push({\n                                frag,\n                                pos: pos.from - frag.offset,\n                                mount\n                            });\n                    }\n                }\n            }\n        }\n        return result;\n    }\n}\nfunction punchRanges(outer, ranges) {\n    let copy = null, current = ranges;\n    for (let i = 1, j = 0; i < outer.length; i++) {\n        let gapFrom = outer[i - 1].to, gapTo = outer[i].from;\n        for (; j < current.length; j++) {\n            let r = current[j];\n            if (r.from >= gapTo)\n                break;\n            if (r.to <= gapFrom)\n                continue;\n            if (!copy)\n                current = copy = ranges.slice();\n            if (r.from < gapFrom) {\n                copy[j] = new Range(r.from, gapFrom);\n                if (r.to > gapTo)\n                    copy.splice(j + 1, 0, new Range(gapTo, r.to));\n            }\n            else if (r.to > gapTo) {\n                copy[j--] = new Range(gapTo, r.to);\n            }\n            else {\n                copy.splice(j--, 1);\n            }\n        }\n    }\n    return current;\n}\nfunction findCoverChanges(a, b, from, to) {\n    let iA = 0, iB = 0, inA = false, inB = false, pos = -1e9;\n    let result = [];\n    for (;;) {\n        let nextA = iA == a.length ? 1e9 : inA ? a[iA].to : a[iA].from;\n        let nextB = iB == b.length ? 1e9 : inB ? b[iB].to : b[iB].from;\n        if (inA != inB) {\n            let start = Math.max(pos, from), end = Math.min(nextA, nextB, to);\n            if (start < end)\n                result.push(new Range(start, end));\n        }\n        pos = Math.min(nextA, nextB);\n        if (pos == 1e9)\n            break;\n        if (nextA == pos) {\n            if (!inA)\n                inA = true;\n            else {\n                inA = false;\n                iA++;\n            }\n        }\n        if (nextB == pos) {\n            if (!inB)\n                inB = true;\n            else {\n                inB = false;\n                iB++;\n            }\n        }\n    }\n    return result;\n}\n// Given a number of fragments for the outer tree, and a set of ranges\n// to parse, find fragments for inner trees mounted around those\n// ranges, if any.\nfunction enterFragments(mounts, ranges) {\n    let result = [];\n    for (let { pos, mount, frag } of mounts) {\n        let startPos = pos + (mount.overlay ? mount.overlay[0].from : 0), endPos = startPos + mount.tree.length;\n        let from = Math.max(frag.from, startPos), to = Math.min(frag.to, endPos);\n        if (mount.overlay) {\n            let overlay = mount.overlay.map(r => new Range(r.from + pos, r.to + pos));\n            let changes = findCoverChanges(ranges, overlay, from, to);\n            for (let i = 0, pos = from;; i++) {\n                let last = i == changes.length, end = last ? to : changes[i].from;\n                if (end > pos)\n                    result.push(new TreeFragment(pos, end, mount.tree, -startPos, frag.from >= pos || frag.openStart, frag.to <= end || frag.openEnd));\n                if (last)\n                    break;\n                pos = changes[i].to;\n            }\n        }\n        else {\n            result.push(new TreeFragment(from, to, mount.tree, -startPos, frag.from >= startPos || frag.openStart, frag.to <= endPos || frag.openEnd));\n        }\n    }\n    return result;\n}\n\nexport { DefaultBufferLength, IterMode, MountedTree, NodeProp, NodeSet, NodeType, NodeWeakMap, Parser, Tree, TreeBuffer, TreeCursor, TreeFragment, parseMixed };\n","import { NodeProp } from '@lezer/common';\n\nlet nextTagID = 0;\n/// Highlighting tags are markers that denote a highlighting category.\n/// They are [associated](#highlight.styleTags) with parts of a syntax\n/// tree by a language mode, and then mapped to an actual CSS style by\n/// a [highlighter](#highlight.Highlighter).\n///\n/// Because syntax tree node types and highlight styles have to be\n/// able to talk the same language, CodeMirror uses a mostly _closed_\n/// [vocabulary](#highlight.tags) of syntax tags (as opposed to\n/// traditional open string-based systems, which make it hard for\n/// highlighting themes to cover all the tokens produced by the\n/// various languages).\n///\n/// It _is_ possible to [define](#highlight.Tag^define) your own\n/// highlighting tags for system-internal use (where you control both\n/// the language package and the highlighter), but such tags will not\n/// be picked up by regular highlighters (though you can derive them\n/// from standard tags to allow highlighters to fall back to those).\nclass Tag {\n    /// @internal\n    constructor(\n    /// The set of this tag and all its parent tags, starting with\n    /// this one itself and sorted in order of decreasing specificity.\n    set, \n    /// The base unmodified tag that this one is based on, if it's\n    /// modified @internal\n    base, \n    /// The modifiers applied to this.base @internal\n    modified) {\n        this.set = set;\n        this.base = base;\n        this.modified = modified;\n        /// @internal\n        this.id = nextTagID++;\n    }\n    /// Define a new tag. If `parent` is given, the tag is treated as a\n    /// sub-tag of that parent, and\n    /// [highlighters](#highlight.tagHighlighter) that don't mention\n    /// this tag will try to fall back to the parent tag (or grandparent\n    /// tag, etc).\n    static define(parent) {\n        if (parent === null || parent === void 0 ? void 0 : parent.base)\n            throw new Error(\"Can not derive from a modified tag\");\n        let tag = new Tag([], null, []);\n        tag.set.push(tag);\n        if (parent)\n            for (let t of parent.set)\n                tag.set.push(t);\n        return tag;\n    }\n    /// Define a tag _modifier_, which is a function that, given a tag,\n    /// will return a tag that is a subtag of the original. Applying the\n    /// same modifier to a twice tag will return the same value (`m1(t1)\n    /// == m1(t1)`) and applying multiple modifiers will, regardless or\n    /// order, produce the same tag (`m1(m2(t1)) == m2(m1(t1))`).\n    ///\n    /// When multiple modifiers are applied to a given base tag, each\n    /// smaller set of modifiers is registered as a parent, so that for\n    /// example `m1(m2(m3(t1)))` is a subtype of `m1(m2(t1))`,\n    /// `m1(m3(t1)`, and so on.\n    static defineModifier() {\n        let mod = new Modifier;\n        return (tag) => {\n            if (tag.modified.indexOf(mod) > -1)\n                return tag;\n            return Modifier.get(tag.base || tag, tag.modified.concat(mod).sort((a, b) => a.id - b.id));\n        };\n    }\n}\nlet nextModifierID = 0;\nclass Modifier {\n    constructor() {\n        this.instances = [];\n        this.id = nextModifierID++;\n    }\n    static get(base, mods) {\n        if (!mods.length)\n            return base;\n        let exists = mods[0].instances.find(t => t.base == base && sameArray(mods, t.modified));\n        if (exists)\n            return exists;\n        let set = [], tag = new Tag(set, base, mods);\n        for (let m of mods)\n            m.instances.push(tag);\n        let configs = permute(mods);\n        for (let parent of base.set)\n            for (let config of configs)\n                set.push(Modifier.get(parent, config));\n        return tag;\n    }\n}\nfunction sameArray(a, b) {\n    return a.length == b.length && a.every((x, i) => x == b[i]);\n}\nfunction permute(array) {\n    let result = [array];\n    for (let i = 0; i < array.length; i++) {\n        for (let a of permute(array.slice(0, i).concat(array.slice(i + 1))))\n            result.push(a);\n    }\n    return result;\n}\n/// This function is used to add a set of tags to a language syntax\n/// via [`NodeSet.extend`](#common.NodeSet.extend) or\n/// [`LRParser.configure`](#lr.LRParser.configure).\n///\n/// The argument object maps node selectors to [highlighting\n/// tags](#highlight.Tag) or arrays of tags.\n///\n/// Node selectors may hold one or more (space-separated) node paths.\n/// Such a path can be a [node name](#common.NodeType.name), or\n/// multiple node names (or `*` wildcards) separated by slash\n/// characters, as in `\"Block/Declaration/VariableName\"`. Such a path\n/// matches the final node but only if its direct parent nodes are the\n/// other nodes mentioned. A `*` in such a path matches any parent,\n/// but only a single level—wildcards that match multiple parents\n/// aren't supported, both for efficiency reasons and because Lezer\n/// trees make it rather hard to reason about what they would match.)\n///\n/// A path can be ended with `/...` to indicate that the tag assigned\n/// to the node should also apply to all child nodes, even if they\n/// match their own style (by default, only the innermost style is\n/// used).\n///\n/// When a path ends in `!`, as in `Attribute!`, no further matching\n/// happens for the node's child nodes, and the entire node gets the\n/// given style.\n///\n/// In this notation, node names that contain `/`, `!`, `*`, or `...`\n/// must be quoted as JSON strings.\n///\n/// For example:\n///\n/// ```javascript\n/// parser.withProps(\n///   styleTags({\n///     // Style Number and BigNumber nodes\n///     \"Number BigNumber\": tags.number,\n///     // Style Escape nodes whose parent is String\n///     \"String/Escape\": tags.escape,\n///     // Style anything inside Attributes nodes\n///     \"Attributes!\": tags.meta,\n///     // Add a style to all content inside Italic nodes\n///     \"Italic/...\": tags.emphasis,\n///     // Style InvalidString nodes as both `string` and `invalid`\n///     \"InvalidString\": [tags.string, tags.invalid],\n///     // Style the node named \"/\" as punctuation\n///     '\"/\"': tags.punctuation\n///   })\n/// )\n/// ```\nfunction styleTags(spec) {\n    let byName = Object.create(null);\n    for (let prop in spec) {\n        let tags = spec[prop];\n        if (!Array.isArray(tags))\n            tags = [tags];\n        for (let part of prop.split(\" \"))\n            if (part) {\n                let pieces = [], mode = 2 /* Normal */, rest = part;\n                for (let pos = 0;;) {\n                    if (rest == \"...\" && pos > 0 && pos + 3 == part.length) {\n                        mode = 1 /* Inherit */;\n                        break;\n                    }\n                    let m = /^\"(?:[^\"\\\\]|\\\\.)*?\"|[^\\/!]+/.exec(rest);\n                    if (!m)\n                        throw new RangeError(\"Invalid path: \" + part);\n                    pieces.push(m[0] == \"*\" ? \"\" : m[0][0] == '\"' ? JSON.parse(m[0]) : m[0]);\n                    pos += m[0].length;\n                    if (pos == part.length)\n                        break;\n                    let next = part[pos++];\n                    if (pos == part.length && next == \"!\") {\n                        mode = 0 /* Opaque */;\n                        break;\n                    }\n                    if (next != \"/\")\n                        throw new RangeError(\"Invalid path: \" + part);\n                    rest = part.slice(pos);\n                }\n                let last = pieces.length - 1, inner = pieces[last];\n                if (!inner)\n                    throw new RangeError(\"Invalid path: \" + part);\n                let rule = new Rule(tags, mode, last > 0 ? pieces.slice(0, last) : null);\n                byName[inner] = rule.sort(byName[inner]);\n            }\n    }\n    return ruleNodeProp.add(byName);\n}\nconst ruleNodeProp = new NodeProp();\nclass Rule {\n    constructor(tags, mode, context, next) {\n        this.tags = tags;\n        this.mode = mode;\n        this.context = context;\n        this.next = next;\n    }\n    get opaque() { return this.mode == 0 /* Opaque */; }\n    get inherit() { return this.mode == 1 /* Inherit */; }\n    sort(other) {\n        if (!other || other.depth < this.depth) {\n            this.next = other;\n            return this;\n        }\n        other.next = this.sort(other.next);\n        return other;\n    }\n    get depth() { return this.context ? this.context.length : 0; }\n}\nRule.empty = new Rule([], 2 /* Normal */, null);\n/// Define a [highlighter](#highlight.Highlighter) from an array of\n/// tag/class pairs. Classes associated with more specific tags will\n/// take precedence.\nfunction tagHighlighter(tags, options) {\n    let map = Object.create(null);\n    for (let style of tags) {\n        if (!Array.isArray(style.tag))\n            map[style.tag.id] = style.class;\n        else\n            for (let tag of style.tag)\n                map[tag.id] = style.class;\n    }\n    let { scope, all = null } = options || {};\n    return {\n        style: (tags) => {\n            let cls = all;\n            for (let tag of tags) {\n                for (let sub of tag.set) {\n                    let tagClass = map[sub.id];\n                    if (tagClass) {\n                        cls = cls ? cls + \" \" + tagClass : tagClass;\n                        break;\n                    }\n                }\n            }\n            return cls;\n        },\n        scope\n    };\n}\nfunction highlightTags(highlighters, tags) {\n    let result = null;\n    for (let highlighter of highlighters) {\n        let value = highlighter.style(tags);\n        if (value)\n            result = result ? result + \" \" + value : value;\n    }\n    return result;\n}\n/// Highlight the given [tree](#common.Tree) with the given\n/// [highlighter](#highlight.Highlighter).\nfunction highlightTree(tree, highlighter, \n/// Assign styling to a region of the text. Will be called, in order\n/// of position, for any ranges where more than zero classes apply.\n/// `classes` is a space separated string of CSS classes.\nputStyle, \n/// The start of the range to highlight.\nfrom = 0, \n/// The end of the range.\nto = tree.length) {\n    let builder = new HighlightBuilder(from, Array.isArray(highlighter) ? highlighter : [highlighter], putStyle);\n    builder.highlightRange(tree.cursor(), from, to, \"\", builder.highlighters);\n    builder.flush(to);\n}\nclass HighlightBuilder {\n    constructor(at, highlighters, span) {\n        this.at = at;\n        this.highlighters = highlighters;\n        this.span = span;\n        this.class = \"\";\n    }\n    startSpan(at, cls) {\n        if (cls != this.class) {\n            this.flush(at);\n            if (at > this.at)\n                this.at = at;\n            this.class = cls;\n        }\n    }\n    flush(to) {\n        if (to > this.at && this.class)\n            this.span(this.at, to, this.class);\n    }\n    highlightRange(cursor, from, to, inheritedClass, highlighters) {\n        let { type, from: start, to: end } = cursor;\n        if (start >= to || end <= from)\n            return;\n        if (type.isTop)\n            highlighters = this.highlighters.filter(h => !h.scope || h.scope(type));\n        let cls = inheritedClass;\n        let rule = getStyleTags(cursor) || Rule.empty;\n        let tagCls = highlightTags(highlighters, rule.tags);\n        if (tagCls) {\n            if (cls)\n                cls += \" \";\n            cls += tagCls;\n            if (rule.mode == 1 /* Inherit */)\n                inheritedClass += (inheritedClass ? \" \" : \"\") + tagCls;\n        }\n        this.startSpan(cursor.from, cls);\n        if (rule.opaque)\n            return;\n        let mounted = cursor.tree && cursor.tree.prop(NodeProp.mounted);\n        if (mounted && mounted.overlay) {\n            let inner = cursor.node.enter(mounted.overlay[0].from + start, 1);\n            let innerHighlighters = this.highlighters.filter(h => !h.scope || h.scope(mounted.tree.type));\n            let hasChild = cursor.firstChild();\n            for (let i = 0, pos = start;; i++) {\n                let next = i < mounted.overlay.length ? mounted.overlay[i] : null;\n                let nextPos = next ? next.from + start : end;\n                let rangeFrom = Math.max(from, pos), rangeTo = Math.min(to, nextPos);\n                if (rangeFrom < rangeTo && hasChild) {\n                    while (cursor.from < rangeTo) {\n                        this.highlightRange(cursor, rangeFrom, rangeTo, inheritedClass, highlighters);\n                        this.startSpan(Math.min(to, cursor.to), cls);\n                        if (cursor.to >= nextPos || !cursor.nextSibling())\n                            break;\n                    }\n                }\n                if (!next || nextPos > to)\n                    break;\n                pos = next.to + start;\n                if (pos > from) {\n                    this.highlightRange(inner.cursor(), Math.max(from, next.from + start), Math.min(to, pos), inheritedClass, innerHighlighters);\n                    this.startSpan(pos, cls);\n                }\n            }\n            if (hasChild)\n                cursor.parent();\n        }\n        else if (cursor.firstChild()) {\n            do {\n                if (cursor.to <= from)\n                    continue;\n                if (cursor.from >= to)\n                    break;\n                this.highlightRange(cursor, from, to, inheritedClass, highlighters);\n                this.startSpan(Math.min(to, cursor.to), cls);\n            } while (cursor.nextSibling());\n            cursor.parent();\n        }\n    }\n}\n/// Match a syntax node's [highlight rules](#highlight.styleTags). If\n/// there's a match, return its set of tags, and whether it is\n/// opaque (uses a `!`) or applies to all child nodes (`/...`).\nfunction getStyleTags(node) {\n    let rule = node.type.prop(ruleNodeProp);\n    while (rule && rule.context && !node.matchContext(rule.context))\n        rule = rule.next;\n    return rule || null;\n}\nconst t = Tag.define;\nconst comment = t(), name = t(), typeName = t(name), propertyName = t(name), literal = t(), string = t(literal), number = t(literal), content = t(), heading = t(content), keyword = t(), operator = t(), punctuation = t(), bracket = t(punctuation), meta = t();\n/// The default set of highlighting [tags](#highlight.Tag).\n///\n/// This collection is heavily biased towards programming languages,\n/// and necessarily incomplete. A full ontology of syntactic\n/// constructs would fill a stack of books, and be impractical to\n/// write themes for. So try to make do with this set. If all else\n/// fails, [open an\n/// issue](https://github.com/codemirror/codemirror.next) to propose a\n/// new tag, or [define](#highlight.Tag^define) a local custom tag for\n/// your use case.\n///\n/// Note that it is not obligatory to always attach the most specific\n/// tag possible to an element—if your grammar can't easily\n/// distinguish a certain type of element (such as a local variable),\n/// it is okay to style it as its more general variant (a variable).\n/// \n/// For tags that extend some parent tag, the documentation links to\n/// the parent.\nconst tags = {\n    /// A comment.\n    comment,\n    /// A line [comment](#highlight.tags.comment).\n    lineComment: t(comment),\n    /// A block [comment](#highlight.tags.comment).\n    blockComment: t(comment),\n    /// A documentation [comment](#highlight.tags.comment).\n    docComment: t(comment),\n    /// Any kind of identifier.\n    name,\n    /// The [name](#highlight.tags.name) of a variable.\n    variableName: t(name),\n    /// A type [name](#highlight.tags.name).\n    typeName: typeName,\n    /// A tag name (subtag of [`typeName`](#highlight.tags.typeName)).\n    tagName: t(typeName),\n    /// A property or field [name](#highlight.tags.name).\n    propertyName: propertyName,\n    /// An attribute name (subtag of [`propertyName`](#highlight.tags.propertyName)).\n    attributeName: t(propertyName),\n    /// The [name](#highlight.tags.name) of a class.\n    className: t(name),\n    /// A label [name](#highlight.tags.name).\n    labelName: t(name),\n    /// A namespace [name](#highlight.tags.name).\n    namespace: t(name),\n    /// The [name](#highlight.tags.name) of a macro.\n    macroName: t(name),\n    /// A literal value.\n    literal,\n    /// A string [literal](#highlight.tags.literal).\n    string,\n    /// A documentation [string](#highlight.tags.string).\n    docString: t(string),\n    /// A character literal (subtag of [string](#highlight.tags.string)).\n    character: t(string),\n    /// An attribute value (subtag of [string](#highlight.tags.string)).\n    attributeValue: t(string),\n    /// A number [literal](#highlight.tags.literal).\n    number,\n    /// An integer [number](#highlight.tags.number) literal.\n    integer: t(number),\n    /// A floating-point [number](#highlight.tags.number) literal.\n    float: t(number),\n    /// A boolean [literal](#highlight.tags.literal).\n    bool: t(literal),\n    /// Regular expression [literal](#highlight.tags.literal).\n    regexp: t(literal),\n    /// An escape [literal](#highlight.tags.literal), for example a\n    /// backslash escape in a string.\n    escape: t(literal),\n    /// A color [literal](#highlight.tags.literal).\n    color: t(literal),\n    /// A URL [literal](#highlight.tags.literal).\n    url: t(literal),\n    /// A language keyword.\n    keyword,\n    /// The [keyword](#highlight.tags.keyword) for the self or this\n    /// object.\n    self: t(keyword),\n    /// The [keyword](#highlight.tags.keyword) for null.\n    null: t(keyword),\n    /// A [keyword](#highlight.tags.keyword) denoting some atomic value.\n    atom: t(keyword),\n    /// A [keyword](#highlight.tags.keyword) that represents a unit.\n    unit: t(keyword),\n    /// A modifier [keyword](#highlight.tags.keyword).\n    modifier: t(keyword),\n    /// A [keyword](#highlight.tags.keyword) that acts as an operator.\n    operatorKeyword: t(keyword),\n    /// A control-flow related [keyword](#highlight.tags.keyword).\n    controlKeyword: t(keyword),\n    /// A [keyword](#highlight.tags.keyword) that defines something.\n    definitionKeyword: t(keyword),\n    /// A [keyword](#highlight.tags.keyword) related to defining or\n    /// interfacing with modules.\n    moduleKeyword: t(keyword),\n    /// An operator.\n    operator,\n    /// An [operator](#highlight.tags.operator) that dereferences something.\n    derefOperator: t(operator),\n    /// Arithmetic-related [operator](#highlight.tags.operator).\n    arithmeticOperator: t(operator),\n    /// Logical [operator](#highlight.tags.operator).\n    logicOperator: t(operator),\n    /// Bit [operator](#highlight.tags.operator).\n    bitwiseOperator: t(operator),\n    /// Comparison [operator](#highlight.tags.operator).\n    compareOperator: t(operator),\n    /// [Operator](#highlight.tags.operator) that updates its operand.\n    updateOperator: t(operator),\n    /// [Operator](#highlight.tags.operator) that defines something.\n    definitionOperator: t(operator),\n    /// Type-related [operator](#highlight.tags.operator).\n    typeOperator: t(operator),\n    /// Control-flow [operator](#highlight.tags.operator).\n    controlOperator: t(operator),\n    /// Program or markup punctuation.\n    punctuation,\n    /// [Punctuation](#highlight.tags.punctuation) that separates\n    /// things.\n    separator: t(punctuation),\n    /// Bracket-style [punctuation](#highlight.tags.punctuation).\n    bracket,\n    /// Angle [brackets](#highlight.tags.bracket) (usually `<` and `>`\n    /// tokens).\n    angleBracket: t(bracket),\n    /// Square [brackets](#highlight.tags.bracket) (usually `[` and `]`\n    /// tokens).\n    squareBracket: t(bracket),\n    /// Parentheses (usually `(` and `)` tokens). Subtag of\n    /// [bracket](#highlight.tags.bracket).\n    paren: t(bracket),\n    /// Braces (usually `{` and `}` tokens). Subtag of\n    /// [bracket](#highlight.tags.bracket).\n    brace: t(bracket),\n    /// Content, for example plain text in XML or markup documents.\n    content,\n    /// [Content](#highlight.tags.content) that represents a heading.\n    heading,\n    /// A level 1 [heading](#highlight.tags.heading).\n    heading1: t(heading),\n    /// A level 2 [heading](#highlight.tags.heading).\n    heading2: t(heading),\n    /// A level 3 [heading](#highlight.tags.heading).\n    heading3: t(heading),\n    /// A level 4 [heading](#highlight.tags.heading).\n    heading4: t(heading),\n    /// A level 5 [heading](#highlight.tags.heading).\n    heading5: t(heading),\n    /// A level 6 [heading](#highlight.tags.heading).\n    heading6: t(heading),\n    /// A prose separator (such as a horizontal rule).\n    contentSeparator: t(content),\n    /// [Content](#highlight.tags.content) that represents a list.\n    list: t(content),\n    /// [Content](#highlight.tags.content) that represents a quote.\n    quote: t(content),\n    /// [Content](#highlight.tags.content) that is emphasized.\n    emphasis: t(content),\n    /// [Content](#highlight.tags.content) that is styled strong.\n    strong: t(content),\n    /// [Content](#highlight.tags.content) that is part of a link.\n    link: t(content),\n    /// [Content](#highlight.tags.content) that is styled as code or\n    /// monospace.\n    monospace: t(content),\n    /// [Content](#highlight.tags.content) that has a strike-through\n    /// style.\n    strikethrough: t(content),\n    /// Inserted text in a change-tracking format.\n    inserted: t(),\n    /// Deleted text.\n    deleted: t(),\n    /// Changed text.\n    changed: t(),\n    /// An invalid or unsyntactic element.\n    invalid: t(),\n    /// Metadata or meta-instruction.\n    meta,\n    /// [Metadata](#highlight.tags.meta) that applies to the entire\n    /// document.\n    documentMeta: t(meta),\n    /// [Metadata](#highlight.tags.meta) that annotates or adds\n    /// attributes to a given syntactic element.\n    annotation: t(meta),\n    /// Processing instruction or preprocessor directive. Subtag of\n    /// [meta](#highlight.tags.meta).\n    processingInstruction: t(meta),\n    /// [Modifier](#highlight.Tag^defineModifier) that indicates that a\n    /// given element is being defined. Expected to be used with the\n    /// various [name](#highlight.tags.name) tags.\n    definition: Tag.defineModifier(),\n    /// [Modifier](#highlight.Tag^defineModifier) that indicates that\n    /// something is constant. Mostly expected to be used with\n    /// [variable names](#highlight.tags.variableName).\n    constant: Tag.defineModifier(),\n    /// [Modifier](#highlight.Tag^defineModifier) used to indicate that\n    /// a [variable](#highlight.tags.variableName) or [property\n    /// name](#highlight.tags.propertyName) is being called or defined\n    /// as a function.\n    function: Tag.defineModifier(),\n    /// [Modifier](#highlight.Tag^defineModifier) that can be applied to\n    /// [names](#highlight.tags.name) to indicate that they belong to\n    /// the language's standard environment.\n    standard: Tag.defineModifier(),\n    /// [Modifier](#highlight.Tag^defineModifier) that indicates a given\n    /// [names](#highlight.tags.name) is local to some scope.\n    local: Tag.defineModifier(),\n    /// A generic variant [modifier](#highlight.Tag^defineModifier) that\n    /// can be used to tag language-specific alternative variants of\n    /// some common tag. It is recommended for themes to define special\n    /// forms of at least the [string](#highlight.tags.string) and\n    /// [variable name](#highlight.tags.variableName) tags, since those\n    /// come up a lot.\n    special: Tag.defineModifier()\n};\n/// This is a highlighter that adds stable, predictable classes to\n/// tokens, for styling with external CSS.\n///\n/// The following tags are mapped to their name prefixed with `\"tok-\"`\n/// (for example `\"tok-comment\"`):\n///\n/// * [`link`](#highlight.tags.link)\n/// * [`heading`](#highlight.tags.heading)\n/// * [`emphasis`](#highlight.tags.emphasis)\n/// * [`strong`](#highlight.tags.strong)\n/// * [`keyword`](#highlight.tags.keyword)\n/// * [`atom`](#highlight.tags.atom)\n/// * [`bool`](#highlight.tags.bool)\n/// * [`url`](#highlight.tags.url)\n/// * [`labelName`](#highlight.tags.labelName)\n/// * [`inserted`](#highlight.tags.inserted)\n/// * [`deleted`](#highlight.tags.deleted)\n/// * [`literal`](#highlight.tags.literal)\n/// * [`string`](#highlight.tags.string)\n/// * [`number`](#highlight.tags.number)\n/// * [`variableName`](#highlight.tags.variableName)\n/// * [`typeName`](#highlight.tags.typeName)\n/// * [`namespace`](#highlight.tags.namespace)\n/// * [`className`](#highlight.tags.className)\n/// * [`macroName`](#highlight.tags.macroName)\n/// * [`propertyName`](#highlight.tags.propertyName)\n/// * [`operator`](#highlight.tags.operator)\n/// * [`comment`](#highlight.tags.comment)\n/// * [`meta`](#highlight.tags.meta)\n/// * [`punctuation`](#highlight.tags.punctuation)\n/// * [`invalid`](#highlight.tags.invalid)\n///\n/// In addition, these mappings are provided:\n///\n/// * [`regexp`](#highlight.tags.regexp),\n///   [`escape`](#highlight.tags.escape), and\n///   [`special`](#highlight.tags.special)[`(string)`](#highlight.tags.string)\n///   are mapped to `\"tok-string2\"`\n/// * [`special`](#highlight.tags.special)[`(variableName)`](#highlight.tags.variableName)\n///   to `\"tok-variableName2\"`\n/// * [`local`](#highlight.tags.local)[`(variableName)`](#highlight.tags.variableName)\n///   to `\"tok-variableName tok-local\"`\n/// * [`definition`](#highlight.tags.definition)[`(variableName)`](#highlight.tags.variableName)\n///   to `\"tok-variableName tok-definition\"`\n/// * [`definition`](#highlight.tags.definition)[`(propertyName)`](#highlight.tags.propertyName)\n///   to `\"tok-propertyName tok-definition\"`\nconst classHighlighter = tagHighlighter([\n    { tag: tags.link, class: \"tok-link\" },\n    { tag: tags.heading, class: \"tok-heading\" },\n    { tag: tags.emphasis, class: \"tok-emphasis\" },\n    { tag: tags.strong, class: \"tok-strong\" },\n    { tag: tags.keyword, class: \"tok-keyword\" },\n    { tag: tags.atom, class: \"tok-atom\" },\n    { tag: tags.bool, class: \"tok-bool\" },\n    { tag: tags.url, class: \"tok-url\" },\n    { tag: tags.labelName, class: \"tok-labelName\" },\n    { tag: tags.inserted, class: \"tok-inserted\" },\n    { tag: tags.deleted, class: \"tok-deleted\" },\n    { tag: tags.literal, class: \"tok-literal\" },\n    { tag: tags.string, class: \"tok-string\" },\n    { tag: tags.number, class: \"tok-number\" },\n    { tag: [tags.regexp, tags.escape, tags.special(tags.string)], class: \"tok-string2\" },\n    { tag: tags.variableName, class: \"tok-variableName\" },\n    { tag: tags.local(tags.variableName), class: \"tok-variableName tok-local\" },\n    { tag: tags.definition(tags.variableName), class: \"tok-variableName tok-definition\" },\n    { tag: tags.special(tags.variableName), class: \"tok-variableName2\" },\n    { tag: tags.definition(tags.propertyName), class: \"tok-propertyName tok-definition\" },\n    { tag: tags.typeName, class: \"tok-typeName\" },\n    { tag: tags.namespace, class: \"tok-namespace\" },\n    { tag: tags.className, class: \"tok-className\" },\n    { tag: tags.macroName, class: \"tok-macroName\" },\n    { tag: tags.propertyName, class: \"tok-propertyName\" },\n    { tag: tags.operator, class: \"tok-operator\" },\n    { tag: tags.comment, class: \"tok-comment\" },\n    { tag: tags.meta, class: \"tok-meta\" },\n    { tag: tags.invalid, class: \"tok-invalid\" },\n    { tag: tags.punctuation, class: \"tok-punctuation\" }\n]);\n\nexport { Tag, classHighlighter, getStyleTags, highlightTree, styleTags, tagHighlighter, tags };\n","import { LRParser } from '@lezer/lr';\nimport { styleTags, tags } from '@lezer/highlight';\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst inf$1 = 147,\n  nan$1 = 148,\n  Bool$1 = 1,\n  Ignoring$1 = 2,\n  On$1 = 3,\n  GroupLeft$1 = 4,\n  GroupRight$1 = 5,\n  Offset$1 = 6,\n  Atan2$1 = 7,\n  Avg$1 = 8,\n  Bottomk$1 = 9,\n  Count$1 = 10,\n  CountValues$1 = 11,\n  Group$1 = 12,\n  Max$1 = 13,\n  Min$1 = 14,\n  Quantile$1 = 15,\n  Stddev$1 = 16,\n  Stdvar$1 = 17,\n  Sum$1 = 18,\n  Topk$1 = 19,\n  By$1 = 20,\n  Without$1 = 21,\n  And$1 = 22,\n  Or$1 = 23,\n  Unless$1 = 24,\n  Start$1 = 25,\n  End$1 = 26;\n\n// Copyright 2021 The Prometheus Authors\n\nconst keywordTokens = {\n    inf: inf$1,\n    nan: nan$1,\n    bool: Bool$1,\n    ignoring: Ignoring$1,\n    on: On$1,\n    group_left: GroupLeft$1,\n    group_right: GroupRight$1,\n    offset: Offset$1,\n};\n\nconst specializeIdentifier = (value, stack) => {\n    return keywordTokens[value.toLowerCase()] || -1;\n};\n\nconst contextualKeywordTokens = {\n    avg: Avg$1,\n    atan2: Atan2$1,\n    bottomk: Bottomk$1,\n    count: Count$1,\n    count_values: CountValues$1,\n    group: Group$1,\n    max: Max$1,\n    min: Min$1,\n    quantile: Quantile$1,\n    stddev: Stddev$1,\n    stdvar: Stdvar$1,\n    sum: Sum$1,\n    topk: Topk$1,\n    by: By$1,\n    without: Without$1,\n    and: And$1,\n    or: Or$1,\n    unless: Unless$1,\n    start: Start$1,\n    end: End$1,\n};\n\nconst extendIdentifier = (value, stack) => {\n    return contextualKeywordTokens[value.toLowerCase()] || -1;\n};\n\n// Copyright 2022 The Prometheus Authors\n\nconst promQLHighLight = styleTags({\n    LineComment: tags.comment,\n    LabelName: tags.labelName,\n    StringLiteral: tags.string,\n    NumberLiteral: tags.number,\n    Duration: tags.number,\n    'Abs Absent AbsentOverTime Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Time Timestamp Vector Year':\n        tags.function(tags.variableName),\n    'Avg Bottomk Count Count_values Group Max Min Quantile Stddev Stdvar Sum Topk': tags.operatorKeyword,\n    'By Without Bool On Ignoring GroupLeft GroupRight Offset Start End': tags.modifier,\n    'And Unless Or': tags.logicOperator,\n    'Sub Add Mul Mod Div Atan2 Eql Neq Lte Lss Gte Gtr EqlRegex EqlSingle NeqRegex Pow At': tags.operator,\n    UnaryOp: tags.arithmeticOperator,\n    '( )': tags.paren,\n    '[ ]': tags.squareBracket,\n    '{ }': tags.brace,\n    '⚠': tags.invalid,\n});\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst spec_Identifier = {__proto__:null,absent_over_time:309, absent:311, abs:313, acos:315, acosh:317, asin:319, asinh:321, atan:323, atanh:325, avg_over_time:327, ceil:329, changes:331, clamp:333, clamp_max:335, clamp_min:337, cos:339, cosh:341, count_over_time:343, days_in_month:345, day_of_month:347, day_of_week:349, day_of_year:351, deg:353, delta:355, deriv:357, exp:359, floor:361, histogram_quantile:363, holt_winters:365, hour:367, idelta:369, increase:371, irate:373, label_replace:375, label_join:377, last_over_time:379, ln:381, log10:383, log2:385, max_over_time:387, min_over_time:389, minute:391, month:393, pi:395, predict_linear:397, present_over_time:399, quantile_over_time:401, rad:403, rate:405, resets:407, round:409, scalar:411, sgn:413, sin:415, sinh:417, sort:419, sort_desc:421, sqrt:423, stddev_over_time:425, stdvar_over_time:427, sum_over_time:429, tan:431, tanh:433, timestamp:435, time:437, vector:439, year:441};\nconst parser = LRParser.deserialize({\n  version: 14,\n  states: \"6bOYQPOOO'OQPOOOOQO'#C{'#C{O'TQPO'#CzQ'`QQOOOOQO'#De'#DeO'ZQPO'#DdOOQO'#FO'#FOO(mQPO'#FUOYQPO'#FQOYQPO'#FTOOQO'#FW'#FWO.lQSO'#FXO.tQQO'#FVOOQO'#FV'#FVOOQO'#Cy'#CyOOQO'#Df'#DfOOQO'#Dh'#DhOOQO'#Di'#DiOOQO'#Dj'#DjOOQO'#Dk'#DkOOQO'#Dl'#DlOOQO'#Dm'#DmOOQO'#Dn'#DnOOQO'#Do'#DoOOQO'#Dp'#DpOOQO'#Dq'#DqOOQO'#Dr'#DrOOQO'#Ds'#DsOOQO'#Dt'#DtOOQO'#Du'#DuOOQO'#Dv'#DvOOQO'#Dw'#DwOOQO'#Dx'#DxOOQO'#Dy'#DyOOQO'#Dz'#DzOOQO'#D{'#D{OOQO'#D|'#D|OOQO'#D}'#D}OOQO'#EO'#EOOOQO'#EP'#EPOOQO'#EQ'#EQOOQO'#ER'#EROOQO'#ES'#ESOOQO'#ET'#ETOOQO'#EU'#EUOOQO'#EV'#EVOOQO'#EW'#EWOOQO'#EX'#EXOOQO'#EY'#EYOOQO'#EZ'#EZOOQO'#E['#E[OOQO'#E]'#E]OOQO'#E^'#E^OOQO'#E_'#E_OOQO'#E`'#E`OOQO'#Ea'#EaOOQO'#Eb'#EbOOQO'#Ec'#EcOOQO'#Ed'#EdOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsOOQO'#Et'#EtOOQO'#Eu'#EuOOQO'#Ev'#EvOOQO'#Ew'#EwOOQO'#Ex'#ExOOQO'#Ey'#EyOOQO'#Ez'#EzOOQO'#E{'#E{QOQPOOO0_QPO'#C|O0dQPO'#DRO'ZQPO,59fO0kQQO,59fO2XQPO,59oO2XQPO,59oO2XQPO,59oO2XQPO,59oO2XQPO,59oO8WQQO,5;hO8]QQO,5;kO8eQPO,5;zOOQO,5:O,5:OOOQO,5;j,5;jO8|QQO,5;lO9TQQO,5;oO:kQPO'#FZO:yQPO,5;sOOQO'#FY'#FYOOQO,5;s,5;sOOQO,5;q,5;qO;RQSO'#C}OOQO,59h,59hO;ZQPO,59mO;cQQO'#DSOOQO,59m,59mOOQO1G/Q1G/QO0_QPO'#DWOAcQPO'#DVOAmQPO'#DVOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOYQPO1G/ZOAwQSO1G1SOOQO1G1V1G1VOBPQQO1G1VOBUQPO'#FOOOQO'#Fb'#FbOOQO1G1f1G1fOBaQPO1G1fOOQO1G1W1G1WOOQO'#F['#F[OBfQPO,5;uOBkQSO1G1_OOQO1G1_1G1_OOQO'#DP'#DPOBsQPO,59iOOQO'#DO'#DOOOQO,59i,59iOYQPO,59nOOQO1G/X1G/XOOQO,59r,59rOHnQPO,59qOHuQPO,59qOJ^QQO7+$uOJnQQO7+$uOLSQQO7+$uOLjQQO7+$uONRQQO7+$uOOQO7+&n7+&nONlQQO7+&tOOQO7+&q7+&qONtQPO7+'QOOQO1G1a1G1aOOQO1G1`1G1`OOQO7+&y7+&yONyQSO1G/TOOQO1G/T1G/TO! RQQO1G/YOOQO1G/]1G/]O! ]QPO1G/]OOQO<<J`<<J`O!'RQPO<<J`OOQO<<Jl<<JlOOQO1G/U1G/UOOQO7+$o7+$oOOQO7+$w7+$wOOQOAN?zAN?z\",\n  stateData: \"!'W~O$[OSkOS~OWQOXQOYQOZQO[QO]QO^QO_QO`QOaQObQOcQO!ZZO#u_O$XVO$YVO$]XO$``O$aaO$bbO$ccO$ddO$eeO$ffO$ggO$hhO$iiO$jjO$kkO$llO$mmO$nnO$ooO$ppO$qqO$rrO$ssO$ttO$uuO$vvO$wwO$xxO$yyO$zzO${{O$||O$}}O%O!OO%P!PO%Q!QO%R!RO%S!SO%T!TO%U!UO%V!VO%W!WO%X!XO%Y!YO%Z!ZO%[![O%]!]O%^!^O%_!_O%`!`O%a!aO%b!bO%c!cO%d!dO%e!eO%f!fO%g!gO%h!hO%i!iO%j!jO%k!kO%l!lO%m!mO%n!nO%o!oO%p!pO%q!qO%r!rO%s!sO%t!tO%wWO%xWO%yVO%{[O~O!ZZO~Od!vOe!vO$]!wO~OU#QOV!zOf!}Og#OOh!}Ox!zO{!zO|!zO}!zO!O!{O!P!{O!Q!|O!R!|O!S!|O!T!|O!U!|O!V!|O$T#RO%u#PO~O$X#TO$Y#TO%y#TOW#xXX#xXY#xXZ#xX[#xX]#xX^#xX_#xX`#xXa#xXb#xXc#xX!Z#xX#u#xX$X#xX$Y#xX$]#xX$`#xX$a#xX$b#xX$c#xX$d#xX$e#xX$f#xX$g#xX$h#xX$i#xX$j#xX$k#xX$l#xX$m#xX$n#xX$o#xX$p#xX$q#xX$r#xX$s#xX$t#xX$u#xX$v#xX$w#xX$x#xX$y#xX$z#xX${#xX$|#xX$}#xX%O#xX%P#xX%Q#xX%R#xX%S#xX%T#xX%U#xX%V#xX%W#xX%X#xX%Y#xX%Z#xX%[#xX%]#xX%^#xX%_#xX%`#xX%a#xX%b#xX%c#xX%d#xX%e#xX%f#xX%g#xX%h#xX%i#xX%j#xX%k#xX%l#xX%m#xX%n#xX%o#xX%p#xX%q#xX%r#xX%s#xX%t#xX%w#xX%x#xX%y#xX%{#xX~Ot#WO%|#ZO~O%{[OU#yXV#yXf#yXg#yXh#yXx#yX{#yX|#yX}#yX!O#yX!P#yX!Q#yX!R#yX!S#yX!T#yX!U#yX!V#yX$T#yX$W#yX%u#yX$_#yX$^#yX~O$]#]O~O$_#aO~PYOd!vOe!vOUnaVnafnagnahnaxna{na|na}na!Ona!Pna!Qna!Rna!Sna!Tna!Una!Vna$Tna$Wna%una$_na$^na~OP#eOQ#cOR#cOWyPXyPYyPZyP[yP]yP^yP_yP`yPayPbyPcyP!ZyP#uyP$XyP$YyP$]yP$`yP$ayP$byP$cyP$dyP$eyP$fyP$gyP$hyP$iyP$jyP$kyP$lyP$myP$nyP$oyP$pyP$qyP$ryP$syP$tyP$uyP$vyP$wyP$xyP$yyP$zyP${yP$|yP$}yP%OyP%PyP%QyP%RyP%SyP%TyP%UyP%VyP%WyP%XyP%YyP%ZyP%[yP%]yP%^yP%_yP%`yP%ayP%byP%cyP%dyP%eyP%fyP%gyP%hyP%iyP%jyP%kyP%lyP%myP%nyP%oyP%pyP%qyP%ryP%syP%tyP%wyP%xyP%yyP%{yP~O#q#kO~O!P#mO#q#lO~Oi#oOj#oO$XVO$YVO%w#nO%x#nO%yVO~O$_#rO~P'`Ox!zOU#waV#waf#wag#wah#wa{#wa|#wa}#wa!O#wa!P#wa!Q#wa!R#wa!S#wa!T#wa!U#wa!V#wa$T#wa$W#wa%u#wa$_#wa$^#wa~O!V#sO$P#sO$Q#sO$R#sO~O$^#uO%|#vO~Ot#wO$_#zO~O$^#{O$_#|O~O$^vX$_vX~P'`OWyXXyXYyXZyX[yX]yX^yX_yX`yXayXbyXcyX!ZyX#uyX$XyX$YyX$]yX$`yX$ayX$byX$cyX$dyX$eyX$fyX$gyX$hyX$iyX$jyX$kyX$lyX$myX$nyX$oyX$pyX$qyX$ryX$syX$tyX$uyX$vyX$wyX$xyX$yyX$zyX${yX$|yX$}yX%OyX%PyX%QyX%RyX%SyX%TyX%UyX%VyX%WyX%XyX%YyX%ZyX%[yX%]yX%^yX%_yX%`yX%ayX%byX%cyX%dyX%eyX%fyX%gyX%hyX%iyX%jyX%kyX%lyX%myX%nyX%oyX%pyX%qyX%ryX%syX%tyX%wyX%xyX%yyX%{yX~OS$OOT$OO~P;mOQ#cOR#cO~P;mO%v$VO%z$WO~O#q$XO~O$X#TO$Y#TO%y#TO~O$]$YO~O#u$ZO~Ot#WO%|$]O~O$^$^O$_$_O~OWyaXyaYyaZya[ya]ya^ya_ya`yaayabyacya!Zya#uya$Xya$Yya$`ya$aya$bya$cya$dya$eya$fya$gya$hya$iya$jya$kya$lya$mya$nya$oya$pya$qya$rya$sya$tya$uya$vya$wya$xya$yya$zya${ya$|ya$}ya%Oya%Pya%Qya%Rya%Sya%Tya%Uya%Vya%Wya%Xya%Yya%Zya%[ya%]ya%^ya%_ya%`ya%aya%bya%cya%dya%eya%fya%gya%hya%iya%jya%kya%lya%mya%nya%oya%pya%qya%rya%sya%tya%wya%xya%yya%{ya~O$]#]O~PB{OS$bOT$bO$]ya~PB{Ox!zOUwqfwqgwqhwq!Owq!Pwq!Qwq!Rwq!Swq!Twq!Uwq!Vwq$Twq$Wwq%uwq$_wq$^wq~OVwq{wq|wq}wq~PISOV!zO{!zO|!zO}!zO~PISOV!zOx!zO{!zO|!zO}!zO!O!{O!P!{OUwqfwqgwqhwq$Twq$Wwq%uwq$_wq$^wq~O!Qwq!Rwq!Swq!Twq!Uwq!Vwq~PKOO!Q!|O!R!|O!S!|O!T!|O!U!|O!V!|O~PKOOV!zOf!}Oh!}Ox!zO{!zO|!zO}!zO!O!{O!P!{O!Q!|O!R!|O!S!|O!T!|O!U!|O!V!|O~OUwqgwq$Twq$Wwq%uwq$_wq$^wq~PMQO#q$dO%v$cO~O$_$eO~Ot#wO$_$gO~O$^vi$_vi~P'`O$]#]OWyiXyiYyiZyi[yi]yi^yi_yi`yiayibyicyi!Zyi#uyi$Xyi$Yyi$`yi$ayi$byi$cyi$dyi$eyi$fyi$gyi$hyi$iyi$jyi$kyi$lyi$myi$nyi$oyi$pyi$qyi$ryi$syi$tyi$uyi$vyi$wyi$xyi$yyi$zyi${yi$|yi$}yi%Oyi%Pyi%Qyi%Ryi%Syi%Tyi%Uyi%Vyi%Wyi%Xyi%Yyi%Zyi%[yi%]yi%^yi%_yi%`yi%ayi%byi%cyi%dyi%eyi%fyi%gyi%hyi%iyi%jyi%kyi%lyi%myi%nyi%oyi%pyi%qyi%ryi%syi%tyi%wyi%xyi%yyi%{yi~O%v$iO~O\",\n  goto: \"(v$VPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$W$v%S%`%f%r%uP%{&U$vP&X&hPPPPPPPPPPP$v&r'OP'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O'O$vP'[$v$vP$v$v'k$v'w(W(g(j(pPPP$vP(sQSOQ#UXQ#VYQ#`!wQ$Q#fQ$R#gQ$S#hQ$T#iQ$U#jR$`#{e_OXY!w#f#g#h#i#j#{eROXY!w#f#g#h#i#j#{Q!xRR#b!yQ#^!vQ#}#cQ$a$OR$h$bR#x#]Q#y#]R$f$^Q!yRQ#SUR#b!xR#_!wQ#f!zQ#g!{Q#h!|Q#i!}R#j#OY#d!z!{!|!}#OR$P#eeUOXY!w#f#g#h#i#j#{eTOXY!w#f#g#h#i#j#{d_OXY!w#f#g#h#i#j#{R#p#ReYOXY!w#f#g#h#i#j#{d]OXY!w#f#g#h#i#j#{R!uPd^OXY!w#f#g#h#i#j#{R#[]R#X[Q#Y[R$[#uR#t#WR#q#R\",\n  nodeNames: \"⚠ Bool Ignoring On GroupLeft GroupRight Offset Atan2 Avg Bottomk Count CountValues Group Max Min Quantile Stddev Stdvar Sum Topk By Without And Or Unless Start End LineComment PromQL Expr AggregateExpr AggregateOp AggregateModifier GroupingLabels GroupingLabelList GroupingLabel LabelName FunctionCallBody FunctionCallArgs BinaryExpr Pow BinModifiers OnOrIgnoring Mul Div Mod Add Sub Eql Gte Gtr Lte Lss Neq FunctionCall FunctionIdentifier AbsentOverTime Identifier Absent Abs Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramQuantile HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Timestamp Time Vector Year MatrixSelector Duration NumberLiteral OffsetExpr ParenExpr StringLiteral SubqueryExpr UnaryExpr UnaryOp VectorSelector MetricIdentifier LabelMatchers LabelMatchList LabelMatcher MatchOp EqlSingle EqlRegex NeqRegex StepInvariantExpr At AtModifierPreprocessors MetricName\",\n  maxTerm: 228,\n  propSources: [promQLHighLight],\n  skippedNodes: [0,27],\n  repeatNodeCount: 0,\n  tokenData: \"1R~RwX^#lpq#lqr$ars$tst%huv%swx%xxy&gyz&lz{&q{|&v|}&}}!O'S!O!P'Z!P!Q(Z!Q!R(`!R![)W![!]-r!^!_.n!_!`.{!`!a/b!b!c/o!c!}/t!}#O0[#P#Q0a#Q#R0f#R#S/t#S#T0k#T#o/t#o#p0w#q#r0|#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~#qY$[~X^#lpq#l#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~$dQ!_!`$j#r#s$o~$oO!V~~$tO$R~~$yU#u~OY$tZr$trs%]s#O$t#O#P%b#P~$t~%bO#u~~%ePO~$t~%mQk~OY%hZ~%h~%xO}~~%}U#u~OY%xZw%xwx%]x#O%x#O#P&a#P~%x~&dPO~%x~&lO$]~~&qO$_~~&vO{~R&}O%xP!OQ~'SO$^~R'ZO%wP!PQP'^P!Q!['aP'fR%yP!Q!['a!g!h'o#X#Y'oP'rR{|'{}!O'{!Q![(RP(OP!Q![(RP(WP%yP!Q![(R~(`O|~R(eZ%yP!O!P'a!Q![)W!g!h'o#W#X){#X#Y'o#[#]*d#a#b*x#g#h+l#k#l+}#l#m-W#m#n,iR)]Y%yP!O!P'a!Q![)W!g!h'o#W#X){#X#Y'o#[#]*d#a#b*x#g#h+l#k#l+}#m#n,iQ*QP#qQ!Q![*TQ*WS!Q![*T#[#]*d#a#b*x#g#h+lQ*iP#qQ!Q![*lQ*oR!Q![*l#a#b*x#g#h+lQ*}Q#qQ!Q![+T#g#h+gQ+WR!Q![+T#a#b+a#g#h+lQ+dP#g#h+gQ+lO#qQQ+qP#qQ!Q![+tQ+wQ!Q![+t#a#b+aQ,SP#qQ!Q![,VQ,YT!Q![,V#W#X){#[#]*d#a#b*x#g#h+lQ,nP#qQ!Q![,qQ,tU!Q![,q#W#X){#[#]*d#a#b*x#g#h+l#k#l+}P-ZR!Q![-d!c!i-d#T#Z-dP-iR%yP!Q![-d!c!i-d#T#Z-dV-yT%zS!ZR!Q![.Y![!].Y!c!}.Y#R#S.Y#T#o.YR._T!ZR!Q![.Y![!].Y!c!}.Y#R#S.Y#T#o.Y~.sP!U~!_!`.v~.{O!T~~/QQ$PP!_!`/W#r#s/]Q/]O!QQ~/bO$Q~~/gP!S~!_!`/j~/oO!R~~/tO$T~V/{T!ZRtS!Q![/t![!].Y!c!}/t#R#S/t#T#o/t~0aO%u~~0fO%v~~0kOx~~0nRO#S0k#S#T%]#T~0k~0|O%{~~1RO%|~\",\n  tokenizers: [0, 1, 2],\n  topRules: {\"PromQL\":[0,28],\"MetricName\":[1,145]},\n  specialized: [{term: 57, get: (value, stack) => (specializeIdentifier(value) << 1)},{term: 57, get: (value, stack) => (extendIdentifier(value) << 1) | 1},{term: 57, get: value => spec_Identifier[value] || -1}],\n  tokenPrec: 0\n});\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst inf = 147,\n  nan = 148,\n  Bool = 1,\n  Ignoring = 2,\n  On = 3,\n  GroupLeft = 4,\n  GroupRight = 5,\n  Offset = 6,\n  Atan2 = 7,\n  Avg = 8,\n  Bottomk = 9,\n  Count = 10,\n  CountValues = 11,\n  Group = 12,\n  Max = 13,\n  Min = 14,\n  Quantile = 15,\n  Stddev = 16,\n  Stdvar = 17,\n  Sum = 18,\n  Topk = 19,\n  By = 20,\n  Without = 21,\n  And = 22,\n  Or = 23,\n  Unless = 24,\n  Start = 25,\n  End = 26,\n  LineComment = 27,\n  PromQL = 28,\n  Expr = 29,\n  AggregateExpr = 30,\n  AggregateOp = 31,\n  AggregateModifier = 32,\n  GroupingLabels = 33,\n  GroupingLabelList = 34,\n  GroupingLabel = 35,\n  LabelName = 36,\n  FunctionCallBody = 37,\n  FunctionCallArgs = 38,\n  BinaryExpr = 39,\n  Pow = 40,\n  BinModifiers = 41,\n  OnOrIgnoring = 42,\n  Mul = 43,\n  Div = 44,\n  Mod = 45,\n  Add = 46,\n  Sub = 47,\n  Eql = 48,\n  Gte = 49,\n  Gtr = 50,\n  Lte = 51,\n  Lss = 52,\n  Neq = 53,\n  FunctionCall = 54,\n  FunctionIdentifier = 55,\n  AbsentOverTime = 56,\n  Identifier = 57,\n  Absent = 58,\n  Abs = 59,\n  Acos = 60,\n  Acosh = 61,\n  Asin = 62,\n  Asinh = 63,\n  Atan = 64,\n  Atanh = 65,\n  AvgOverTime = 66,\n  Ceil = 67,\n  Changes = 68,\n  Clamp = 69,\n  ClampMax = 70,\n  ClampMin = 71,\n  Cos = 72,\n  Cosh = 73,\n  CountOverTime = 74,\n  DaysInMonth = 75,\n  DayOfMonth = 76,\n  DayOfWeek = 77,\n  DayOfYear = 78,\n  Deg = 79,\n  Delta = 80,\n  Deriv = 81,\n  Exp = 82,\n  Floor = 83,\n  HistogramQuantile = 84,\n  HoltWinters = 85,\n  Hour = 86,\n  Idelta = 87,\n  Increase = 88,\n  Irate = 89,\n  LabelReplace = 90,\n  LabelJoin = 91,\n  LastOverTime = 92,\n  Ln = 93,\n  Log10 = 94,\n  Log2 = 95,\n  MaxOverTime = 96,\n  MinOverTime = 97,\n  Minute = 98,\n  Month = 99,\n  Pi = 100,\n  PredictLinear = 101,\n  PresentOverTime = 102,\n  QuantileOverTime = 103,\n  Rad = 104,\n  Rate = 105,\n  Resets = 106,\n  Round = 107,\n  Scalar = 108,\n  Sgn = 109,\n  Sin = 110,\n  Sinh = 111,\n  Sort = 112,\n  SortDesc = 113,\n  Sqrt = 114,\n  StddevOverTime = 115,\n  StdvarOverTime = 116,\n  SumOverTime = 117,\n  Tan = 118,\n  Tanh = 119,\n  Timestamp = 120,\n  Time = 121,\n  Vector = 122,\n  Year = 123,\n  MatrixSelector = 124,\n  Duration = 125,\n  NumberLiteral = 126,\n  OffsetExpr = 127,\n  ParenExpr = 128,\n  StringLiteral = 129,\n  SubqueryExpr = 130,\n  UnaryExpr = 131,\n  UnaryOp = 132,\n  VectorSelector = 133,\n  MetricIdentifier = 134,\n  LabelMatchers = 135,\n  LabelMatchList = 136,\n  LabelMatcher = 137,\n  MatchOp = 138,\n  EqlSingle = 139,\n  EqlRegex = 140,\n  NeqRegex = 141,\n  StepInvariantExpr = 142,\n  At = 143,\n  AtModifierPreprocessors = 144,\n  MetricName = 145;\n\nexport { Abs, Absent, AbsentOverTime, Acos, Acosh, Add, AggregateExpr, AggregateModifier, AggregateOp, And, Asin, Asinh, At, AtModifierPreprocessors, Atan, Atan2, Atanh, Avg, AvgOverTime, BinModifiers, BinaryExpr, Bool, Bottomk, By, Ceil, Changes, Clamp, ClampMax, ClampMin, Cos, Cosh, Count, CountOverTime, CountValues, DayOfMonth, DayOfWeek, DayOfYear, DaysInMonth, Deg, Delta, Deriv, Div, Duration, End, Eql, EqlRegex, EqlSingle, Exp, Expr, Floor, FunctionCall, FunctionCallArgs, FunctionCallBody, FunctionIdentifier, Group, GroupLeft, GroupRight, GroupingLabel, GroupingLabelList, GroupingLabels, Gte, Gtr, HistogramQuantile, HoltWinters, Hour, Idelta, Identifier, Ignoring, Increase, Irate, LabelJoin, LabelMatchList, LabelMatcher, LabelMatchers, LabelName, LabelReplace, LastOverTime, LineComment, Ln, Log10, Log2, Lss, Lte, MatchOp, MatrixSelector, Max, MaxOverTime, MetricIdentifier, MetricName, Min, MinOverTime, Minute, Mod, Month, Mul, Neq, NeqRegex, NumberLiteral, Offset, OffsetExpr, On, OnOrIgnoring, Or, ParenExpr, Pi, Pow, PredictLinear, PresentOverTime, PromQL, Quantile, QuantileOverTime, Rad, Rate, Resets, Round, Scalar, Sgn, Sin, Sinh, Sort, SortDesc, Sqrt, Start, Stddev, StddevOverTime, Stdvar, StdvarOverTime, StepInvariantExpr, StringLiteral, Sub, SubqueryExpr, Sum, SumOverTime, Tan, Tanh, Time, Timestamp, Topk, UnaryExpr, UnaryOp, Unless, Vector, VectorSelector, Without, Year, inf, nan, parser };\n","import { SyntaxNode, TreeCursor } from '@lezer/common';\n\nimport { QueryBuilderOperation } from './types';\n\n// This is used for error type for some reason\nexport const ErrorName = '⚠';\n\nexport function getLeftMostChild(cur: SyntaxNode): SyntaxNode {\n  return cur.firstChild ? getLeftMostChild(cur.firstChild) : cur;\n}\n\nexport function makeError(expr: string, node: SyntaxNode) {\n  return {\n    text: getString(expr, node),\n    // TODO: this are positions in the string with the replaced variables. Means it cannot be used to show exact\n    //  placement of the error for the user. We need some translation table to positions before the variable\n    //  replace.\n    from: node.from,\n    to: node.to,\n    parentType: node.parent?.name,\n  };\n}\n\n// Taken from template_srv, but copied so to not mess with the regex.index which is manipulated in the service\n/*\n * This regex matches 3 types of variable reference with an optional format specifier\n * \\$(\\w+)                          $var1\n * \\[\\[([\\s\\S]+?)(?::(\\w+))?\\]\\]    [[var2]] or [[var2:fmt2]]\n * \\${(\\w+)(?::(\\w+))?}             ${var3} or ${var3:fmt3}\n */\nconst variableRegex = /\\$(\\w+)|\\[\\[([\\s\\S]+?)(?::(\\w+))?\\]\\]|\\${(\\w+)(?:\\.([^:^\\}]+))?(?::([^\\}]+))?}/g;\n\n/**\n * As variables with $ are creating parsing errors, we first replace them with magic string that is parsable and at\n * the same time we can get the variable and its format back from it.\n * @param expr\n */\nexport function replaceVariables(expr: string) {\n  return expr.replace(variableRegex, (match, var1, var2, fmt2, var3, fieldPath, fmt3) => {\n    const fmt = fmt2 || fmt3;\n    let variable = var1;\n    let varType = '0';\n\n    if (var2) {\n      variable = var2;\n      varType = '1';\n    }\n\n    if (var3) {\n      variable = var3;\n      varType = '2';\n    }\n\n    return `__V_${varType}__` + variable + '__V__' + (fmt ? '__F__' + fmt + '__F__' : '');\n  });\n}\n\nconst varTypeFunc = [\n  (v: string, f?: string) => `\\$${v}`,\n  (v: string, f?: string) => `[[${v}${f ? `:${f}` : ''}]]`,\n  (v: string, f?: string) => `\\$\\{${v}${f ? `:${f}` : ''}\\}`,\n];\n\n/**\n * Get back the text with variables in their original format.\n * @param expr\n */\nexport function returnVariables(expr: string) {\n  return expr.replace(/__V_(\\d)__(.+?)__V__(?:__F__(\\w+)__F__)?/g, (match, type, v, f) => {\n    return varTypeFunc[parseInt(type, 10)](v, f);\n  });\n}\n\n/**\n * Get the actual string of the expression. That is not stored in the tree so we have to get the indexes from the node\n * and then based on that get it from the expression.\n * @param expr\n * @param node\n */\nexport function getString(expr: string, node: SyntaxNode | TreeCursor | null | undefined) {\n  if (!node) {\n    return '';\n  }\n  return returnVariables(expr.substring(node.from, node.to));\n}\n\n/**\n * Create simple scalar binary op object.\n * @param opDef - definition of the op to be created\n * @param expr\n * @param numberNode - the node for the scalar\n * @param hasBool - whether operation has a bool modifier. Is used only for ops for which it makes sense.\n */\nexport function makeBinOp(\n  opDef: { id: string; comparison?: boolean },\n  expr: string,\n  numberNode: SyntaxNode,\n  hasBool: boolean\n): QueryBuilderOperation {\n  const params: any[] = [parseFloat(getString(expr, numberNode))];\n  if (opDef.comparison) {\n    params.push(hasBool);\n  }\n  return {\n    id: opDef.id,\n    params,\n  };\n}\n\n/**\n * Get all nodes with type in the tree. This traverses the tree so it is safe only when you know there shouldn't be\n * too much nesting but you just want to skip some of the wrappers. For example getting function args this way would\n * not be safe is it would also find arguments of nested functions.\n * @param expr\n * @param cur\n * @param type - can be string or number, some data-sources (loki) haven't migrated over to using numeric constants defined in the lezer parsing library (e.g. lezer-promql).\n * @todo Remove string type definition when all data-sources have migrated to numeric constants\n */\nexport function getAllByType(expr: string, cur: SyntaxNode, type: number | string): string[] {\n  if (cur.type.id === type || cur.name === type) {\n    return [getString(expr, cur)];\n  }\n  const values: string[] = [];\n  let pos = 0;\n  let child = cur.childAfter(pos);\n  while (child) {\n    values.push(...getAllByType(expr, child, type));\n    pos = child.to;\n    child = cur.childAfter(pos);\n  }\n  return values;\n}\n\n// Debugging function for convenience. Gives you nice output similar to linux tree util.\n// @ts-ignore\nexport function log(expr: string, cur?: SyntaxNode) {\n  if (!cur) {\n    console.log('<empty>');\n    return;\n  }\n  const json = toJson(expr, cur);\n  const text = jsonToText(json);\n\n  if (!text) {\n    console.log('<empty>');\n    return;\n  }\n  console.log(text);\n}\n\nfunction toJson(expr: string, cur: SyntaxNode) {\n  const treeJson: any = {};\n  const name = nodeToString(expr, cur);\n  const children = [];\n\n  let pos = 0;\n  let child = cur.childAfter(pos);\n  while (child) {\n    children.push(toJson(expr, child));\n    pos = child.to;\n    child = cur.childAfter(pos);\n  }\n\n  treeJson.name = name;\n  treeJson.children = children;\n  return treeJson;\n}\n\ntype JsonNode = {\n  name: string;\n  children: JsonNode[];\n};\n\nfunction jsonToText(\n  node: JsonNode,\n  context: { lastChild: boolean; indent: string } = {\n    lastChild: true,\n    indent: '',\n  }\n) {\n  const name = node.name;\n  const { lastChild, indent } = context;\n  const newIndent = indent !== '' ? indent + (lastChild ? '└─' : '├─') : '';\n  let text = newIndent + name;\n\n  const children = node.children;\n  children.forEach((child: any, index: number) => {\n    const isLastChild = index === children.length - 1;\n    text +=\n      '\\n' +\n      jsonToText(child, {\n        lastChild: isLastChild,\n        indent: indent + (lastChild ? '  ' : '│ '),\n      });\n  });\n\n  return text;\n}\n\nfunction nodeToString(expr: string, node: SyntaxNode) {\n  return node.name + ': ' + getString(expr, node);\n}\n","import { SyntaxNode } from '@lezer/common';\nimport {\n  AggregateExpr,\n  AggregateModifier,\n  AggregateOp,\n  BinaryExpr,\n  BinModifiers,\n  Expr,\n  FunctionCall,\n  FunctionCallArgs,\n  FunctionCallBody,\n  FunctionIdentifier,\n  GroupingLabel,\n  GroupingLabelList,\n  GroupingLabels,\n  LabelMatcher,\n  LabelName,\n  MatchOp,\n  MetricIdentifier,\n  NumberLiteral,\n  On,\n  OnOrIgnoring,\n  ParenExpr,\n  parser,\n  StringLiteral,\n  VectorSelector,\n  Without,\n} from '@prometheus-io/lezer-promql';\n\nimport { binaryScalarOperatorToOperatorName } from './binaryScalarOperations';\nimport {\n  ErrorName,\n  getAllByType,\n  getLeftMostChild,\n  getString,\n  makeBinOp,\n  makeError,\n  replaceVariables,\n} from './shared/parsingUtils';\nimport { QueryBuilderLabelFilter, QueryBuilderOperation } from './shared/types';\nimport { PromVisualQuery, PromVisualQueryBinary } from './types';\n\n/**\n * Parses a PromQL query into a visual query model.\n *\n * It traverses the tree and uses sort of state machine to update the query model. The query model is modified\n * during the traversal and sent to each handler as context.\n *\n * @param expr\n */\nexport function buildVisualQueryFromString(expr: string): Context {\n  const replacedExpr = replaceVariables(expr);\n  const tree = parser.parse(replacedExpr);\n  const node = tree.topNode;\n\n  // This will be modified in the handlers.\n  const visQuery: PromVisualQuery = {\n    metric: '',\n    labels: [],\n    operations: [],\n  };\n  const context: Context = {\n    query: visQuery,\n    errors: [],\n  };\n\n  try {\n    handleExpression(replacedExpr, node, context);\n  } catch (err) {\n    // Not ideal to log it here, but otherwise we would lose the stack trace.\n    console.error(err);\n    if (err instanceof Error) {\n      context.errors.push({\n        text: err.message,\n      });\n    }\n  }\n\n  // If we have empty query, we want to reset errors\n  if (isEmptyQuery(context.query)) {\n    context.errors = [];\n  }\n  return context;\n}\n\ninterface ParsingError {\n  text: string;\n  from?: number;\n  to?: number;\n  parentType?: string;\n}\n\ninterface Context {\n  query: PromVisualQuery;\n  errors: ParsingError[];\n}\n\n// Although 0 isn't explicitly provided in the lezer-promql library as the error node ID, it does appear to be the ID of error nodes within lezer.\nconst ErrorId = 0;\n\n/**\n * Handler for default state. It will traverse the tree and call the appropriate handler for each node. The node\n * handled here does not necessarily need to be of type == Expr.\n * @param expr\n * @param node\n * @param context\n */\nexport function handleExpression(expr: string, node: SyntaxNode, context: Context) {\n  const visQuery = context.query;\n\n  switch (node.type.id) {\n    case MetricIdentifier: {\n      // Expectation is that there is only one of those per query.\n      visQuery.metric = getString(expr, node);\n      break;\n    }\n\n    case LabelMatcher: {\n      // Same as MetricIdentifier should be just one per query.\n      visQuery.labels.push(getLabel(expr, node));\n      const err = node.getChild(ErrorName);\n      if (err) {\n        context.errors.push(makeError(expr, err));\n      }\n      break;\n    }\n\n    case FunctionCall: {\n      handleFunction(expr, node, context);\n      break;\n    }\n\n    case AggregateExpr: {\n      handleAggregation(expr, node, context);\n      break;\n    }\n\n    case BinaryExpr: {\n      handleBinary(expr, node, context);\n      break;\n    }\n\n    case ErrorId: {\n      if (isIntervalVariableError(node)) {\n        break;\n      }\n      context.errors.push(makeError(expr, node));\n      break;\n    }\n\n    default: {\n      if (node.type.id === ParenExpr) {\n        // We don't support parenthesis in the query to group expressions. We just report error but go on with the\n        // parsing.\n        context.errors.push(makeError(expr, node));\n      }\n      // Any other nodes we just ignore and go to its children. This should be fine as there are lots of wrapper\n      // nodes that can be skipped.\n      // TODO: there are probably cases where we will just skip nodes we don't support and we should be able to\n      //  detect those and report back.\n      let child = node.firstChild;\n      while (child) {\n        handleExpression(expr, child, context);\n        child = child.nextSibling;\n      }\n    }\n  }\n}\n\nfunction isIntervalVariableError(node: SyntaxNode) {\n  return node.prevSibling?.type.id === Expr && node.prevSibling?.firstChild?.type.id === VectorSelector;\n}\n\nfunction getLabel(expr: string, node: SyntaxNode): QueryBuilderLabelFilter {\n  const label = getString(expr, node.getChild(LabelName));\n  const op = getString(expr, node.getChild(MatchOp));\n  const value = getString(expr, node.getChild(StringLiteral)).replace(/\"/g, '');\n  return {\n    label,\n    op,\n    value,\n  };\n}\n\nconst rangeFunctions = ['changes', 'rate', 'irate', 'increase', 'delta'];\n\n/**\n * Handle function call which is usually and identifier and its body > arguments.\n * @param expr\n * @param node\n * @param context\n */\nfunction handleFunction(expr: string, node: SyntaxNode, context: Context) {\n  const visQuery = context.query;\n  const nameNode = node.getChild(FunctionIdentifier);\n  const funcName = getString(expr, nameNode);\n\n  const body = node.getChild(FunctionCallBody);\n  const callArgs = body!.getChild(FunctionCallArgs);\n  const params = [];\n  let interval = '';\n\n  // This is a bit of a shortcut to get the interval argument. Reasons are\n  // - interval is not part of the function args per promQL grammar but we model it as argument for the function in\n  //   the query model.\n  // - it is easier to handle template variables this way as template variable is an error for the parser\n  if (rangeFunctions.includes(funcName) || funcName.endsWith('_over_time')) {\n    let match = getString(expr, node).match(/\\[(.+)\\]/);\n    if (match?.[1]) {\n      interval = match[1];\n      params.push(match[1]);\n    }\n  }\n\n  const op = { id: funcName, params };\n  // We unshift operations to keep the more natural order that we want to have in the visual query editor.\n  visQuery.operations.unshift(op);\n\n  if (callArgs) {\n    if (getString(expr, callArgs) === interval + ']') {\n      // This is a special case where we have a function with a single argument and it is the interval.\n      // This happens when you start adding operations in query builder and did not set a metric yet.\n      return;\n    }\n    updateFunctionArgs(expr, callArgs, context, op);\n  }\n}\n\n/**\n * Handle aggregation as they are distinct type from other functions.\n * @param expr\n * @param node\n * @param context\n */\nfunction handleAggregation(expr: string, node: SyntaxNode, context: Context) {\n  const visQuery = context.query;\n  const nameNode = node.getChild(AggregateOp);\n  let funcName = getString(expr, nameNode);\n\n  const modifier = node.getChild(AggregateModifier);\n  const labels = [];\n\n  if (modifier) {\n    const byModifier = modifier.getChild(`By`);\n    if (byModifier && funcName) {\n      funcName = `__${funcName}_by`;\n    }\n\n    const withoutModifier = modifier.getChild(Without);\n    if (withoutModifier) {\n      funcName = `__${funcName}_without`;\n    }\n\n    labels.push(...getAllByType(expr, modifier, GroupingLabel));\n  }\n\n  const body = node.getChild(FunctionCallBody);\n  const callArgs = body!.getChild(FunctionCallArgs);\n\n  const op: QueryBuilderOperation = { id: funcName, params: [] };\n  visQuery.operations.unshift(op);\n  updateFunctionArgs(expr, callArgs, context, op);\n  // We add labels after params in the visual query editor.\n  op.params.push(...labels);\n}\n\n/**\n * Handle (probably) all types of arguments that function or aggregation can have.\n *\n *  FunctionCallArgs are nested bit weirdly basically its [firstArg, ...rest] where rest is again FunctionCallArgs so\n *  we cannot just get all the children and iterate them as arguments we have to again recursively traverse through\n *  them.\n *\n * @param expr\n * @param node\n * @param context\n * @param op - We need the operation to add the params to as an additional context.\n */\nfunction updateFunctionArgs(expr: string, node: SyntaxNode | null, context: Context, op: QueryBuilderOperation) {\n  if (!node) {\n    return;\n  }\n  switch (node.type.id) {\n    // In case we have an expression we don't know what kind so we have to look at the child as it can be anything.\n    case Expr:\n    // FunctionCallArgs are nested bit weirdly as mentioned so we have to go one deeper in this case.\n    case FunctionCallArgs: {\n      let child = node.firstChild;\n      while (child) {\n        updateFunctionArgs(expr, child, context, op);\n        child = child.nextSibling;\n      }\n      break;\n    }\n\n    case NumberLiteral: {\n      op.params.push(parseFloat(getString(expr, node)));\n      break;\n    }\n\n    case StringLiteral: {\n      op.params.push(getString(expr, node).replace(/\"/g, ''));\n      break;\n    }\n\n    default: {\n      // Means we get to something that does not seem like simple function arg and is probably nested query so jump\n      // back to main context\n      handleExpression(expr, node, context);\n    }\n  }\n}\n\n/**\n * Right now binary expressions can be represented in 2 way in visual query. As additional operation in case it is\n * just operation with scalar or it creates a binaryQuery when it's 2 queries.\n * @param expr\n * @param node\n * @param context\n */\nfunction handleBinary(expr: string, node: SyntaxNode, context: Context) {\n  const visQuery = context.query;\n  const left = node.firstChild!;\n  const op = getString(expr, left.nextSibling);\n  const binModifier = getBinaryModifier(expr, node.getChild(BinModifiers));\n\n  const right = node.lastChild!;\n\n  const opDef = binaryScalarOperatorToOperatorName[op];\n\n  const leftNumber = left.getChild(NumberLiteral);\n  const rightNumber = right.getChild(NumberLiteral);\n\n  const rightBinary = right.getChild(BinaryExpr);\n\n  if (leftNumber) {\n    // TODO: this should be already handled in case parent is binary expression as it has to be added to parent\n    //  if query starts with a number that isn't handled now.\n  } else {\n    // If this is binary we don't really know if there is a query or just chained scalars. So\n    // we have to traverse a bit deeper to know\n    handleExpression(expr, left, context);\n  }\n\n  if (rightNumber) {\n    visQuery.operations.push(makeBinOp(opDef, expr, right, !!binModifier?.isBool));\n  } else if (rightBinary) {\n    // Due to the way binary ops are parsed we can get a binary operation on the right that starts with a number which\n    // is a factor for a current binary operation. So we have to add it as an operation now.\n    const leftMostChild = getLeftMostChild(right);\n    if (leftMostChild?.type.id === NumberLiteral) {\n      visQuery.operations.push(makeBinOp(opDef, expr, leftMostChild, !!binModifier?.isBool));\n    }\n\n    // If we added the first number literal as operation here we still can continue and handle the rest as the first\n    // number will be just skipped.\n    handleExpression(expr, right, context);\n  } else {\n    visQuery.binaryQueries = visQuery.binaryQueries || [];\n    const binQuery: PromVisualQueryBinary = {\n      operator: op,\n      query: {\n        metric: '',\n        labels: [],\n        operations: [],\n      },\n    };\n    if (binModifier?.isMatcher) {\n      binQuery.vectorMatchesType = binModifier.matchType;\n      binQuery.vectorMatches = binModifier.matches;\n    }\n    visQuery.binaryQueries.push(binQuery);\n    handleExpression(expr, right, {\n      query: binQuery.query,\n      errors: context.errors,\n    });\n  }\n}\n\nfunction getBinaryModifier(\n  expr: string,\n  node: SyntaxNode | null\n):\n  | { isBool: true; isMatcher: false }\n  | { isBool: false; isMatcher: true; matches: string; matchType: 'ignoring' | 'on' }\n  | undefined {\n  if (!node) {\n    return undefined;\n  }\n  if (node.getChild('Bool')) {\n    return { isBool: true, isMatcher: false };\n  } else {\n    const matcher = node.getChild(OnOrIgnoring);\n    if (!matcher) {\n      // Not sure what this could be, maybe should be an error.\n      return undefined;\n    }\n    const labels = getString(expr, matcher.getChild(GroupingLabels)?.getChild(GroupingLabelList));\n    return {\n      isMatcher: true,\n      isBool: false,\n      matches: labels,\n      matchType: matcher.getChild(On) ? 'on' : 'ignoring',\n    };\n  }\n}\n\nfunction isEmptyQuery(query: PromVisualQuery) {\n  if (query.labels.length === 0 && query.operations.length === 0 && !query.metric) {\n    return true;\n  }\n  return false;\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { Icon, useStyles2 } from '@grafana/ui';\n\nimport { Stack } from '../../components/QueryEditor';\n\nexport interface Props {\n  feedbackUrl?: string;\n}\n\nexport function FeedbackLink({ feedbackUrl }: Props) {\n  const styles = useStyles2(getStyles);\n\n  if (!config.feedbackLinksEnabled) {\n    return null;\n  }\n\n  return (\n    <Stack gap={1}>\n      <a\n        href={feedbackUrl}\n        className={styles.link}\n        title=\"This query builder is new, please let us know how we can improve it\"\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n        onClick={() =>\n          reportInteraction('grafana_feedback_link_clicked', {\n            link: feedbackUrl,\n          })\n        }\n      >\n        <Icon name=\"comment-alt-message\" /> Give feedback\n      </a>\n    </Stack>\n  );\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    link: css({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize,\n      ':hover': {\n        color: theme.colors.text.link,\n      },\n    }),\n  };\n}\n","/**\n * Shared types that can be reused by Loki and other data sources\n */\n\nimport { ComponentType } from 'react';\n\nimport { DataSourceApi, RegistryItem, SelectableValue } from '@grafana/data';\n\nexport interface QueryBuilderLabelFilter {\n  label: string;\n  op: string;\n  value: string;\n}\n\nexport interface QueryBuilderOperation {\n  id: string;\n  params: QueryBuilderOperationParamValue[];\n}\n\nexport interface QueryWithOperations {\n  operations: QueryBuilderOperation[];\n}\n\nexport interface QueryBuilderOperationDef<T = any> extends RegistryItem {\n  documentation?: string;\n  params: QueryBuilderOperationParamDef[];\n  defaultParams: QueryBuilderOperationParamValue[];\n  category: string;\n  hideFromList?: boolean;\n  alternativesKey?: string;\n  /** Can be used to control operation placement when adding a new operations, lower are placed first */\n  orderRank?: number;\n  renderer: QueryBuilderOperationRenderer;\n  addOperationHandler: QueryBuilderAddOperationHandler<T>;\n  paramChangedHandler?: QueryBuilderOnParamChangedHandler;\n  explainHandler?: QueryBuilderExplainOperationHandler;\n  changeTypeHandler?: (op: QueryBuilderOperation, newDef: QueryBuilderOperationDef<T>) => QueryBuilderOperation;\n}\n\nexport type QueryBuilderAddOperationHandler<T> = (\n  def: QueryBuilderOperationDef,\n  query: T,\n  modeller: VisualQueryModeller\n) => T;\n\nexport type QueryBuilderExplainOperationHandler = (op: QueryBuilderOperation, def: QueryBuilderOperationDef) => string;\n\nexport type QueryBuilderOnParamChangedHandler = (\n  index: number,\n  operation: QueryBuilderOperation,\n  operationDef: QueryBuilderOperationDef\n) => QueryBuilderOperation;\n\nexport type QueryBuilderOperationRenderer = (\n  model: QueryBuilderOperation,\n  def: QueryBuilderOperationDef,\n  innerExpr: string\n) => string;\n\nexport type QueryBuilderOperationParamValue = string | number | boolean;\n\nexport interface QueryBuilderOperationParamDef {\n  name: string;\n  type: 'string' | 'number' | 'boolean';\n  options?: string[] | number[] | Array<SelectableValue<string>>;\n  hideName?: boolean;\n  restParam?: boolean;\n  optional?: boolean;\n  placeholder?: string;\n  description?: string;\n  minWidth?: number;\n  editor?: ComponentType<QueryBuilderOperationParamEditorProps>;\n  runQueryOnEnter?: boolean;\n}\n\nexport interface QueryBuilderOperationEditorProps {\n  operation: QueryBuilderOperation;\n  index: number;\n  query: any;\n  datasource: DataSourceApi;\n  queryModeller: VisualQueryModeller;\n  onChange: (index: number, update: QueryBuilderOperation) => void;\n  onRemove: (index: number) => void;\n}\n\nexport interface QueryBuilderOperationParamEditorProps {\n  value?: QueryBuilderOperationParamValue;\n  paramDef: QueryBuilderOperationParamDef;\n  /** Parameter index */\n  index: number;\n  operation: QueryBuilderOperation;\n  operationIndex: number;\n  query: any;\n  datasource: DataSourceApi;\n  onChange: (index: number, value: QueryBuilderOperationParamValue) => void;\n  onRunQuery: () => void;\n}\n\nexport enum QueryEditorMode {\n  Code = 'code',\n  Builder = 'builder',\n}\n\nexport interface VisualQueryModeller {\n  getOperationsForCategory(category: string): QueryBuilderOperationDef[];\n  getAlternativeOperations(key: string): QueryBuilderOperationDef[];\n  getCategories(): string[];\n  getOperationDef(id: string): QueryBuilderOperationDef | undefined;\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { RadioButtonGroup, Tag } from '@grafana/ui';\n\n\nimport { QueryEditorMode } from './types';\n\nexport interface Props {\n  mode: QueryEditorMode;\n  onChange: (mode: QueryEditorMode) => void;\n}\n\nconst editorModes = [\n  {\n    label: 'Builder',\n    value: QueryEditorMode.Builder,\n    component: () => (\n      <Tag\n        className={css({\n          fontSize: 10,\n          padding: '1px 5px',\n          verticalAlign: 'text-bottom',\n        })}\n        name={'Beta'}\n        colorIndex={1}\n      />\n    ),\n  },\n  { label: 'Code', value: QueryEditorMode.Code },\n];\n\nexport function QueryEditorModeToggle({ mode, onChange }: Props) {\n  return (\n    <div data-testid={'QueryEditorModeToggle'}>\n      <RadioButtonGroup options={editorModes} size=\"sm\" value={mode} onChange={onChange} />\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\nimport { uniqueId } from 'lodash';\nimport React, { HTMLProps, useRef } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Switch, useStyles2 } from '@grafana/ui';\n\nimport { Stack } from '../../components/QueryEditor';\n\nexport interface Props extends Omit<HTMLProps<HTMLInputElement>, 'value' | 'ref'> {\n  value?: boolean;\n  label: string;\n}\n\nexport function QueryHeaderSwitch({ label, ...inputProps }: Props) {\n  const dashedLabel = label.replace(' ', '-');\n  const switchIdRef = useRef(uniqueId(`switch-${dashedLabel}`));\n  const styles = useStyles2(getStyles);\n\n  return (\n    <Stack gap={1}>\n      <label htmlFor={switchIdRef.current} className={styles.switchLabel}>\n        {label}\n      </label>\n      <Switch {...inputProps} id={switchIdRef.current} />\n    </Stack>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    switchLabel: css({\n      color: theme.colors.text.secondary,\n      cursor: 'pointer',\n      fontSize: theme.typography.bodySmall.fontSize,\n      '&:hover': {\n        color: theme.colors.text.primary,\n      },\n    }),\n  };\n};\n","type StoreValue = string | number | boolean | null;\n\nexport class Store {\n  get(key: string) {\n    return window.localStorage[key];\n  }\n\n  set(key: string, value: StoreValue) {\n    window.localStorage[key] = value;\n  }\n\n  getBool(key: string, def: boolean): boolean {\n    if (def !== void 0 && !this.exists(key)) {\n      return def;\n    }\n    return window.localStorage[key] === 'true';\n  }\n\n  getObject<T = unknown>(key: string): T | undefined;\n  getObject<T = unknown>(key: string, def: T): T;\n  getObject<T = unknown>(key: string, def?: T) {\n    let ret = def;\n    if (this.exists(key)) {\n      const json = window.localStorage[key];\n      try {\n        ret = JSON.parse(json);\n      } catch (error) {\n        console.error(`Error parsing store object: ${key}. Returning default: ${def}. [${error}]`);\n      }\n    }\n    return ret;\n  }\n\n  /* Returns true when successfully stored, throws error if not successfully stored */\n  setObject(key: string, value: any) {\n    let json;\n    try {\n      json = JSON.stringify(value);\n    } catch (error) {\n      throw new Error(`Could not stringify object: ${key}. [${error}]`);\n    }\n    try {\n      this.set(key, json);\n    } catch (error) {\n      // Likely hitting storage quota\n      const errorToThrow = new Error(`Could not save item in localStorage: ${key}. [${error}]`);\n      if (error instanceof Error) {\n        errorToThrow.name = error.name;\n      }\n      throw errorToThrow;\n    }\n    return true;\n  }\n\n  exists(key: string) {\n    return window.localStorage[key] !== void 0;\n  }\n\n  delete(key: string) {\n    window.localStorage.removeItem(key);\n  }\n}\n\nconst store = new Store();\nexport default store;\n","import { useCallback, useState } from 'react';\n\nimport store from '../../../store';\n\n\nexport const promQueryEditorExplainKey = 'PrometheusQueryEditorExplainDefault';\nexport const promQueryEditorRawQueryKey = 'PrometheusQueryEditorRawQueryDefault';\nexport const lokiQueryEditorExplainKey = 'LokiQueryEditorExplainDefault';\nexport const lokiQueryEditorRawQueryKey = 'LokiQueryEditorRawQueryDefault';\n\nexport type QueryEditorFlags =\n  | typeof promQueryEditorExplainKey\n  | typeof promQueryEditorRawQueryKey\n  | typeof lokiQueryEditorExplainKey\n  | typeof lokiQueryEditorRawQueryKey;\n\nfunction getFlagValue(key: QueryEditorFlags, defaultValue = false): boolean {\n  const val = store.get(key);\n  return val === undefined ? defaultValue : Boolean(parseInt(val, 10));\n}\n\nfunction setFlagValue(key: QueryEditorFlags, value: boolean) {\n  store.set(key, value ? '1' : '0');\n}\n\ntype UseFlagHookReturnType = { flag: boolean; setFlag: (val: boolean) => void };\n\n/**\n *\n * Use and store value of explain/rawquery switch in local storage.\n * Needs to be a hook with local state to trigger re-renders.\n */\nexport function useFlag(key: QueryEditorFlags, defaultValue = false): UseFlagHookReturnType {\n  const [flag, updateFlag] = useState(getFlagValue(key, defaultValue));\n  const setter = useCallback(\n    (value: boolean) => {\n      setFlagValue(key, value);\n      updateFlag(value);\n    },\n    [key]\n  );\n\n  return { flag, setFlag: setter };\n}\n","import { DataQuery, DataSourceJsonData, QueryResultMeta, ScopedVars } from '@grafana/data';\n\nimport { QueryEditorMode } from './querybuilder/shared/types';\n\nexport interface PromQuery extends DataQuery {\n  expr: string;\n  format?: string;\n  instant?: boolean;\n  range?: boolean;\n  exemplar?: boolean;\n  hinting?: boolean;\n  interval?: string;\n  intervalFactor?: number;\n  // Timezone offset to align start & end time on backend\n  utcOffsetSec?: number;\n  legendFormat?: string;\n  valueWithRefId?: boolean;\n  requestId?: string;\n  showingGraph?: boolean;\n  showingTable?: boolean;\n  /** Code, Builder or Explain */\n  editorMode?: QueryEditorMode;\n}\n\nexport interface PromOptions extends DataSourceJsonData {\n  timeInterval?: string;\n  queryTimeout?: string;\n  httpMethod?: string;\n  directUrl?: string;\n  customQueryParameters?: string;\n  disableMetricsLookup?: boolean;\n  exemplarTraceIdDestinations?: ExemplarTraceIdDestination[];\n}\n\nexport enum PromQueryType {\n  timeSeriesQuery = 'timeSeriesQuery',\n}\n\nexport type ExemplarTraceIdDestination = {\n  name: string;\n  url?: string;\n  urlDisplayLabel?: string;\n  datasourceUid?: string;\n};\n\nexport interface PromQueryRequest extends PromQuery {\n  step?: number;\n  requestId?: string;\n  start: number;\n  end: number;\n  headers?: any;\n}\n\nexport interface PromMetricsMetadataItem {\n  type: string;\n  help: string;\n  unit?: string;\n}\n\nexport interface PromMetricsMetadata {\n  [metric: string]: PromMetricsMetadataItem;\n}\n\nexport interface PromDataSuccessResponse<T = PromData> {\n  status: 'success';\n  data: T;\n}\n\nexport interface PromDataErrorResponse<T = PromData> {\n  status: 'error';\n  errorType: string;\n  error: string;\n  data: T;\n}\n\nexport type PromData = PromMatrixData | PromVectorData | PromScalarData | PromExemplarData[];\n\nexport interface Labels {\n  [index: string]: any;\n}\n\nexport interface Exemplar {\n  labels: Labels;\n  value: number;\n  timestamp: number;\n}\n\nexport interface PromExemplarData {\n  seriesLabels: PromMetric;\n  exemplars: Exemplar[];\n}\n\nexport interface PromVectorData {\n  resultType: 'vector';\n  result: Array<{\n    metric: PromMetric;\n    value: PromValue;\n  }>;\n}\n\nexport interface PromMatrixData {\n  resultType: 'matrix';\n  result: Array<{\n    metric: PromMetric;\n    values: PromValue[];\n  }>;\n}\n\nexport interface PromScalarData {\n  resultType: 'scalar';\n  result: PromValue;\n}\n\nexport type PromValue = [number, any];\n\nexport interface PromMetric {\n  __name__?: string;\n  [index: string]: any;\n}\n\nexport function isMatrixData(result: MatrixOrVectorResult): result is PromMatrixData['result'][0] {\n  return 'values' in result;\n}\n\nexport function isExemplarData(result: PromData): result is PromExemplarData[] {\n  if (result == null || !Array.isArray(result)) {\n    return false;\n  }\n  return result.length ? 'exemplars' in result[0] : false;\n}\n\nexport type MatrixOrVectorResult = PromMatrixData['result'][0] | PromVectorData['result'][0];\n\nexport interface TransformOptions {\n  format?: string;\n  step?: number;\n  legendFormat?: string;\n  start: number;\n  end: number;\n  query: string;\n  responseListLength: number;\n  scopedVars?: ScopedVars;\n  refId: string;\n  valueWithRefId?: boolean;\n  meta: QueryResultMeta;\n}\n\nexport interface PromLabelQueryResponse {\n  data: {\n    status: string;\n    data: string[];\n  };\n  cancelled?: boolean;\n}\n\n/**\n * Auto = query.legendFormat == '__auto'\n * Verbose = query.legendFormat == null/undefined/''\n * Custom query.legendFormat.length > 0 && query.legendFormat !== '__auto'\n */\nexport enum LegendFormatMode {\n  Auto = '__auto',\n  Verbose = '__verbose',\n  Custom = '__custom',\n}\n","import { CoreApp } from '@grafana/data';\n\nimport store from '../store';\nimport { LegendFormatMode, PromQuery } from '../types';\n\nimport { QueryEditorMode } from './shared/types';\n\nconst queryEditorModeDefaultLocalStorageKey = 'PrometheusQueryEditorModeDefault';\n\nexport function changeEditorMode(query: PromQuery, editorMode: QueryEditorMode, onChange: (query: PromQuery) => void) {\n  // If empty query store new mode as default\n  if (query.expr === '') {\n    store.set(queryEditorModeDefaultLocalStorageKey, editorMode);\n  }\n\n  onChange({ ...query, editorMode });\n}\n\nfunction getDefaultEditorMode(expr: string) {\n  // If we already have an expression default to code view\n  if (expr != null && expr !== '') {\n    return QueryEditorMode.Code;\n  }\n\n  const value = store.get(queryEditorModeDefaultLocalStorageKey) as QueryEditorMode;\n  switch (value) {\n    case QueryEditorMode.Builder:\n    case QueryEditorMode.Code:\n      return value;\n    default:\n      return QueryEditorMode.Builder;\n  }\n}\n\n/**\n * Returns query with defaults, and boolean true/false depending on change was required\n */\nexport function getQueryWithDefaults(query: PromQuery, app: CoreApp | undefined): PromQuery {\n  let result = query;\n\n  if (!query.editorMode) {\n    result = { ...query, editorMode: getDefaultEditorMode(query.expr) };\n  }\n\n  if (query.expr == null) {\n    result = { ...result, expr: '', legendFormat: LegendFormatMode.Auto };\n  }\n\n  if (query.range == null && query.instant == null) {\n    // Default to range query\n    result = { ...result, range: true };\n\n    // In explore we default to both instant & range\n    if (app === CoreApp.Explore) {\n      result.instant = true;\n    }\n  }\n\n  return result;\n}\n","function n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!n.constructor[L]||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?(n.delete(r),n.add(t)):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function O(n){g(n),n.p.forEach(S),n.p=null}function g(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.O=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.g||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(O(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),O(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(r,i){return A(n,e,o,r,i,t)})),x(n,o,!1),t&&n.u&&b(\"Patches\").R(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),r(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!r(v))return;e.m=!1}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),n.h.F&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,r,t){var e=s(r)?b(\"MapSet\").N(r,t):v(r)?b(\"MapSet\").T(r,t):n.g?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function D(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(r,c),u.I=!1}else e=F(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function F(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return\"production\"!==process.env.NODE_ENV&&f(r),en.get(r,n)},set:function(r){var t=this[Q];\"production\"!==process.env.NODE_ENV&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.O&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.D,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=\"\"+i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},R:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=R(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.O&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.D.set(n,!0),t.o.set(n,r),t.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.D.set(n,!1):r.D.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(r){n.D.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=R(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{N:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=R(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.D[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&\"number\"!=typeof t&&(void 0!==t||r in n.o)||(n.o[r]=t,n.D[r]=!0,!0)},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.D[r]=!1,E(n),k(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.g=B,this.F=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=R(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?O(c):g(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw O(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.F&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,g(i),o},i.finishDraft=function(r,t){var e=r&&r[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(r){r&&!B&&n(20),this.g=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,D as current,J as enableAllPlugins,N as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,r as isDraft,t as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nvar __defProp = Object.defineProperty;\r\nvar __defProps = Object.defineProperties;\r\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\r\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\r\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\r\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\r\nvar __defNormalProp = function (obj, key, value) { return key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value: value }) : obj[key] = value; };\r\nvar __spreadValues = function (a, b) {\r\n    for (var prop in b || (b = {}))\r\n        if (__hasOwnProp.call(b, prop))\r\n            __defNormalProp(a, prop, b[prop]);\r\n    if (__getOwnPropSymbols)\r\n        for (var _i = 0, _c = __getOwnPropSymbols(b); _i < _c.length; _i++) {\r\n            var prop = _c[_i];\r\n            if (__propIsEnum.call(b, prop))\r\n                __defNormalProp(a, prop, b[prop]);\r\n        }\r\n    return a;\r\n};\r\nvar __spreadProps = function (a, b) { return __defProps(a, __getOwnPropDescs(b)); };\r\nvar __async = function (__this, __arguments, generator) {\r\n    return new Promise(function (resolve, reject) {\r\n        var fulfilled = function (value) {\r\n            try {\r\n                step(generator.next(value));\r\n            }\r\n            catch (e) {\r\n                reject(e);\r\n            }\r\n        };\r\n        var rejected = function (value) {\r\n            try {\r\n                step(generator.throw(value));\r\n            }\r\n            catch (e) {\r\n                reject(e);\r\n            }\r\n        };\r\n        var step = function (x) { return x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected); };\r\n        step((generator = generator.apply(__this, __arguments)).next());\r\n    });\r\n};\r\n// src/index.ts\r\nimport { enableES5 } from \"immer\";\r\nexport * from \"redux\";\r\nimport { default as default2, current as current2, freeze, original, isDraft as isDraft4 } from \"immer\";\r\nimport { createSelector as createSelector2 } from \"reselect\";\r\n// src/createDraftSafeSelector.ts\r\nimport { current, isDraft } from \"immer\";\r\nimport { createSelector } from \"reselect\";\r\nvar createDraftSafeSelector = function () {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var selector = createSelector.apply(void 0, args);\r\n    var wrappedSelector = function (value) {\r\n        var rest = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            rest[_i - 1] = arguments[_i];\r\n        }\r\n        return selector.apply(void 0, __spreadArray([isDraft(value) ? current(value) : value], rest));\r\n    };\r\n    return wrappedSelector;\r\n};\r\n// src/configureStore.ts\r\nimport { createStore, compose as compose2, applyMiddleware, combineReducers } from \"redux\";\r\n// src/devtoolsExtension.ts\r\nimport { compose } from \"redux\";\r\nvar composeWithDevTools = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : function () {\r\n    if (arguments.length === 0)\r\n        return void 0;\r\n    if (typeof arguments[0] === \"object\")\r\n        return compose;\r\n    return compose.apply(null, arguments);\r\n};\r\nvar devToolsEnhancer = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__ : function () {\r\n    return function (noop2) {\r\n        return noop2;\r\n    };\r\n};\r\n// src/isPlainObject.ts\r\nfunction isPlainObject(value) {\r\n    if (typeof value !== \"object\" || value === null)\r\n        return false;\r\n    var proto = Object.getPrototypeOf(value);\r\n    if (proto === null)\r\n        return true;\r\n    var baseProto = proto;\r\n    while (Object.getPrototypeOf(baseProto) !== null) {\r\n        baseProto = Object.getPrototypeOf(baseProto);\r\n    }\r\n    return proto === baseProto;\r\n}\r\n// src/getDefaultMiddleware.ts\r\nimport thunkMiddleware from \"redux-thunk\";\r\n// src/utils.ts\r\nimport createNextState, { isDraftable } from \"immer\";\r\nfunction getTimeMeasureUtils(maxDelay, fnName) {\r\n    var elapsed = 0;\r\n    return {\r\n        measureTime: function (fn) {\r\n            var started = Date.now();\r\n            try {\r\n                return fn();\r\n            }\r\n            finally {\r\n                var finished = Date.now();\r\n                elapsed += finished - started;\r\n            }\r\n        },\r\n        warnIfExceeded: function () {\r\n            if (elapsed > maxDelay) {\r\n                console.warn(fnName + \" took \" + elapsed + \"ms, which is more than the warning threshold of \" + maxDelay + \"ms. \\nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\\nIt is disabled in production builds, so you don't need to worry about that.\");\r\n            }\r\n        }\r\n    };\r\n}\r\nvar MiddlewareArray = /** @class */ (function (_super) {\r\n    __extends(MiddlewareArray, _super);\r\n    function MiddlewareArray() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var _this = _super.apply(this, args) || this;\r\n        Object.setPrototypeOf(_this, MiddlewareArray.prototype);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MiddlewareArray, Symbol.species, {\r\n        get: function () {\r\n            return MiddlewareArray;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    MiddlewareArray.prototype.concat = function () {\r\n        var arr = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            arr[_i] = arguments[_i];\r\n        }\r\n        return _super.prototype.concat.apply(this, arr);\r\n    };\r\n    MiddlewareArray.prototype.prepend = function () {\r\n        var arr = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            arr[_i] = arguments[_i];\r\n        }\r\n        if (arr.length === 1 && Array.isArray(arr[0])) {\r\n            return new (MiddlewareArray.bind.apply(MiddlewareArray, __spreadArray([void 0], arr[0].concat(this))))();\r\n        }\r\n        return new (MiddlewareArray.bind.apply(MiddlewareArray, __spreadArray([void 0], arr.concat(this))))();\r\n    };\r\n    return MiddlewareArray;\r\n}(Array));\r\nfunction freezeDraftable(val) {\r\n    return isDraftable(val) ? createNextState(val, function () {\r\n    }) : val;\r\n}\r\n// src/immutableStateInvariantMiddleware.ts\r\nvar isProduction = process.env.NODE_ENV === \"production\";\r\nvar prefix = \"Invariant failed\";\r\nfunction invariant(condition, message) {\r\n    if (condition) {\r\n        return;\r\n    }\r\n    if (isProduction) {\r\n        throw new Error(prefix);\r\n    }\r\n    throw new Error(prefix + \": \" + (message || \"\"));\r\n}\r\nfunction stringify(obj, serializer, indent, decycler) {\r\n    return JSON.stringify(obj, getSerialize(serializer, decycler), indent);\r\n}\r\nfunction getSerialize(serializer, decycler) {\r\n    var stack = [], keys = [];\r\n    if (!decycler)\r\n        decycler = function (_, value) {\r\n            if (stack[0] === value)\r\n                return \"[Circular ~]\";\r\n            return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\";\r\n        };\r\n    return function (key, value) {\r\n        if (stack.length > 0) {\r\n            var thisPos = stack.indexOf(this);\r\n            ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\r\n            ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\r\n            if (~stack.indexOf(value))\r\n                value = decycler.call(this, key, value);\r\n        }\r\n        else\r\n            stack.push(value);\r\n        return serializer == null ? value : serializer.call(this, key, value);\r\n    };\r\n}\r\nfunction isImmutableDefault(value) {\r\n    return typeof value !== \"object\" || value == null || Object.isFrozen(value);\r\n}\r\nfunction trackForMutations(isImmutable, ignorePaths, obj) {\r\n    var trackedProperties = trackProperties(isImmutable, ignorePaths, obj);\r\n    return {\r\n        detectMutations: function () {\r\n            return detectMutations(isImmutable, ignorePaths, trackedProperties, obj);\r\n        }\r\n    };\r\n}\r\nfunction trackProperties(isImmutable, ignorePaths, obj, path) {\r\n    if (ignorePaths === void 0) { ignorePaths = []; }\r\n    if (path === void 0) { path = \"\"; }\r\n    var tracked = { value: obj };\r\n    if (!isImmutable(obj)) {\r\n        tracked.children = {};\r\n        for (var key in obj) {\r\n            var childPath = path ? path + \".\" + key : key;\r\n            if (ignorePaths.length && ignorePaths.indexOf(childPath) !== -1) {\r\n                continue;\r\n            }\r\n            tracked.children[key] = trackProperties(isImmutable, ignorePaths, obj[key], childPath);\r\n        }\r\n    }\r\n    return tracked;\r\n}\r\nfunction detectMutations(isImmutable, ignorePaths, trackedProperty, obj, sameParentRef, path) {\r\n    if (ignorePaths === void 0) { ignorePaths = []; }\r\n    if (sameParentRef === void 0) { sameParentRef = false; }\r\n    if (path === void 0) { path = \"\"; }\r\n    var prevObj = trackedProperty ? trackedProperty.value : void 0;\r\n    var sameRef = prevObj === obj;\r\n    if (sameParentRef && !sameRef && !Number.isNaN(obj)) {\r\n        return { wasMutated: true, path: path };\r\n    }\r\n    if (isImmutable(prevObj) || isImmutable(obj)) {\r\n        return { wasMutated: false };\r\n    }\r\n    var keysToDetect = {};\r\n    for (var key in trackedProperty.children) {\r\n        keysToDetect[key] = true;\r\n    }\r\n    for (var key in obj) {\r\n        keysToDetect[key] = true;\r\n    }\r\n    for (var key in keysToDetect) {\r\n        var childPath = path ? path + \".\" + key : key;\r\n        if (ignorePaths.length && ignorePaths.indexOf(childPath) !== -1) {\r\n            continue;\r\n        }\r\n        var result = detectMutations(isImmutable, ignorePaths, trackedProperty.children[key], obj[key], sameRef, childPath);\r\n        if (result.wasMutated) {\r\n            return result;\r\n        }\r\n    }\r\n    return { wasMutated: false };\r\n}\r\nfunction createImmutableStateInvariantMiddleware(options) {\r\n    if (options === void 0) { options = {}; }\r\n    if (process.env.NODE_ENV === \"production\") {\r\n        return function () { return function (next) { return function (action) { return next(action); }; }; };\r\n    }\r\n    var _c = options.isImmutable, isImmutable = _c === void 0 ? isImmutableDefault : _c, ignoredPaths = options.ignoredPaths, _d = options.warnAfter, warnAfter = _d === void 0 ? 32 : _d, ignore = options.ignore;\r\n    ignoredPaths = ignoredPaths || ignore;\r\n    var track = trackForMutations.bind(null, isImmutable, ignoredPaths);\r\n    return function (_c) {\r\n        var getState = _c.getState;\r\n        var state = getState();\r\n        var tracker = track(state);\r\n        var result;\r\n        return function (next) { return function (action) {\r\n            var measureUtils = getTimeMeasureUtils(warnAfter, \"ImmutableStateInvariantMiddleware\");\r\n            measureUtils.measureTime(function () {\r\n                state = getState();\r\n                result = tracker.detectMutations();\r\n                tracker = track(state);\r\n                invariant(!result.wasMutated, \"A state mutation was detected between dispatches, in the path '\" + (result.path || \"\") + \"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)\");\r\n            });\r\n            var dispatchedAction = next(action);\r\n            measureUtils.measureTime(function () {\r\n                state = getState();\r\n                result = tracker.detectMutations();\r\n                tracker = track(state);\r\n                result.wasMutated && invariant(!result.wasMutated, \"A state mutation was detected inside a dispatch, in the path: \" + (result.path || \"\") + \". Take a look at the reducer(s) handling the action \" + stringify(action) + \". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)\");\r\n            });\r\n            measureUtils.warnIfExceeded();\r\n            return dispatchedAction;\r\n        }; };\r\n    };\r\n}\r\n// src/serializableStateInvariantMiddleware.ts\r\nfunction isPlain(val) {\r\n    var type = typeof val;\r\n    return val == null || type === \"string\" || type === \"boolean\" || type === \"number\" || Array.isArray(val) || isPlainObject(val);\r\n}\r\nfunction findNonSerializableValue(value, path, isSerializable, getEntries, ignoredPaths) {\r\n    if (path === void 0) { path = \"\"; }\r\n    if (isSerializable === void 0) { isSerializable = isPlain; }\r\n    if (ignoredPaths === void 0) { ignoredPaths = []; }\r\n    var foundNestedSerializable;\r\n    if (!isSerializable(value)) {\r\n        return {\r\n            keyPath: path || \"<root>\",\r\n            value: value\r\n        };\r\n    }\r\n    if (typeof value !== \"object\" || value === null) {\r\n        return false;\r\n    }\r\n    var entries = getEntries != null ? getEntries(value) : Object.entries(value);\r\n    var hasIgnoredPaths = ignoredPaths.length > 0;\r\n    for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\r\n        var _c = entries_1[_i], key = _c[0], nestedValue = _c[1];\r\n        var nestedPath = path ? path + \".\" + key : key;\r\n        if (hasIgnoredPaths && ignoredPaths.indexOf(nestedPath) >= 0) {\r\n            continue;\r\n        }\r\n        if (!isSerializable(nestedValue)) {\r\n            return {\r\n                keyPath: nestedPath,\r\n                value: nestedValue\r\n            };\r\n        }\r\n        if (typeof nestedValue === \"object\") {\r\n            foundNestedSerializable = findNonSerializableValue(nestedValue, nestedPath, isSerializable, getEntries, ignoredPaths);\r\n            if (foundNestedSerializable) {\r\n                return foundNestedSerializable;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction createSerializableStateInvariantMiddleware(options) {\r\n    if (options === void 0) { options = {}; }\r\n    if (process.env.NODE_ENV === \"production\") {\r\n        return function () { return function (next) { return function (action) { return next(action); }; }; };\r\n    }\r\n    var _c = options.isSerializable, isSerializable = _c === void 0 ? isPlain : _c, getEntries = options.getEntries, _d = options.ignoredActions, ignoredActions = _d === void 0 ? [] : _d, _e = options.ignoredActionPaths, ignoredActionPaths = _e === void 0 ? [\"meta.arg\", \"meta.baseQueryMeta\"] : _e, _f = options.ignoredPaths, ignoredPaths = _f === void 0 ? [] : _f, _g = options.warnAfter, warnAfter = _g === void 0 ? 32 : _g, _h = options.ignoreState, ignoreState = _h === void 0 ? false : _h, _j = options.ignoreActions, ignoreActions = _j === void 0 ? false : _j;\r\n    return function (storeAPI) { return function (next) { return function (action) {\r\n        var result = next(action);\r\n        var measureUtils = getTimeMeasureUtils(warnAfter, \"SerializableStateInvariantMiddleware\");\r\n        if (!ignoreActions && !(ignoredActions.length && ignoredActions.indexOf(action.type) !== -1)) {\r\n            measureUtils.measureTime(function () {\r\n                var foundActionNonSerializableValue = findNonSerializableValue(action, \"\", isSerializable, getEntries, ignoredActionPaths);\r\n                if (foundActionNonSerializableValue) {\r\n                    var keyPath = foundActionNonSerializableValue.keyPath, value = foundActionNonSerializableValue.value;\r\n                    console.error(\"A non-serializable value was detected in an action, in the path: `\" + keyPath + \"`. Value:\", value, \"\\nTake a look at the logic that dispatched this action: \", action, \"\\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)\", \"\\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)\");\r\n                }\r\n            });\r\n        }\r\n        if (!ignoreState) {\r\n            measureUtils.measureTime(function () {\r\n                var state = storeAPI.getState();\r\n                var foundStateNonSerializableValue = findNonSerializableValue(state, \"\", isSerializable, getEntries, ignoredPaths);\r\n                if (foundStateNonSerializableValue) {\r\n                    var keyPath = foundStateNonSerializableValue.keyPath, value = foundStateNonSerializableValue.value;\r\n                    console.error(\"A non-serializable value was detected in the state, in the path: `\" + keyPath + \"`. Value:\", value, \"\\nTake a look at the reducer(s) handling this action type: \" + action.type + \".\\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)\");\r\n                }\r\n            });\r\n            measureUtils.warnIfExceeded();\r\n        }\r\n        return result;\r\n    }; }; };\r\n}\r\n// src/getDefaultMiddleware.ts\r\nfunction isBoolean(x) {\r\n    return typeof x === \"boolean\";\r\n}\r\nfunction curryGetDefaultMiddleware() {\r\n    return function curriedGetDefaultMiddleware(options) {\r\n        return getDefaultMiddleware(options);\r\n    };\r\n}\r\nfunction getDefaultMiddleware(options) {\r\n    if (options === void 0) { options = {}; }\r\n    var _c = options.thunk, thunk = _c === void 0 ? true : _c, _d = options.immutableCheck, immutableCheck = _d === void 0 ? true : _d, _e = options.serializableCheck, serializableCheck = _e === void 0 ? true : _e;\r\n    var middlewareArray = new MiddlewareArray();\r\n    if (thunk) {\r\n        if (isBoolean(thunk)) {\r\n            middlewareArray.push(thunkMiddleware);\r\n        }\r\n        else {\r\n            middlewareArray.push(thunkMiddleware.withExtraArgument(thunk.extraArgument));\r\n        }\r\n    }\r\n    if (process.env.NODE_ENV !== \"production\") {\r\n        if (immutableCheck) {\r\n            var immutableOptions = {};\r\n            if (!isBoolean(immutableCheck)) {\r\n                immutableOptions = immutableCheck;\r\n            }\r\n            middlewareArray.unshift(createImmutableStateInvariantMiddleware(immutableOptions));\r\n        }\r\n        if (serializableCheck) {\r\n            var serializableOptions = {};\r\n            if (!isBoolean(serializableCheck)) {\r\n                serializableOptions = serializableCheck;\r\n            }\r\n            middlewareArray.push(createSerializableStateInvariantMiddleware(serializableOptions));\r\n        }\r\n    }\r\n    return middlewareArray;\r\n}\r\n// src/configureStore.ts\r\nvar IS_PRODUCTION = process.env.NODE_ENV === \"production\";\r\nfunction configureStore(options) {\r\n    var curriedGetDefaultMiddleware = curryGetDefaultMiddleware();\r\n    var _c = options || {}, _d = _c.reducer, reducer = _d === void 0 ? void 0 : _d, _e = _c.middleware, middleware = _e === void 0 ? curriedGetDefaultMiddleware() : _e, _f = _c.devTools, devTools = _f === void 0 ? true : _f, _g = _c.preloadedState, preloadedState = _g === void 0 ? void 0 : _g, _h = _c.enhancers, enhancers = _h === void 0 ? void 0 : _h;\r\n    var rootReducer;\r\n    if (typeof reducer === \"function\") {\r\n        rootReducer = reducer;\r\n    }\r\n    else if (isPlainObject(reducer)) {\r\n        rootReducer = combineReducers(reducer);\r\n    }\r\n    else {\r\n        throw new Error('\"reducer\" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');\r\n    }\r\n    var finalMiddleware = middleware;\r\n    if (typeof finalMiddleware === \"function\") {\r\n        finalMiddleware = finalMiddleware(curriedGetDefaultMiddleware);\r\n        if (!IS_PRODUCTION && !Array.isArray(finalMiddleware)) {\r\n            throw new Error(\"when using a middleware builder function, an array of middleware must be returned\");\r\n        }\r\n    }\r\n    if (!IS_PRODUCTION && finalMiddleware.some(function (item) { return typeof item !== \"function\"; })) {\r\n        throw new Error(\"each middleware provided to configureStore must be a function\");\r\n    }\r\n    var middlewareEnhancer = applyMiddleware.apply(void 0, finalMiddleware);\r\n    var finalCompose = compose2;\r\n    if (devTools) {\r\n        finalCompose = composeWithDevTools(__spreadValues({\r\n            trace: !IS_PRODUCTION\r\n        }, typeof devTools === \"object\" && devTools));\r\n    }\r\n    var storeEnhancers = [middlewareEnhancer];\r\n    if (Array.isArray(enhancers)) {\r\n        storeEnhancers = __spreadArray([middlewareEnhancer], enhancers);\r\n    }\r\n    else if (typeof enhancers === \"function\") {\r\n        storeEnhancers = enhancers(storeEnhancers);\r\n    }\r\n    var composedEnhancer = finalCompose.apply(void 0, storeEnhancers);\r\n    return createStore(rootReducer, preloadedState, composedEnhancer);\r\n}\r\n// src/createAction.ts\r\nfunction createAction(type, prepareAction) {\r\n    function actionCreator() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (prepareAction) {\r\n            var prepared = prepareAction.apply(void 0, args);\r\n            if (!prepared) {\r\n                throw new Error(\"prepareAction did not return an object\");\r\n            }\r\n            return __spreadValues(__spreadValues({\r\n                type: type,\r\n                payload: prepared.payload\r\n            }, \"meta\" in prepared && { meta: prepared.meta }), \"error\" in prepared && { error: prepared.error });\r\n        }\r\n        return { type: type, payload: args[0] };\r\n    }\r\n    actionCreator.toString = function () { return \"\" + type; };\r\n    actionCreator.type = type;\r\n    actionCreator.match = function (action) { return action.type === type; };\r\n    return actionCreator;\r\n}\r\nfunction isFSA(action) {\r\n    return isPlainObject(action) && typeof action.type === \"string\" && Object.keys(action).every(isValidKey);\r\n}\r\nfunction isValidKey(key) {\r\n    return [\"type\", \"payload\", \"error\", \"meta\"].indexOf(key) > -1;\r\n}\r\nfunction getType(actionCreator) {\r\n    return \"\" + actionCreator;\r\n}\r\n// src/createReducer.ts\r\nimport createNextState2, { isDraft as isDraft2, isDraftable as isDraftable2 } from \"immer\";\r\n// src/mapBuilders.ts\r\nfunction executeReducerBuilderCallback(builderCallback) {\r\n    var actionsMap = {};\r\n    var actionMatchers = [];\r\n    var defaultCaseReducer;\r\n    var builder = {\r\n        addCase: function (typeOrActionCreator, reducer) {\r\n            if (process.env.NODE_ENV !== \"production\") {\r\n                if (actionMatchers.length > 0) {\r\n                    throw new Error(\"`builder.addCase` should only be called before calling `builder.addMatcher`\");\r\n                }\r\n                if (defaultCaseReducer) {\r\n                    throw new Error(\"`builder.addCase` should only be called before calling `builder.addDefaultCase`\");\r\n                }\r\n            }\r\n            var type = typeof typeOrActionCreator === \"string\" ? typeOrActionCreator : typeOrActionCreator.type;\r\n            if (type in actionsMap) {\r\n                throw new Error(\"addCase cannot be called with two reducers for the same action type\");\r\n            }\r\n            actionsMap[type] = reducer;\r\n            return builder;\r\n        },\r\n        addMatcher: function (matcher, reducer) {\r\n            if (process.env.NODE_ENV !== \"production\") {\r\n                if (defaultCaseReducer) {\r\n                    throw new Error(\"`builder.addMatcher` should only be called before calling `builder.addDefaultCase`\");\r\n                }\r\n            }\r\n            actionMatchers.push({ matcher: matcher, reducer: reducer });\r\n            return builder;\r\n        },\r\n        addDefaultCase: function (reducer) {\r\n            if (process.env.NODE_ENV !== \"production\") {\r\n                if (defaultCaseReducer) {\r\n                    throw new Error(\"`builder.addDefaultCase` can only be called once\");\r\n                }\r\n            }\r\n            defaultCaseReducer = reducer;\r\n            return builder;\r\n        }\r\n    };\r\n    builderCallback(builder);\r\n    return [actionsMap, actionMatchers, defaultCaseReducer];\r\n}\r\n// src/createReducer.ts\r\nfunction isStateFunction(x) {\r\n    return typeof x === \"function\";\r\n}\r\nfunction createReducer(initialState, mapOrBuilderCallback, actionMatchers, defaultCaseReducer) {\r\n    if (actionMatchers === void 0) { actionMatchers = []; }\r\n    var _c = typeof mapOrBuilderCallback === \"function\" ? executeReducerBuilderCallback(mapOrBuilderCallback) : [mapOrBuilderCallback, actionMatchers, defaultCaseReducer], actionsMap = _c[0], finalActionMatchers = _c[1], finalDefaultCaseReducer = _c[2];\r\n    var getInitialState;\r\n    if (isStateFunction(initialState)) {\r\n        getInitialState = function () { return freezeDraftable(initialState()); };\r\n    }\r\n    else {\r\n        var frozenInitialState_1 = freezeDraftable(initialState);\r\n        getInitialState = function () { return frozenInitialState_1; };\r\n    }\r\n    function reducer(state, action) {\r\n        if (state === void 0) { state = getInitialState(); }\r\n        var caseReducers = __spreadArray([\r\n            actionsMap[action.type]\r\n        ], finalActionMatchers.filter(function (_c) {\r\n            var matcher = _c.matcher;\r\n            return matcher(action);\r\n        }).map(function (_c) {\r\n            var reducer2 = _c.reducer;\r\n            return reducer2;\r\n        }));\r\n        if (caseReducers.filter(function (cr) { return !!cr; }).length === 0) {\r\n            caseReducers = [finalDefaultCaseReducer];\r\n        }\r\n        return caseReducers.reduce(function (previousState, caseReducer) {\r\n            if (caseReducer) {\r\n                if (isDraft2(previousState)) {\r\n                    var draft = previousState;\r\n                    var result = caseReducer(draft, action);\r\n                    if (result === void 0) {\r\n                        return previousState;\r\n                    }\r\n                    return result;\r\n                }\r\n                else if (!isDraftable2(previousState)) {\r\n                    var result = caseReducer(previousState, action);\r\n                    if (result === void 0) {\r\n                        if (previousState === null) {\r\n                            return previousState;\r\n                        }\r\n                        throw Error(\"A case reducer on a non-draftable value must not return undefined\");\r\n                    }\r\n                    return result;\r\n                }\r\n                else {\r\n                    return createNextState2(previousState, function (draft) {\r\n                        return caseReducer(draft, action);\r\n                    });\r\n                }\r\n            }\r\n            return previousState;\r\n        }, state);\r\n    }\r\n    reducer.getInitialState = getInitialState;\r\n    return reducer;\r\n}\r\n// src/createSlice.ts\r\nfunction getType2(slice, actionKey) {\r\n    return slice + \"/\" + actionKey;\r\n}\r\nfunction createSlice(options) {\r\n    var name = options.name;\r\n    if (!name) {\r\n        throw new Error(\"`name` is a required option for createSlice\");\r\n    }\r\n    if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"development\") {\r\n        if (options.initialState === void 0) {\r\n            console.error(\"You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`\");\r\n        }\r\n    }\r\n    var initialState = typeof options.initialState == \"function\" ? options.initialState : freezeDraftable(options.initialState);\r\n    var reducers = options.reducers || {};\r\n    var reducerNames = Object.keys(reducers);\r\n    var sliceCaseReducersByName = {};\r\n    var sliceCaseReducersByType = {};\r\n    var actionCreators = {};\r\n    reducerNames.forEach(function (reducerName) {\r\n        var maybeReducerWithPrepare = reducers[reducerName];\r\n        var type = getType2(name, reducerName);\r\n        var caseReducer;\r\n        var prepareCallback;\r\n        if (\"reducer\" in maybeReducerWithPrepare) {\r\n            caseReducer = maybeReducerWithPrepare.reducer;\r\n            prepareCallback = maybeReducerWithPrepare.prepare;\r\n        }\r\n        else {\r\n            caseReducer = maybeReducerWithPrepare;\r\n        }\r\n        sliceCaseReducersByName[reducerName] = caseReducer;\r\n        sliceCaseReducersByType[type] = caseReducer;\r\n        actionCreators[reducerName] = prepareCallback ? createAction(type, prepareCallback) : createAction(type);\r\n    });\r\n    function buildReducer() {\r\n        var _c = typeof options.extraReducers === \"function\" ? executeReducerBuilderCallback(options.extraReducers) : [options.extraReducers], _d = _c[0], extraReducers = _d === void 0 ? {} : _d, _e = _c[1], actionMatchers = _e === void 0 ? [] : _e, _f = _c[2], defaultCaseReducer = _f === void 0 ? void 0 : _f;\r\n        var finalCaseReducers = __spreadValues(__spreadValues({}, extraReducers), sliceCaseReducersByType);\r\n        return createReducer(initialState, finalCaseReducers, actionMatchers, defaultCaseReducer);\r\n    }\r\n    var _reducer;\r\n    return {\r\n        name: name,\r\n        reducer: function (state, action) {\r\n            if (!_reducer)\r\n                _reducer = buildReducer();\r\n            return _reducer(state, action);\r\n        },\r\n        actions: actionCreators,\r\n        caseReducers: sliceCaseReducersByName,\r\n        getInitialState: function () {\r\n            if (!_reducer)\r\n                _reducer = buildReducer();\r\n            return _reducer.getInitialState();\r\n        }\r\n    };\r\n}\r\n// src/entities/entity_state.ts\r\nfunction getInitialEntityState() {\r\n    return {\r\n        ids: [],\r\n        entities: {}\r\n    };\r\n}\r\nfunction createInitialStateFactory() {\r\n    function getInitialState(additionalState) {\r\n        if (additionalState === void 0) { additionalState = {}; }\r\n        return Object.assign(getInitialEntityState(), additionalState);\r\n    }\r\n    return { getInitialState: getInitialState };\r\n}\r\n// src/entities/state_selectors.ts\r\nfunction createSelectorsFactory() {\r\n    function getSelectors(selectState) {\r\n        var selectIds = function (state) { return state.ids; };\r\n        var selectEntities = function (state) { return state.entities; };\r\n        var selectAll = createDraftSafeSelector(selectIds, selectEntities, function (ids, entities) { return ids.map(function (id) { return entities[id]; }); });\r\n        var selectId = function (_, id) { return id; };\r\n        var selectById = function (entities, id) { return entities[id]; };\r\n        var selectTotal = createDraftSafeSelector(selectIds, function (ids) { return ids.length; });\r\n        if (!selectState) {\r\n            return {\r\n                selectIds: selectIds,\r\n                selectEntities: selectEntities,\r\n                selectAll: selectAll,\r\n                selectTotal: selectTotal,\r\n                selectById: createDraftSafeSelector(selectEntities, selectId, selectById)\r\n            };\r\n        }\r\n        var selectGlobalizedEntities = createDraftSafeSelector(selectState, selectEntities);\r\n        return {\r\n            selectIds: createDraftSafeSelector(selectState, selectIds),\r\n            selectEntities: selectGlobalizedEntities,\r\n            selectAll: createDraftSafeSelector(selectState, selectAll),\r\n            selectTotal: createDraftSafeSelector(selectState, selectTotal),\r\n            selectById: createDraftSafeSelector(selectGlobalizedEntities, selectId, selectById)\r\n        };\r\n    }\r\n    return { getSelectors: getSelectors };\r\n}\r\n// src/entities/state_adapter.ts\r\nimport createNextState3, { isDraft as isDraft3 } from \"immer\";\r\nfunction createSingleArgumentStateOperator(mutator) {\r\n    var operator = createStateOperator(function (_, state) { return mutator(state); });\r\n    return function operation(state) {\r\n        return operator(state, void 0);\r\n    };\r\n}\r\nfunction createStateOperator(mutator) {\r\n    return function operation(state, arg) {\r\n        function isPayloadActionArgument(arg2) {\r\n            return isFSA(arg2);\r\n        }\r\n        var runMutator = function (draft) {\r\n            if (isPayloadActionArgument(arg)) {\r\n                mutator(arg.payload, draft);\r\n            }\r\n            else {\r\n                mutator(arg, draft);\r\n            }\r\n        };\r\n        if (isDraft3(state)) {\r\n            runMutator(state);\r\n            return state;\r\n        }\r\n        else {\r\n            return createNextState3(state, runMutator);\r\n        }\r\n    };\r\n}\r\n// src/entities/utils.ts\r\nfunction selectIdValue(entity, selectId) {\r\n    var key = selectId(entity);\r\n    if (process.env.NODE_ENV !== \"production\" && key === void 0) {\r\n        console.warn(\"The entity passed to the `selectId` implementation returned undefined.\", \"You should probably provide your own `selectId` implementation.\", \"The entity that was passed:\", entity, \"The `selectId` implementation:\", selectId.toString());\r\n    }\r\n    return key;\r\n}\r\nfunction ensureEntitiesArray(entities) {\r\n    if (!Array.isArray(entities)) {\r\n        entities = Object.values(entities);\r\n    }\r\n    return entities;\r\n}\r\nfunction splitAddedUpdatedEntities(newEntities, selectId, state) {\r\n    newEntities = ensureEntitiesArray(newEntities);\r\n    var added = [];\r\n    var updated = [];\r\n    for (var _i = 0, newEntities_1 = newEntities; _i < newEntities_1.length; _i++) {\r\n        var entity = newEntities_1[_i];\r\n        var id = selectIdValue(entity, selectId);\r\n        if (id in state.entities) {\r\n            updated.push({ id: id, changes: entity });\r\n        }\r\n        else {\r\n            added.push(entity);\r\n        }\r\n    }\r\n    return [added, updated];\r\n}\r\n// src/entities/unsorted_state_adapter.ts\r\nfunction createUnsortedStateAdapter(selectId) {\r\n    function addOneMutably(entity, state) {\r\n        var key = selectIdValue(entity, selectId);\r\n        if (key in state.entities) {\r\n            return;\r\n        }\r\n        state.ids.push(key);\r\n        state.entities[key] = entity;\r\n    }\r\n    function addManyMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        for (var _i = 0, newEntities_2 = newEntities; _i < newEntities_2.length; _i++) {\r\n            var entity = newEntities_2[_i];\r\n            addOneMutably(entity, state);\r\n        }\r\n    }\r\n    function setOneMutably(entity, state) {\r\n        var key = selectIdValue(entity, selectId);\r\n        if (!(key in state.entities)) {\r\n            state.ids.push(key);\r\n        }\r\n        state.entities[key] = entity;\r\n    }\r\n    function setManyMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        for (var _i = 0, newEntities_3 = newEntities; _i < newEntities_3.length; _i++) {\r\n            var entity = newEntities_3[_i];\r\n            setOneMutably(entity, state);\r\n        }\r\n    }\r\n    function setAllMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        state.ids = [];\r\n        state.entities = {};\r\n        addManyMutably(newEntities, state);\r\n    }\r\n    function removeOneMutably(key, state) {\r\n        return removeManyMutably([key], state);\r\n    }\r\n    function removeManyMutably(keys, state) {\r\n        var didMutate = false;\r\n        keys.forEach(function (key) {\r\n            if (key in state.entities) {\r\n                delete state.entities[key];\r\n                didMutate = true;\r\n            }\r\n        });\r\n        if (didMutate) {\r\n            state.ids = state.ids.filter(function (id) { return id in state.entities; });\r\n        }\r\n    }\r\n    function removeAllMutably(state) {\r\n        Object.assign(state, {\r\n            ids: [],\r\n            entities: {}\r\n        });\r\n    }\r\n    function takeNewKey(keys, update, state) {\r\n        var original2 = state.entities[update.id];\r\n        var updated = Object.assign({}, original2, update.changes);\r\n        var newKey = selectIdValue(updated, selectId);\r\n        var hasNewKey = newKey !== update.id;\r\n        if (hasNewKey) {\r\n            keys[update.id] = newKey;\r\n            delete state.entities[update.id];\r\n        }\r\n        state.entities[newKey] = updated;\r\n        return hasNewKey;\r\n    }\r\n    function updateOneMutably(update, state) {\r\n        return updateManyMutably([update], state);\r\n    }\r\n    function updateManyMutably(updates, state) {\r\n        var newKeys = {};\r\n        var updatesPerEntity = {};\r\n        updates.forEach(function (update) {\r\n            if (update.id in state.entities) {\r\n                updatesPerEntity[update.id] = {\r\n                    id: update.id,\r\n                    changes: __spreadValues(__spreadValues({}, updatesPerEntity[update.id] ? updatesPerEntity[update.id].changes : null), update.changes)\r\n                };\r\n            }\r\n        });\r\n        updates = Object.values(updatesPerEntity);\r\n        var didMutateEntities = updates.length > 0;\r\n        if (didMutateEntities) {\r\n            var didMutateIds = updates.filter(function (update) { return takeNewKey(newKeys, update, state); }).length > 0;\r\n            if (didMutateIds) {\r\n                state.ids = Object.keys(state.entities);\r\n            }\r\n        }\r\n    }\r\n    function upsertOneMutably(entity, state) {\r\n        return upsertManyMutably([entity], state);\r\n    }\r\n    function upsertManyMutably(newEntities, state) {\r\n        var _c = splitAddedUpdatedEntities(newEntities, selectId, state), added = _c[0], updated = _c[1];\r\n        updateManyMutably(updated, state);\r\n        addManyMutably(added, state);\r\n    }\r\n    return {\r\n        removeAll: createSingleArgumentStateOperator(removeAllMutably),\r\n        addOne: createStateOperator(addOneMutably),\r\n        addMany: createStateOperator(addManyMutably),\r\n        setOne: createStateOperator(setOneMutably),\r\n        setMany: createStateOperator(setManyMutably),\r\n        setAll: createStateOperator(setAllMutably),\r\n        updateOne: createStateOperator(updateOneMutably),\r\n        updateMany: createStateOperator(updateManyMutably),\r\n        upsertOne: createStateOperator(upsertOneMutably),\r\n        upsertMany: createStateOperator(upsertManyMutably),\r\n        removeOne: createStateOperator(removeOneMutably),\r\n        removeMany: createStateOperator(removeManyMutably)\r\n    };\r\n}\r\n// src/entities/sorted_state_adapter.ts\r\nfunction createSortedStateAdapter(selectId, sort) {\r\n    var _c = createUnsortedStateAdapter(selectId), removeOne = _c.removeOne, removeMany = _c.removeMany, removeAll = _c.removeAll;\r\n    function addOneMutably(entity, state) {\r\n        return addManyMutably([entity], state);\r\n    }\r\n    function addManyMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        var models = newEntities.filter(function (model) { return !(selectIdValue(model, selectId) in state.entities); });\r\n        if (models.length !== 0) {\r\n            merge(models, state);\r\n        }\r\n    }\r\n    function setOneMutably(entity, state) {\r\n        return setManyMutably([entity], state);\r\n    }\r\n    function setManyMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        if (newEntities.length !== 0) {\r\n            merge(newEntities, state);\r\n        }\r\n    }\r\n    function setAllMutably(newEntities, state) {\r\n        newEntities = ensureEntitiesArray(newEntities);\r\n        state.entities = {};\r\n        state.ids = [];\r\n        addManyMutably(newEntities, state);\r\n    }\r\n    function updateOneMutably(update, state) {\r\n        return updateManyMutably([update], state);\r\n    }\r\n    function updateManyMutably(updates, state) {\r\n        var appliedUpdates = false;\r\n        for (var _i = 0, updates_1 = updates; _i < updates_1.length; _i++) {\r\n            var update = updates_1[_i];\r\n            var entity = state.entities[update.id];\r\n            if (!entity) {\r\n                continue;\r\n            }\r\n            appliedUpdates = true;\r\n            Object.assign(entity, update.changes);\r\n            var newId = selectId(entity);\r\n            if (update.id !== newId) {\r\n                delete state.entities[update.id];\r\n                state.entities[newId] = entity;\r\n            }\r\n        }\r\n        if (appliedUpdates) {\r\n            resortEntities(state);\r\n        }\r\n    }\r\n    function upsertOneMutably(entity, state) {\r\n        return upsertManyMutably([entity], state);\r\n    }\r\n    function upsertManyMutably(newEntities, state) {\r\n        var _c = splitAddedUpdatedEntities(newEntities, selectId, state), added = _c[0], updated = _c[1];\r\n        updateManyMutably(updated, state);\r\n        addManyMutably(added, state);\r\n    }\r\n    function areArraysEqual(a, b) {\r\n        if (a.length !== b.length) {\r\n            return false;\r\n        }\r\n        for (var i = 0; i < a.length && i < b.length; i++) {\r\n            if (a[i] === b[i]) {\r\n                continue;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    function merge(models, state) {\r\n        models.forEach(function (model) {\r\n            state.entities[selectId(model)] = model;\r\n        });\r\n        resortEntities(state);\r\n    }\r\n    function resortEntities(state) {\r\n        var allEntities = Object.values(state.entities);\r\n        allEntities.sort(sort);\r\n        var newSortedIds = allEntities.map(selectId);\r\n        var ids = state.ids;\r\n        if (!areArraysEqual(ids, newSortedIds)) {\r\n            state.ids = newSortedIds;\r\n        }\r\n    }\r\n    return {\r\n        removeOne: removeOne,\r\n        removeMany: removeMany,\r\n        removeAll: removeAll,\r\n        addOne: createStateOperator(addOneMutably),\r\n        updateOne: createStateOperator(updateOneMutably),\r\n        upsertOne: createStateOperator(upsertOneMutably),\r\n        setOne: createStateOperator(setOneMutably),\r\n        setMany: createStateOperator(setManyMutably),\r\n        setAll: createStateOperator(setAllMutably),\r\n        addMany: createStateOperator(addManyMutably),\r\n        updateMany: createStateOperator(updateManyMutably),\r\n        upsertMany: createStateOperator(upsertManyMutably)\r\n    };\r\n}\r\n// src/entities/create_adapter.ts\r\nfunction createEntityAdapter(options) {\r\n    if (options === void 0) { options = {}; }\r\n    var _c = __spreadValues({\r\n        sortComparer: false,\r\n        selectId: function (instance) { return instance.id; }\r\n    }, options), selectId = _c.selectId, sortComparer = _c.sortComparer;\r\n    var stateFactory = createInitialStateFactory();\r\n    var selectorsFactory = createSelectorsFactory();\r\n    var stateAdapter = sortComparer ? createSortedStateAdapter(selectId, sortComparer) : createUnsortedStateAdapter(selectId);\r\n    return __spreadValues(__spreadValues(__spreadValues({\r\n        selectId: selectId,\r\n        sortComparer: sortComparer\r\n    }, stateFactory), selectorsFactory), stateAdapter);\r\n}\r\n// src/nanoid.ts\r\nvar urlAlphabet = \"ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW\";\r\nvar nanoid = function (size) {\r\n    if (size === void 0) { size = 21; }\r\n    var id = \"\";\r\n    var i = size;\r\n    while (i--) {\r\n        id += urlAlphabet[Math.random() * 64 | 0];\r\n    }\r\n    return id;\r\n};\r\n// src/createAsyncThunk.ts\r\nvar commonProperties = [\r\n    \"name\",\r\n    \"message\",\r\n    \"stack\",\r\n    \"code\"\r\n];\r\nvar RejectWithValue = /** @class */ (function () {\r\n    function RejectWithValue(payload, meta) {\r\n        this.payload = payload;\r\n        this.meta = meta;\r\n    }\r\n    return RejectWithValue;\r\n}());\r\nvar FulfillWithMeta = /** @class */ (function () {\r\n    function FulfillWithMeta(payload, meta) {\r\n        this.payload = payload;\r\n        this.meta = meta;\r\n    }\r\n    return FulfillWithMeta;\r\n}());\r\nvar miniSerializeError = function (value) {\r\n    if (typeof value === \"object\" && value !== null) {\r\n        var simpleError = {};\r\n        for (var _i = 0, commonProperties_1 = commonProperties; _i < commonProperties_1.length; _i++) {\r\n            var property = commonProperties_1[_i];\r\n            if (typeof value[property] === \"string\") {\r\n                simpleError[property] = value[property];\r\n            }\r\n        }\r\n        return simpleError;\r\n    }\r\n    return { message: String(value) };\r\n};\r\nfunction createAsyncThunk(typePrefix, payloadCreator, options) {\r\n    var fulfilled = createAction(typePrefix + \"/fulfilled\", function (payload, requestId, arg, meta) { return ({\r\n        payload: payload,\r\n        meta: __spreadProps(__spreadValues({}, meta || {}), {\r\n            arg: arg,\r\n            requestId: requestId,\r\n            requestStatus: \"fulfilled\"\r\n        })\r\n    }); });\r\n    var pending = createAction(typePrefix + \"/pending\", function (requestId, arg, meta) { return ({\r\n        payload: void 0,\r\n        meta: __spreadProps(__spreadValues({}, meta || {}), {\r\n            arg: arg,\r\n            requestId: requestId,\r\n            requestStatus: \"pending\"\r\n        })\r\n    }); });\r\n    var rejected = createAction(typePrefix + \"/rejected\", function (error, requestId, arg, payload, meta) { return ({\r\n        payload: payload,\r\n        error: (options && options.serializeError || miniSerializeError)(error || \"Rejected\"),\r\n        meta: __spreadProps(__spreadValues({}, meta || {}), {\r\n            arg: arg,\r\n            requestId: requestId,\r\n            rejectedWithValue: !!payload,\r\n            requestStatus: \"rejected\",\r\n            aborted: (error == null ? void 0 : error.name) === \"AbortError\",\r\n            condition: (error == null ? void 0 : error.name) === \"ConditionError\"\r\n        })\r\n    }); });\r\n    var displayedWarning = false;\r\n    var AC = typeof AbortController !== \"undefined\" ? AbortController : /** @class */ (function () {\r\n        function class_1() {\r\n            this.signal = {\r\n                aborted: false,\r\n                addEventListener: function () {\r\n                },\r\n                dispatchEvent: function () {\r\n                    return false;\r\n                },\r\n                onabort: function () {\r\n                },\r\n                removeEventListener: function () {\r\n                },\r\n                reason: void 0,\r\n                throwIfAborted: function () {\r\n                }\r\n            };\r\n        }\r\n        class_1.prototype.abort = function () {\r\n            if (process.env.NODE_ENV !== \"production\") {\r\n                if (!displayedWarning) {\r\n                    displayedWarning = true;\r\n                    console.info(\"This platform does not implement AbortController. \\nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'.\");\r\n                }\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n    function actionCreator(arg) {\r\n        return function (dispatch, getState, extra) {\r\n            var requestId = (options == null ? void 0 : options.idGenerator) ? options.idGenerator(arg) : nanoid();\r\n            var abortController = new AC();\r\n            var abortReason;\r\n            var abortedPromise = new Promise(function (_, reject) { return abortController.signal.addEventListener(\"abort\", function () { return reject({ name: \"AbortError\", message: abortReason || \"Aborted\" }); }); });\r\n            var started = false;\r\n            function abort(reason) {\r\n                if (started) {\r\n                    abortReason = reason;\r\n                    abortController.abort();\r\n                }\r\n            }\r\n            var promise = function () {\r\n                return __async(this, null, function () {\r\n                    var _a, _b, finalAction, conditionResult, err_1, skipDispatch;\r\n                    return __generator(this, function (_c) {\r\n                        switch (_c.label) {\r\n                            case 0:\r\n                                _c.trys.push([0, 4, , 5]);\r\n                                conditionResult = (_a = options == null ? void 0 : options.condition) == null ? void 0 : _a.call(options, arg, { getState: getState, extra: extra });\r\n                                if (!isThenable(conditionResult)) return [3 /*break*/, 2];\r\n                                return [4 /*yield*/, conditionResult];\r\n                            case 1:\r\n                                conditionResult = _c.sent();\r\n                                _c.label = 2;\r\n                            case 2:\r\n                                if (conditionResult === false) {\r\n                                    throw {\r\n                                        name: \"ConditionError\",\r\n                                        message: \"Aborted due to condition callback returning false.\"\r\n                                    };\r\n                                }\r\n                                started = true;\r\n                                dispatch(pending(requestId, arg, (_b = options == null ? void 0 : options.getPendingMeta) == null ? void 0 : _b.call(options, { requestId: requestId, arg: arg }, { getState: getState, extra: extra })));\r\n                                return [4 /*yield*/, Promise.race([\r\n                                        abortedPromise,\r\n                                        Promise.resolve(payloadCreator(arg, {\r\n                                            dispatch: dispatch,\r\n                                            getState: getState,\r\n                                            extra: extra,\r\n                                            requestId: requestId,\r\n                                            signal: abortController.signal,\r\n                                            rejectWithValue: function (value, meta) {\r\n                                                return new RejectWithValue(value, meta);\r\n                                            },\r\n                                            fulfillWithValue: function (value, meta) {\r\n                                                return new FulfillWithMeta(value, meta);\r\n                                            }\r\n                                        })).then(function (result) {\r\n                                            if (result instanceof RejectWithValue) {\r\n                                                throw result;\r\n                                            }\r\n                                            if (result instanceof FulfillWithMeta) {\r\n                                                return fulfilled(result.payload, requestId, arg, result.meta);\r\n                                            }\r\n                                            return fulfilled(result, requestId, arg);\r\n                                        })\r\n                                    ])];\r\n                            case 3:\r\n                                finalAction = _c.sent();\r\n                                return [3 /*break*/, 5];\r\n                            case 4:\r\n                                err_1 = _c.sent();\r\n                                finalAction = err_1 instanceof RejectWithValue ? rejected(null, requestId, arg, err_1.payload, err_1.meta) : rejected(err_1, requestId, arg);\r\n                                return [3 /*break*/, 5];\r\n                            case 5:\r\n                                skipDispatch = options && !options.dispatchConditionRejection && rejected.match(finalAction) && finalAction.meta.condition;\r\n                                if (!skipDispatch) {\r\n                                    dispatch(finalAction);\r\n                                }\r\n                                return [2 /*return*/, finalAction];\r\n                        }\r\n                    });\r\n                });\r\n            }();\r\n            return Object.assign(promise, {\r\n                abort: abort,\r\n                requestId: requestId,\r\n                arg: arg,\r\n                unwrap: function () {\r\n                    return promise.then(unwrapResult);\r\n                }\r\n            });\r\n        };\r\n    }\r\n    return Object.assign(actionCreator, {\r\n        pending: pending,\r\n        rejected: rejected,\r\n        fulfilled: fulfilled,\r\n        typePrefix: typePrefix\r\n    });\r\n}\r\nfunction unwrapResult(action) {\r\n    if (action.meta && action.meta.rejectedWithValue) {\r\n        throw action.payload;\r\n    }\r\n    if (action.error) {\r\n        throw action.error;\r\n    }\r\n    return action.payload;\r\n}\r\nfunction isThenable(value) {\r\n    return value !== null && typeof value === \"object\" && typeof value.then === \"function\";\r\n}\r\n// src/tsHelpers.ts\r\nvar hasMatchFunction = function (v) {\r\n    return v && typeof v.match === \"function\";\r\n};\r\n// src/matchers.ts\r\nvar matches = function (matcher, action) {\r\n    if (hasMatchFunction(matcher)) {\r\n        return matcher.match(action);\r\n    }\r\n    else {\r\n        return matcher(action);\r\n    }\r\n};\r\nfunction isAnyOf() {\r\n    var matchers = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        matchers[_i] = arguments[_i];\r\n    }\r\n    return function (action) {\r\n        return matchers.some(function (matcher) { return matches(matcher, action); });\r\n    };\r\n}\r\nfunction isAllOf() {\r\n    var matchers = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        matchers[_i] = arguments[_i];\r\n    }\r\n    return function (action) {\r\n        return matchers.every(function (matcher) { return matches(matcher, action); });\r\n    };\r\n}\r\nfunction hasExpectedRequestMetadata(action, validStatus) {\r\n    if (!action || !action.meta)\r\n        return false;\r\n    var hasValidRequestId = typeof action.meta.requestId === \"string\";\r\n    var hasValidRequestStatus = validStatus.indexOf(action.meta.requestStatus) > -1;\r\n    return hasValidRequestId && hasValidRequestStatus;\r\n}\r\nfunction isAsyncThunkArray(a) {\r\n    return typeof a[0] === \"function\" && \"pending\" in a[0] && \"fulfilled\" in a[0] && \"rejected\" in a[0];\r\n}\r\nfunction isPending() {\r\n    var asyncThunks = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        asyncThunks[_i] = arguments[_i];\r\n    }\r\n    if (asyncThunks.length === 0) {\r\n        return function (action) { return hasExpectedRequestMetadata(action, [\"pending\"]); };\r\n    }\r\n    if (!isAsyncThunkArray(asyncThunks)) {\r\n        return isPending()(asyncThunks[0]);\r\n    }\r\n    return function (action) {\r\n        var matchers = asyncThunks.map(function (asyncThunk) { return asyncThunk.pending; });\r\n        var combinedMatcher = isAnyOf.apply(void 0, matchers);\r\n        return combinedMatcher(action);\r\n    };\r\n}\r\nfunction isRejected() {\r\n    var asyncThunks = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        asyncThunks[_i] = arguments[_i];\r\n    }\r\n    if (asyncThunks.length === 0) {\r\n        return function (action) { return hasExpectedRequestMetadata(action, [\"rejected\"]); };\r\n    }\r\n    if (!isAsyncThunkArray(asyncThunks)) {\r\n        return isRejected()(asyncThunks[0]);\r\n    }\r\n    return function (action) {\r\n        var matchers = asyncThunks.map(function (asyncThunk) { return asyncThunk.rejected; });\r\n        var combinedMatcher = isAnyOf.apply(void 0, matchers);\r\n        return combinedMatcher(action);\r\n    };\r\n}\r\nfunction isRejectedWithValue() {\r\n    var asyncThunks = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        asyncThunks[_i] = arguments[_i];\r\n    }\r\n    var hasFlag = function (action) {\r\n        return action && action.meta && action.meta.rejectedWithValue;\r\n    };\r\n    if (asyncThunks.length === 0) {\r\n        return function (action) {\r\n            var combinedMatcher = isAllOf(isRejected.apply(void 0, asyncThunks), hasFlag);\r\n            return combinedMatcher(action);\r\n        };\r\n    }\r\n    if (!isAsyncThunkArray(asyncThunks)) {\r\n        return isRejectedWithValue()(asyncThunks[0]);\r\n    }\r\n    return function (action) {\r\n        var combinedMatcher = isAllOf(isRejected.apply(void 0, asyncThunks), hasFlag);\r\n        return combinedMatcher(action);\r\n    };\r\n}\r\nfunction isFulfilled() {\r\n    var asyncThunks = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        asyncThunks[_i] = arguments[_i];\r\n    }\r\n    if (asyncThunks.length === 0) {\r\n        return function (action) { return hasExpectedRequestMetadata(action, [\"fulfilled\"]); };\r\n    }\r\n    if (!isAsyncThunkArray(asyncThunks)) {\r\n        return isFulfilled()(asyncThunks[0]);\r\n    }\r\n    return function (action) {\r\n        var matchers = asyncThunks.map(function (asyncThunk) { return asyncThunk.fulfilled; });\r\n        var combinedMatcher = isAnyOf.apply(void 0, matchers);\r\n        return combinedMatcher(action);\r\n    };\r\n}\r\nfunction isAsyncThunkAction() {\r\n    var asyncThunks = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        asyncThunks[_i] = arguments[_i];\r\n    }\r\n    if (asyncThunks.length === 0) {\r\n        return function (action) { return hasExpectedRequestMetadata(action, [\"pending\", \"fulfilled\", \"rejected\"]); };\r\n    }\r\n    if (!isAsyncThunkArray(asyncThunks)) {\r\n        return isAsyncThunkAction()(asyncThunks[0]);\r\n    }\r\n    return function (action) {\r\n        var matchers = [];\r\n        for (var _i = 0, asyncThunks_1 = asyncThunks; _i < asyncThunks_1.length; _i++) {\r\n            var asyncThunk = asyncThunks_1[_i];\r\n            matchers.push(asyncThunk.pending, asyncThunk.rejected, asyncThunk.fulfilled);\r\n        }\r\n        var combinedMatcher = isAnyOf.apply(void 0, matchers);\r\n        return combinedMatcher(action);\r\n    };\r\n}\r\n// src/listenerMiddleware/utils.ts\r\nvar assertFunction = function (func, expected) {\r\n    if (typeof func !== \"function\") {\r\n        throw new TypeError(expected + \" is not a function\");\r\n    }\r\n};\r\nvar noop = function () {\r\n};\r\nvar catchRejection = function (promise, onError) {\r\n    if (onError === void 0) { onError = noop; }\r\n    promise.catch(onError);\r\n    return promise;\r\n};\r\nvar addAbortSignalListener = function (abortSignal, callback) {\r\n    abortSignal.addEventListener(\"abort\", callback, { once: true });\r\n};\r\nvar abortControllerWithReason = function (abortController, reason) {\r\n    var signal = abortController.signal;\r\n    if (signal.aborted) {\r\n        return;\r\n    }\r\n    if (!(\"reason\" in signal)) {\r\n        Object.defineProperty(signal, \"reason\", {\r\n            enumerable: true,\r\n            value: reason,\r\n            configurable: true,\r\n            writable: true\r\n        });\r\n    }\r\n    ;\r\n    abortController.abort(reason);\r\n};\r\n// src/listenerMiddleware/exceptions.ts\r\nvar task = \"task\";\r\nvar listener = \"listener\";\r\nvar completed = \"completed\";\r\nvar cancelled = \"cancelled\";\r\nvar taskCancelled = \"task-\" + cancelled;\r\nvar taskCompleted = \"task-\" + completed;\r\nvar listenerCancelled = listener + \"-\" + cancelled;\r\nvar listenerCompleted = listener + \"-\" + completed;\r\nvar TaskAbortError = /** @class */ (function () {\r\n    function TaskAbortError(code) {\r\n        this.code = code;\r\n        this.name = \"TaskAbortError\";\r\n        this.message = task + \" \" + cancelled + \" (reason: \" + code + \")\";\r\n    }\r\n    return TaskAbortError;\r\n}());\r\n// src/listenerMiddleware/task.ts\r\nvar validateActive = function (signal) {\r\n    if (signal.aborted) {\r\n        throw new TaskAbortError(signal.reason);\r\n    }\r\n};\r\nvar promisifyAbortSignal = function (signal) {\r\n    return catchRejection(new Promise(function (_, reject) {\r\n        var notifyRejection = function () { return reject(new TaskAbortError(signal.reason)); };\r\n        if (signal.aborted) {\r\n            notifyRejection();\r\n        }\r\n        else {\r\n            addAbortSignalListener(signal, notifyRejection);\r\n        }\r\n    }));\r\n};\r\nvar runTask = function (task2, cleanUp) { return __async(void 0, null, function () {\r\n    var value, error_1;\r\n    return __generator(this, function (_c) {\r\n        switch (_c.label) {\r\n            case 0:\r\n                _c.trys.push([0, 3, 4, 5]);\r\n                return [4 /*yield*/, Promise.resolve()];\r\n            case 1:\r\n                _c.sent();\r\n                return [4 /*yield*/, task2()];\r\n            case 2:\r\n                value = _c.sent();\r\n                return [2 /*return*/, {\r\n                        status: \"ok\",\r\n                        value: value\r\n                    }];\r\n            case 3:\r\n                error_1 = _c.sent();\r\n                return [2 /*return*/, {\r\n                        status: error_1 instanceof TaskAbortError ? \"cancelled\" : \"rejected\",\r\n                        error: error_1\r\n                    }];\r\n            case 4:\r\n                cleanUp == null ? void 0 : cleanUp();\r\n                return [7 /*endfinally*/];\r\n            case 5: return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\nvar createPause = function (signal) {\r\n    return function (promise) {\r\n        return catchRejection(Promise.race([promisifyAbortSignal(signal), promise]).then(function (output) {\r\n            validateActive(signal);\r\n            return output;\r\n        }));\r\n    };\r\n};\r\nvar createDelay = function (signal) {\r\n    var pause = createPause(signal);\r\n    return function (timeoutMs) {\r\n        return pause(new Promise(function (resolve) { return setTimeout(resolve, timeoutMs); }));\r\n    };\r\n};\r\n// src/listenerMiddleware/index.ts\r\nvar assign = Object.assign;\r\nvar INTERNAL_NIL_TOKEN = {};\r\nvar alm = \"listenerMiddleware\";\r\nvar createFork = function (parentAbortSignal) {\r\n    var linkControllers = function (controller) { return addAbortSignalListener(parentAbortSignal, function () { return abortControllerWithReason(controller, parentAbortSignal.reason); }); };\r\n    return function (taskExecutor) {\r\n        assertFunction(taskExecutor, \"taskExecutor\");\r\n        var childAbortController = new AbortController();\r\n        linkControllers(childAbortController);\r\n        var result = runTask(function () { return __async(void 0, null, function () {\r\n            var result2;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        validateActive(parentAbortSignal);\r\n                        validateActive(childAbortController.signal);\r\n                        return [4 /*yield*/, taskExecutor({\r\n                                pause: createPause(childAbortController.signal),\r\n                                delay: createDelay(childAbortController.signal),\r\n                                signal: childAbortController.signal\r\n                            })];\r\n                    case 1:\r\n                        result2 = _c.sent();\r\n                        validateActive(childAbortController.signal);\r\n                        return [2 /*return*/, result2];\r\n                }\r\n            });\r\n        }); }, function () { return abortControllerWithReason(childAbortController, taskCompleted); });\r\n        return {\r\n            result: createPause(parentAbortSignal)(result),\r\n            cancel: function () {\r\n                abortControllerWithReason(childAbortController, taskCancelled);\r\n            }\r\n        };\r\n    };\r\n};\r\nvar createTakePattern = function (startListening, signal) {\r\n    var take = function (predicate, timeout) { return __async(void 0, null, function () {\r\n        var unsubscribe, tuplePromise, promises, output;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    validateActive(signal);\r\n                    unsubscribe = function () {\r\n                    };\r\n                    tuplePromise = new Promise(function (resolve) {\r\n                        unsubscribe = startListening({\r\n                            predicate: predicate,\r\n                            effect: function (action, listenerApi) {\r\n                                listenerApi.unsubscribe();\r\n                                resolve([\r\n                                    action,\r\n                                    listenerApi.getState(),\r\n                                    listenerApi.getOriginalState()\r\n                                ]);\r\n                            }\r\n                        });\r\n                    });\r\n                    promises = [\r\n                        promisifyAbortSignal(signal),\r\n                        tuplePromise\r\n                    ];\r\n                    if (timeout != null) {\r\n                        promises.push(new Promise(function (resolve) { return setTimeout(resolve, timeout, null); }));\r\n                    }\r\n                    _c.label = 1;\r\n                case 1:\r\n                    _c.trys.push([1, , 3, 4]);\r\n                    return [4 /*yield*/, Promise.race(promises)];\r\n                case 2:\r\n                    output = _c.sent();\r\n                    validateActive(signal);\r\n                    return [2 /*return*/, output];\r\n                case 3:\r\n                    unsubscribe();\r\n                    return [7 /*endfinally*/];\r\n                case 4: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    return function (predicate, timeout) { return catchRejection(take(predicate, timeout)); };\r\n};\r\nvar getListenerEntryPropsFrom = function (options) {\r\n    var type = options.type, actionCreator = options.actionCreator, matcher = options.matcher, predicate = options.predicate, effect = options.effect;\r\n    if (type) {\r\n        predicate = createAction(type).match;\r\n    }\r\n    else if (actionCreator) {\r\n        type = actionCreator.type;\r\n        predicate = actionCreator.match;\r\n    }\r\n    else if (matcher) {\r\n        predicate = matcher;\r\n    }\r\n    else if (predicate) {\r\n    }\r\n    else {\r\n        throw new Error(\"Creating or removing a listener requires one of the known fields for matching an action\");\r\n    }\r\n    assertFunction(effect, \"options.listener\");\r\n    return { predicate: predicate, type: type, effect: effect };\r\n};\r\nvar createListenerEntry = function (options) {\r\n    var _c = getListenerEntryPropsFrom(options), type = _c.type, predicate = _c.predicate, effect = _c.effect;\r\n    var id = nanoid();\r\n    var entry = {\r\n        id: id,\r\n        effect: effect,\r\n        type: type,\r\n        predicate: predicate,\r\n        pending: new Set(),\r\n        unsubscribe: function () {\r\n            throw new Error(\"Unsubscribe not initialized\");\r\n        }\r\n    };\r\n    return entry;\r\n};\r\nvar createClearListenerMiddleware = function (listenerMap) {\r\n    return function () {\r\n        listenerMap.forEach(cancelActiveListeners);\r\n        listenerMap.clear();\r\n    };\r\n};\r\nvar safelyNotifyError = function (errorHandler, errorToNotify, errorInfo) {\r\n    try {\r\n        errorHandler(errorToNotify, errorInfo);\r\n    }\r\n    catch (errorHandlerError) {\r\n        setTimeout(function () {\r\n            throw errorHandlerError;\r\n        }, 0);\r\n    }\r\n};\r\nvar addListener = createAction(alm + \"/add\");\r\nvar clearAllListeners = createAction(alm + \"/removeAll\");\r\nvar removeListener = createAction(alm + \"/remove\");\r\nvar defaultErrorHandler = function () {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    console.error.apply(console, __spreadArray([alm + \"/error\"], args));\r\n};\r\nvar cancelActiveListeners = function (entry) {\r\n    entry.pending.forEach(function (controller) {\r\n        abortControllerWithReason(controller, listenerCancelled);\r\n    });\r\n};\r\nfunction createListenerMiddleware(middlewareOptions) {\r\n    var _this = this;\r\n    if (middlewareOptions === void 0) { middlewareOptions = {}; }\r\n    var listenerMap = new Map();\r\n    var extra = middlewareOptions.extra, _c = middlewareOptions.onError, onError = _c === void 0 ? defaultErrorHandler : _c;\r\n    assertFunction(onError, \"onError\");\r\n    var insertEntry = function (entry) {\r\n        entry.unsubscribe = function () { return listenerMap.delete(entry.id); };\r\n        listenerMap.set(entry.id, entry);\r\n        return function (cancelOptions) {\r\n            entry.unsubscribe();\r\n            if (cancelOptions == null ? void 0 : cancelOptions.cancelActive) {\r\n                cancelActiveListeners(entry);\r\n            }\r\n        };\r\n    };\r\n    var findListenerEntry = function (comparator) {\r\n        for (var _i = 0, _c = Array.from(listenerMap.values()); _i < _c.length; _i++) {\r\n            var entry = _c[_i];\r\n            if (comparator(entry)) {\r\n                return entry;\r\n            }\r\n        }\r\n        return void 0;\r\n    };\r\n    var startListening = function (options) {\r\n        var entry = findListenerEntry(function (existingEntry) { return existingEntry.effect === options.effect; });\r\n        if (!entry) {\r\n            entry = createListenerEntry(options);\r\n        }\r\n        return insertEntry(entry);\r\n    };\r\n    var stopListening = function (options) {\r\n        var _c = getListenerEntryPropsFrom(options), type = _c.type, effect = _c.effect, predicate = _c.predicate;\r\n        var entry = findListenerEntry(function (entry2) {\r\n            var matchPredicateOrType = typeof type === \"string\" ? entry2.type === type : entry2.predicate === predicate;\r\n            return matchPredicateOrType && entry2.effect === effect;\r\n        });\r\n        if (entry) {\r\n            entry.unsubscribe();\r\n            if (options.cancelActive) {\r\n                cancelActiveListeners(entry);\r\n            }\r\n        }\r\n        return !!entry;\r\n    };\r\n    var notifyListener = function (entry, action, api, getOriginalState) { return __async(_this, null, function () {\r\n        var internalTaskController, take, listenerError_1;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    internalTaskController = new AbortController();\r\n                    take = createTakePattern(startListening, internalTaskController.signal);\r\n                    _c.label = 1;\r\n                case 1:\r\n                    _c.trys.push([1, 3, 4, 5]);\r\n                    entry.pending.add(internalTaskController);\r\n                    return [4 /*yield*/, Promise.resolve(entry.effect(action, assign({}, api, {\r\n                            getOriginalState: getOriginalState,\r\n                            condition: function (predicate, timeout) { return take(predicate, timeout).then(Boolean); },\r\n                            take: take,\r\n                            delay: createDelay(internalTaskController.signal),\r\n                            pause: createPause(internalTaskController.signal),\r\n                            extra: extra,\r\n                            signal: internalTaskController.signal,\r\n                            fork: createFork(internalTaskController.signal),\r\n                            unsubscribe: entry.unsubscribe,\r\n                            subscribe: function () {\r\n                                listenerMap.set(entry.id, entry);\r\n                            },\r\n                            cancelActiveListeners: function () {\r\n                                entry.pending.forEach(function (controller, _, set) {\r\n                                    if (controller !== internalTaskController) {\r\n                                        abortControllerWithReason(controller, listenerCancelled);\r\n                                        set.delete(controller);\r\n                                    }\r\n                                });\r\n                            }\r\n                        })))];\r\n                case 2:\r\n                    _c.sent();\r\n                    return [3 /*break*/, 5];\r\n                case 3:\r\n                    listenerError_1 = _c.sent();\r\n                    if (!(listenerError_1 instanceof TaskAbortError)) {\r\n                        safelyNotifyError(onError, listenerError_1, {\r\n                            raisedBy: \"effect\"\r\n                        });\r\n                    }\r\n                    return [3 /*break*/, 5];\r\n                case 4:\r\n                    abortControllerWithReason(internalTaskController, listenerCompleted);\r\n                    entry.pending.delete(internalTaskController);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    var clearListenerMiddleware = createClearListenerMiddleware(listenerMap);\r\n    var middleware = function (api) { return function (next) { return function (action) {\r\n        if (addListener.match(action)) {\r\n            return startListening(action.payload);\r\n        }\r\n        if (clearAllListeners.match(action)) {\r\n            clearListenerMiddleware();\r\n            return;\r\n        }\r\n        if (removeListener.match(action)) {\r\n            return stopListening(action.payload);\r\n        }\r\n        var originalState = api.getState();\r\n        var getOriginalState = function () {\r\n            if (originalState === INTERNAL_NIL_TOKEN) {\r\n                throw new Error(alm + \": getOriginalState can only be called synchronously\");\r\n            }\r\n            return originalState;\r\n        };\r\n        var result;\r\n        try {\r\n            result = next(action);\r\n            if (listenerMap.size > 0) {\r\n                var currentState = api.getState();\r\n                var listenerEntries = Array.from(listenerMap.values());\r\n                for (var _i = 0, listenerEntries_1 = listenerEntries; _i < listenerEntries_1.length; _i++) {\r\n                    var entry = listenerEntries_1[_i];\r\n                    var runListener = false;\r\n                    try {\r\n                        runListener = entry.predicate(action, currentState, originalState);\r\n                    }\r\n                    catch (predicateError) {\r\n                        runListener = false;\r\n                        safelyNotifyError(onError, predicateError, {\r\n                            raisedBy: \"predicate\"\r\n                        });\r\n                    }\r\n                    if (!runListener) {\r\n                        continue;\r\n                    }\r\n                    notifyListener(entry, action, api, getOriginalState);\r\n                }\r\n            }\r\n        }\r\n        finally {\r\n            originalState = INTERNAL_NIL_TOKEN;\r\n        }\r\n        return result;\r\n    }; }; };\r\n    return {\r\n        middleware: middleware,\r\n        startListening: startListening,\r\n        stopListening: stopListening,\r\n        clearListeners: clearListenerMiddleware\r\n    };\r\n}\r\n// src/index.ts\r\nenableES5();\r\nexport { MiddlewareArray, TaskAbortError, addListener, clearAllListeners, configureStore, createAction, createAsyncThunk, createDraftSafeSelector, createEntityAdapter, createImmutableStateInvariantMiddleware, createListenerMiddleware, default2 as createNextState, createReducer, createSelector2 as createSelector, createSerializableStateInvariantMiddleware, createSlice, current2 as current, findNonSerializableValue, freeze, getDefaultMiddleware, getType, isAllOf, isAnyOf, isAsyncThunkAction, isDraft4 as isDraft, isFulfilled, isImmutableDefault, isPending, isPlain, isPlainObject, isRejected, isRejectedWithValue, miniSerializeError, nanoid, original, removeListener, unwrapResult };\r\n//# sourceMappingURL=redux-toolkit.esm.js.map","import { parser, VectorSelector } from '@prometheus-io/lezer-promql';\n\nimport { PromQueryModeller } from './querybuilder/PromQueryModeller';\nimport { buildVisualQueryFromString } from './querybuilder/parsing';\nimport { QueryBuilderLabelFilter } from './querybuilder/shared/types';\nimport { PromVisualQuery } from './querybuilder/types';\n\n/**\n * Adds label filter to existing query. Useful for query modification for example for ad hoc filters.\n *\n * It uses PromQL parser to find instances of metric and labels, alters them and then splices them back into the query.\n * Ideally we could use the parse -> change -> render is a simple 3 steps but right now building the visual query\n * object does not support all possible queries.\n *\n * So instead this just operates on substrings of the query with labels and operates just on those. This makes this\n * more robust and can alter even invalid queries, and preserves in general the query structure and whitespace.\n * @param query\n * @param key\n * @param value\n * @param operator\n */\nexport function addLabelToQuery(query: string, key: string, value: string | number, operator = '='): string {\n  if (!key || !value) {\n    throw new Error('Need label to add to query.');\n  }\n\n  const vectorSelectorPositions = getVectorSelectorPositions(query);\n  if (!vectorSelectorPositions.length) {\n    return query;\n  }\n\n  const filter = toLabelFilter(key, value, operator);\n  return addFilter(query, vectorSelectorPositions, filter);\n}\n\ntype VectorSelectorPosition = { from: number; to: number; query: PromVisualQuery };\n\n/**\n * Parse the string and get all VectorSelector positions in the query together with parsed representation of the vector\n * selector.\n * @param query\n */\nfunction getVectorSelectorPositions(query: string): VectorSelectorPosition[] {\n  const tree = parser.parse(query);\n  const positions: VectorSelectorPosition[] = [];\n  tree.iterate({\n    enter: ({ to, from, type }): false | void => {\n      if (type.id === VectorSelector) {\n        const visQuery = buildVisualQueryFromString(query.substring(from, to));\n        positions.push({ query: visQuery.query, from, to });\n        return false;\n      }\n    },\n  });\n  return positions;\n}\n\nfunction toLabelFilter(key: string, value: string | number, operator: string): QueryBuilderLabelFilter {\n  // We need to make sure that we convert the value back to string because it may be a number\n  const transformedValue = value === Infinity ? '+Inf' : value.toString();\n  return { label: key, op: operator, value: transformedValue };\n}\n\nfunction addFilter(\n  query: string,\n  vectorSelectorPositions: VectorSelectorPosition[],\n  filter: QueryBuilderLabelFilter\n): string {\n  const modeller = new PromQueryModeller();\n  let newQuery = '';\n  let prev = 0;\n\n  for (let i = 0; i < vectorSelectorPositions.length; i++) {\n    // This is basically just doing splice on a string for each matched vector selector.\n\n    const match = vectorSelectorPositions[i];\n    const isLast = i === vectorSelectorPositions.length - 1;\n\n    const start = query.substring(prev, match.from);\n    const end = isLast ? query.substring(match.to) : '';\n\n    if (!labelExists(match.query.labels, filter)) {\n      // We don't want to add duplicate labels.\n      match.query.labels.push(filter);\n    }\n    const newLabels = modeller.renderQuery(match.query);\n    newQuery += start + newLabels + end;\n    prev = match.to;\n  }\n  return newQuery;\n}\n\n/**\n * Check if label exists in the list of labels but ignore the operator.\n * @param labels\n * @param filter\n */\nfunction labelExists(labels: QueryBuilderLabelFilter[], filter: QueryBuilderLabelFilter) {\n  return labels.find((label) => label.label === filter.label && label.value === filter.value);\n}\n","import { invert } from 'lodash';\nimport { Token } from 'prismjs';\n\nimport { DataQuery, AbstractQuery, AbstractLabelOperator, AbstractLabelMatcher } from '@grafana/data';\n\nimport { addLabelToQuery } from './add_label_to_query';\nimport { SUGGESTIONS_LIMIT } from './language_provider';\nimport { PromMetricsMetadata, PromMetricsMetadataItem } from './types';\n\nexport const processHistogramMetrics = (metrics: string[]) => {\n  const resultSet: Set<string> = new Set();\n  const regexp = new RegExp('_bucket($|:)');\n  for (let index = 0; index < metrics.length; index++) {\n    const metric = metrics[index];\n    const isHistogramValue = regexp.test(metric);\n    if (isHistogramValue) {\n      resultSet.add(metric);\n    }\n  }\n  return [...resultSet];\n};\n\nexport function processLabels(labels: Array<{ [key: string]: string }>, withName = false) {\n  // For processing we are going to use sets as they have significantly better performance than arrays\n  // After we process labels, we will convert sets to arrays and return object with label values in arrays\n  const valueSet: { [key: string]: Set<string> } = {};\n  labels.forEach((label) => {\n    const { __name__, ...rest } = label;\n    if (withName) {\n      valueSet['__name__'] = valueSet['__name__'] || new Set();\n      if (!valueSet['__name__'].has(__name__)) {\n        valueSet['__name__'].add(__name__);\n      }\n    }\n\n    Object.keys(rest).forEach((key) => {\n      if (!valueSet[key]) {\n        valueSet[key] = new Set();\n      }\n      if (!valueSet[key].has(rest[key])) {\n        valueSet[key].add(rest[key]);\n      }\n    });\n  });\n\n  // valueArray that we are going to return in the object\n  const valueArray: { [key: string]: string[] } = {};\n  limitSuggestions(Object.keys(valueSet)).forEach((key) => {\n    valueArray[key] = limitSuggestions(Array.from(valueSet[key]));\n  });\n\n  return { values: valueArray, keys: Object.keys(valueArray) };\n}\n\n// const cleanSelectorRegexp = /\\{(\\w+=\"[^\"\\n]*?\")(,\\w+=\"[^\"\\n]*?\")*\\}/;\nexport const selectorRegexp = /\\{[^}]*?(\\}|$)/;\nexport const labelRegexp = /\\b(\\w+)(!?=~?)(\"[^\"\\n]*?\")/g;\nexport function parseSelector(query: string, cursorOffset = 1): { labelKeys: any[]; selector: string } {\n  if (!query.match(selectorRegexp)) {\n    // Special matcher for metrics\n    if (query.match(/^[A-Za-z:][\\w:]*$/)) {\n      return {\n        selector: `{__name__=\"${query}\"}`,\n        labelKeys: ['__name__'],\n      };\n    }\n    throw new Error('Query must contain a selector: ' + query);\n  }\n\n  // Check if inside a selector\n  const prefix = query.slice(0, cursorOffset);\n  const prefixOpen = prefix.lastIndexOf('{');\n  const prefixClose = prefix.lastIndexOf('}');\n  if (prefixOpen === -1) {\n    throw new Error('Not inside selector, missing open brace: ' + prefix);\n  }\n  if (prefixClose > -1 && prefixClose > prefixOpen) {\n    throw new Error('Not inside selector, previous selector already closed: ' + prefix);\n  }\n  const suffix = query.slice(cursorOffset);\n  const suffixCloseIndex = suffix.indexOf('}');\n  const suffixClose = suffixCloseIndex + cursorOffset;\n  const suffixOpenIndex = suffix.indexOf('{');\n  const suffixOpen = suffixOpenIndex + cursorOffset;\n  if (suffixClose === -1) {\n    throw new Error('Not inside selector, missing closing brace in suffix: ' + suffix);\n  }\n  if (suffixOpenIndex > -1 && suffixOpen < suffixClose) {\n    throw new Error('Not inside selector, next selector opens before this one closed: ' + suffix);\n  }\n\n  // Extract clean labels to form clean selector, incomplete labels are dropped\n  const selector = query.slice(prefixOpen, suffixClose);\n  const labels: { [key: string]: { value: string; operator: string } } = {};\n  selector.replace(labelRegexp, (label, key, operator, value) => {\n    const labelOffset = query.indexOf(label);\n    const valueStart = labelOffset + key.length + operator.length + 1;\n    const valueEnd = labelOffset + key.length + operator.length + value.length - 1;\n    // Skip label if cursor is in value\n    if (cursorOffset < valueStart || cursorOffset > valueEnd) {\n      labels[key] = { value, operator };\n    }\n    return '';\n  });\n\n  // Add metric if there is one before the selector\n  const metricPrefix = query.slice(0, prefixOpen);\n  const metricMatch = metricPrefix.match(/[A-Za-z:][\\w:]*$/);\n  if (metricMatch) {\n    labels['__name__'] = { value: `\"${metricMatch[0]}\"`, operator: '=' };\n  }\n\n  // Build sorted selector\n  const labelKeys = Object.keys(labels).sort();\n  const cleanSelector = labelKeys.map((key) => `${key}${labels[key].operator}${labels[key].value}`).join(',');\n\n  const selectorString = ['{', cleanSelector, '}'].join('');\n\n  return { labelKeys, selector: selectorString };\n}\n\nexport function expandRecordingRules(query: string, mapping: { [name: string]: string }): string {\n  const ruleNames = Object.keys(mapping);\n  const rulesRegex = new RegExp(`(\\\\s|^)(${ruleNames.join('|')})(\\\\s|$|\\\\(|\\\\[|\\\\{)`, 'ig');\n  const expandedQuery = query.replace(rulesRegex, (match, pre, name, post) => `${pre}${mapping[name]}${post}`);\n\n  // Split query into array, so if query uses operators, we can correctly add labels to each individual part.\n  const queryArray = expandedQuery.split(/(\\+|\\-|\\*|\\/|\\%|\\^)/);\n\n  // Regex that matches occurrences of ){ or }{ or ]{ which is a sign of incorrecly added labels.\n  const invalidLabelsRegex = /(\\)\\{|\\}\\{|\\]\\{)/;\n  const correctlyExpandedQueryArray = queryArray.map((query) => {\n    return addLabelsToExpression(query, invalidLabelsRegex);\n  });\n\n  return correctlyExpandedQueryArray.join('');\n}\n\nfunction addLabelsToExpression(expr: string, invalidLabelsRegexp: RegExp) {\n  const match = expr.match(invalidLabelsRegexp);\n  if (!match) {\n    return expr;\n  }\n\n  // Split query into 2 parts - before the invalidLabelsRegex match and after.\n  const indexOfRegexMatch = match.index ?? 0;\n  const exprBeforeRegexMatch = expr.slice(0, indexOfRegexMatch + 1);\n  const exprAfterRegexMatch = expr.slice(indexOfRegexMatch + 1);\n\n  // Create arrayOfLabelObjects with label objects that have key, operator and value.\n  const arrayOfLabelObjects: Array<{ key: string; operator: string; value: string }> = [];\n  exprAfterRegexMatch.replace(labelRegexp, (label, key, operator, value) => {\n    arrayOfLabelObjects.push({ key, operator, value });\n    return '';\n  });\n\n  // Loop through all label objects and add them to query.\n  // As a starting point we have valid query without the labels.\n  let result = exprBeforeRegexMatch;\n  arrayOfLabelObjects.filter(Boolean).forEach((obj) => {\n    // Remove extra set of quotes from obj.value\n    const value = obj.value.slice(1, -1);\n    result = addLabelToQuery(result, obj.key, value, obj.operator);\n  });\n\n  return result;\n}\n\n/**\n * Adds metadata for synthetic metrics for which the API does not provide metadata.\n * See https://github.com/grafana/grafana/issues/22337 for details.\n *\n * @param metadata HELP and TYPE metadata from /api/v1/metadata\n */\nexport function fixSummariesMetadata(metadata: { [metric: string]: PromMetricsMetadataItem[] }): PromMetricsMetadata {\n  if (!metadata) {\n    return metadata;\n  }\n  const baseMetadata: PromMetricsMetadata = {};\n  const summaryMetadata: PromMetricsMetadata = {};\n  for (const metric in metadata) {\n    // NOTE: based on prometheus-documentation, we can receive\n    // multiple metadata-entries for the given metric, it seems\n    // it happens when the same metric is on multiple targets\n    // and their help-text differs\n    // (https://prometheus.io/docs/prometheus/latest/querying/api/#querying-metric-metadata)\n    // for now we just use the first entry.\n    const item = metadata[metric][0];\n    baseMetadata[metric] = item;\n\n    if (item.type === 'histogram') {\n      summaryMetadata[`${metric}_bucket`] = {\n        type: 'counter',\n        help: `Cumulative counters for the observation buckets (${item.help})`,\n      };\n      summaryMetadata[`${metric}_count`] = {\n        type: 'counter',\n        help: `Count of events that have been observed for the histogram metric (${item.help})`,\n      };\n      summaryMetadata[`${metric}_sum`] = {\n        type: 'counter',\n        help: `Total sum of all observed values for the histogram metric (${item.help})`,\n      };\n    }\n    if (item.type === 'summary') {\n      summaryMetadata[`${metric}_count`] = {\n        type: 'counter',\n        help: `Count of events that have been observed for the base metric (${item.help})`,\n      };\n      summaryMetadata[`${metric}_sum`] = {\n        type: 'counter',\n        help: `Total sum of all observed values for the base metric (${item.help})`,\n      };\n    }\n  }\n  // Synthetic series\n  const syntheticMetadata: PromMetricsMetadata = {};\n  syntheticMetadata['ALERTS'] = {\n    type: 'counter',\n    help: 'Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state.',\n  };\n\n  return { ...baseMetadata, ...summaryMetadata, ...syntheticMetadata };\n}\n\nexport function roundMsToMin(milliseconds: number): number {\n  return roundSecToMin(milliseconds / 1000);\n}\n\nexport function roundSecToMin(seconds: number): number {\n  return Math.floor(seconds / 60);\n}\n\nexport function limitSuggestions(items: string[]) {\n  return items.slice(0, SUGGESTIONS_LIMIT);\n}\n\nexport function addLimitInfo(items: any[] | undefined): string {\n  return items && items.length >= SUGGESTIONS_LIMIT ? `, limited to the first ${SUGGESTIONS_LIMIT} received items` : '';\n}\n\n// NOTE: the following 2 exported functions are very similar to the prometheus*Escape\n// functions in datasource.ts, but they are not exactly the same algorithm, and we found\n// no way to reuse one in the another or vice versa.\n\n// Prometheus regular-expressions use the RE2 syntax (https://github.com/google/re2/wiki/Syntax),\n// so every character that matches something in that list has to be escaped.\n// the list of metacharacters is: *+?()|\\.[]{}^$\n// we make a javascript regular expression that matches those characters:\nconst RE2_METACHARACTERS = /[*+?()|\\\\.\\[\\]{}^$]/g;\nfunction escapePrometheusRegexp(value: string): string {\n  return value.replace(RE2_METACHARACTERS, '\\\\$&');\n}\n\n// based on the openmetrics-documentation, the 3 symbols we have to handle are:\n// - \\n ... the newline character\n// - \\  ... the backslash character\n// - \"  ... the double-quote character\nexport function escapeLabelValueInExactSelector(labelValue: string): string {\n  return labelValue.replace(/\\\\/g, '\\\\\\\\').replace(/\\n/g, '\\\\n').replace(/\"/g, '\\\\\"');\n}\n\nexport function escapeLabelValueInRegexSelector(labelValue: string): string {\n  return escapeLabelValueInExactSelector(escapePrometheusRegexp(labelValue));\n}\n\nconst FromPromLikeMap: Record<string, AbstractLabelOperator> = {\n  '=': AbstractLabelOperator.Equal,\n  '!=': AbstractLabelOperator.NotEqual,\n  '=~': AbstractLabelOperator.EqualRegEx,\n  '!~': AbstractLabelOperator.NotEqualRegEx,\n};\nconst ToPromLikeMap: Record<AbstractLabelOperator, string> = invert(FromPromLikeMap) as Record<\n  AbstractLabelOperator,\n  string\n>;\n\nexport function toPromLikeExpr(labelBasedQuery: AbstractQuery): string {\n  const expr = labelBasedQuery.labelMatchers\n    .map((selector: AbstractLabelMatcher) => {\n      const operator = ToPromLikeMap[selector.operator];\n      if (operator) {\n        return `${selector.name}${operator}\"${selector.value}\"`;\n      } else {\n        return '';\n      }\n    })\n    .filter((e: string) => e !== '')\n    .join(', ');\n\n  return expr ? `{${expr}}` : '';\n}\n\nexport function toPromLikeQuery(labelBasedQuery: AbstractQuery): PromLikeQuery {\n  return {\n    refId: labelBasedQuery.refId,\n    expr: toPromLikeExpr(labelBasedQuery),\n    range: true,\n  };\n}\n\nexport interface PromLikeQuery extends DataQuery {\n  expr: string;\n  range: boolean;\n}\n\nexport function extractLabelMatchers(tokens: Array<string | Token>): AbstractLabelMatcher[] {\n  const labelMatchers: AbstractLabelMatcher[] = [];\n\n  for (let prop in tokens) {\n    if (tokens[prop] instanceof Token) {\n      let token: Token = tokens[prop] as Token;\n      if (token.type === 'context-labels') {\n        let labelKey = '';\n        let labelValue = '';\n        let labelOperator = '';\n        let contentTokens: any[] = token.content as any[];\n        for (let currentToken in contentTokens) {\n          if (typeof contentTokens[currentToken] === 'string') {\n            let currentStr: string;\n            currentStr = contentTokens[currentToken] as string;\n            if (currentStr === '=' || currentStr === '!=' || currentStr === '=~' || currentStr === '!~') {\n              labelOperator = currentStr;\n            }\n          } else if (contentTokens[currentToken] instanceof Token) {\n            switch (contentTokens[currentToken].type) {\n              case 'label-key':\n                labelKey = contentTokens[currentToken].content as string;\n                break;\n              case 'label-value':\n                labelValue = contentTokens[currentToken].content as string;\n                labelValue = labelValue.substring(1, labelValue.length - 1);\n                const labelComparator = FromPromLikeMap[labelOperator];\n                if (labelComparator) {\n                  labelMatchers.push({ name: labelKey, operator: labelComparator, value: labelValue });\n                }\n                break;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return labelMatchers;\n}\n","import { once, chain, difference } from 'lodash';\nimport LRU from 'lru-cache';\nimport Prism from 'prismjs';\nimport { Value } from 'slate';\n\nimport {\n  AbstractLabelMatcher,\n  AbstractLabelOperator,\n  AbstractQuery,\n  dateTime,\n  HistoryItem,\n  LanguageProvider,\n} from '@grafana/data';\nimport { BackendSrvRequest } from '@grafana/runtime';\nimport { CompletionItem, CompletionItemGroup, SearchFunctionType, TypeaheadInput, TypeaheadOutput } from '@grafana/ui';\n\nimport { PrometheusDatasource } from './datasource';\nimport {\n  addLimitInfo,\n  extractLabelMatchers,\n  fixSummariesMetadata,\n  parseSelector,\n  processHistogramMetrics,\n  processLabels,\n  roundSecToMin,\n  toPromLikeQuery,\n} from './language_utils';\nimport PromqlSyntax, { FUNCTIONS, RATE_RANGES } from './metricsql';\nimport { PromMetricsMetadata, PromQuery } from './types';\n\nconst DEFAULT_KEYS = ['job', 'instance'];\nconst EMPTY_SELECTOR = '{}';\nconst HISTORY_ITEM_COUNT = 5;\nconst HISTORY_COUNT_CUTOFF = 1000 * 60 * 60 * 24; // 24h\n// Max number of items (metrics, labels, values) that we display as suggestions. Prevents from running out of memory.\nexport const SUGGESTIONS_LIMIT = 10000;\n\nconst wrapLabel = (label: string): CompletionItem => ({ label });\n\nconst setFunctionKind = (suggestion: CompletionItem): CompletionItem => {\n  suggestion.kind = 'function';\n  return suggestion;\n};\n\nexport function addHistoryMetadata(item: CompletionItem, history: any[]): CompletionItem {\n  const cutoffTs = Date.now() - HISTORY_COUNT_CUTOFF;\n  const historyForItem = history.filter((h) => h.ts > cutoffTs && h.query === item.label);\n  const count = historyForItem.length;\n  const recent = historyForItem[0];\n  let hint = `Queried ${count} times in the last 24h.`;\n\n  if (recent) {\n    const lastQueried = dateTime(recent.ts).fromNow();\n    hint = `${hint} Last queried ${lastQueried}.`;\n  }\n\n  return {\n    ...item,\n    documentation: hint,\n  };\n}\n\nfunction addMetricsMetadata(metric: string, metadata?: PromMetricsMetadata): CompletionItem {\n  const item: CompletionItem = { label: metric };\n  if (metadata && metadata[metric]) {\n    item.documentation = getMetadataString(metric, metadata);\n  }\n  return item;\n}\n\nexport function getMetadataString(metric: string, metadata: PromMetricsMetadata): string | undefined {\n  if (!metadata[metric]) {\n    return undefined;\n  }\n  const { type, help } = metadata[metric];\n  return `${type.toUpperCase()}: ${help}`;\n}\n\nconst PREFIX_DELIMITER_REGEX =\n  /(=\"|!=\"|=~\"|!~\"|\\{|\\[|\\(|\\+|-|\\/|\\*|%|\\^|\\band\\b|\\bor\\b|\\bunless\\b|==|>=|!=|<=|>|<|=|~|,)/;\n\ninterface AutocompleteContext {\n  history?: Array<HistoryItem<PromQuery>>;\n}\nexport default class PromQlLanguageProvider extends LanguageProvider {\n  histogramMetrics: string[];\n  timeRange?: { start: number; end: number };\n  metrics: string[];\n  metricsMetadata?: PromMetricsMetadata;\n  declare startTask: Promise<any>;\n  datasource: PrometheusDatasource;\n  labelKeys: string[] = [];\n  declare labelFetchTs: number;\n\n  /**\n   *  Cache for labels of series. This is bit simplistic in the sense that it just counts responses each as a 1 and does\n   *  not account for different size of a response. If that is needed a `length` function can be added in the options.\n   *  10 as a max size is totally arbitrary right now.\n   */\n  private labelsCache = new LRU<string, Record<string, string[]>>({ max: 10 });\n\n  constructor(datasource: PrometheusDatasource, initialValues?: Partial<PromQlLanguageProvider>) {\n    super();\n\n    this.datasource = datasource;\n    this.histogramMetrics = [];\n    this.timeRange = { start: 0, end: 0 };\n    this.metrics = [];\n\n    Object.assign(this, initialValues);\n  }\n\n  // Strip syntax chars so that typeahead suggestions can work on clean inputs\n  cleanText(s: string) {\n    const parts = s.split(PREFIX_DELIMITER_REGEX);\n    const last = parts.pop()!;\n    return last.trimLeft().replace(/\"$/, '').replace(/^\"/, '');\n  }\n\n  get syntax() {\n    return PromqlSyntax;\n  }\n\n  request = async (url: string, defaultValue: any, params = {}, options?: Partial<BackendSrvRequest>): Promise<any> => {\n    try {\n      const res = await this.datasource.metadataRequest(url, params, options);\n      return res.data.data;\n    } catch (error) {\n      console.error(error);\n    }\n\n    return defaultValue;\n  };\n\n  start = async (): Promise<any[]> => {\n    if (this.datasource.lookupsDisabled) {\n      return [];\n    }\n\n    // TODO #33976: make those requests parallel\n    await this.fetchLabels();\n    this.metrics = (await this.fetchLabelValues('__name__')) || [];\n    await this.loadMetricsMetadata();\n    this.histogramMetrics = processHistogramMetrics(this.metrics).sort();\n    return [];\n  };\n\n  async loadMetricsMetadata() {\n    this.metricsMetadata = fixSummariesMetadata(\n      await this.request('/api/v1/metadata', {}, {}, { showErrorAlert: false })\n    );\n  }\n\n  getLabelKeys(): string[] {\n    return this.labelKeys;\n  }\n\n  provideCompletionItems = async (\n    { prefix, text, value, labelKey, wrapperClasses }: TypeaheadInput,\n    context: AutocompleteContext = {}\n  ): Promise<TypeaheadOutput> => {\n    const emptyResult: TypeaheadOutput = { suggestions: [] };\n\n    if (!value) {\n      return emptyResult;\n    }\n\n    // Local text properties\n    const empty = value.document.text.length === 0;\n    const selectedLines = value.document.getTextsAtRange(value.selection);\n    const currentLine = selectedLines.size === 1 ? selectedLines.first().getText() : null;\n\n    const nextCharacter = currentLine ? currentLine[value.selection.anchor.offset] : null;\n\n    // Syntax spans have 3 classes by default. More indicate a recognized token\n    const tokenRecognized = wrapperClasses.length > 3;\n    // Non-empty prefix, but not inside known token\n    const prefixUnrecognized = prefix && !tokenRecognized;\n\n    // Prevent suggestions in `function(|suffix)`\n    const noSuffix = !nextCharacter || nextCharacter === ')';\n\n    // Prefix is safe if it does not immediately follow a complete expression and has no text after it\n    const safePrefix = prefix && !text.match(/^[\\]})\\s]+$/) && noSuffix;\n\n    // About to type next operand if preceded by binary operator\n    const operatorsPattern = /[+\\-*/^%]/;\n    const isNextOperand = text.match(operatorsPattern);\n\n    // Determine candidates by CSS context\n    if (wrapperClasses.includes('context-range')) {\n      // Suggestions for metric[|]\n      return this.getRangeCompletionItems();\n    } else if (wrapperClasses.includes('context-labels')) {\n      // Suggestions for metric{|} and metric{foo=|}, as well as metric-independent label queries like {|}\n      return this.getLabelCompletionItems({ prefix, text, value, labelKey, wrapperClasses });\n    } else if (wrapperClasses.includes('context-aggregation')) {\n      // Suggestions for sum(metric) by (|)\n      return this.getAggregationCompletionItems(value);\n    } else if (empty) {\n      // Suggestions for empty query field\n      return this.getEmptyCompletionItems(context);\n    } else if (prefixUnrecognized && noSuffix && !isNextOperand) {\n      // Show term suggestions in a couple of scenarios\n      return this.getBeginningCompletionItems(context);\n    } else if (prefixUnrecognized && safePrefix) {\n      // Show term suggestions in a couple of scenarios\n      return this.getTermCompletionItems();\n    }\n\n    return emptyResult;\n  };\n\n  getBeginningCompletionItems = (context: AutocompleteContext): TypeaheadOutput => {\n    return {\n      suggestions: [...this.getEmptyCompletionItems(context).suggestions, ...this.getTermCompletionItems().suggestions],\n    };\n  };\n\n  getEmptyCompletionItems = (context: AutocompleteContext): TypeaheadOutput => {\n    const { history } = context;\n    const suggestions: CompletionItemGroup[] = [];\n\n    if (history && history.length) {\n      const historyItems = chain(history)\n        .map((h) => h.query.expr)\n        .filter()\n        .uniq()\n        .take(HISTORY_ITEM_COUNT)\n        .map(wrapLabel)\n        .map((item) => addHistoryMetadata(item, history))\n        .value();\n\n      suggestions.push({\n        searchFunctionType: SearchFunctionType.Prefix,\n        skipSort: true,\n        label: 'History',\n        items: historyItems,\n      });\n    }\n\n    return { suggestions };\n  };\n\n  getTermCompletionItems = (): TypeaheadOutput => {\n    const { metrics, metricsMetadata } = this;\n    const suggestions: CompletionItemGroup[] = [];\n\n    suggestions.push({\n      searchFunctionType: SearchFunctionType.Prefix,\n      label: 'Functions',\n      items: FUNCTIONS.map(setFunctionKind),\n    });\n\n    if (metrics && metrics.length) {\n      suggestions.push({\n        label: 'Metrics',\n        items: metrics.map((m) => addMetricsMetadata(m, metricsMetadata)),\n        searchFunctionType: SearchFunctionType.Fuzzy,\n      });\n    }\n\n    return { suggestions };\n  };\n\n  getRangeCompletionItems(): TypeaheadOutput {\n    return {\n      context: 'context-range',\n      suggestions: [\n        {\n          label: 'Range vector',\n          items: [...RATE_RANGES],\n        },\n      ],\n    };\n  }\n\n  getAggregationCompletionItems = async (value: Value): Promise<TypeaheadOutput> => {\n    const suggestions: CompletionItemGroup[] = [];\n\n    // Stitch all query lines together to support multi-line queries\n    let queryOffset;\n    const queryText = value.document.getBlocks().reduce((text, block) => {\n      if (text === undefined) {\n        return '';\n      }\n      if (!block) {\n        return text;\n      }\n\n      const blockText = block?.getText();\n\n      if (value.anchorBlock.key === block.key) {\n        // Newline characters are not accounted for but this is irrelevant\n        // for the purpose of extracting the selector string\n        queryOffset = value.selection.anchor.offset + text.length;\n      }\n\n      return text + blockText;\n    }, '');\n\n    // Try search for selector part on the left-hand side, such as `sum (m) by (l)`\n    const openParensAggregationIndex = queryText.lastIndexOf('(', queryOffset);\n    let openParensSelectorIndex = queryText.lastIndexOf('(', openParensAggregationIndex - 1);\n    let closeParensSelectorIndex = queryText.indexOf(')', openParensSelectorIndex);\n\n    // Try search for selector part of an alternate aggregation clause, such as `sum by (l) (m)`\n    if (openParensSelectorIndex === -1) {\n      const closeParensAggregationIndex = queryText.indexOf(')', queryOffset);\n      closeParensSelectorIndex = queryText.indexOf(')', closeParensAggregationIndex + 1);\n      openParensSelectorIndex = queryText.lastIndexOf('(', closeParensSelectorIndex);\n    }\n\n    const result = {\n      suggestions,\n      context: 'context-aggregation',\n    };\n\n    // Suggestions are useless for alternative aggregation clauses without a selector in context\n    if (openParensSelectorIndex === -1) {\n      return result;\n    }\n\n    // Range vector syntax not accounted for by subsequent parse so discard it if present\n    const selectorString = queryText\n      .slice(openParensSelectorIndex + 1, closeParensSelectorIndex)\n      .replace(/\\[[^\\]]+\\]$/, '');\n\n    const selector = parseSelector(selectorString, selectorString.length - 2).selector;\n\n    const series = await this.getSeries(selector);\n    const labelKeys = Object.keys(series);\n    if (labelKeys.length > 0) {\n      const limitInfo = addLimitInfo(labelKeys);\n      suggestions.push({\n        label: `Labels${limitInfo}`,\n        items: labelKeys.map(wrapLabel),\n        searchFunctionType: SearchFunctionType.Fuzzy,\n      });\n    }\n    return result;\n  };\n\n  getLabelCompletionItems = async ({\n    text,\n    wrapperClasses,\n    labelKey,\n    value,\n  }: TypeaheadInput): Promise<TypeaheadOutput> => {\n    if (!value) {\n      return { suggestions: [] };\n    }\n\n    const suggestions: CompletionItemGroup[] = [];\n    const line = value.anchorBlock.getText();\n    const cursorOffset = value.selection.anchor.offset;\n    const suffix = line.substr(cursorOffset);\n    const prefix = line.substr(0, cursorOffset);\n    const isValueStart = text.match(/^(=|=~|!=|!~)/);\n    const isValueEnd = suffix.match(/^\"?[,}]|$/);\n    // Detect cursor in front of value, e.g., {key=|\"}\n    const isPreValue = prefix.match(/(=|=~|!=|!~)$/) && suffix.match(/^\"/);\n\n    // Don't suggest anything at the beginning or inside a value\n    const isValueEmpty = isValueStart && isValueEnd;\n    const hasValuePrefix = isValueEnd && !isValueStart;\n    if ((!isValueEmpty && !hasValuePrefix) || isPreValue) {\n      return { suggestions };\n    }\n\n    // Get normalized selector\n    let selector;\n    let parsedSelector;\n    try {\n      parsedSelector = parseSelector(line, cursorOffset);\n      selector = parsedSelector.selector;\n    } catch {\n      selector = EMPTY_SELECTOR;\n    }\n\n    const containsMetric = selector.includes('__name__=');\n    const existingKeys = parsedSelector ? parsedSelector.labelKeys : [];\n\n    let series: Record<string, string[]> = {};\n    // Query labels for selector\n    if (selector) {\n      series = await this.getSeries(selector, !containsMetric);\n    }\n\n    if (Object.keys(series).length === 0) {\n      console.warn(`Server did not return any values for selector = ${selector}`);\n      return { suggestions };\n    }\n\n    let context: string | undefined;\n\n    if ((text && isValueStart) || wrapperClasses.includes('attr-value')) {\n      // Label values\n      if (labelKey && series[labelKey]) {\n        context = 'context-label-values';\n        const limitInfo = addLimitInfo(series[labelKey]);\n        suggestions.push({\n          label: `Label values for \"${labelKey}\"${limitInfo}`,\n          items: series[labelKey].map(wrapLabel),\n          searchFunctionType: SearchFunctionType.Fuzzy,\n        });\n      }\n    } else {\n      // Label keys\n      const labelKeys = series ? Object.keys(series) : containsMetric ? null : DEFAULT_KEYS;\n\n      if (labelKeys) {\n        const possibleKeys = difference(labelKeys, existingKeys);\n        if (possibleKeys.length) {\n          context = 'context-labels';\n          const newItems = possibleKeys.map((key) => ({ label: key }));\n          const limitInfo = addLimitInfo(newItems);\n          const newSuggestion: CompletionItemGroup = {\n            label: `Labels${limitInfo}`,\n            items: newItems,\n            searchFunctionType: SearchFunctionType.Fuzzy,\n          };\n          suggestions.push(newSuggestion);\n        }\n      }\n    }\n\n    return { context, suggestions };\n  };\n\n  importFromAbstractQuery(labelBasedQuery: AbstractQuery): PromQuery {\n    return toPromLikeQuery(labelBasedQuery);\n  }\n\n  exportToAbstractQuery(query: PromQuery): AbstractQuery {\n    const promQuery = query.expr;\n    if (!promQuery || promQuery.length === 0) {\n      return { refId: query.refId, labelMatchers: [] };\n    }\n    const tokens = Prism.tokenize(promQuery, PromqlSyntax);\n    const labelMatchers: AbstractLabelMatcher[] = extractLabelMatchers(tokens);\n    const nameLabelValue = getNameLabelValue(promQuery, tokens);\n    if (nameLabelValue && nameLabelValue.length > 0) {\n      labelMatchers.push({\n        name: '__name__',\n        operator: AbstractLabelOperator.Equal,\n        value: nameLabelValue,\n      });\n    }\n\n    return {\n      refId: query.refId,\n      labelMatchers,\n    };\n  }\n\n  async getSeries(selector: string, withName?: boolean): Promise<Record<string, string[]>> {\n    if (this.datasource.lookupsDisabled) {\n      return {};\n    }\n    try {\n      if (selector === EMPTY_SELECTOR) {\n        return await this.fetchDefaultSeries();\n      } else {\n        return await this.fetchSeriesLabels(selector, withName);\n      }\n    } catch (error) {\n      // TODO: better error handling\n      console.error(error);\n      return {};\n    }\n  }\n\n  fetchLabelValues = async (key: string): Promise<string[]> => {\n    const params = this.datasource.getTimeRangeParams();\n    const url = `/api/v1/label/${this.datasource.interpolateString(key)}/values`;\n    return await this.request(url, [], params);\n  };\n\n  async getLabelValues(key: string): Promise<string[]> {\n    return await this.fetchLabelValues(key);\n  }\n\n  /**\n   * Fetches all label keys\n   */\n  async fetchLabels(): Promise<string[]> {\n    const url = '/api/v1/labels';\n    const params = this.datasource.getTimeRangeParams();\n    this.labelFetchTs = Date.now().valueOf();\n\n    const res = await this.request(url, [], params);\n    if (Array.isArray(res)) {\n      this.labelKeys = res.slice().sort();\n    }\n\n    return [];\n  }\n\n  /**\n   * Fetch labels for a series. This is cached by its args but also by the global timeRange currently selected as\n   * they can change over requested time.\n   * @param name\n   * @param withName\n   */\n  fetchSeriesLabels = async (name: string, withName?: boolean): Promise<Record<string, string[]>> => {\n    const interpolatedName = this.datasource.interpolateString(name);\n    const range = this.datasource.getTimeRangeParams();\n    const urlParams = {\n      ...range,\n      'match[]': interpolatedName,\n    };\n    const url = `/api/v1/series`;\n    // Cache key is a bit different here. We add the `withName` param and also round up to a minute the intervals.\n    // The rounding may seem strange but makes relative intervals like now-1h less prone to need separate request every\n    // millisecond while still actually getting all the keys for the correct interval. This still can create problems\n    // when user does not the newest values for a minute if already cached.\n    const cacheParams = new URLSearchParams({\n      'match[]': interpolatedName,\n      start: roundSecToMin(parseInt(range.start, 10)).toString(),\n      end: roundSecToMin(parseInt(range.end, 10)).toString(),\n      withName: withName ? 'true' : 'false',\n    });\n\n    const cacheKey = `/api/v1/series?${cacheParams.toString()}`;\n    let value = this.labelsCache.get(cacheKey);\n    if (!value) {\n      const data = await this.request(url, [], urlParams);\n      const { values } = processLabels(data, withName);\n      value = values;\n      this.labelsCache.set(cacheKey, value);\n    }\n    return value;\n  };\n\n  /**\n   * Fetch series for a selector. Use this for raw results. Use fetchSeriesLabels() to get labels.\n   * @param match\n   */\n  fetchSeries = async (match: string): Promise<Array<Record<string, string>>> => {\n    const url = '/api/v1/series';\n    const range = this.datasource.getTimeRangeParams();\n    const params = { ...range, 'match[]': match };\n    return await this.request(url, {}, params);\n  };\n\n  /**\n   * Fetch this only one as we assume this won't change over time. This is cached differently from fetchSeriesLabels\n   * because we can cache more aggressively here and also we do not want to invalidate this cache the same way as in\n   * fetchSeriesLabels.\n   */\n  fetchDefaultSeries = once(async () => {\n    const values = await Promise.all(DEFAULT_KEYS.map((key) => this.fetchLabelValues(key)));\n    return DEFAULT_KEYS.reduce((acc, key, i) => ({ ...acc, [key]: values[i] }), {});\n  });\n}\n\nfunction getNameLabelValue(promQuery: string, tokens: any): string {\n  let nameLabelValue = '';\n  for (let prop in tokens) {\n    if (typeof tokens[prop] === 'string') {\n      nameLabelValue = tokens[prop] as string;\n      break;\n    }\n  }\n  return nameLabelValue;\n}\n","import { uniqBy } from 'lodash';\nimport React, { useState } from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Select } from '@grafana/ui';\n\nimport { AccessoryButton, InputGroup } from '../../components/QueryEditor';\n\nimport { QueryBuilderLabelFilter } from './types';\n\nexport interface Props {\n  defaultOp: string;\n  item: Partial<QueryBuilderLabelFilter>;\n  onChange: (value: QueryBuilderLabelFilter) => void;\n  onGetLabelNames: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  onGetLabelValues: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  onDelete: () => void;\n}\n\nexport function LabelFilterItem({ item, defaultOp, onChange, onDelete, onGetLabelNames, onGetLabelValues }: Props) {\n  const [state, setState] = useState<{\n    labelNames?: SelectableValue[];\n    labelValues?: SelectableValue[];\n    isLoadingLabelNames?: boolean;\n    isLoadingLabelValues?: boolean;\n  }>({});\n\n  const isMultiSelect = () => {\n    return operators.find((op) => op.label === item.op)?.isMultiValue;\n  };\n\n  const getSelectOptionsFromString = (item?: string): string[] => {\n    if (item) {\n      if (item.indexOf('|') > 0) {\n        return item.split('|');\n      }\n      return [item];\n    }\n    return [];\n  };\n\n  const getOptions = (): SelectableValue[] => {\n    const labelValues = state.labelValues ? [...state.labelValues] : [];\n    const selectedOptions = getSelectOptionsFromString(item?.value).map(toOption);\n\n    // Remove possible duplicated values\n    return uniqBy([...selectedOptions, ...labelValues], 'value');\n  };\n\n  return (\n    <div data-testid=\"prometheus-dimensions-filter-item\">\n      <InputGroup>\n        <Select\n          placeholder=\"Select label\"\n          aria-label={selectors.components.QueryBuilder.labelSelect}\n          inputId=\"prometheus-dimensions-filter-item-key\"\n          width=\"auto\"\n          value={item.label ? toOption(item.label) : null}\n          allowCustomValue\n          onOpenMenu={async () => {\n            setState({ isLoadingLabelNames: true });\n            const labelNames = await onGetLabelNames(item);\n            setState({ labelNames, isLoadingLabelNames: undefined });\n          }}\n          isLoading={state.isLoadingLabelNames}\n          options={state.labelNames}\n          onChange={(change) => {\n            if (change.label) {\n              onChange({\n                ...item,\n                op: item.op ?? defaultOp,\n                label: change.label,\n              } as any as QueryBuilderLabelFilter);\n            }\n          }}\n        />\n\n        <Select\n          aria-label={selectors.components.QueryBuilder.matchOperatorSelect}\n          value={toOption(item.op ?? defaultOp)}\n          options={operators}\n          width=\"auto\"\n          onChange={(change) => {\n            if (change.value != null) {\n              onChange({ ...item, op: change.value } as any as QueryBuilderLabelFilter);\n            }\n          }}\n        />\n\n        <Select\n          placeholder=\"Select value\"\n          aria-label={selectors.components.QueryBuilder.valueSelect}\n          inputId=\"prometheus-dimensions-filter-item-value\"\n          width=\"auto\"\n          value={\n            isMultiSelect()\n              ? getSelectOptionsFromString(item?.value).map(toOption)\n              : getSelectOptionsFromString(item?.value).map(toOption)[0]\n          }\n          allowCustomValue\n          onOpenMenu={async () => {\n            setState({ isLoadingLabelValues: true });\n            const labelValues = await onGetLabelValues(item);\n            setState({\n              ...state,\n              labelValues,\n              isLoadingLabelValues: undefined,\n            });\n          }}\n          isMulti={isMultiSelect()}\n          isLoading={state.isLoadingLabelValues}\n          options={getOptions()}\n          onChange={(change) => {\n            if (change.value) {\n              onChange({ ...item, value: change.value, op: item.op ?? defaultOp } as any as QueryBuilderLabelFilter);\n            } else {\n              const changes = change\n                .map((change: any) => {\n                  return change.label;\n                })\n                .join('|');\n              onChange({ ...item, value: changes, op: item.op ?? defaultOp } as any as QueryBuilderLabelFilter);\n            }\n          }}\n        />\n        <AccessoryButton aria-label=\"remove\" icon=\"times\" variant=\"secondary\" onClick={onDelete} />\n      </InputGroup>\n    </div>\n  );\n}\n\nconst operators = [\n  { label: '=~', value: '=~', isMultiValue: true },\n  { label: '=', value: '=', isMultiValue: false },\n  { label: '!=', value: '!=', isMultiValue: false },\n  { label: '!~', value: '!~', isMultiValue: true },\n];\n","import { isEqual } from 'lodash';\nimport React, { useEffect, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\n\nimport { EditorFieldGroup, EditorField, EditorList } from '../../components/QueryEditor';\n\nimport { LabelFilterItem } from './LabelFilterItem';\nimport { QueryBuilderLabelFilter } from './types';\n\n\nexport interface Props {\n  labelsFilters: QueryBuilderLabelFilter[];\n  onChange: (labelFilters: QueryBuilderLabelFilter[]) => void;\n  onGetLabelNames: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  onGetLabelValues: (forLabel: Partial<QueryBuilderLabelFilter>) => Promise<SelectableValue[]>;\n  error?: string;\n}\n\nexport function LabelFilters({ labelsFilters, onChange, onGetLabelNames, onGetLabelValues, error }: Props) {\n  const defaultOp = '=';\n  const [items, setItems] = useState<Array<Partial<QueryBuilderLabelFilter>>>([{ op: defaultOp }]);\n\n  useEffect(() => {\n    if (labelsFilters.length > 0) {\n      setItems(labelsFilters);\n    } else {\n      setItems([{ op: defaultOp }]);\n    }\n  }, [labelsFilters]);\n\n  const onLabelsChange = (newItems: Array<Partial<QueryBuilderLabelFilter>>) => {\n    setItems(newItems);\n\n    // Extract full label filters with both label & value\n    const newLabels = newItems.filter((x) => x.label != null && x.value != null);\n    if (!isEqual(newLabels, labelsFilters)) {\n      onChange(newLabels as QueryBuilderLabelFilter[]);\n    }\n  };\n\n  return (\n    <EditorFieldGroup>\n      <EditorField label=\"Label filters\" error={error} invalid={!!error}>\n        <EditorList\n          items={items}\n          onChange={onLabelsChange}\n          renderItem={(item, onChangeItem, onDelete) => (\n            <LabelFilterItem\n              item={item}\n              defaultOp={defaultOp}\n              onChange={onChangeItem}\n              onDelete={onDelete}\n              onGetLabelNames={onGetLabelNames}\n              onGetLabelValues={onGetLabelValues}\n            />\n          )}\n        />\n      </EditorField>\n    </EditorFieldGroup>\n  );\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2, renderMarkdown } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nexport interface Props {\n  title?: React.ReactNode;\n  children?: React.ReactNode;\n  markdown?: string;\n  stepNumber?: number;\n}\n\nexport function OperationExplainedBox({ title, stepNumber, markdown, children }: Props) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.box}>\n      {stepNumber !== undefined && <div className={styles.stepNumber}>{stepNumber}</div>}\n      <div className={styles.boxInner}>\n        {title && (\n          <div className={styles.header}>\n            <span>{title}</span>\n          </div>\n        )}\n        <div className={styles.body}>\n          {markdown && <div dangerouslySetInnerHTML={{ __html: renderMarkdown(markdown) }}></div>}\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    box: css({\n      background: theme.colors.background.secondary,\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.borderRadius(),\n      position: 'relative',\n    }),\n    boxInner: css({\n      marginLeft: theme.spacing(4),\n    }),\n    stepNumber: css({\n      fontWeight: theme.typography.fontWeightMedium,\n      background: theme.colors.secondary.main,\n      width: '20px',\n      height: '20px',\n      borderRadius: '50%',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      position: 'absolute',\n      top: '10px',\n      left: '11px',\n      fontSize: theme.typography.bodySmall.fontSize,\n    }),\n    header: css({\n      paddingBottom: theme.spacing(0.5),\n      display: 'flex',\n      alignItems: 'center',\n      fontFamily: theme.typography.fontFamilyMonospace,\n    }),\n    body: css({\n      color: theme.colors.text.secondary,\n      'p:last-child': {\n        margin: 0,\n      },\n      a: {\n        color: theme.colors.text.link,\n        textDecoration: 'underline',\n      },\n    }),\n  };\n};\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import { useState, useRef, useEffect } from 'react';\n\nfunction areInputsEqual(newInputs, lastInputs) {\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n\n  for (var i = 0; i < newInputs.length; i++) {\n    if (newInputs[i] !== lastInputs[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction useMemoOne(getResult, inputs) {\n  var initial = useState(function () {\n    return {\n      inputs: inputs,\n      result: getResult()\n    };\n  })[0];\n  var isFirstRun = useRef(true);\n  var committed = useRef(initial);\n  var useCache = isFirstRun.current || Boolean(inputs && committed.current.inputs && areInputsEqual(inputs, committed.current.inputs));\n  var cache = useCache ? committed.current : {\n    inputs: inputs,\n    result: getResult()\n  };\n  useEffect(function () {\n    isFirstRun.current = false;\n    committed.current = cache;\n  }, [cache]);\n  return cache.result;\n}\nfunction useCallbackOne(callback, inputs) {\n  return useMemoOne(function () {\n    return callback;\n  }, inputs);\n}\nvar useMemo = useMemoOne;\nvar useCallback = useCallbackOne;\n\nexport { useCallback, useCallbackOne, useMemo, useMemoOne };\n","import invariant from 'tiny-invariant';\n\nvar getRect = function getRect(_ref) {\n  var top = _ref.top,\n      right = _ref.right,\n      bottom = _ref.bottom,\n      left = _ref.left;\n  var width = right - left;\n  var height = bottom - top;\n  var rect = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left,\n    width: width,\n    height: height,\n    x: left,\n    y: top,\n    center: {\n      x: (right + left) / 2,\n      y: (bottom + top) / 2\n    }\n  };\n  return rect;\n};\nvar expand = function expand(target, expandBy) {\n  return {\n    top: target.top - expandBy.top,\n    left: target.left - expandBy.left,\n    bottom: target.bottom + expandBy.bottom,\n    right: target.right + expandBy.right\n  };\n};\nvar shrink = function shrink(target, shrinkBy) {\n  return {\n    top: target.top + shrinkBy.top,\n    left: target.left + shrinkBy.left,\n    bottom: target.bottom - shrinkBy.bottom,\n    right: target.right - shrinkBy.right\n  };\n};\n\nvar shift = function shift(target, shiftBy) {\n  return {\n    top: target.top + shiftBy.y,\n    left: target.left + shiftBy.x,\n    bottom: target.bottom + shiftBy.y,\n    right: target.right + shiftBy.x\n  };\n};\n\nvar noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\nvar createBox = function createBox(_ref2) {\n  var borderBox = _ref2.borderBox,\n      _ref2$margin = _ref2.margin,\n      margin = _ref2$margin === void 0 ? noSpacing : _ref2$margin,\n      _ref2$border = _ref2.border,\n      border = _ref2$border === void 0 ? noSpacing : _ref2$border,\n      _ref2$padding = _ref2.padding,\n      padding = _ref2$padding === void 0 ? noSpacing : _ref2$padding;\n  var marginBox = getRect(expand(borderBox, margin));\n  var paddingBox = getRect(shrink(borderBox, border));\n  var contentBox = getRect(shrink(paddingBox, padding));\n  return {\n    marginBox: marginBox,\n    borderBox: getRect(borderBox),\n    paddingBox: paddingBox,\n    contentBox: contentBox,\n    margin: margin,\n    border: border,\n    padding: padding\n  };\n};\n\nvar parse = function parse(raw) {\n  var value = raw.slice(0, -2);\n  var suffix = raw.slice(-2);\n\n  if (suffix !== 'px') {\n    return 0;\n  }\n\n  var result = Number(value);\n  !!isNaN(result) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Could not parse value [raw: \" + raw + \", without suffix: \" + value + \"]\") : invariant(false) : void 0;\n  return result;\n};\n\nvar getWindowScroll = function getWindowScroll() {\n  return {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  };\n};\n\nvar offset = function offset(original, change) {\n  var borderBox = original.borderBox,\n      border = original.border,\n      margin = original.margin,\n      padding = original.padding;\n  var shifted = shift(borderBox, change);\n  return createBox({\n    borderBox: shifted,\n    border: border,\n    margin: margin,\n    padding: padding\n  });\n};\nvar withScroll = function withScroll(original, scroll) {\n  if (scroll === void 0) {\n    scroll = getWindowScroll();\n  }\n\n  return offset(original, scroll);\n};\nvar calculateBox = function calculateBox(borderBox, styles) {\n  var margin = {\n    top: parse(styles.marginTop),\n    right: parse(styles.marginRight),\n    bottom: parse(styles.marginBottom),\n    left: parse(styles.marginLeft)\n  };\n  var padding = {\n    top: parse(styles.paddingTop),\n    right: parse(styles.paddingRight),\n    bottom: parse(styles.paddingBottom),\n    left: parse(styles.paddingLeft)\n  };\n  var border = {\n    top: parse(styles.borderTopWidth),\n    right: parse(styles.borderRightWidth),\n    bottom: parse(styles.borderBottomWidth),\n    left: parse(styles.borderLeftWidth)\n  };\n  return createBox({\n    borderBox: borderBox,\n    margin: margin,\n    padding: padding,\n    border: border\n  });\n};\nvar getBox = function getBox(el) {\n  var borderBox = el.getBoundingClientRect();\n  var styles = window.getComputedStyle(el);\n  return calculateBox(borderBox, styles);\n};\n\nexport { calculateBox, createBox, expand, getBox, getRect, offset, shrink, withScroll };\n","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n    if (condition) {\n        return;\n    }\n    if (isProduction) {\n        throw new Error(prefix);\n    }\n    var provided = typeof message === 'function' ? message() : message;\n    var value = provided ? prefix + \": \" + provided : prefix;\n    throw new Error(value);\n}\n\nexport { invariant as default };\n","var safeIsNaN = Number.isNaN ||\n    function ponyfill(value) {\n        return typeof value === 'number' && value !== value;\n    };\nfunction isEqual(first, second) {\n    if (first === second) {\n        return true;\n    }\n    if (safeIsNaN(first) && safeIsNaN(second)) {\n        return true;\n    }\n    return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (!isEqual(newInputs[i], lastInputs[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var lastThis;\n    var lastArgs = [];\n    var lastResult;\n    var calledOnce = false;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n            return lastResult;\n        }\n        lastResult = resultFn.apply(this, newArgs);\n        calledOnce = true;\n        lastThis = this;\n        lastArgs = newArgs;\n        return lastResult;\n    }\n    return memoized;\n}\n\nexport default memoizeOne;\n","var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;\n","import React, { useLayoutEffect, useEffect, useRef, useState, useContext } from 'react';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { createStore as createStore$1, applyMiddleware, compose, bindActionCreators } from 'redux';\nimport { Provider, connect } from 'react-redux';\nimport { useMemo, useCallback } from 'use-memo-one';\nimport { getRect, expand, offset, withScroll, getBox, createBox, calculateBox } from 'css-box-model';\nimport memoizeOne from 'memoize-one';\nimport rafSchd from 'raf-schd';\nimport ReactDOM from 'react-dom';\n\nvar isProduction = process.env.NODE_ENV === 'production';\nvar spacesAndTabs = /[ \\t]{2,}/g;\nvar lineStartWithSpaces = /^[ \\t]*/gm;\n\nvar clean = function clean(value) {\n  return value.replace(spacesAndTabs, ' ').replace(lineStartWithSpaces, '').trim();\n};\n\nvar getDevMessage = function getDevMessage(message) {\n  return clean(\"\\n  %creact-beautiful-dnd\\n\\n  %c\" + clean(message) + \"\\n\\n  %c\\uD83D\\uDC77\\u200D This is a development only message. It will be removed in production builds.\\n\");\n};\n\nvar getFormattedMessage = function getFormattedMessage(message) {\n  return [getDevMessage(message), 'color: #00C584; font-size: 1.2em; font-weight: bold;', 'line-height: 1.5', 'color: #723874;'];\n};\nvar isDisabledFlag = '__react-beautiful-dnd-disable-dev-warnings';\nfunction log(type, message) {\n  var _console;\n\n  if (isProduction) {\n    return;\n  }\n\n  if (typeof window !== 'undefined' && window[isDisabledFlag]) {\n    return;\n  }\n\n  (_console = console)[type].apply(_console, getFormattedMessage(message));\n}\nvar warning = log.bind(null, 'warn');\nvar error = log.bind(null, 'error');\n\nfunction noop() {}\n\nfunction getOptions(shared, fromBinding) {\n  return _extends({}, shared, {}, fromBinding);\n}\n\nfunction bindEvents(el, bindings, sharedOptions) {\n  var unbindings = bindings.map(function (binding) {\n    var options = getOptions(sharedOptions, binding.options);\n    el.addEventListener(binding.eventName, binding.fn, options);\n    return function unbind() {\n      el.removeEventListener(binding.eventName, binding.fn, options);\n    };\n  });\n  return function unbindAll() {\n    unbindings.forEach(function (unbind) {\n      unbind();\n    });\n  };\n}\n\nvar isProduction$1 = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction RbdInvariant(message) {\n  this.message = message;\n}\n\nRbdInvariant.prototype.toString = function toString() {\n  return this.message;\n};\n\nfunction invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n\n  if (isProduction$1) {\n    throw new RbdInvariant(prefix);\n  } else {\n    throw new RbdInvariant(prefix + \": \" + (message || ''));\n  }\n}\n\nvar ErrorBoundary = function (_React$Component) {\n  _inheritsLoose(ErrorBoundary, _React$Component);\n\n  function ErrorBoundary() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.callbacks = null;\n    _this.unbind = noop;\n\n    _this.onWindowError = function (event) {\n      var callbacks = _this.getCallbacks();\n\n      if (callbacks.isDragging()) {\n        callbacks.tryAbort();\n        process.env.NODE_ENV !== \"production\" ? warning(\"\\n        An error was caught by our window 'error' event listener while a drag was occurring.\\n        The active drag has been aborted.\\n      \") : void 0;\n      }\n\n      var err = event.error;\n\n      if (err instanceof RbdInvariant) {\n        event.preventDefault();\n\n        if (process.env.NODE_ENV !== 'production') {\n          error(err.message);\n        }\n      }\n    };\n\n    _this.getCallbacks = function () {\n      if (!_this.callbacks) {\n        throw new Error('Unable to find AppCallbacks in <ErrorBoundary/>');\n      }\n\n      return _this.callbacks;\n    };\n\n    _this.setCallbacks = function (callbacks) {\n      _this.callbacks = callbacks;\n    };\n\n    return _this;\n  }\n\n  var _proto = ErrorBoundary.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.unbind = bindEvents(window, [{\n      eventName: 'error',\n      fn: this.onWindowError\n    }]);\n  };\n\n  _proto.componentDidCatch = function componentDidCatch(err) {\n    if (err instanceof RbdInvariant) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(err.message);\n      }\n\n      this.setState({});\n      return;\n    }\n\n    throw err;\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.unbind();\n  };\n\n  _proto.render = function render() {\n    return this.props.children(this.setCallbacks);\n  };\n\n  return ErrorBoundary;\n}(React.Component);\n\nvar dragHandleUsageInstructions = \"\\n  Press space bar to start a drag.\\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\\n  Some screen readers may require you to be in focus mode or to use your pass through key\\n\";\n\nvar position = function position(index) {\n  return index + 1;\n};\n\nvar onDragStart = function onDragStart(start) {\n  return \"\\n  You have lifted an item in position \" + position(start.source.index) + \"\\n\";\n};\n\nvar withLocation = function withLocation(source, destination) {\n  var isInHomeList = source.droppableId === destination.droppableId;\n  var startPosition = position(source.index);\n  var endPosition = position(destination.index);\n\n  if (isInHomeList) {\n    return \"\\n      You have moved the item from position \" + startPosition + \"\\n      to position \" + endPosition + \"\\n    \";\n  }\n\n  return \"\\n    You have moved the item from position \" + startPosition + \"\\n    in list \" + source.droppableId + \"\\n    to list \" + destination.droppableId + \"\\n    in position \" + endPosition + \"\\n  \";\n};\n\nvar withCombine = function withCombine(id, source, combine) {\n  var inHomeList = source.droppableId === combine.droppableId;\n\n  if (inHomeList) {\n    return \"\\n      The item \" + id + \"\\n      has been combined with \" + combine.draggableId;\n  }\n\n  return \"\\n      The item \" + id + \"\\n      in list \" + source.droppableId + \"\\n      has been combined with \" + combine.draggableId + \"\\n      in list \" + combine.droppableId + \"\\n    \";\n};\n\nvar onDragUpdate = function onDragUpdate(update) {\n  var location = update.destination;\n\n  if (location) {\n    return withLocation(update.source, location);\n  }\n\n  var combine = update.combine;\n\n  if (combine) {\n    return withCombine(update.draggableId, update.source, combine);\n  }\n\n  return 'You are over an area that cannot be dropped on';\n};\n\nvar returnedToStart = function returnedToStart(source) {\n  return \"\\n  The item has returned to its starting position\\n  of \" + position(source.index) + \"\\n\";\n};\n\nvar onDragEnd = function onDragEnd(result) {\n  if (result.reason === 'CANCEL') {\n    return \"\\n      Movement cancelled.\\n      \" + returnedToStart(result.source) + \"\\n    \";\n  }\n\n  var location = result.destination;\n  var combine = result.combine;\n\n  if (location) {\n    return \"\\n      You have dropped the item.\\n      \" + withLocation(result.source, location) + \"\\n    \";\n  }\n\n  if (combine) {\n    return \"\\n      You have dropped the item.\\n      \" + withCombine(result.draggableId, result.source, combine) + \"\\n    \";\n  }\n\n  return \"\\n    The item has been dropped while not over a drop area.\\n    \" + returnedToStart(result.source) + \"\\n  \";\n};\n\nvar preset = {\n  dragHandleUsageInstructions: dragHandleUsageInstructions,\n  onDragStart: onDragStart,\n  onDragUpdate: onDragUpdate,\n  onDragEnd: onDragEnd\n};\n\nvar origin = {\n  x: 0,\n  y: 0\n};\nvar add = function add(point1, point2) {\n  return {\n    x: point1.x + point2.x,\n    y: point1.y + point2.y\n  };\n};\nvar subtract = function subtract(point1, point2) {\n  return {\n    x: point1.x - point2.x,\n    y: point1.y - point2.y\n  };\n};\nvar isEqual = function isEqual(point1, point2) {\n  return point1.x === point2.x && point1.y === point2.y;\n};\nvar negate = function negate(point) {\n  return {\n    x: point.x !== 0 ? -point.x : 0,\n    y: point.y !== 0 ? -point.y : 0\n  };\n};\nvar patch = function patch(line, value, otherValue) {\n  var _ref;\n\n  if (otherValue === void 0) {\n    otherValue = 0;\n  }\n\n  return _ref = {}, _ref[line] = value, _ref[line === 'x' ? 'y' : 'x'] = otherValue, _ref;\n};\nvar distance = function distance(point1, point2) {\n  return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));\n};\nvar closest = function closest(target, points) {\n  return Math.min.apply(Math, points.map(function (point) {\n    return distance(target, point);\n  }));\n};\nvar apply = function apply(fn) {\n  return function (point) {\n    return {\n      x: fn(point.x),\n      y: fn(point.y)\n    };\n  };\n};\n\nvar executeClip = (function (frame, subject) {\n  var result = getRect({\n    top: Math.max(subject.top, frame.top),\n    right: Math.min(subject.right, frame.right),\n    bottom: Math.min(subject.bottom, frame.bottom),\n    left: Math.max(subject.left, frame.left)\n  });\n\n  if (result.width <= 0 || result.height <= 0) {\n    return null;\n  }\n\n  return result;\n});\n\nvar offsetByPosition = function offsetByPosition(spacing, point) {\n  return {\n    top: spacing.top + point.y,\n    left: spacing.left + point.x,\n    bottom: spacing.bottom + point.y,\n    right: spacing.right + point.x\n  };\n};\nvar getCorners = function getCorners(spacing) {\n  return [{\n    x: spacing.left,\n    y: spacing.top\n  }, {\n    x: spacing.right,\n    y: spacing.top\n  }, {\n    x: spacing.left,\n    y: spacing.bottom\n  }, {\n    x: spacing.right,\n    y: spacing.bottom\n  }];\n};\nvar noSpacing = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\n\nvar scroll = function scroll(target, frame) {\n  if (!frame) {\n    return target;\n  }\n\n  return offsetByPosition(target, frame.scroll.diff.displacement);\n};\n\nvar increase = function increase(target, axis, withPlaceholder) {\n  if (withPlaceholder && withPlaceholder.increasedBy) {\n    var _extends2;\n\n    return _extends({}, target, (_extends2 = {}, _extends2[axis.end] = target[axis.end] + withPlaceholder.increasedBy[axis.line], _extends2));\n  }\n\n  return target;\n};\n\nvar clip = function clip(target, frame) {\n  if (frame && frame.shouldClipSubject) {\n    return executeClip(frame.pageMarginBox, target);\n  }\n\n  return getRect(target);\n};\n\nvar getSubject = (function (_ref) {\n  var page = _ref.page,\n      withPlaceholder = _ref.withPlaceholder,\n      axis = _ref.axis,\n      frame = _ref.frame;\n  var scrolled = scroll(page.marginBox, frame);\n  var increased = increase(scrolled, axis, withPlaceholder);\n  var clipped = clip(increased, frame);\n  return {\n    page: page,\n    withPlaceholder: withPlaceholder,\n    active: clipped\n  };\n});\n\nvar scrollDroppable = (function (droppable, newScroll) {\n  !droppable.frame ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n  var scrollable = droppable.frame;\n  var scrollDiff = subtract(newScroll, scrollable.scroll.initial);\n  var scrollDisplacement = negate(scrollDiff);\n\n  var frame = _extends({}, scrollable, {\n    scroll: {\n      initial: scrollable.scroll.initial,\n      current: newScroll,\n      diff: {\n        value: scrollDiff,\n        displacement: scrollDisplacement\n      },\n      max: scrollable.scroll.max\n    }\n  });\n\n  var subject = getSubject({\n    page: droppable.subject.page,\n    withPlaceholder: droppable.subject.withPlaceholder,\n    axis: droppable.axis,\n    frame: frame\n  });\n\n  var result = _extends({}, droppable, {\n    frame: frame,\n    subject: subject\n  });\n\n  return result;\n});\n\nfunction isInteger(value) {\n  if (Number.isInteger) {\n    return Number.isInteger(value);\n  }\n\n  return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n}\nfunction values(map) {\n  if (Object.values) {\n    return Object.values(map);\n  }\n\n  return Object.keys(map).map(function (key) {\n    return map[key];\n  });\n}\nfunction findIndex(list, predicate) {\n  if (list.findIndex) {\n    return list.findIndex(predicate);\n  }\n\n  for (var i = 0; i < list.length; i++) {\n    if (predicate(list[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n}\nfunction find(list, predicate) {\n  if (list.find) {\n    return list.find(predicate);\n  }\n\n  var index = findIndex(list, predicate);\n\n  if (index !== -1) {\n    return list[index];\n  }\n\n  return undefined;\n}\nfunction toArray(list) {\n  return Array.prototype.slice.call(list);\n}\n\nvar toDroppableMap = memoizeOne(function (droppables) {\n  return droppables.reduce(function (previous, current) {\n    previous[current.descriptor.id] = current;\n    return previous;\n  }, {});\n});\nvar toDraggableMap = memoizeOne(function (draggables) {\n  return draggables.reduce(function (previous, current) {\n    previous[current.descriptor.id] = current;\n    return previous;\n  }, {});\n});\nvar toDroppableList = memoizeOne(function (droppables) {\n  return values(droppables);\n});\nvar toDraggableList = memoizeOne(function (draggables) {\n  return values(draggables);\n});\n\nvar getDraggablesInsideDroppable = memoizeOne(function (droppableId, draggables) {\n  var result = toDraggableList(draggables).filter(function (draggable) {\n    return droppableId === draggable.descriptor.droppableId;\n  }).sort(function (a, b) {\n    return a.descriptor.index - b.descriptor.index;\n  });\n  return result;\n});\n\nfunction tryGetDestination(impact) {\n  if (impact.at && impact.at.type === 'REORDER') {\n    return impact.at.destination;\n  }\n\n  return null;\n}\nfunction tryGetCombine(impact) {\n  if (impact.at && impact.at.type === 'COMBINE') {\n    return impact.at.combine;\n  }\n\n  return null;\n}\n\nvar removeDraggableFromList = memoizeOne(function (remove, list) {\n  return list.filter(function (item) {\n    return item.descriptor.id !== remove.descriptor.id;\n  });\n});\n\nvar moveToNextCombine = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      draggable = _ref.draggable,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      previousImpact = _ref.previousImpact;\n\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n\n  var location = tryGetDestination(previousImpact);\n\n  if (!location) {\n    return null;\n  }\n\n  function getImpact(target) {\n    var at = {\n      type: 'COMBINE',\n      combine: {\n        draggableId: target,\n        droppableId: destination.descriptor.id\n      }\n    };\n    return _extends({}, previousImpact, {\n      at: at\n    });\n  }\n\n  var all = previousImpact.displaced.all;\n  var closestId = all.length ? all[0] : null;\n\n  if (isMovingForward) {\n    return closestId ? getImpact(closestId) : null;\n  }\n\n  var withoutDraggable = removeDraggableFromList(draggable, insideDestination);\n\n  if (!closestId) {\n    if (!withoutDraggable.length) {\n      return null;\n    }\n\n    var last = withoutDraggable[withoutDraggable.length - 1];\n    return getImpact(last.descriptor.id);\n  }\n\n  var indexOfClosest = findIndex(withoutDraggable, function (d) {\n    return d.descriptor.id === closestId;\n  });\n  !(indexOfClosest !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find displaced item in set') : invariant(false) : void 0;\n  var proposedIndex = indexOfClosest - 1;\n\n  if (proposedIndex < 0) {\n    return null;\n  }\n\n  var before = withoutDraggable[proposedIndex];\n  return getImpact(before.descriptor.id);\n});\n\nvar isHomeOf = (function (draggable, destination) {\n  return draggable.descriptor.droppableId === destination.descriptor.id;\n});\n\nvar noDisplacedBy = {\n  point: origin,\n  value: 0\n};\nvar emptyGroups = {\n  invisible: {},\n  visible: {},\n  all: []\n};\nvar noImpact = {\n  displaced: emptyGroups,\n  displacedBy: noDisplacedBy,\n  at: null\n};\n\nvar isWithin = (function (lowerBound, upperBound) {\n  return function (value) {\n    return lowerBound <= value && value <= upperBound;\n  };\n});\n\nvar isPartiallyVisibleThroughFrame = (function (frame) {\n  var isWithinVertical = isWithin(frame.top, frame.bottom);\n  var isWithinHorizontal = isWithin(frame.left, frame.right);\n  return function (subject) {\n    var isContained = isWithinVertical(subject.top) && isWithinVertical(subject.bottom) && isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n\n    if (isContained) {\n      return true;\n    }\n\n    var isPartiallyVisibleVertically = isWithinVertical(subject.top) || isWithinVertical(subject.bottom);\n    var isPartiallyVisibleHorizontally = isWithinHorizontal(subject.left) || isWithinHorizontal(subject.right);\n    var isPartiallyContained = isPartiallyVisibleVertically && isPartiallyVisibleHorizontally;\n\n    if (isPartiallyContained) {\n      return true;\n    }\n\n    var isBiggerVertically = subject.top < frame.top && subject.bottom > frame.bottom;\n    var isBiggerHorizontally = subject.left < frame.left && subject.right > frame.right;\n    var isTargetBiggerThanFrame = isBiggerVertically && isBiggerHorizontally;\n\n    if (isTargetBiggerThanFrame) {\n      return true;\n    }\n\n    var isTargetBiggerOnOneAxis = isBiggerVertically && isPartiallyVisibleHorizontally || isBiggerHorizontally && isPartiallyVisibleVertically;\n    return isTargetBiggerOnOneAxis;\n  };\n});\n\nvar isTotallyVisibleThroughFrame = (function (frame) {\n  var isWithinVertical = isWithin(frame.top, frame.bottom);\n  var isWithinHorizontal = isWithin(frame.left, frame.right);\n  return function (subject) {\n    var isContained = isWithinVertical(subject.top) && isWithinVertical(subject.bottom) && isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n    return isContained;\n  };\n});\n\nvar vertical = {\n  direction: 'vertical',\n  line: 'y',\n  crossAxisLine: 'x',\n  start: 'top',\n  end: 'bottom',\n  size: 'height',\n  crossAxisStart: 'left',\n  crossAxisEnd: 'right',\n  crossAxisSize: 'width'\n};\nvar horizontal = {\n  direction: 'horizontal',\n  line: 'x',\n  crossAxisLine: 'y',\n  start: 'left',\n  end: 'right',\n  size: 'width',\n  crossAxisStart: 'top',\n  crossAxisEnd: 'bottom',\n  crossAxisSize: 'height'\n};\n\nvar isTotallyVisibleThroughFrameOnAxis = (function (axis) {\n  return function (frame) {\n    var isWithinVertical = isWithin(frame.top, frame.bottom);\n    var isWithinHorizontal = isWithin(frame.left, frame.right);\n    return function (subject) {\n      if (axis === vertical) {\n        return isWithinVertical(subject.top) && isWithinVertical(subject.bottom);\n      }\n\n      return isWithinHorizontal(subject.left) && isWithinHorizontal(subject.right);\n    };\n  };\n});\n\nvar getDroppableDisplaced = function getDroppableDisplaced(target, destination) {\n  var displacement = destination.frame ? destination.frame.scroll.diff.displacement : origin;\n  return offsetByPosition(target, displacement);\n};\n\nvar isVisibleInDroppable = function isVisibleInDroppable(target, destination, isVisibleThroughFrameFn) {\n  if (!destination.subject.active) {\n    return false;\n  }\n\n  return isVisibleThroughFrameFn(destination.subject.active)(target);\n};\n\nvar isVisibleInViewport = function isVisibleInViewport(target, viewport, isVisibleThroughFrameFn) {\n  return isVisibleThroughFrameFn(viewport)(target);\n};\n\nvar isVisible = function isVisible(_ref) {\n  var toBeDisplaced = _ref.target,\n      destination = _ref.destination,\n      viewport = _ref.viewport,\n      withDroppableDisplacement = _ref.withDroppableDisplacement,\n      isVisibleThroughFrameFn = _ref.isVisibleThroughFrameFn;\n  var displacedTarget = withDroppableDisplacement ? getDroppableDisplaced(toBeDisplaced, destination) : toBeDisplaced;\n  return isVisibleInDroppable(displacedTarget, destination, isVisibleThroughFrameFn) && isVisibleInViewport(displacedTarget, viewport, isVisibleThroughFrameFn);\n};\n\nvar isPartiallyVisible = function isPartiallyVisible(args) {\n  return isVisible(_extends({}, args, {\n    isVisibleThroughFrameFn: isPartiallyVisibleThroughFrame\n  }));\n};\nvar isTotallyVisible = function isTotallyVisible(args) {\n  return isVisible(_extends({}, args, {\n    isVisibleThroughFrameFn: isTotallyVisibleThroughFrame\n  }));\n};\nvar isTotallyVisibleOnAxis = function isTotallyVisibleOnAxis(args) {\n  return isVisible(_extends({}, args, {\n    isVisibleThroughFrameFn: isTotallyVisibleThroughFrameOnAxis(args.destination.axis)\n  }));\n};\n\nvar getShouldAnimate = function getShouldAnimate(id, last, forceShouldAnimate) {\n  if (typeof forceShouldAnimate === 'boolean') {\n    return forceShouldAnimate;\n  }\n\n  if (!last) {\n    return true;\n  }\n\n  var invisible = last.invisible,\n      visible = last.visible;\n\n  if (invisible[id]) {\n    return false;\n  }\n\n  var previous = visible[id];\n  return previous ? previous.shouldAnimate : true;\n};\n\nfunction getTarget(draggable, displacedBy) {\n  var marginBox = draggable.page.marginBox;\n  var expandBy = {\n    top: displacedBy.point.y,\n    right: 0,\n    bottom: 0,\n    left: displacedBy.point.x\n  };\n  return getRect(expand(marginBox, expandBy));\n}\n\nfunction getDisplacementGroups(_ref) {\n  var afterDragging = _ref.afterDragging,\n      destination = _ref.destination,\n      displacedBy = _ref.displacedBy,\n      viewport = _ref.viewport,\n      forceShouldAnimate = _ref.forceShouldAnimate,\n      last = _ref.last;\n  return afterDragging.reduce(function process(groups, draggable) {\n    var target = getTarget(draggable, displacedBy);\n    var id = draggable.descriptor.id;\n    groups.all.push(id);\n    var isVisible = isPartiallyVisible({\n      target: target,\n      destination: destination,\n      viewport: viewport,\n      withDroppableDisplacement: true\n    });\n\n    if (!isVisible) {\n      groups.invisible[draggable.descriptor.id] = true;\n      return groups;\n    }\n\n    var shouldAnimate = getShouldAnimate(id, last, forceShouldAnimate);\n    var displacement = {\n      draggableId: id,\n      shouldAnimate: shouldAnimate\n    };\n    groups.visible[id] = displacement;\n    return groups;\n  }, {\n    all: [],\n    visible: {},\n    invisible: {}\n  });\n}\n\nfunction getIndexOfLastItem(draggables, options) {\n  if (!draggables.length) {\n    return 0;\n  }\n\n  var indexOfLastItem = draggables[draggables.length - 1].descriptor.index;\n  return options.inHomeList ? indexOfLastItem : indexOfLastItem + 1;\n}\n\nfunction goAtEnd(_ref) {\n  var insideDestination = _ref.insideDestination,\n      inHomeList = _ref.inHomeList,\n      displacedBy = _ref.displacedBy,\n      destination = _ref.destination;\n  var newIndex = getIndexOfLastItem(insideDestination, {\n    inHomeList: inHomeList\n  });\n  return {\n    displaced: emptyGroups,\n    displacedBy: displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: {\n        droppableId: destination.descriptor.id,\n        index: newIndex\n      }\n    }\n  };\n}\n\nfunction calculateReorderImpact(_ref2) {\n  var draggable = _ref2.draggable,\n      insideDestination = _ref2.insideDestination,\n      destination = _ref2.destination,\n      viewport = _ref2.viewport,\n      displacedBy = _ref2.displacedBy,\n      last = _ref2.last,\n      index = _ref2.index,\n      forceShouldAnimate = _ref2.forceShouldAnimate;\n  var inHomeList = isHomeOf(draggable, destination);\n\n  if (index == null) {\n    return goAtEnd({\n      insideDestination: insideDestination,\n      inHomeList: inHomeList,\n      displacedBy: displacedBy,\n      destination: destination\n    });\n  }\n\n  var match = find(insideDestination, function (item) {\n    return item.descriptor.index === index;\n  });\n\n  if (!match) {\n    return goAtEnd({\n      insideDestination: insideDestination,\n      inHomeList: inHomeList,\n      displacedBy: displacedBy,\n      destination: destination\n    });\n  }\n\n  var withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  var sliceFrom = insideDestination.indexOf(match);\n  var impacted = withoutDragging.slice(sliceFrom);\n  var displaced = getDisplacementGroups({\n    afterDragging: impacted,\n    destination: destination,\n    displacedBy: displacedBy,\n    last: last,\n    viewport: viewport.frame,\n    forceShouldAnimate: forceShouldAnimate\n  });\n  return {\n    displaced: displaced,\n    displacedBy: displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: {\n        droppableId: destination.descriptor.id,\n        index: index\n      }\n    }\n  };\n}\n\nfunction didStartAfterCritical(draggableId, afterCritical) {\n  return Boolean(afterCritical.effected[draggableId]);\n}\n\nvar fromCombine = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      destination = _ref.destination,\n      draggables = _ref.draggables,\n      combine = _ref.combine,\n      afterCritical = _ref.afterCritical;\n\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n\n  var combineId = combine.draggableId;\n  var combineWith = draggables[combineId];\n  var combineWithIndex = combineWith.descriptor.index;\n  var didCombineWithStartAfterCritical = didStartAfterCritical(combineId, afterCritical);\n\n  if (didCombineWithStartAfterCritical) {\n    if (isMovingForward) {\n      return combineWithIndex;\n    }\n\n    return combineWithIndex - 1;\n  }\n\n  if (isMovingForward) {\n    return combineWithIndex + 1;\n  }\n\n  return combineWithIndex;\n});\n\nvar fromReorder = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      isInHomeList = _ref.isInHomeList,\n      insideDestination = _ref.insideDestination,\n      location = _ref.location;\n\n  if (!insideDestination.length) {\n    return null;\n  }\n\n  var currentIndex = location.index;\n  var proposedIndex = isMovingForward ? currentIndex + 1 : currentIndex - 1;\n  var firstIndex = insideDestination[0].descriptor.index;\n  var lastIndex = insideDestination[insideDestination.length - 1].descriptor.index;\n  var upperBound = isInHomeList ? lastIndex : lastIndex + 1;\n\n  if (proposedIndex < firstIndex) {\n    return null;\n  }\n\n  if (proposedIndex > upperBound) {\n    return null;\n  }\n\n  return proposedIndex;\n});\n\nvar moveToNextIndex = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      isInHomeList = _ref.isInHomeList,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      previousImpact = _ref.previousImpact,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var wasAt = previousImpact.at;\n  !wasAt ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot move in direction without previous impact location') : invariant(false) : void 0;\n\n  if (wasAt.type === 'REORDER') {\n    var _newIndex = fromReorder({\n      isMovingForward: isMovingForward,\n      isInHomeList: isInHomeList,\n      location: wasAt.destination,\n      insideDestination: insideDestination\n    });\n\n    if (_newIndex == null) {\n      return null;\n    }\n\n    return calculateReorderImpact({\n      draggable: draggable,\n      insideDestination: insideDestination,\n      destination: destination,\n      viewport: viewport,\n      last: previousImpact.displaced,\n      displacedBy: previousImpact.displacedBy,\n      index: _newIndex\n    });\n  }\n\n  var newIndex = fromCombine({\n    isMovingForward: isMovingForward,\n    destination: destination,\n    displaced: previousImpact.displaced,\n    draggables: draggables,\n    combine: wasAt.combine,\n    afterCritical: afterCritical\n  });\n\n  if (newIndex == null) {\n    return null;\n  }\n\n  return calculateReorderImpact({\n    draggable: draggable,\n    insideDestination: insideDestination,\n    destination: destination,\n    viewport: viewport,\n    last: previousImpact.displaced,\n    displacedBy: previousImpact.displacedBy,\n    index: newIndex\n  });\n});\n\nvar getCombinedItemDisplacement = (function (_ref) {\n  var displaced = _ref.displaced,\n      afterCritical = _ref.afterCritical,\n      combineWith = _ref.combineWith,\n      displacedBy = _ref.displacedBy;\n  var isDisplaced = Boolean(displaced.visible[combineWith] || displaced.invisible[combineWith]);\n\n  if (didStartAfterCritical(combineWith, afterCritical)) {\n    return isDisplaced ? origin : negate(displacedBy.point);\n  }\n\n  return isDisplaced ? displacedBy.point : origin;\n});\n\nvar whenCombining = (function (_ref) {\n  var afterCritical = _ref.afterCritical,\n      impact = _ref.impact,\n      draggables = _ref.draggables;\n  var combine = tryGetCombine(impact);\n  !combine ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n  var combineWith = combine.draggableId;\n  var center = draggables[combineWith].page.borderBox.center;\n  var displaceBy = getCombinedItemDisplacement({\n    displaced: impact.displaced,\n    afterCritical: afterCritical,\n    combineWith: combineWith,\n    displacedBy: impact.displacedBy\n  });\n  return add(center, displaceBy);\n});\n\nvar distanceFromStartToBorderBoxCenter = function distanceFromStartToBorderBoxCenter(axis, box) {\n  return box.margin[axis.start] + box.borderBox[axis.size] / 2;\n};\n\nvar distanceFromEndToBorderBoxCenter = function distanceFromEndToBorderBoxCenter(axis, box) {\n  return box.margin[axis.end] + box.borderBox[axis.size] / 2;\n};\n\nvar getCrossAxisBorderBoxCenter = function getCrossAxisBorderBoxCenter(axis, target, isMoving) {\n  return target[axis.crossAxisStart] + isMoving.margin[axis.crossAxisStart] + isMoving.borderBox[axis.crossAxisSize] / 2;\n};\n\nvar goAfter = function goAfter(_ref) {\n  var axis = _ref.axis,\n      moveRelativeTo = _ref.moveRelativeTo,\n      isMoving = _ref.isMoving;\n  return patch(axis.line, moveRelativeTo.marginBox[axis.end] + distanceFromStartToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveRelativeTo.marginBox, isMoving));\n};\nvar goBefore = function goBefore(_ref2) {\n  var axis = _ref2.axis,\n      moveRelativeTo = _ref2.moveRelativeTo,\n      isMoving = _ref2.isMoving;\n  return patch(axis.line, moveRelativeTo.marginBox[axis.start] - distanceFromEndToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveRelativeTo.marginBox, isMoving));\n};\nvar goIntoStart = function goIntoStart(_ref3) {\n  var axis = _ref3.axis,\n      moveInto = _ref3.moveInto,\n      isMoving = _ref3.isMoving;\n  return patch(axis.line, moveInto.contentBox[axis.start] + distanceFromStartToBorderBoxCenter(axis, isMoving), getCrossAxisBorderBoxCenter(axis, moveInto.contentBox, isMoving));\n};\n\nvar whenReordering = (function (_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      droppable = _ref.droppable,\n      afterCritical = _ref.afterCritical;\n  var insideDestination = getDraggablesInsideDroppable(droppable.descriptor.id, draggables);\n  var draggablePage = draggable.page;\n  var axis = droppable.axis;\n\n  if (!insideDestination.length) {\n    return goIntoStart({\n      axis: axis,\n      moveInto: droppable.page,\n      isMoving: draggablePage\n    });\n  }\n\n  var displaced = impact.displaced,\n      displacedBy = impact.displacedBy;\n  var closestAfter = displaced.all[0];\n\n  if (closestAfter) {\n    var closest = draggables[closestAfter];\n\n    if (didStartAfterCritical(closestAfter, afterCritical)) {\n      return goBefore({\n        axis: axis,\n        moveRelativeTo: closest.page,\n        isMoving: draggablePage\n      });\n    }\n\n    var withDisplacement = offset(closest.page, displacedBy.point);\n    return goBefore({\n      axis: axis,\n      moveRelativeTo: withDisplacement,\n      isMoving: draggablePage\n    });\n  }\n\n  var last = insideDestination[insideDestination.length - 1];\n\n  if (last.descriptor.id === draggable.descriptor.id) {\n    return draggablePage.borderBox.center;\n  }\n\n  if (didStartAfterCritical(last.descriptor.id, afterCritical)) {\n    var page = offset(last.page, negate(afterCritical.displacedBy.point));\n    return goAfter({\n      axis: axis,\n      moveRelativeTo: page,\n      isMoving: draggablePage\n    });\n  }\n\n  return goAfter({\n    axis: axis,\n    moveRelativeTo: last.page,\n    isMoving: draggablePage\n  });\n});\n\nvar withDroppableDisplacement = (function (droppable, point) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return point;\n  }\n\n  return add(point, frame.scroll.diff.displacement);\n});\n\nvar getResultWithoutDroppableDisplacement = function getResultWithoutDroppableDisplacement(_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      droppable = _ref.droppable,\n      draggables = _ref.draggables,\n      afterCritical = _ref.afterCritical;\n  var original = draggable.page.borderBox.center;\n  var at = impact.at;\n\n  if (!droppable) {\n    return original;\n  }\n\n  if (!at) {\n    return original;\n  }\n\n  if (at.type === 'REORDER') {\n    return whenReordering({\n      impact: impact,\n      draggable: draggable,\n      draggables: draggables,\n      droppable: droppable,\n      afterCritical: afterCritical\n    });\n  }\n\n  return whenCombining({\n    impact: impact,\n    draggables: draggables,\n    afterCritical: afterCritical\n  });\n};\n\nvar getPageBorderBoxCenterFromImpact = (function (args) {\n  var withoutDisplacement = getResultWithoutDroppableDisplacement(args);\n  var droppable = args.droppable;\n  var withDisplacement = droppable ? withDroppableDisplacement(droppable, withoutDisplacement) : withoutDisplacement;\n  return withDisplacement;\n});\n\nvar scrollViewport = (function (viewport, newScroll) {\n  var diff = subtract(newScroll, viewport.scroll.initial);\n  var displacement = negate(diff);\n  var frame = getRect({\n    top: newScroll.y,\n    bottom: newScroll.y + viewport.frame.height,\n    left: newScroll.x,\n    right: newScroll.x + viewport.frame.width\n  });\n  var updated = {\n    frame: frame,\n    scroll: {\n      initial: viewport.scroll.initial,\n      max: viewport.scroll.max,\n      current: newScroll,\n      diff: {\n        value: diff,\n        displacement: displacement\n      }\n    }\n  };\n  return updated;\n});\n\nfunction getDraggables(ids, draggables) {\n  return ids.map(function (id) {\n    return draggables[id];\n  });\n}\n\nfunction tryGetVisible(id, groups) {\n  for (var i = 0; i < groups.length; i++) {\n    var displacement = groups[i].visible[id];\n\n    if (displacement) {\n      return displacement;\n    }\n  }\n\n  return null;\n}\n\nvar speculativelyIncrease = (function (_ref) {\n  var impact = _ref.impact,\n      viewport = _ref.viewport,\n      destination = _ref.destination,\n      draggables = _ref.draggables,\n      maxScrollChange = _ref.maxScrollChange;\n  var scrolledViewport = scrollViewport(viewport, add(viewport.scroll.current, maxScrollChange));\n  var scrolledDroppable = destination.frame ? scrollDroppable(destination, add(destination.frame.scroll.current, maxScrollChange)) : destination;\n  var last = impact.displaced;\n  var withViewportScroll = getDisplacementGroups({\n    afterDragging: getDraggables(last.all, draggables),\n    destination: destination,\n    displacedBy: impact.displacedBy,\n    viewport: scrolledViewport.frame,\n    last: last,\n    forceShouldAnimate: false\n  });\n  var withDroppableScroll = getDisplacementGroups({\n    afterDragging: getDraggables(last.all, draggables),\n    destination: scrolledDroppable,\n    displacedBy: impact.displacedBy,\n    viewport: viewport.frame,\n    last: last,\n    forceShouldAnimate: false\n  });\n  var invisible = {};\n  var visible = {};\n  var groups = [last, withViewportScroll, withDroppableScroll];\n  last.all.forEach(function (id) {\n    var displacement = tryGetVisible(id, groups);\n\n    if (displacement) {\n      visible[id] = displacement;\n      return;\n    }\n\n    invisible[id] = true;\n  });\n\n  var newImpact = _extends({}, impact, {\n    displaced: {\n      all: last.all,\n      invisible: invisible,\n      visible: visible\n    }\n  });\n\n  return newImpact;\n});\n\nvar withViewportDisplacement = (function (viewport, point) {\n  return add(viewport.scroll.diff.displacement, point);\n});\n\nvar getClientFromPageBorderBoxCenter = (function (_ref) {\n  var pageBorderBoxCenter = _ref.pageBorderBoxCenter,\n      draggable = _ref.draggable,\n      viewport = _ref.viewport;\n  var withoutPageScrollChange = withViewportDisplacement(viewport, pageBorderBoxCenter);\n  var offset = subtract(withoutPageScrollChange, draggable.page.borderBox.center);\n  return add(draggable.client.borderBox.center, offset);\n});\n\nvar isTotallyVisibleInNewLocation = (function (_ref) {\n  var draggable = _ref.draggable,\n      destination = _ref.destination,\n      newPageBorderBoxCenter = _ref.newPageBorderBoxCenter,\n      viewport = _ref.viewport,\n      withDroppableDisplacement = _ref.withDroppableDisplacement,\n      _ref$onlyOnMainAxis = _ref.onlyOnMainAxis,\n      onlyOnMainAxis = _ref$onlyOnMainAxis === void 0 ? false : _ref$onlyOnMainAxis;\n  var changeNeeded = subtract(newPageBorderBoxCenter, draggable.page.borderBox.center);\n  var shifted = offsetByPosition(draggable.page.borderBox, changeNeeded);\n  var args = {\n    target: shifted,\n    destination: destination,\n    withDroppableDisplacement: withDroppableDisplacement,\n    viewport: viewport\n  };\n  return onlyOnMainAxis ? isTotallyVisibleOnAxis(args) : isTotallyVisible(args);\n});\n\nvar moveToNextPlace = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      draggable = _ref.draggable,\n      destination = _ref.destination,\n      draggables = _ref.draggables,\n      previousImpact = _ref.previousImpact,\n      viewport = _ref.viewport,\n      previousPageBorderBoxCenter = _ref.previousPageBorderBoxCenter,\n      previousClientSelection = _ref.previousClientSelection,\n      afterCritical = _ref.afterCritical;\n\n  if (!destination.isEnabled) {\n    return null;\n  }\n\n  var insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  var isInHomeList = isHomeOf(draggable, destination);\n  var impact = moveToNextCombine({\n    isMovingForward: isMovingForward,\n    draggable: draggable,\n    destination: destination,\n    insideDestination: insideDestination,\n    previousImpact: previousImpact\n  }) || moveToNextIndex({\n    isMovingForward: isMovingForward,\n    isInHomeList: isInHomeList,\n    draggable: draggable,\n    draggables: draggables,\n    destination: destination,\n    insideDestination: insideDestination,\n    previousImpact: previousImpact,\n    viewport: viewport,\n    afterCritical: afterCritical\n  });\n\n  if (!impact) {\n    return null;\n  }\n\n  var pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact: impact,\n    draggable: draggable,\n    droppable: destination,\n    draggables: draggables,\n    afterCritical: afterCritical\n  });\n  var isVisibleInNewLocation = isTotallyVisibleInNewLocation({\n    draggable: draggable,\n    destination: destination,\n    newPageBorderBoxCenter: pageBorderBoxCenter,\n    viewport: viewport.frame,\n    withDroppableDisplacement: false,\n    onlyOnMainAxis: true\n  });\n\n  if (isVisibleInNewLocation) {\n    var clientSelection = getClientFromPageBorderBoxCenter({\n      pageBorderBoxCenter: pageBorderBoxCenter,\n      draggable: draggable,\n      viewport: viewport\n    });\n    return {\n      clientSelection: clientSelection,\n      impact: impact,\n      scrollJumpRequest: null\n    };\n  }\n\n  var distance = subtract(pageBorderBoxCenter, previousPageBorderBoxCenter);\n  var cautious = speculativelyIncrease({\n    impact: impact,\n    viewport: viewport,\n    destination: destination,\n    draggables: draggables,\n    maxScrollChange: distance\n  });\n  return {\n    clientSelection: previousClientSelection,\n    impact: cautious,\n    scrollJumpRequest: distance\n  };\n});\n\nvar getKnownActive = function getKnownActive(droppable) {\n  var rect = droppable.subject.active;\n  !rect ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot get clipped area from droppable') : invariant(false) : void 0;\n  return rect;\n};\n\nvar getBestCrossAxisDroppable = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      pageBorderBoxCenter = _ref.pageBorderBoxCenter,\n      source = _ref.source,\n      droppables = _ref.droppables,\n      viewport = _ref.viewport;\n  var active = source.subject.active;\n\n  if (!active) {\n    return null;\n  }\n\n  var axis = source.axis;\n  var isBetweenSourceClipped = isWithin(active[axis.start], active[axis.end]);\n  var candidates = toDroppableList(droppables).filter(function (droppable) {\n    return droppable !== source;\n  }).filter(function (droppable) {\n    return droppable.isEnabled;\n  }).filter(function (droppable) {\n    return Boolean(droppable.subject.active);\n  }).filter(function (droppable) {\n    return isPartiallyVisibleThroughFrame(viewport.frame)(getKnownActive(droppable));\n  }).filter(function (droppable) {\n    var activeOfTarget = getKnownActive(droppable);\n\n    if (isMovingForward) {\n      return active[axis.crossAxisEnd] < activeOfTarget[axis.crossAxisEnd];\n    }\n\n    return activeOfTarget[axis.crossAxisStart] < active[axis.crossAxisStart];\n  }).filter(function (droppable) {\n    var activeOfTarget = getKnownActive(droppable);\n    var isBetweenDestinationClipped = isWithin(activeOfTarget[axis.start], activeOfTarget[axis.end]);\n    return isBetweenSourceClipped(activeOfTarget[axis.start]) || isBetweenSourceClipped(activeOfTarget[axis.end]) || isBetweenDestinationClipped(active[axis.start]) || isBetweenDestinationClipped(active[axis.end]);\n  }).sort(function (a, b) {\n    var first = getKnownActive(a)[axis.crossAxisStart];\n    var second = getKnownActive(b)[axis.crossAxisStart];\n\n    if (isMovingForward) {\n      return first - second;\n    }\n\n    return second - first;\n  }).filter(function (droppable, index, array) {\n    return getKnownActive(droppable)[axis.crossAxisStart] === getKnownActive(array[0])[axis.crossAxisStart];\n  });\n\n  if (!candidates.length) {\n    return null;\n  }\n\n  if (candidates.length === 1) {\n    return candidates[0];\n  }\n\n  var contains = candidates.filter(function (droppable) {\n    var isWithinDroppable = isWithin(getKnownActive(droppable)[axis.start], getKnownActive(droppable)[axis.end]);\n    return isWithinDroppable(pageBorderBoxCenter[axis.line]);\n  });\n\n  if (contains.length === 1) {\n    return contains[0];\n  }\n\n  if (contains.length > 1) {\n    return contains.sort(function (a, b) {\n      return getKnownActive(a)[axis.start] - getKnownActive(b)[axis.start];\n    })[0];\n  }\n\n  return candidates.sort(function (a, b) {\n    var first = closest(pageBorderBoxCenter, getCorners(getKnownActive(a)));\n    var second = closest(pageBorderBoxCenter, getCorners(getKnownActive(b)));\n\n    if (first !== second) {\n      return first - second;\n    }\n\n    return getKnownActive(a)[axis.start] - getKnownActive(b)[axis.start];\n  })[0];\n});\n\nvar getCurrentPageBorderBoxCenter = function getCurrentPageBorderBoxCenter(draggable, afterCritical) {\n  var original = draggable.page.borderBox.center;\n  return didStartAfterCritical(draggable.descriptor.id, afterCritical) ? subtract(original, afterCritical.displacedBy.point) : original;\n};\nvar getCurrentPageBorderBox = function getCurrentPageBorderBox(draggable, afterCritical) {\n  var original = draggable.page.borderBox;\n  return didStartAfterCritical(draggable.descriptor.id, afterCritical) ? offsetByPosition(original, negate(afterCritical.displacedBy.point)) : original;\n};\n\nvar getClosestDraggable = (function (_ref) {\n  var pageBorderBoxCenter = _ref.pageBorderBoxCenter,\n      viewport = _ref.viewport,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      afterCritical = _ref.afterCritical;\n  var sorted = insideDestination.filter(function (draggable) {\n    return isTotallyVisible({\n      target: getCurrentPageBorderBox(draggable, afterCritical),\n      destination: destination,\n      viewport: viewport.frame,\n      withDroppableDisplacement: true\n    });\n  }).sort(function (a, b) {\n    var distanceToA = distance(pageBorderBoxCenter, withDroppableDisplacement(destination, getCurrentPageBorderBoxCenter(a, afterCritical)));\n    var distanceToB = distance(pageBorderBoxCenter, withDroppableDisplacement(destination, getCurrentPageBorderBoxCenter(b, afterCritical)));\n\n    if (distanceToA < distanceToB) {\n      return -1;\n    }\n\n    if (distanceToB < distanceToA) {\n      return 1;\n    }\n\n    return a.descriptor.index - b.descriptor.index;\n  });\n  return sorted[0] || null;\n});\n\nvar getDisplacedBy = memoizeOne(function getDisplacedBy(axis, displaceBy) {\n  var displacement = displaceBy[axis.line];\n  return {\n    value: displacement,\n    point: patch(axis.line, displacement)\n  };\n});\n\nvar getRequiredGrowthForPlaceholder = function getRequiredGrowthForPlaceholder(droppable, placeholderSize, draggables) {\n  var axis = droppable.axis;\n\n  if (droppable.descriptor.mode === 'virtual') {\n    return patch(axis.line, placeholderSize[axis.line]);\n  }\n\n  var availableSpace = droppable.subject.page.contentBox[axis.size];\n  var insideDroppable = getDraggablesInsideDroppable(droppable.descriptor.id, draggables);\n  var spaceUsed = insideDroppable.reduce(function (sum, dimension) {\n    return sum + dimension.client.marginBox[axis.size];\n  }, 0);\n  var requiredSpace = spaceUsed + placeholderSize[axis.line];\n  var needsToGrowBy = requiredSpace - availableSpace;\n\n  if (needsToGrowBy <= 0) {\n    return null;\n  }\n\n  return patch(axis.line, needsToGrowBy);\n};\n\nvar withMaxScroll = function withMaxScroll(frame, max) {\n  return _extends({}, frame, {\n    scroll: _extends({}, frame.scroll, {\n      max: max\n    })\n  });\n};\n\nvar addPlaceholder = function addPlaceholder(droppable, draggable, draggables) {\n  var frame = droppable.frame;\n  !!isHomeOf(draggable, droppable) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Should not add placeholder space to home list') : invariant(false) : void 0;\n  !!droppable.subject.withPlaceholder ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot add placeholder size to a subject when it already has one') : invariant(false) : void 0;\n  var placeholderSize = getDisplacedBy(droppable.axis, draggable.displaceBy).point;\n  var requiredGrowth = getRequiredGrowthForPlaceholder(droppable, placeholderSize, draggables);\n  var added = {\n    placeholderSize: placeholderSize,\n    increasedBy: requiredGrowth,\n    oldFrameMaxScroll: droppable.frame ? droppable.frame.scroll.max : null\n  };\n\n  if (!frame) {\n    var _subject = getSubject({\n      page: droppable.subject.page,\n      withPlaceholder: added,\n      axis: droppable.axis,\n      frame: droppable.frame\n    });\n\n    return _extends({}, droppable, {\n      subject: _subject\n    });\n  }\n\n  var maxScroll = requiredGrowth ? add(frame.scroll.max, requiredGrowth) : frame.scroll.max;\n  var newFrame = withMaxScroll(frame, maxScroll);\n  var subject = getSubject({\n    page: droppable.subject.page,\n    withPlaceholder: added,\n    axis: droppable.axis,\n    frame: newFrame\n  });\n  return _extends({}, droppable, {\n    subject: subject,\n    frame: newFrame\n  });\n};\nvar removePlaceholder = function removePlaceholder(droppable) {\n  var added = droppable.subject.withPlaceholder;\n  !added ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot remove placeholder form subject when there was none') : invariant(false) : void 0;\n  var frame = droppable.frame;\n\n  if (!frame) {\n    var _subject2 = getSubject({\n      page: droppable.subject.page,\n      axis: droppable.axis,\n      frame: null,\n      withPlaceholder: null\n    });\n\n    return _extends({}, droppable, {\n      subject: _subject2\n    });\n  }\n\n  var oldMaxScroll = added.oldFrameMaxScroll;\n  !oldMaxScroll ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected droppable with frame to have old max frame scroll when removing placeholder') : invariant(false) : void 0;\n  var newFrame = withMaxScroll(frame, oldMaxScroll);\n  var subject = getSubject({\n    page: droppable.subject.page,\n    axis: droppable.axis,\n    frame: newFrame,\n    withPlaceholder: null\n  });\n  return _extends({}, droppable, {\n    subject: subject,\n    frame: newFrame\n  });\n};\n\nvar moveToNewDroppable = (function (_ref) {\n  var previousPageBorderBoxCenter = _ref.previousPageBorderBoxCenter,\n      moveRelativeTo = _ref.moveRelativeTo,\n      insideDestination = _ref.insideDestination,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      destination = _ref.destination,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n\n  if (!moveRelativeTo) {\n    if (insideDestination.length) {\n      return null;\n    }\n\n    var proposed = {\n      displaced: emptyGroups,\n      displacedBy: noDisplacedBy,\n      at: {\n        type: 'REORDER',\n        destination: {\n          droppableId: destination.descriptor.id,\n          index: 0\n        }\n      }\n    };\n    var proposedPageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n      impact: proposed,\n      draggable: draggable,\n      droppable: destination,\n      draggables: draggables,\n      afterCritical: afterCritical\n    });\n    var withPlaceholder = isHomeOf(draggable, destination) ? destination : addPlaceholder(destination, draggable, draggables);\n    var isVisibleInNewLocation = isTotallyVisibleInNewLocation({\n      draggable: draggable,\n      destination: withPlaceholder,\n      newPageBorderBoxCenter: proposedPageBorderBoxCenter,\n      viewport: viewport.frame,\n      withDroppableDisplacement: false,\n      onlyOnMainAxis: true\n    });\n    return isVisibleInNewLocation ? proposed : null;\n  }\n\n  var isGoingBeforeTarget = Boolean(previousPageBorderBoxCenter[destination.axis.line] <= moveRelativeTo.page.borderBox.center[destination.axis.line]);\n\n  var proposedIndex = function () {\n    var relativeTo = moveRelativeTo.descriptor.index;\n\n    if (moveRelativeTo.descriptor.id === draggable.descriptor.id) {\n      return relativeTo;\n    }\n\n    if (isGoingBeforeTarget) {\n      return relativeTo;\n    }\n\n    return relativeTo + 1;\n  }();\n\n  var displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  return calculateReorderImpact({\n    draggable: draggable,\n    insideDestination: insideDestination,\n    destination: destination,\n    viewport: viewport,\n    displacedBy: displacedBy,\n    last: emptyGroups,\n    index: proposedIndex\n  });\n});\n\nvar moveCrossAxis = (function (_ref) {\n  var isMovingForward = _ref.isMovingForward,\n      previousPageBorderBoxCenter = _ref.previousPageBorderBoxCenter,\n      draggable = _ref.draggable,\n      isOver = _ref.isOver,\n      draggables = _ref.draggables,\n      droppables = _ref.droppables,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var destination = getBestCrossAxisDroppable({\n    isMovingForward: isMovingForward,\n    pageBorderBoxCenter: previousPageBorderBoxCenter,\n    source: isOver,\n    droppables: droppables,\n    viewport: viewport\n  });\n\n  if (!destination) {\n    return null;\n  }\n\n  var insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  var moveRelativeTo = getClosestDraggable({\n    pageBorderBoxCenter: previousPageBorderBoxCenter,\n    viewport: viewport,\n    destination: destination,\n    insideDestination: insideDestination,\n    afterCritical: afterCritical\n  });\n  var impact = moveToNewDroppable({\n    previousPageBorderBoxCenter: previousPageBorderBoxCenter,\n    destination: destination,\n    draggable: draggable,\n    draggables: draggables,\n    moveRelativeTo: moveRelativeTo,\n    insideDestination: insideDestination,\n    viewport: viewport,\n    afterCritical: afterCritical\n  });\n\n  if (!impact) {\n    return null;\n  }\n\n  var pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact: impact,\n    draggable: draggable,\n    droppable: destination,\n    draggables: draggables,\n    afterCritical: afterCritical\n  });\n  var clientSelection = getClientFromPageBorderBoxCenter({\n    pageBorderBoxCenter: pageBorderBoxCenter,\n    draggable: draggable,\n    viewport: viewport\n  });\n  return {\n    clientSelection: clientSelection,\n    impact: impact,\n    scrollJumpRequest: null\n  };\n});\n\nvar whatIsDraggedOver = (function (impact) {\n  var at = impact.at;\n\n  if (!at) {\n    return null;\n  }\n\n  if (at.type === 'REORDER') {\n    return at.destination.droppableId;\n  }\n\n  return at.combine.droppableId;\n});\n\nvar getDroppableOver = function getDroppableOver(impact, droppables) {\n  var id = whatIsDraggedOver(impact);\n  return id ? droppables[id] : null;\n};\n\nvar moveInDirection = (function (_ref) {\n  var state = _ref.state,\n      type = _ref.type;\n  var isActuallyOver = getDroppableOver(state.impact, state.dimensions.droppables);\n  var isMainAxisMovementAllowed = Boolean(isActuallyOver);\n  var home = state.dimensions.droppables[state.critical.droppable.id];\n  var isOver = isActuallyOver || home;\n  var direction = isOver.axis.direction;\n  var isMovingOnMainAxis = direction === 'vertical' && (type === 'MOVE_UP' || type === 'MOVE_DOWN') || direction === 'horizontal' && (type === 'MOVE_LEFT' || type === 'MOVE_RIGHT');\n\n  if (isMovingOnMainAxis && !isMainAxisMovementAllowed) {\n    return null;\n  }\n\n  var isMovingForward = type === 'MOVE_DOWN' || type === 'MOVE_RIGHT';\n  var draggable = state.dimensions.draggables[state.critical.draggable.id];\n  var previousPageBorderBoxCenter = state.current.page.borderBoxCenter;\n  var _state$dimensions = state.dimensions,\n      draggables = _state$dimensions.draggables,\n      droppables = _state$dimensions.droppables;\n  return isMovingOnMainAxis ? moveToNextPlace({\n    isMovingForward: isMovingForward,\n    previousPageBorderBoxCenter: previousPageBorderBoxCenter,\n    draggable: draggable,\n    destination: isOver,\n    draggables: draggables,\n    viewport: state.viewport,\n    previousClientSelection: state.current.client.selection,\n    previousImpact: state.impact,\n    afterCritical: state.afterCritical\n  }) : moveCrossAxis({\n    isMovingForward: isMovingForward,\n    previousPageBorderBoxCenter: previousPageBorderBoxCenter,\n    draggable: draggable,\n    isOver: isOver,\n    draggables: draggables,\n    droppables: droppables,\n    viewport: state.viewport,\n    afterCritical: state.afterCritical\n  });\n});\n\nfunction isMovementAllowed(state) {\n  return state.phase === 'DRAGGING' || state.phase === 'COLLECTING';\n}\n\nfunction isPositionInFrame(frame) {\n  var isWithinVertical = isWithin(frame.top, frame.bottom);\n  var isWithinHorizontal = isWithin(frame.left, frame.right);\n  return function run(point) {\n    return isWithinVertical(point.y) && isWithinHorizontal(point.x);\n  };\n}\n\nfunction getHasOverlap(first, second) {\n  return first.left < second.right && first.right > second.left && first.top < second.bottom && first.bottom > second.top;\n}\n\nfunction getFurthestAway(_ref) {\n  var pageBorderBox = _ref.pageBorderBox,\n      draggable = _ref.draggable,\n      candidates = _ref.candidates;\n  var startCenter = draggable.page.borderBox.center;\n  var sorted = candidates.map(function (candidate) {\n    var axis = candidate.axis;\n    var target = patch(candidate.axis.line, pageBorderBox.center[axis.line], candidate.page.borderBox.center[axis.crossAxisLine]);\n    return {\n      id: candidate.descriptor.id,\n      distance: distance(startCenter, target)\n    };\n  }).sort(function (a, b) {\n    return b.distance - a.distance;\n  });\n  return sorted[0] ? sorted[0].id : null;\n}\n\nfunction getDroppableOver$1(_ref2) {\n  var pageBorderBox = _ref2.pageBorderBox,\n      draggable = _ref2.draggable,\n      droppables = _ref2.droppables;\n  var candidates = toDroppableList(droppables).filter(function (item) {\n    if (!item.isEnabled) {\n      return false;\n    }\n\n    var active = item.subject.active;\n\n    if (!active) {\n      return false;\n    }\n\n    if (!getHasOverlap(pageBorderBox, active)) {\n      return false;\n    }\n\n    if (isPositionInFrame(active)(pageBorderBox.center)) {\n      return true;\n    }\n\n    var axis = item.axis;\n    var childCenter = active.center[axis.crossAxisLine];\n    var crossAxisStart = pageBorderBox[axis.crossAxisStart];\n    var crossAxisEnd = pageBorderBox[axis.crossAxisEnd];\n    var isContained = isWithin(active[axis.crossAxisStart], active[axis.crossAxisEnd]);\n    var isStartContained = isContained(crossAxisStart);\n    var isEndContained = isContained(crossAxisEnd);\n\n    if (!isStartContained && !isEndContained) {\n      return true;\n    }\n\n    if (isStartContained) {\n      return crossAxisStart < childCenter;\n    }\n\n    return crossAxisEnd > childCenter;\n  });\n\n  if (!candidates.length) {\n    return null;\n  }\n\n  if (candidates.length === 1) {\n    return candidates[0].descriptor.id;\n  }\n\n  return getFurthestAway({\n    pageBorderBox: pageBorderBox,\n    draggable: draggable,\n    candidates: candidates\n  });\n}\n\nvar offsetRectByPosition = function offsetRectByPosition(rect, point) {\n  return getRect(offsetByPosition(rect, point));\n};\n\nvar withDroppableScroll = (function (droppable, area) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return area;\n  }\n\n  return offsetRectByPosition(area, frame.scroll.diff.value);\n});\n\nfunction getIsDisplaced(_ref) {\n  var displaced = _ref.displaced,\n      id = _ref.id;\n  return Boolean(displaced.visible[id] || displaced.invisible[id]);\n}\n\nfunction atIndex(_ref) {\n  var draggable = _ref.draggable,\n      closest = _ref.closest,\n      inHomeList = _ref.inHomeList;\n\n  if (!closest) {\n    return null;\n  }\n\n  if (!inHomeList) {\n    return closest.descriptor.index;\n  }\n\n  if (closest.descriptor.index > draggable.descriptor.index) {\n    return closest.descriptor.index - 1;\n  }\n\n  return closest.descriptor.index;\n}\n\nvar getReorderImpact = (function (_ref2) {\n  var targetRect = _ref2.pageBorderBoxWithDroppableScroll,\n      draggable = _ref2.draggable,\n      destination = _ref2.destination,\n      insideDestination = _ref2.insideDestination,\n      last = _ref2.last,\n      viewport = _ref2.viewport,\n      afterCritical = _ref2.afterCritical;\n  var axis = destination.axis;\n  var displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  var displacement = displacedBy.value;\n  var targetStart = targetRect[axis.start];\n  var targetEnd = targetRect[axis.end];\n  var withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  var closest = find(withoutDragging, function (child) {\n    var id = child.descriptor.id;\n    var childCenter = child.page.borderBox.center[axis.line];\n    var didStartAfterCritical$1 = didStartAfterCritical(id, afterCritical);\n    var isDisplaced = getIsDisplaced({\n      displaced: last,\n      id: id\n    });\n\n    if (didStartAfterCritical$1) {\n      if (isDisplaced) {\n        return targetEnd <= childCenter;\n      }\n\n      return targetStart < childCenter - displacement;\n    }\n\n    if (isDisplaced) {\n      return targetEnd <= childCenter + displacement;\n    }\n\n    return targetStart < childCenter;\n  });\n  var newIndex = atIndex({\n    draggable: draggable,\n    closest: closest,\n    inHomeList: isHomeOf(draggable, destination)\n  });\n  return calculateReorderImpact({\n    draggable: draggable,\n    insideDestination: insideDestination,\n    destination: destination,\n    viewport: viewport,\n    last: last,\n    displacedBy: displacedBy,\n    index: newIndex\n  });\n});\n\nvar combineThresholdDivisor = 4;\nvar getCombineImpact = (function (_ref) {\n  var draggable = _ref.draggable,\n      targetRect = _ref.pageBorderBoxWithDroppableScroll,\n      previousImpact = _ref.previousImpact,\n      destination = _ref.destination,\n      insideDestination = _ref.insideDestination,\n      afterCritical = _ref.afterCritical;\n\n  if (!destination.isCombineEnabled) {\n    return null;\n  }\n\n  var axis = destination.axis;\n  var displacedBy = getDisplacedBy(destination.axis, draggable.displaceBy);\n  var displacement = displacedBy.value;\n  var targetStart = targetRect[axis.start];\n  var targetEnd = targetRect[axis.end];\n  var withoutDragging = removeDraggableFromList(draggable, insideDestination);\n  var combineWith = find(withoutDragging, function (child) {\n    var id = child.descriptor.id;\n    var childRect = child.page.borderBox;\n    var childSize = childRect[axis.size];\n    var threshold = childSize / combineThresholdDivisor;\n    var didStartAfterCritical$1 = didStartAfterCritical(id, afterCritical);\n    var isDisplaced = getIsDisplaced({\n      displaced: previousImpact.displaced,\n      id: id\n    });\n\n    if (didStartAfterCritical$1) {\n      if (isDisplaced) {\n        return targetEnd > childRect[axis.start] + threshold && targetEnd < childRect[axis.end] - threshold;\n      }\n\n      return targetStart > childRect[axis.start] - displacement + threshold && targetStart < childRect[axis.end] - displacement - threshold;\n    }\n\n    if (isDisplaced) {\n      return targetEnd > childRect[axis.start] + displacement + threshold && targetEnd < childRect[axis.end] + displacement - threshold;\n    }\n\n    return targetStart > childRect[axis.start] + threshold && targetStart < childRect[axis.end] - threshold;\n  });\n\n  if (!combineWith) {\n    return null;\n  }\n\n  var impact = {\n    displacedBy: displacedBy,\n    displaced: previousImpact.displaced,\n    at: {\n      type: 'COMBINE',\n      combine: {\n        draggableId: combineWith.descriptor.id,\n        droppableId: destination.descriptor.id\n      }\n    }\n  };\n  return impact;\n});\n\nvar getDragImpact = (function (_ref) {\n  var pageOffset = _ref.pageOffset,\n      draggable = _ref.draggable,\n      draggables = _ref.draggables,\n      droppables = _ref.droppables,\n      previousImpact = _ref.previousImpact,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var pageBorderBox = offsetRectByPosition(draggable.page.borderBox, pageOffset);\n  var destinationId = getDroppableOver$1({\n    pageBorderBox: pageBorderBox,\n    draggable: draggable,\n    droppables: droppables\n  });\n\n  if (!destinationId) {\n    return noImpact;\n  }\n\n  var destination = droppables[destinationId];\n  var insideDestination = getDraggablesInsideDroppable(destination.descriptor.id, draggables);\n  var pageBorderBoxWithDroppableScroll = withDroppableScroll(destination, pageBorderBox);\n  return getCombineImpact({\n    pageBorderBoxWithDroppableScroll: pageBorderBoxWithDroppableScroll,\n    draggable: draggable,\n    previousImpact: previousImpact,\n    destination: destination,\n    insideDestination: insideDestination,\n    afterCritical: afterCritical\n  }) || getReorderImpact({\n    pageBorderBoxWithDroppableScroll: pageBorderBoxWithDroppableScroll,\n    draggable: draggable,\n    destination: destination,\n    insideDestination: insideDestination,\n    last: previousImpact.displaced,\n    viewport: viewport,\n    afterCritical: afterCritical\n  });\n});\n\nvar patchDroppableMap = (function (droppables, updated) {\n  var _extends2;\n\n  return _extends({}, droppables, (_extends2 = {}, _extends2[updated.descriptor.id] = updated, _extends2));\n});\n\nvar clearUnusedPlaceholder = function clearUnusedPlaceholder(_ref) {\n  var previousImpact = _ref.previousImpact,\n      impact = _ref.impact,\n      droppables = _ref.droppables;\n  var last = whatIsDraggedOver(previousImpact);\n  var now = whatIsDraggedOver(impact);\n\n  if (!last) {\n    return droppables;\n  }\n\n  if (last === now) {\n    return droppables;\n  }\n\n  var lastDroppable = droppables[last];\n\n  if (!lastDroppable.subject.withPlaceholder) {\n    return droppables;\n  }\n\n  var updated = removePlaceholder(lastDroppable);\n  return patchDroppableMap(droppables, updated);\n};\n\nvar recomputePlaceholders = (function (_ref2) {\n  var draggable = _ref2.draggable,\n      draggables = _ref2.draggables,\n      droppables = _ref2.droppables,\n      previousImpact = _ref2.previousImpact,\n      impact = _ref2.impact;\n  var cleaned = clearUnusedPlaceholder({\n    previousImpact: previousImpact,\n    impact: impact,\n    droppables: droppables\n  });\n  var isOver = whatIsDraggedOver(impact);\n\n  if (!isOver) {\n    return cleaned;\n  }\n\n  var droppable = droppables[isOver];\n\n  if (isHomeOf(draggable, droppable)) {\n    return cleaned;\n  }\n\n  if (droppable.subject.withPlaceholder) {\n    return cleaned;\n  }\n\n  var patched = addPlaceholder(droppable, draggable, draggables);\n  return patchDroppableMap(cleaned, patched);\n});\n\nvar update = (function (_ref) {\n  var state = _ref.state,\n      forcedClientSelection = _ref.clientSelection,\n      forcedDimensions = _ref.dimensions,\n      forcedViewport = _ref.viewport,\n      forcedImpact = _ref.impact,\n      scrollJumpRequest = _ref.scrollJumpRequest;\n  var viewport = forcedViewport || state.viewport;\n  var dimensions = forcedDimensions || state.dimensions;\n  var clientSelection = forcedClientSelection || state.current.client.selection;\n  var offset = subtract(clientSelection, state.initial.client.selection);\n  var client = {\n    offset: offset,\n    selection: clientSelection,\n    borderBoxCenter: add(state.initial.client.borderBoxCenter, offset)\n  };\n  var page = {\n    selection: add(client.selection, viewport.scroll.current),\n    borderBoxCenter: add(client.borderBoxCenter, viewport.scroll.current),\n    offset: add(client.offset, viewport.scroll.diff.value)\n  };\n  var current = {\n    client: client,\n    page: page\n  };\n\n  if (state.phase === 'COLLECTING') {\n    return _extends({\n      phase: 'COLLECTING'\n    }, state, {\n      dimensions: dimensions,\n      viewport: viewport,\n      current: current\n    });\n  }\n\n  var draggable = dimensions.draggables[state.critical.draggable.id];\n  var newImpact = forcedImpact || getDragImpact({\n    pageOffset: page.offset,\n    draggable: draggable,\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables,\n    previousImpact: state.impact,\n    viewport: viewport,\n    afterCritical: state.afterCritical\n  });\n  var withUpdatedPlaceholders = recomputePlaceholders({\n    draggable: draggable,\n    impact: newImpact,\n    previousImpact: state.impact,\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables\n  });\n\n  var result = _extends({}, state, {\n    current: current,\n    dimensions: {\n      draggables: dimensions.draggables,\n      droppables: withUpdatedPlaceholders\n    },\n    impact: newImpact,\n    viewport: viewport,\n    scrollJumpRequest: scrollJumpRequest || null,\n    forceShouldAnimate: scrollJumpRequest ? false : null\n  });\n\n  return result;\n});\n\nfunction getDraggables$1(ids, draggables) {\n  return ids.map(function (id) {\n    return draggables[id];\n  });\n}\n\nvar recompute = (function (_ref) {\n  var impact = _ref.impact,\n      viewport = _ref.viewport,\n      draggables = _ref.draggables,\n      destination = _ref.destination,\n      forceShouldAnimate = _ref.forceShouldAnimate;\n  var last = impact.displaced;\n  var afterDragging = getDraggables$1(last.all, draggables);\n  var displaced = getDisplacementGroups({\n    afterDragging: afterDragging,\n    destination: destination,\n    displacedBy: impact.displacedBy,\n    viewport: viewport.frame,\n    forceShouldAnimate: forceShouldAnimate,\n    last: last\n  });\n  return _extends({}, impact, {\n    displaced: displaced\n  });\n});\n\nvar getClientBorderBoxCenter = (function (_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      droppable = _ref.droppable,\n      draggables = _ref.draggables,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var pageBorderBoxCenter = getPageBorderBoxCenterFromImpact({\n    impact: impact,\n    draggable: draggable,\n    draggables: draggables,\n    droppable: droppable,\n    afterCritical: afterCritical\n  });\n  return getClientFromPageBorderBoxCenter({\n    pageBorderBoxCenter: pageBorderBoxCenter,\n    draggable: draggable,\n    viewport: viewport\n  });\n});\n\nvar refreshSnap = (function (_ref) {\n  var state = _ref.state,\n      forcedDimensions = _ref.dimensions,\n      forcedViewport = _ref.viewport;\n  !(state.movementMode === 'SNAP') ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n  var needsVisibilityCheck = state.impact;\n  var viewport = forcedViewport || state.viewport;\n  var dimensions = forcedDimensions || state.dimensions;\n  var draggables = dimensions.draggables,\n      droppables = dimensions.droppables;\n  var draggable = draggables[state.critical.draggable.id];\n  var isOver = whatIsDraggedOver(needsVisibilityCheck);\n  !isOver ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Must be over a destination in SNAP movement mode') : invariant(false) : void 0;\n  var destination = droppables[isOver];\n  var impact = recompute({\n    impact: needsVisibilityCheck,\n    viewport: viewport,\n    destination: destination,\n    draggables: draggables\n  });\n  var clientSelection = getClientBorderBoxCenter({\n    impact: impact,\n    draggable: draggable,\n    droppable: destination,\n    draggables: draggables,\n    viewport: viewport,\n    afterCritical: state.afterCritical\n  });\n  return update({\n    impact: impact,\n    clientSelection: clientSelection,\n    state: state,\n    dimensions: dimensions,\n    viewport: viewport\n  });\n});\n\nvar getHomeLocation = (function (descriptor) {\n  return {\n    index: descriptor.index,\n    droppableId: descriptor.droppableId\n  };\n});\n\nvar getLiftEffect = (function (_ref) {\n  var draggable = _ref.draggable,\n      home = _ref.home,\n      draggables = _ref.draggables,\n      viewport = _ref.viewport;\n  var displacedBy = getDisplacedBy(home.axis, draggable.displaceBy);\n  var insideHome = getDraggablesInsideDroppable(home.descriptor.id, draggables);\n  var rawIndex = insideHome.indexOf(draggable);\n  !(rawIndex !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected draggable to be inside home list') : invariant(false) : void 0;\n  var afterDragging = insideHome.slice(rawIndex + 1);\n  var effected = afterDragging.reduce(function (previous, item) {\n    previous[item.descriptor.id] = true;\n    return previous;\n  }, {});\n  var afterCritical = {\n    inVirtualList: home.descriptor.mode === 'virtual',\n    displacedBy: displacedBy,\n    effected: effected\n  };\n  var displaced = getDisplacementGroups({\n    afterDragging: afterDragging,\n    destination: home,\n    displacedBy: displacedBy,\n    last: null,\n    viewport: viewport.frame,\n    forceShouldAnimate: false\n  });\n  var impact = {\n    displaced: displaced,\n    displacedBy: displacedBy,\n    at: {\n      type: 'REORDER',\n      destination: getHomeLocation(draggable.descriptor)\n    }\n  };\n  return {\n    impact: impact,\n    afterCritical: afterCritical\n  };\n});\n\nvar patchDimensionMap = (function (dimensions, updated) {\n  return {\n    draggables: dimensions.draggables,\n    droppables: patchDroppableMap(dimensions.droppables, updated)\n  };\n});\n\nvar start = function start(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    {\n      return;\n    }\n  }\n};\nvar finish = function finish(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    {\n      return;\n    }\n  }\n};\n\nvar offsetDraggable = (function (_ref) {\n  var draggable = _ref.draggable,\n      offset$1 = _ref.offset,\n      initialWindowScroll = _ref.initialWindowScroll;\n  var client = offset(draggable.client, offset$1);\n  var page = withScroll(client, initialWindowScroll);\n\n  var moved = _extends({}, draggable, {\n    placeholder: _extends({}, draggable.placeholder, {\n      client: client\n    }),\n    client: client,\n    page: page\n  });\n\n  return moved;\n});\n\nvar getFrame = (function (droppable) {\n  var frame = droppable.frame;\n  !frame ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected Droppable to have a frame') : invariant(false) : void 0;\n  return frame;\n});\n\nvar adjustAdditionsForScrollChanges = (function (_ref) {\n  var additions = _ref.additions,\n      updatedDroppables = _ref.updatedDroppables,\n      viewport = _ref.viewport;\n  var windowScrollChange = viewport.scroll.diff.value;\n  return additions.map(function (draggable) {\n    var droppableId = draggable.descriptor.droppableId;\n    var modified = updatedDroppables[droppableId];\n    var frame = getFrame(modified);\n    var droppableScrollChange = frame.scroll.diff.value;\n    var totalChange = add(windowScrollChange, droppableScrollChange);\n    var moved = offsetDraggable({\n      draggable: draggable,\n      offset: totalChange,\n      initialWindowScroll: viewport.scroll.initial\n    });\n    return moved;\n  });\n});\n\nvar publishWhileDraggingInVirtual = (function (_ref) {\n  var state = _ref.state,\n      published = _ref.published;\n  start();\n  var withScrollChange = published.modified.map(function (update) {\n    var existing = state.dimensions.droppables[update.droppableId];\n    var scrolled = scrollDroppable(existing, update.scroll);\n    return scrolled;\n  });\n\n  var droppables = _extends({}, state.dimensions.droppables, {}, toDroppableMap(withScrollChange));\n\n  var updatedAdditions = toDraggableMap(adjustAdditionsForScrollChanges({\n    additions: published.additions,\n    updatedDroppables: droppables,\n    viewport: state.viewport\n  }));\n\n  var draggables = _extends({}, state.dimensions.draggables, {}, updatedAdditions);\n\n  published.removals.forEach(function (id) {\n    delete draggables[id];\n  });\n  var dimensions = {\n    droppables: droppables,\n    draggables: draggables\n  };\n  var wasOverId = whatIsDraggedOver(state.impact);\n  var wasOver = wasOverId ? dimensions.droppables[wasOverId] : null;\n  var draggable = dimensions.draggables[state.critical.draggable.id];\n  var home = dimensions.droppables[state.critical.droppable.id];\n\n  var _getLiftEffect = getLiftEffect({\n    draggable: draggable,\n    home: home,\n    draggables: draggables,\n    viewport: state.viewport\n  }),\n      onLiftImpact = _getLiftEffect.impact,\n      afterCritical = _getLiftEffect.afterCritical;\n\n  var previousImpact = wasOver && wasOver.isCombineEnabled ? state.impact : onLiftImpact;\n  var impact = getDragImpact({\n    pageOffset: state.current.page.offset,\n    draggable: dimensions.draggables[state.critical.draggable.id],\n    draggables: dimensions.draggables,\n    droppables: dimensions.droppables,\n    previousImpact: previousImpact,\n    viewport: state.viewport,\n    afterCritical: afterCritical\n  });\n  finish();\n\n  var draggingState = _extends({\n    phase: 'DRAGGING'\n  }, state, {\n    phase: 'DRAGGING',\n    impact: impact,\n    onLiftImpact: onLiftImpact,\n    dimensions: dimensions,\n    afterCritical: afterCritical,\n    forceShouldAnimate: false\n  });\n\n  if (state.phase === 'COLLECTING') {\n    return draggingState;\n  }\n\n  var dropPending = _extends({\n    phase: 'DROP_PENDING'\n  }, draggingState, {\n    phase: 'DROP_PENDING',\n    reason: state.reason,\n    isWaiting: false\n  });\n\n  return dropPending;\n});\n\nvar isSnapping = function isSnapping(state) {\n  return state.movementMode === 'SNAP';\n};\n\nvar postDroppableChange = function postDroppableChange(state, updated, isEnabledChanging) {\n  var dimensions = patchDimensionMap(state.dimensions, updated);\n\n  if (!isSnapping(state) || isEnabledChanging) {\n    return update({\n      state: state,\n      dimensions: dimensions\n    });\n  }\n\n  return refreshSnap({\n    state: state,\n    dimensions: dimensions\n  });\n};\n\nfunction removeScrollJumpRequest(state) {\n  if (state.isDragging && state.movementMode === 'SNAP') {\n    return _extends({\n      phase: 'DRAGGING'\n    }, state, {\n      scrollJumpRequest: null\n    });\n  }\n\n  return state;\n}\n\nvar idle = {\n  phase: 'IDLE',\n  completed: null,\n  shouldFlush: false\n};\nvar reducer = (function (state, action) {\n  if (state === void 0) {\n    state = idle;\n  }\n\n  if (action.type === 'FLUSH') {\n    return _extends({}, idle, {\n      shouldFlush: true\n    });\n  }\n\n  if (action.type === 'INITIAL_PUBLISH') {\n    !(state.phase === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'INITIAL_PUBLISH must come after a IDLE phase') : invariant(false) : void 0;\n    var _action$payload = action.payload,\n        critical = _action$payload.critical,\n        clientSelection = _action$payload.clientSelection,\n        viewport = _action$payload.viewport,\n        dimensions = _action$payload.dimensions,\n        movementMode = _action$payload.movementMode;\n    var draggable = dimensions.draggables[critical.draggable.id];\n    var home = dimensions.droppables[critical.droppable.id];\n    var client = {\n      selection: clientSelection,\n      borderBoxCenter: draggable.client.borderBox.center,\n      offset: origin\n    };\n    var initial = {\n      client: client,\n      page: {\n        selection: add(client.selection, viewport.scroll.initial),\n        borderBoxCenter: add(client.selection, viewport.scroll.initial),\n        offset: add(client.selection, viewport.scroll.diff.value)\n      }\n    };\n    var isWindowScrollAllowed = toDroppableList(dimensions.droppables).every(function (item) {\n      return !item.isFixedOnPage;\n    });\n\n    var _getLiftEffect = getLiftEffect({\n      draggable: draggable,\n      home: home,\n      draggables: dimensions.draggables,\n      viewport: viewport\n    }),\n        impact = _getLiftEffect.impact,\n        afterCritical = _getLiftEffect.afterCritical;\n\n    var result = {\n      phase: 'DRAGGING',\n      isDragging: true,\n      critical: critical,\n      movementMode: movementMode,\n      dimensions: dimensions,\n      initial: initial,\n      current: initial,\n      isWindowScrollAllowed: isWindowScrollAllowed,\n      impact: impact,\n      afterCritical: afterCritical,\n      onLiftImpact: impact,\n      viewport: viewport,\n      scrollJumpRequest: null,\n      forceShouldAnimate: null\n    };\n    return result;\n  }\n\n  if (action.type === 'COLLECTION_STARTING') {\n    if (state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Collection cannot start from phase \" + state.phase) : invariant(false) : void 0;\n\n    var _result = _extends({\n      phase: 'COLLECTING'\n    }, state, {\n      phase: 'COLLECTING'\n    });\n\n    return _result;\n  }\n\n  if (action.type === 'PUBLISH_WHILE_DRAGGING') {\n    !(state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Unexpected \" + action.type + \" received in phase \" + state.phase) : invariant(false) : void 0;\n    return publishWhileDraggingInVirtual({\n      state: state,\n      published: action.payload\n    });\n  }\n\n  if (action.type === 'MOVE') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, action.type + \" not permitted in phase \" + state.phase) : invariant(false) : void 0;\n    var _clientSelection = action.payload.client;\n\n    if (isEqual(_clientSelection, state.current.client.selection)) {\n      return state;\n    }\n\n    return update({\n      state: state,\n      clientSelection: _clientSelection,\n      impact: isSnapping(state) ? state.impact : null\n    });\n  }\n\n  if (action.type === 'UPDATE_DROPPABLE_SCROLL') {\n    if (state.phase === 'DROP_PENDING') {\n      return removeScrollJumpRequest(state);\n    }\n\n    if (state.phase === 'COLLECTING') {\n      return removeScrollJumpRequest(state);\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, action.type + \" not permitted in phase \" + state.phase) : invariant(false) : void 0;\n    var _action$payload2 = action.payload,\n        id = _action$payload2.id,\n        newScroll = _action$payload2.newScroll;\n    var target = state.dimensions.droppables[id];\n\n    if (!target) {\n      return state;\n    }\n\n    var scrolled = scrollDroppable(target, newScroll);\n    return postDroppableChange(state, scrolled, false);\n  }\n\n  if (action.type === 'UPDATE_DROPPABLE_IS_ENABLED') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Attempting to move in an unsupported phase \" + state.phase) : invariant(false) : void 0;\n    var _action$payload3 = action.payload,\n        _id = _action$payload3.id,\n        isEnabled = _action$payload3.isEnabled;\n    var _target = state.dimensions.droppables[_id];\n    !_target ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find Droppable[id: \" + _id + \"] to toggle its enabled state\") : invariant(false) : void 0;\n    !(_target.isEnabled !== isEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Trying to set droppable isEnabled to \" + String(isEnabled) + \"\\n      but it is already \" + String(_target.isEnabled)) : invariant(false) : void 0;\n\n    var updated = _extends({}, _target, {\n      isEnabled: isEnabled\n    });\n\n    return postDroppableChange(state, updated, true);\n  }\n\n  if (action.type === 'UPDATE_DROPPABLE_IS_COMBINE_ENABLED') {\n    if (state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Attempting to move in an unsupported phase \" + state.phase) : invariant(false) : void 0;\n    var _action$payload4 = action.payload,\n        _id2 = _action$payload4.id,\n        isCombineEnabled = _action$payload4.isCombineEnabled;\n    var _target2 = state.dimensions.droppables[_id2];\n    !_target2 ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find Droppable[id: \" + _id2 + \"] to toggle its isCombineEnabled state\") : invariant(false) : void 0;\n    !(_target2.isCombineEnabled !== isCombineEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Trying to set droppable isCombineEnabled to \" + String(isCombineEnabled) + \"\\n      but it is already \" + String(_target2.isCombineEnabled)) : invariant(false) : void 0;\n\n    var _updated = _extends({}, _target2, {\n      isCombineEnabled: isCombineEnabled\n    });\n\n    return postDroppableChange(state, _updated, true);\n  }\n\n  if (action.type === 'MOVE_BY_WINDOW_SCROLL') {\n    if (state.phase === 'DROP_PENDING' || state.phase === 'DROP_ANIMATING') {\n      return state;\n    }\n\n    !isMovementAllowed(state) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot move by window in phase \" + state.phase) : invariant(false) : void 0;\n    !state.isWindowScrollAllowed ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Window scrolling is currently not supported for fixed lists') : invariant(false) : void 0;\n    var _newScroll = action.payload.newScroll;\n\n    if (isEqual(state.viewport.scroll.current, _newScroll)) {\n      return removeScrollJumpRequest(state);\n    }\n\n    var _viewport = scrollViewport(state.viewport, _newScroll);\n\n    if (isSnapping(state)) {\n      return refreshSnap({\n        state: state,\n        viewport: _viewport\n      });\n    }\n\n    return update({\n      state: state,\n      viewport: _viewport\n    });\n  }\n\n  if (action.type === 'UPDATE_VIEWPORT_MAX_SCROLL') {\n    if (!isMovementAllowed(state)) {\n      return state;\n    }\n\n    var maxScroll = action.payload.maxScroll;\n\n    if (isEqual(maxScroll, state.viewport.scroll.max)) {\n      return state;\n    }\n\n    var withMaxScroll = _extends({}, state.viewport, {\n      scroll: _extends({}, state.viewport.scroll, {\n        max: maxScroll\n      })\n    });\n\n    return _extends({\n      phase: 'DRAGGING'\n    }, state, {\n      viewport: withMaxScroll\n    });\n  }\n\n  if (action.type === 'MOVE_UP' || action.type === 'MOVE_DOWN' || action.type === 'MOVE_LEFT' || action.type === 'MOVE_RIGHT') {\n    if (state.phase === 'COLLECTING' || state.phase === 'DROP_PENDING') {\n      return state;\n    }\n\n    !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, action.type + \" received while not in DRAGGING phase\") : invariant(false) : void 0;\n\n    var _result2 = moveInDirection({\n      state: state,\n      type: action.type\n    });\n\n    if (!_result2) {\n      return state;\n    }\n\n    return update({\n      state: state,\n      impact: _result2.impact,\n      clientSelection: _result2.clientSelection,\n      scrollJumpRequest: _result2.scrollJumpRequest\n    });\n  }\n\n  if (action.type === 'DROP_PENDING') {\n    var reason = action.payload.reason;\n    !(state.phase === 'COLLECTING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only move into the DROP_PENDING phase from the COLLECTING phase') : invariant(false) : void 0;\n\n    var newState = _extends({\n      phase: 'DROP_PENDING'\n    }, state, {\n      phase: 'DROP_PENDING',\n      isWaiting: true,\n      reason: reason\n    });\n\n    return newState;\n  }\n\n  if (action.type === 'DROP_ANIMATE') {\n    var _action$payload5 = action.payload,\n        completed = _action$payload5.completed,\n        dropDuration = _action$payload5.dropDuration,\n        newHomeClientOffset = _action$payload5.newHomeClientOffset;\n    !(state.phase === 'DRAGGING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot animate drop from phase \" + state.phase) : invariant(false) : void 0;\n    var _result3 = {\n      phase: 'DROP_ANIMATING',\n      completed: completed,\n      dropDuration: dropDuration,\n      newHomeClientOffset: newHomeClientOffset,\n      dimensions: state.dimensions\n    };\n    return _result3;\n  }\n\n  if (action.type === 'DROP_COMPLETE') {\n    var _completed = action.payload.completed;\n    return {\n      phase: 'IDLE',\n      completed: _completed,\n      shouldFlush: false\n    };\n  }\n\n  return state;\n});\n\nvar beforeInitialCapture = function beforeInitialCapture(args) {\n  return {\n    type: 'BEFORE_INITIAL_CAPTURE',\n    payload: args\n  };\n};\nvar lift = function lift(args) {\n  return {\n    type: 'LIFT',\n    payload: args\n  };\n};\nvar initialPublish = function initialPublish(args) {\n  return {\n    type: 'INITIAL_PUBLISH',\n    payload: args\n  };\n};\nvar publishWhileDragging = function publishWhileDragging(args) {\n  return {\n    type: 'PUBLISH_WHILE_DRAGGING',\n    payload: args\n  };\n};\nvar collectionStarting = function collectionStarting() {\n  return {\n    type: 'COLLECTION_STARTING',\n    payload: null\n  };\n};\nvar updateDroppableScroll = function updateDroppableScroll(args) {\n  return {\n    type: 'UPDATE_DROPPABLE_SCROLL',\n    payload: args\n  };\n};\nvar updateDroppableIsEnabled = function updateDroppableIsEnabled(args) {\n  return {\n    type: 'UPDATE_DROPPABLE_IS_ENABLED',\n    payload: args\n  };\n};\nvar updateDroppableIsCombineEnabled = function updateDroppableIsCombineEnabled(args) {\n  return {\n    type: 'UPDATE_DROPPABLE_IS_COMBINE_ENABLED',\n    payload: args\n  };\n};\nvar move = function move(args) {\n  return {\n    type: 'MOVE',\n    payload: args\n  };\n};\nvar moveByWindowScroll = function moveByWindowScroll(args) {\n  return {\n    type: 'MOVE_BY_WINDOW_SCROLL',\n    payload: args\n  };\n};\nvar updateViewportMaxScroll = function updateViewportMaxScroll(args) {\n  return {\n    type: 'UPDATE_VIEWPORT_MAX_SCROLL',\n    payload: args\n  };\n};\nvar moveUp = function moveUp() {\n  return {\n    type: 'MOVE_UP',\n    payload: null\n  };\n};\nvar moveDown = function moveDown() {\n  return {\n    type: 'MOVE_DOWN',\n    payload: null\n  };\n};\nvar moveRight = function moveRight() {\n  return {\n    type: 'MOVE_RIGHT',\n    payload: null\n  };\n};\nvar moveLeft = function moveLeft() {\n  return {\n    type: 'MOVE_LEFT',\n    payload: null\n  };\n};\nvar flush = function flush() {\n  return {\n    type: 'FLUSH',\n    payload: null\n  };\n};\nvar animateDrop = function animateDrop(args) {\n  return {\n    type: 'DROP_ANIMATE',\n    payload: args\n  };\n};\nvar completeDrop = function completeDrop(args) {\n  return {\n    type: 'DROP_COMPLETE',\n    payload: args\n  };\n};\nvar drop = function drop(args) {\n  return {\n    type: 'DROP',\n    payload: args\n  };\n};\nvar dropPending = function dropPending(args) {\n  return {\n    type: 'DROP_PENDING',\n    payload: args\n  };\n};\nvar dropAnimationFinished = function dropAnimationFinished() {\n  return {\n    type: 'DROP_ANIMATION_FINISHED',\n    payload: null\n  };\n};\n\nfunction checkIndexes(insideDestination) {\n  if (insideDestination.length <= 1) {\n    return;\n  }\n\n  var indexes = insideDestination.map(function (d) {\n    return d.descriptor.index;\n  });\n  var errors = {};\n\n  for (var i = 1; i < indexes.length; i++) {\n    var current = indexes[i];\n    var previous = indexes[i - 1];\n\n    if (current !== previous + 1) {\n      errors[current] = true;\n    }\n  }\n\n  if (!Object.keys(errors).length) {\n    return;\n  }\n\n  var formatted = indexes.map(function (index) {\n    var hasError = Boolean(errors[index]);\n    return hasError ? \"[\\uD83D\\uDD25\" + index + \"]\" : \"\" + index;\n  }).join(', ');\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    Detected non-consecutive <Draggable /> indexes.\\n\\n    (This can cause unexpected bugs)\\n\\n    \" + formatted + \"\\n  \") : void 0;\n}\n\nfunction validateDimensions(critical, dimensions) {\n  if (process.env.NODE_ENV !== 'production') {\n    var insideDestination = getDraggablesInsideDroppable(critical.droppable.id, dimensions.draggables);\n    checkIndexes(insideDestination);\n  }\n}\n\nvar lift$1 = (function (marshal) {\n  return function (_ref) {\n    var getState = _ref.getState,\n        dispatch = _ref.dispatch;\n    return function (next) {\n      return function (action) {\n        if (action.type !== 'LIFT') {\n          next(action);\n          return;\n        }\n\n        var _action$payload = action.payload,\n            id = _action$payload.id,\n            clientSelection = _action$payload.clientSelection,\n            movementMode = _action$payload.movementMode;\n        var initial = getState();\n\n        if (initial.phase === 'DROP_ANIMATING') {\n          dispatch(completeDrop({\n            completed: initial.completed\n          }));\n        }\n\n        !(getState().phase === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Unexpected phase to start a drag') : invariant(false) : void 0;\n        dispatch(flush());\n        dispatch(beforeInitialCapture({\n          draggableId: id,\n          movementMode: movementMode\n        }));\n        var scrollOptions = {\n          shouldPublishImmediately: movementMode === 'SNAP'\n        };\n        var request = {\n          draggableId: id,\n          scrollOptions: scrollOptions\n        };\n\n        var _marshal$startPublish = marshal.startPublishing(request),\n            critical = _marshal$startPublish.critical,\n            dimensions = _marshal$startPublish.dimensions,\n            viewport = _marshal$startPublish.viewport;\n\n        validateDimensions(critical, dimensions);\n        dispatch(initialPublish({\n          critical: critical,\n          dimensions: dimensions,\n          clientSelection: clientSelection,\n          movementMode: movementMode,\n          viewport: viewport\n        }));\n      };\n    };\n  };\n});\n\nvar style = (function (marshal) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'INITIAL_PUBLISH') {\n          marshal.dragging();\n        }\n\n        if (action.type === 'DROP_ANIMATE') {\n          marshal.dropping(action.payload.completed.result.reason);\n        }\n\n        if (action.type === 'FLUSH' || action.type === 'DROP_COMPLETE') {\n          marshal.resting();\n        }\n\n        next(action);\n      };\n    };\n  };\n});\n\nvar curves = {\n  outOfTheWay: 'cubic-bezier(0.2, 0, 0, 1)',\n  drop: 'cubic-bezier(.2,1,.1,1)'\n};\nvar combine = {\n  opacity: {\n    drop: 0,\n    combining: 0.7\n  },\n  scale: {\n    drop: 0.75\n  }\n};\nvar timings = {\n  outOfTheWay: 0.2,\n  minDropTime: 0.33,\n  maxDropTime: 0.55\n};\nvar outOfTheWayTiming = timings.outOfTheWay + \"s \" + curves.outOfTheWay;\nvar transitions = {\n  fluid: \"opacity \" + outOfTheWayTiming,\n  snap: \"transform \" + outOfTheWayTiming + \", opacity \" + outOfTheWayTiming,\n  drop: function drop(duration) {\n    var timing = duration + \"s \" + curves.drop;\n    return \"transform \" + timing + \", opacity \" + timing;\n  },\n  outOfTheWay: \"transform \" + outOfTheWayTiming,\n  placeholder: \"height \" + outOfTheWayTiming + \", width \" + outOfTheWayTiming + \", margin \" + outOfTheWayTiming\n};\n\nvar moveTo = function moveTo(offset) {\n  return isEqual(offset, origin) ? null : \"translate(\" + offset.x + \"px, \" + offset.y + \"px)\";\n};\n\nvar transforms = {\n  moveTo: moveTo,\n  drop: function drop(offset, isCombining) {\n    var translate = moveTo(offset);\n\n    if (!translate) {\n      return null;\n    }\n\n    if (!isCombining) {\n      return translate;\n    }\n\n    return translate + \" scale(\" + combine.scale.drop + \")\";\n  }\n};\n\nvar minDropTime = timings.minDropTime,\n    maxDropTime = timings.maxDropTime;\nvar dropTimeRange = maxDropTime - minDropTime;\nvar maxDropTimeAtDistance = 1500;\nvar cancelDropModifier = 0.6;\nvar getDropDuration = (function (_ref) {\n  var current = _ref.current,\n      destination = _ref.destination,\n      reason = _ref.reason;\n  var distance$1 = distance(current, destination);\n\n  if (distance$1 <= 0) {\n    return minDropTime;\n  }\n\n  if (distance$1 >= maxDropTimeAtDistance) {\n    return maxDropTime;\n  }\n\n  var percentage = distance$1 / maxDropTimeAtDistance;\n  var duration = minDropTime + dropTimeRange * percentage;\n  var withDuration = reason === 'CANCEL' ? duration * cancelDropModifier : duration;\n  return Number(withDuration.toFixed(2));\n});\n\nvar getNewHomeClientOffset = (function (_ref) {\n  var impact = _ref.impact,\n      draggable = _ref.draggable,\n      dimensions = _ref.dimensions,\n      viewport = _ref.viewport,\n      afterCritical = _ref.afterCritical;\n  var draggables = dimensions.draggables,\n      droppables = dimensions.droppables;\n  var droppableId = whatIsDraggedOver(impact);\n  var destination = droppableId ? droppables[droppableId] : null;\n  var home = droppables[draggable.descriptor.droppableId];\n  var newClientCenter = getClientBorderBoxCenter({\n    impact: impact,\n    draggable: draggable,\n    draggables: draggables,\n    afterCritical: afterCritical,\n    droppable: destination || home,\n    viewport: viewport\n  });\n  var offset = subtract(newClientCenter, draggable.client.borderBox.center);\n  return offset;\n});\n\nvar getDropImpact = (function (_ref) {\n  var draggables = _ref.draggables,\n      reason = _ref.reason,\n      lastImpact = _ref.lastImpact,\n      home = _ref.home,\n      viewport = _ref.viewport,\n      onLiftImpact = _ref.onLiftImpact;\n\n  if (!lastImpact.at || reason !== 'DROP') {\n    var recomputedHomeImpact = recompute({\n      draggables: draggables,\n      impact: onLiftImpact,\n      destination: home,\n      viewport: viewport,\n      forceShouldAnimate: true\n    });\n    return {\n      impact: recomputedHomeImpact,\n      didDropInsideDroppable: false\n    };\n  }\n\n  if (lastImpact.at.type === 'REORDER') {\n    return {\n      impact: lastImpact,\n      didDropInsideDroppable: true\n    };\n  }\n\n  var withoutMovement = _extends({}, lastImpact, {\n    displaced: emptyGroups\n  });\n\n  return {\n    impact: withoutMovement,\n    didDropInsideDroppable: true\n  };\n});\n\nvar drop$1 = (function (_ref) {\n  var getState = _ref.getState,\n      dispatch = _ref.dispatch;\n  return function (next) {\n    return function (action) {\n      if (action.type !== 'DROP') {\n        next(action);\n        return;\n      }\n\n      var state = getState();\n      var reason = action.payload.reason;\n\n      if (state.phase === 'COLLECTING') {\n        dispatch(dropPending({\n          reason: reason\n        }));\n        return;\n      }\n\n      if (state.phase === 'IDLE') {\n        return;\n      }\n\n      var isWaitingForDrop = state.phase === 'DROP_PENDING' && state.isWaiting;\n      !!isWaitingForDrop ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'A DROP action occurred while DROP_PENDING and still waiting') : invariant(false) : void 0;\n      !(state.phase === 'DRAGGING' || state.phase === 'DROP_PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot drop in phase: \" + state.phase) : invariant(false) : void 0;\n      var critical = state.critical;\n      var dimensions = state.dimensions;\n      var draggable = dimensions.draggables[state.critical.draggable.id];\n\n      var _getDropImpact = getDropImpact({\n        reason: reason,\n        lastImpact: state.impact,\n        afterCritical: state.afterCritical,\n        onLiftImpact: state.onLiftImpact,\n        home: state.dimensions.droppables[state.critical.droppable.id],\n        viewport: state.viewport,\n        draggables: state.dimensions.draggables\n      }),\n          impact = _getDropImpact.impact,\n          didDropInsideDroppable = _getDropImpact.didDropInsideDroppable;\n\n      var destination = didDropInsideDroppable ? tryGetDestination(impact) : null;\n      var combine = didDropInsideDroppable ? tryGetCombine(impact) : null;\n      var source = {\n        index: critical.draggable.index,\n        droppableId: critical.droppable.id\n      };\n      var result = {\n        draggableId: draggable.descriptor.id,\n        type: draggable.descriptor.type,\n        source: source,\n        reason: reason,\n        mode: state.movementMode,\n        destination: destination,\n        combine: combine\n      };\n      var newHomeClientOffset = getNewHomeClientOffset({\n        impact: impact,\n        draggable: draggable,\n        dimensions: dimensions,\n        viewport: state.viewport,\n        afterCritical: state.afterCritical\n      });\n      var completed = {\n        critical: state.critical,\n        afterCritical: state.afterCritical,\n        result: result,\n        impact: impact\n      };\n      var isAnimationRequired = !isEqual(state.current.client.offset, newHomeClientOffset) || Boolean(result.combine);\n\n      if (!isAnimationRequired) {\n        dispatch(completeDrop({\n          completed: completed\n        }));\n        return;\n      }\n\n      var dropDuration = getDropDuration({\n        current: state.current.client.offset,\n        destination: newHomeClientOffset,\n        reason: reason\n      });\n      var args = {\n        newHomeClientOffset: newHomeClientOffset,\n        dropDuration: dropDuration,\n        completed: completed\n      };\n      dispatch(animateDrop(args));\n    };\n  };\n});\n\nvar getWindowScroll = (function () {\n  return {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  };\n});\n\nfunction getWindowScrollBinding(update) {\n  return {\n    eventName: 'scroll',\n    options: {\n      passive: true,\n      capture: false\n    },\n    fn: function fn(event) {\n      if (event.target !== window && event.target !== window.document) {\n        return;\n      }\n\n      update();\n    }\n  };\n}\n\nfunction getScrollListener(_ref) {\n  var onWindowScroll = _ref.onWindowScroll;\n\n  function updateScroll() {\n    onWindowScroll(getWindowScroll());\n  }\n\n  var scheduled = rafSchd(updateScroll);\n  var binding = getWindowScrollBinding(scheduled);\n  var unbind = noop;\n\n  function isActive() {\n    return unbind !== noop;\n  }\n\n  function start() {\n    !!isActive() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start scroll listener when already active') : invariant(false) : void 0;\n    unbind = bindEvents(window, [binding]);\n  }\n\n  function stop() {\n    !isActive() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop scroll listener when not active') : invariant(false) : void 0;\n    scheduled.cancel();\n    unbind();\n    unbind = noop;\n  }\n\n  return {\n    start: start,\n    stop: stop,\n    isActive: isActive\n  };\n}\n\nvar shouldEnd = function shouldEnd(action) {\n  return action.type === 'DROP_COMPLETE' || action.type === 'DROP_ANIMATE' || action.type === 'FLUSH';\n};\n\nvar scrollListener = (function (store) {\n  var listener = getScrollListener({\n    onWindowScroll: function onWindowScroll(newScroll) {\n      store.dispatch(moveByWindowScroll({\n        newScroll: newScroll\n      }));\n    }\n  });\n  return function (next) {\n    return function (action) {\n      if (!listener.isActive() && action.type === 'INITIAL_PUBLISH') {\n        listener.start();\n      }\n\n      if (listener.isActive() && shouldEnd(action)) {\n        listener.stop();\n      }\n\n      next(action);\n    };\n  };\n});\n\nvar getExpiringAnnounce = (function (announce) {\n  var wasCalled = false;\n  var isExpired = false;\n  var timeoutId = setTimeout(function () {\n    isExpired = true;\n  });\n\n  var result = function result(message) {\n    if (wasCalled) {\n      process.env.NODE_ENV !== \"production\" ? warning('Announcement already made. Not making a second announcement') : void 0;\n      return;\n    }\n\n    if (isExpired) {\n      process.env.NODE_ENV !== \"production\" ? warning(\"\\n        Announcements cannot be made asynchronously.\\n        Default message has already been announced.\\n      \") : void 0;\n      return;\n    }\n\n    wasCalled = true;\n    announce(message);\n    clearTimeout(timeoutId);\n  };\n\n  result.wasCalled = function () {\n    return wasCalled;\n  };\n\n  return result;\n});\n\nvar getAsyncMarshal = (function () {\n  var entries = [];\n\n  var execute = function execute(timerId) {\n    var index = findIndex(entries, function (item) {\n      return item.timerId === timerId;\n    });\n    !(index !== -1) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find timer') : invariant(false) : void 0;\n\n    var _entries$splice = entries.splice(index, 1),\n        entry = _entries$splice[0];\n\n    entry.callback();\n  };\n\n  var add = function add(fn) {\n    var timerId = setTimeout(function () {\n      return execute(timerId);\n    });\n    var entry = {\n      timerId: timerId,\n      callback: fn\n    };\n    entries.push(entry);\n  };\n\n  var flush = function flush() {\n    if (!entries.length) {\n      return;\n    }\n\n    var shallow = [].concat(entries);\n    entries.length = 0;\n    shallow.forEach(function (entry) {\n      clearTimeout(entry.timerId);\n      entry.callback();\n    });\n  };\n\n  return {\n    add: add,\n    flush: flush\n  };\n});\n\nvar areLocationsEqual = function areLocationsEqual(first, second) {\n  if (first == null && second == null) {\n    return true;\n  }\n\n  if (first == null || second == null) {\n    return false;\n  }\n\n  return first.droppableId === second.droppableId && first.index === second.index;\n};\nvar isCombineEqual = function isCombineEqual(first, second) {\n  if (first == null && second == null) {\n    return true;\n  }\n\n  if (first == null || second == null) {\n    return false;\n  }\n\n  return first.draggableId === second.draggableId && first.droppableId === second.droppableId;\n};\nvar isCriticalEqual = function isCriticalEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n\n  var isDraggableEqual = first.draggable.id === second.draggable.id && first.draggable.droppableId === second.draggable.droppableId && first.draggable.type === second.draggable.type && first.draggable.index === second.draggable.index;\n  var isDroppableEqual = first.droppable.id === second.droppable.id && first.droppable.type === second.droppable.type;\n  return isDraggableEqual && isDroppableEqual;\n};\n\nvar withTimings = function withTimings(key, fn) {\n  start();\n  fn();\n  finish();\n};\n\nvar getDragStart = function getDragStart(critical, mode) {\n  return {\n    draggableId: critical.draggable.id,\n    type: critical.droppable.type,\n    source: {\n      droppableId: critical.droppable.id,\n      index: critical.draggable.index\n    },\n    mode: mode\n  };\n};\n\nvar execute = function execute(responder, data, announce, getDefaultMessage) {\n  if (!responder) {\n    announce(getDefaultMessage(data));\n    return;\n  }\n\n  var willExpire = getExpiringAnnounce(announce);\n  var provided = {\n    announce: willExpire\n  };\n  responder(data, provided);\n\n  if (!willExpire.wasCalled()) {\n    announce(getDefaultMessage(data));\n  }\n};\n\nvar getPublisher = (function (getResponders, announce) {\n  var asyncMarshal = getAsyncMarshal();\n  var dragging = null;\n\n  var beforeCapture = function beforeCapture(draggableId, mode) {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeCapture as a drag start has already been published') : invariant(false) : void 0;\n    withTimings('onBeforeCapture', function () {\n      var fn = getResponders().onBeforeCapture;\n\n      if (fn) {\n        var before = {\n          draggableId: draggableId,\n          mode: mode\n        };\n        fn(before);\n      }\n    });\n  };\n\n  var beforeStart = function beforeStart(critical, mode) {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeDragStart as a drag start has already been published') : invariant(false) : void 0;\n    withTimings('onBeforeDragStart', function () {\n      var fn = getResponders().onBeforeDragStart;\n\n      if (fn) {\n        fn(getDragStart(critical, mode));\n      }\n    });\n  };\n\n  var start = function start(critical, mode) {\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onBeforeDragStart as a drag start has already been published') : invariant(false) : void 0;\n    var data = getDragStart(critical, mode);\n    dragging = {\n      mode: mode,\n      lastCritical: critical,\n      lastLocation: data.source,\n      lastCombine: null\n    };\n    asyncMarshal.add(function () {\n      withTimings('onDragStart', function () {\n        return execute(getResponders().onDragStart, data, announce, preset.onDragStart);\n      });\n    });\n  };\n\n  var update = function update(critical, impact) {\n    var location = tryGetDestination(impact);\n    var combine = tryGetCombine(impact);\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onDragMove when onDragStart has not been called') : invariant(false) : void 0;\n    var hasCriticalChanged = !isCriticalEqual(critical, dragging.lastCritical);\n\n    if (hasCriticalChanged) {\n      dragging.lastCritical = critical;\n    }\n\n    var hasLocationChanged = !areLocationsEqual(dragging.lastLocation, location);\n\n    if (hasLocationChanged) {\n      dragging.lastLocation = location;\n    }\n\n    var hasGroupingChanged = !isCombineEqual(dragging.lastCombine, combine);\n\n    if (hasGroupingChanged) {\n      dragging.lastCombine = combine;\n    }\n\n    if (!hasCriticalChanged && !hasLocationChanged && !hasGroupingChanged) {\n      return;\n    }\n\n    var data = _extends({}, getDragStart(critical, dragging.mode), {\n      combine: combine,\n      destination: location\n    });\n\n    asyncMarshal.add(function () {\n      withTimings('onDragUpdate', function () {\n        return execute(getResponders().onDragUpdate, data, announce, preset.onDragUpdate);\n      });\n    });\n  };\n\n  var flush = function flush() {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only flush responders while dragging') : invariant(false) : void 0;\n    asyncMarshal.flush();\n  };\n\n  var drop = function drop(result) {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fire onDragEnd when there is no matching onDragStart') : invariant(false) : void 0;\n    dragging = null;\n    withTimings('onDragEnd', function () {\n      return execute(getResponders().onDragEnd, result, announce, preset.onDragEnd);\n    });\n  };\n\n  var abort = function abort() {\n    if (!dragging) {\n      return;\n    }\n\n    var result = _extends({}, getDragStart(dragging.lastCritical, dragging.mode), {\n      combine: null,\n      destination: null,\n      reason: 'CANCEL'\n    });\n\n    drop(result);\n  };\n\n  return {\n    beforeCapture: beforeCapture,\n    beforeStart: beforeStart,\n    start: start,\n    update: update,\n    flush: flush,\n    drop: drop,\n    abort: abort\n  };\n});\n\nvar responders = (function (getResponders, announce) {\n  var publisher = getPublisher(getResponders, announce);\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'BEFORE_INITIAL_CAPTURE') {\n          publisher.beforeCapture(action.payload.draggableId, action.payload.movementMode);\n          return;\n        }\n\n        if (action.type === 'INITIAL_PUBLISH') {\n          var critical = action.payload.critical;\n          publisher.beforeStart(critical, action.payload.movementMode);\n          next(action);\n          publisher.start(critical, action.payload.movementMode);\n          return;\n        }\n\n        if (action.type === 'DROP_COMPLETE') {\n          var result = action.payload.completed.result;\n          publisher.flush();\n          next(action);\n          publisher.drop(result);\n          return;\n        }\n\n        next(action);\n\n        if (action.type === 'FLUSH') {\n          publisher.abort();\n          return;\n        }\n\n        var state = store.getState();\n\n        if (state.phase === 'DRAGGING') {\n          publisher.update(state.critical, state.impact);\n        }\n      };\n    };\n  };\n});\n\nvar dropAnimationFinish = (function (store) {\n  return function (next) {\n    return function (action) {\n      if (action.type !== 'DROP_ANIMATION_FINISHED') {\n        next(action);\n        return;\n      }\n\n      var state = store.getState();\n      !(state.phase === 'DROP_ANIMATING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot finish a drop animating when no drop is occurring') : invariant(false) : void 0;\n      store.dispatch(completeDrop({\n        completed: state.completed\n      }));\n    };\n  };\n});\n\nvar dropAnimationFlushOnScroll = (function (store) {\n  var unbind = null;\n  var frameId = null;\n\n  function clear() {\n    if (frameId) {\n      cancelAnimationFrame(frameId);\n      frameId = null;\n    }\n\n    if (unbind) {\n      unbind();\n      unbind = null;\n    }\n  }\n\n  return function (next) {\n    return function (action) {\n      if (action.type === 'FLUSH' || action.type === 'DROP_COMPLETE' || action.type === 'DROP_ANIMATION_FINISHED') {\n        clear();\n      }\n\n      next(action);\n\n      if (action.type !== 'DROP_ANIMATE') {\n        return;\n      }\n\n      var binding = {\n        eventName: 'scroll',\n        options: {\n          capture: true,\n          passive: false,\n          once: true\n        },\n        fn: function flushDropAnimation() {\n          var state = store.getState();\n\n          if (state.phase === 'DROP_ANIMATING') {\n            store.dispatch(dropAnimationFinished());\n          }\n        }\n      };\n      frameId = requestAnimationFrame(function () {\n        frameId = null;\n        unbind = bindEvents(window, [binding]);\n      });\n    };\n  };\n});\n\nvar dimensionMarshalStopper = (function (marshal) {\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'DROP_COMPLETE' || action.type === 'FLUSH' || action.type === 'DROP_ANIMATE') {\n          marshal.stopPublishing();\n        }\n\n        next(action);\n      };\n    };\n  };\n});\n\nvar focus = (function (marshal) {\n  var isWatching = false;\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.type === 'INITIAL_PUBLISH') {\n          isWatching = true;\n          marshal.tryRecordFocus(action.payload.critical.draggable.id);\n          next(action);\n          marshal.tryRestoreFocusRecorded();\n          return;\n        }\n\n        next(action);\n\n        if (!isWatching) {\n          return;\n        }\n\n        if (action.type === 'FLUSH') {\n          isWatching = false;\n          marshal.tryRestoreFocusRecorded();\n          return;\n        }\n\n        if (action.type === 'DROP_COMPLETE') {\n          isWatching = false;\n          var result = action.payload.completed.result;\n\n          if (result.combine) {\n            marshal.tryShiftRecord(result.draggableId, result.combine.draggableId);\n          }\n\n          marshal.tryRestoreFocusRecorded();\n        }\n      };\n    };\n  };\n});\n\nvar shouldStop = function shouldStop(action) {\n  return action.type === 'DROP_COMPLETE' || action.type === 'DROP_ANIMATE' || action.type === 'FLUSH';\n};\n\nvar autoScroll = (function (autoScroller) {\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        if (shouldStop(action)) {\n          autoScroller.stop();\n          next(action);\n          return;\n        }\n\n        if (action.type === 'INITIAL_PUBLISH') {\n          next(action);\n          var state = store.getState();\n          !(state.phase === 'DRAGGING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected phase to be DRAGGING after INITIAL_PUBLISH') : invariant(false) : void 0;\n          autoScroller.start(state);\n          return;\n        }\n\n        next(action);\n        autoScroller.scroll(store.getState());\n      };\n    };\n  };\n});\n\nvar pendingDrop = (function (store) {\n  return function (next) {\n    return function (action) {\n      next(action);\n\n      if (action.type !== 'PUBLISH_WHILE_DRAGGING') {\n        return;\n      }\n\n      var postActionState = store.getState();\n\n      if (postActionState.phase !== 'DROP_PENDING') {\n        return;\n      }\n\n      if (postActionState.isWaiting) {\n        return;\n      }\n\n      store.dispatch(drop({\n        reason: postActionState.reason\n      }));\n    };\n  };\n});\n\nvar composeEnhancers = process.env.NODE_ENV !== 'production' && typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n  name: 'react-beautiful-dnd'\n}) : compose;\nvar createStore = (function (_ref) {\n  var dimensionMarshal = _ref.dimensionMarshal,\n      focusMarshal = _ref.focusMarshal,\n      styleMarshal = _ref.styleMarshal,\n      getResponders = _ref.getResponders,\n      announce = _ref.announce,\n      autoScroller = _ref.autoScroller;\n  return createStore$1(reducer, composeEnhancers(applyMiddleware(style(styleMarshal), dimensionMarshalStopper(dimensionMarshal), lift$1(dimensionMarshal), drop$1, dropAnimationFinish, dropAnimationFlushOnScroll, pendingDrop, autoScroll(autoScroller), scrollListener, focus(focusMarshal), responders(getResponders, announce))));\n});\n\nvar clean$1 = function clean() {\n  return {\n    additions: {},\n    removals: {},\n    modified: {}\n  };\n};\nfunction createPublisher(_ref) {\n  var registry = _ref.registry,\n      callbacks = _ref.callbacks;\n  var staging = clean$1();\n  var frameId = null;\n\n  var collect = function collect() {\n    if (frameId) {\n      return;\n    }\n\n    callbacks.collectionStarting();\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      start();\n      var _staging = staging,\n          additions = _staging.additions,\n          removals = _staging.removals,\n          modified = _staging.modified;\n      var added = Object.keys(additions).map(function (id) {\n        return registry.draggable.getById(id).getDimension(origin);\n      }).sort(function (a, b) {\n        return a.descriptor.index - b.descriptor.index;\n      });\n      var updated = Object.keys(modified).map(function (id) {\n        var entry = registry.droppable.getById(id);\n        var scroll = entry.callbacks.getScrollWhileDragging();\n        return {\n          droppableId: id,\n          scroll: scroll\n        };\n      });\n      var result = {\n        additions: added,\n        removals: Object.keys(removals),\n        modified: updated\n      };\n      staging = clean$1();\n      finish();\n      callbacks.publish(result);\n    });\n  };\n\n  var add = function add(entry) {\n    var id = entry.descriptor.id;\n    staging.additions[id] = entry;\n    staging.modified[entry.descriptor.droppableId] = true;\n\n    if (staging.removals[id]) {\n      delete staging.removals[id];\n    }\n\n    collect();\n  };\n\n  var remove = function remove(entry) {\n    var descriptor = entry.descriptor;\n    staging.removals[descriptor.id] = true;\n    staging.modified[descriptor.droppableId] = true;\n\n    if (staging.additions[descriptor.id]) {\n      delete staging.additions[descriptor.id];\n    }\n\n    collect();\n  };\n\n  var stop = function stop() {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n    staging = clean$1();\n  };\n\n  return {\n    add: add,\n    remove: remove,\n    stop: stop\n  };\n}\n\nvar getMaxScroll = (function (_ref) {\n  var scrollHeight = _ref.scrollHeight,\n      scrollWidth = _ref.scrollWidth,\n      height = _ref.height,\n      width = _ref.width;\n  var maxScroll = subtract({\n    x: scrollWidth,\n    y: scrollHeight\n  }, {\n    x: width,\n    y: height\n  });\n  var adjustedMaxScroll = {\n    x: Math.max(0, maxScroll.x),\n    y: Math.max(0, maxScroll.y)\n  };\n  return adjustedMaxScroll;\n});\n\nvar getDocumentElement = (function () {\n  var doc = document.documentElement;\n  !doc ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find document.documentElement') : invariant(false) : void 0;\n  return doc;\n});\n\nvar getMaxWindowScroll = (function () {\n  var doc = getDocumentElement();\n  var maxScroll = getMaxScroll({\n    scrollHeight: doc.scrollHeight,\n    scrollWidth: doc.scrollWidth,\n    width: doc.clientWidth,\n    height: doc.clientHeight\n  });\n  return maxScroll;\n});\n\nvar getViewport = (function () {\n  var scroll = getWindowScroll();\n  var maxScroll = getMaxWindowScroll();\n  var top = scroll.y;\n  var left = scroll.x;\n  var doc = getDocumentElement();\n  var width = doc.clientWidth;\n  var height = doc.clientHeight;\n  var right = left + width;\n  var bottom = top + height;\n  var frame = getRect({\n    top: top,\n    left: left,\n    right: right,\n    bottom: bottom\n  });\n  var viewport = {\n    frame: frame,\n    scroll: {\n      initial: scroll,\n      current: scroll,\n      max: maxScroll,\n      diff: {\n        value: origin,\n        displacement: origin\n      }\n    }\n  };\n  return viewport;\n});\n\nvar getInitialPublish = (function (_ref) {\n  var critical = _ref.critical,\n      scrollOptions = _ref.scrollOptions,\n      registry = _ref.registry;\n  start();\n  var viewport = getViewport();\n  var windowScroll = viewport.scroll.current;\n  var home = critical.droppable;\n  var droppables = registry.droppable.getAllByType(home.type).map(function (entry) {\n    return entry.callbacks.getDimensionAndWatchScroll(windowScroll, scrollOptions);\n  });\n  var draggables = registry.draggable.getAllByType(critical.draggable.type).map(function (entry) {\n    return entry.getDimension(windowScroll);\n  });\n  var dimensions = {\n    draggables: toDraggableMap(draggables),\n    droppables: toDroppableMap(droppables)\n  };\n  finish();\n  var result = {\n    dimensions: dimensions,\n    critical: critical,\n    viewport: viewport\n  };\n  return result;\n});\n\nfunction shouldPublishUpdate(registry, dragging, entry) {\n  if (entry.descriptor.id === dragging.id) {\n    return false;\n  }\n\n  if (entry.descriptor.type !== dragging.type) {\n    return false;\n  }\n\n  var home = registry.droppable.getById(entry.descriptor.droppableId);\n\n  if (home.descriptor.mode !== 'virtual') {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      You are attempting to add or remove a Draggable [id: \" + entry.descriptor.id + \"]\\n      while a drag is occurring. This is only supported for virtual lists.\\n\\n      See https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/patterns/virtual-lists.md\\n    \") : void 0;\n    return false;\n  }\n\n  return true;\n}\n\nvar createDimensionMarshal = (function (registry, callbacks) {\n  var collection = null;\n  var publisher = createPublisher({\n    callbacks: {\n      publish: callbacks.publishWhileDragging,\n      collectionStarting: callbacks.collectionStarting\n    },\n    registry: registry\n  });\n\n  var updateDroppableIsEnabled = function updateDroppableIsEnabled(id, isEnabled) {\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot update is enabled flag of Droppable \" + id + \" as it is not registered\") : invariant(false) : void 0;\n\n    if (!collection) {\n      return;\n    }\n\n    callbacks.updateDroppableIsEnabled({\n      id: id,\n      isEnabled: isEnabled\n    });\n  };\n\n  var updateDroppableIsCombineEnabled = function updateDroppableIsCombineEnabled(id, isCombineEnabled) {\n    if (!collection) {\n      return;\n    }\n\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot update isCombineEnabled flag of Droppable \" + id + \" as it is not registered\") : invariant(false) : void 0;\n    callbacks.updateDroppableIsCombineEnabled({\n      id: id,\n      isCombineEnabled: isCombineEnabled\n    });\n  };\n\n  var updateDroppableScroll = function updateDroppableScroll(id, newScroll) {\n    if (!collection) {\n      return;\n    }\n\n    !registry.droppable.exists(id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot update the scroll on Droppable \" + id + \" as it is not registered\") : invariant(false) : void 0;\n    callbacks.updateDroppableScroll({\n      id: id,\n      newScroll: newScroll\n    });\n  };\n\n  var scrollDroppable = function scrollDroppable(id, change) {\n    if (!collection) {\n      return;\n    }\n\n    registry.droppable.getById(id).callbacks.scroll(change);\n  };\n\n  var stopPublishing = function stopPublishing() {\n    if (!collection) {\n      return;\n    }\n\n    publisher.stop();\n    var home = collection.critical.droppable;\n    registry.droppable.getAllByType(home.type).forEach(function (entry) {\n      return entry.callbacks.dragStopped();\n    });\n    collection.unsubscribe();\n    collection = null;\n  };\n\n  var subscriber = function subscriber(event) {\n    !collection ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Should only be subscribed when a collection is occurring') : invariant(false) : void 0;\n    var dragging = collection.critical.draggable;\n\n    if (event.type === 'ADDITION') {\n      if (shouldPublishUpdate(registry, dragging, event.value)) {\n        publisher.add(event.value);\n      }\n    }\n\n    if (event.type === 'REMOVAL') {\n      if (shouldPublishUpdate(registry, dragging, event.value)) {\n        publisher.remove(event.value);\n      }\n    }\n  };\n\n  var startPublishing = function startPublishing(request) {\n    !!collection ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start capturing critical dimensions as there is already a collection') : invariant(false) : void 0;\n    var entry = registry.draggable.getById(request.draggableId);\n    var home = registry.droppable.getById(entry.descriptor.droppableId);\n    var critical = {\n      draggable: entry.descriptor,\n      droppable: home.descriptor\n    };\n    var unsubscribe = registry.subscribe(subscriber);\n    collection = {\n      critical: critical,\n      unsubscribe: unsubscribe\n    };\n    return getInitialPublish({\n      critical: critical,\n      registry: registry,\n      scrollOptions: request.scrollOptions\n    });\n  };\n\n  var marshal = {\n    updateDroppableIsEnabled: updateDroppableIsEnabled,\n    updateDroppableIsCombineEnabled: updateDroppableIsCombineEnabled,\n    scrollDroppable: scrollDroppable,\n    updateDroppableScroll: updateDroppableScroll,\n    startPublishing: startPublishing,\n    stopPublishing: stopPublishing\n  };\n  return marshal;\n});\n\nvar canStartDrag = (function (state, id) {\n  if (state.phase === 'IDLE') {\n    return true;\n  }\n\n  if (state.phase !== 'DROP_ANIMATING') {\n    return false;\n  }\n\n  if (state.completed.result.draggableId === id) {\n    return false;\n  }\n\n  return state.completed.result.reason === 'DROP';\n});\n\nvar scrollWindow = (function (change) {\n  window.scrollBy(change.x, change.y);\n});\n\nvar getScrollableDroppables = memoizeOne(function (droppables) {\n  return toDroppableList(droppables).filter(function (droppable) {\n    if (!droppable.isEnabled) {\n      return false;\n    }\n\n    if (!droppable.frame) {\n      return false;\n    }\n\n    return true;\n  });\n});\n\nvar getScrollableDroppableOver = function getScrollableDroppableOver(target, droppables) {\n  var maybe = find(getScrollableDroppables(droppables), function (droppable) {\n    !droppable.frame ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Invalid result') : invariant(false) : void 0;\n    return isPositionInFrame(droppable.frame.pageMarginBox)(target);\n  });\n  return maybe;\n};\n\nvar getBestScrollableDroppable = (function (_ref) {\n  var center = _ref.center,\n      destination = _ref.destination,\n      droppables = _ref.droppables;\n\n  if (destination) {\n    var _dimension = droppables[destination];\n\n    if (!_dimension.frame) {\n      return null;\n    }\n\n    return _dimension;\n  }\n\n  var dimension = getScrollableDroppableOver(center, droppables);\n  return dimension;\n});\n\nvar config = {\n  startFromPercentage: 0.25,\n  maxScrollAtPercentage: 0.05,\n  maxPixelScroll: 28,\n  ease: function ease(percentage) {\n    return Math.pow(percentage, 2);\n  },\n  durationDampening: {\n    stopDampeningAt: 1200,\n    accelerateAt: 360\n  }\n};\n\nvar getDistanceThresholds = (function (container, axis) {\n  var startScrollingFrom = container[axis.size] * config.startFromPercentage;\n  var maxScrollValueAt = container[axis.size] * config.maxScrollAtPercentage;\n  var thresholds = {\n    startScrollingFrom: startScrollingFrom,\n    maxScrollValueAt: maxScrollValueAt\n  };\n  return thresholds;\n});\n\nvar getPercentage = (function (_ref) {\n  var startOfRange = _ref.startOfRange,\n      endOfRange = _ref.endOfRange,\n      current = _ref.current;\n  var range = endOfRange - startOfRange;\n\n  if (range === 0) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Detected distance range of 0 in the fluid auto scroller\\n      This is unexpected and would cause a divide by 0 issue.\\n      Not allowing an auto scroll\\n    \") : void 0;\n    return 0;\n  }\n\n  var currentInRange = current - startOfRange;\n  var percentage = currentInRange / range;\n  return percentage;\n});\n\nvar minScroll = 1;\n\nvar getValueFromDistance = (function (distanceToEdge, thresholds) {\n  if (distanceToEdge > thresholds.startScrollingFrom) {\n    return 0;\n  }\n\n  if (distanceToEdge <= thresholds.maxScrollValueAt) {\n    return config.maxPixelScroll;\n  }\n\n  if (distanceToEdge === thresholds.startScrollingFrom) {\n    return minScroll;\n  }\n\n  var percentageFromMaxScrollValueAt = getPercentage({\n    startOfRange: thresholds.maxScrollValueAt,\n    endOfRange: thresholds.startScrollingFrom,\n    current: distanceToEdge\n  });\n  var percentageFromStartScrollingFrom = 1 - percentageFromMaxScrollValueAt;\n  var scroll = config.maxPixelScroll * config.ease(percentageFromStartScrollingFrom);\n  return Math.ceil(scroll);\n});\n\nvar accelerateAt = config.durationDampening.accelerateAt;\nvar stopAt = config.durationDampening.stopDampeningAt;\nvar dampenValueByTime = (function (proposedScroll, dragStartTime) {\n  var startOfRange = dragStartTime;\n  var endOfRange = stopAt;\n  var now = Date.now();\n  var runTime = now - startOfRange;\n\n  if (runTime >= stopAt) {\n    return proposedScroll;\n  }\n\n  if (runTime < accelerateAt) {\n    return minScroll;\n  }\n\n  var betweenAccelerateAtAndStopAtPercentage = getPercentage({\n    startOfRange: accelerateAt,\n    endOfRange: endOfRange,\n    current: runTime\n  });\n  var scroll = proposedScroll * config.ease(betweenAccelerateAtAndStopAtPercentage);\n  return Math.ceil(scroll);\n});\n\nvar getValue = (function (_ref) {\n  var distanceToEdge = _ref.distanceToEdge,\n      thresholds = _ref.thresholds,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var scroll = getValueFromDistance(distanceToEdge, thresholds);\n\n  if (scroll === 0) {\n    return 0;\n  }\n\n  if (!shouldUseTimeDampening) {\n    return scroll;\n  }\n\n  return Math.max(dampenValueByTime(scroll, dragStartTime), minScroll);\n});\n\nvar getScrollOnAxis = (function (_ref) {\n  var container = _ref.container,\n      distanceToEdges = _ref.distanceToEdges,\n      dragStartTime = _ref.dragStartTime,\n      axis = _ref.axis,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var thresholds = getDistanceThresholds(container, axis);\n  var isCloserToEnd = distanceToEdges[axis.end] < distanceToEdges[axis.start];\n\n  if (isCloserToEnd) {\n    return getValue({\n      distanceToEdge: distanceToEdges[axis.end],\n      thresholds: thresholds,\n      dragStartTime: dragStartTime,\n      shouldUseTimeDampening: shouldUseTimeDampening\n    });\n  }\n\n  return -1 * getValue({\n    distanceToEdge: distanceToEdges[axis.start],\n    thresholds: thresholds,\n    dragStartTime: dragStartTime,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n});\n\nvar adjustForSizeLimits = (function (_ref) {\n  var container = _ref.container,\n      subject = _ref.subject,\n      proposedScroll = _ref.proposedScroll;\n  var isTooBigVertically = subject.height > container.height;\n  var isTooBigHorizontally = subject.width > container.width;\n\n  if (!isTooBigHorizontally && !isTooBigVertically) {\n    return proposedScroll;\n  }\n\n  if (isTooBigHorizontally && isTooBigVertically) {\n    return null;\n  }\n\n  return {\n    x: isTooBigHorizontally ? 0 : proposedScroll.x,\n    y: isTooBigVertically ? 0 : proposedScroll.y\n  };\n});\n\nvar clean$2 = apply(function (value) {\n  return value === 0 ? 0 : value;\n});\nvar getScroll = (function (_ref) {\n  var dragStartTime = _ref.dragStartTime,\n      container = _ref.container,\n      subject = _ref.subject,\n      center = _ref.center,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var distanceToEdges = {\n    top: center.y - container.top,\n    right: container.right - center.x,\n    bottom: container.bottom - center.y,\n    left: center.x - container.left\n  };\n  var y = getScrollOnAxis({\n    container: container,\n    distanceToEdges: distanceToEdges,\n    dragStartTime: dragStartTime,\n    axis: vertical,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  var x = getScrollOnAxis({\n    container: container,\n    distanceToEdges: distanceToEdges,\n    dragStartTime: dragStartTime,\n    axis: horizontal,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  var required = clean$2({\n    x: x,\n    y: y\n  });\n\n  if (isEqual(required, origin)) {\n    return null;\n  }\n\n  var limited = adjustForSizeLimits({\n    container: container,\n    subject: subject,\n    proposedScroll: required\n  });\n\n  if (!limited) {\n    return null;\n  }\n\n  return isEqual(limited, origin) ? null : limited;\n});\n\nvar smallestSigned = apply(function (value) {\n  if (value === 0) {\n    return 0;\n  }\n\n  return value > 0 ? 1 : -1;\n});\nvar getOverlap = function () {\n  var getRemainder = function getRemainder(target, max) {\n    if (target < 0) {\n      return target;\n    }\n\n    if (target > max) {\n      return target - max;\n    }\n\n    return 0;\n  };\n\n  return function (_ref) {\n    var current = _ref.current,\n        max = _ref.max,\n        change = _ref.change;\n    var targetScroll = add(current, change);\n    var overlap = {\n      x: getRemainder(targetScroll.x, max.x),\n      y: getRemainder(targetScroll.y, max.y)\n    };\n\n    if (isEqual(overlap, origin)) {\n      return null;\n    }\n\n    return overlap;\n  };\n}();\nvar canPartiallyScroll = function canPartiallyScroll(_ref2) {\n  var rawMax = _ref2.max,\n      current = _ref2.current,\n      change = _ref2.change;\n  var max = {\n    x: Math.max(current.x, rawMax.x),\n    y: Math.max(current.y, rawMax.y)\n  };\n  var smallestChange = smallestSigned(change);\n  var overlap = getOverlap({\n    max: max,\n    current: current,\n    change: smallestChange\n  });\n\n  if (!overlap) {\n    return true;\n  }\n\n  if (smallestChange.x !== 0 && overlap.x === 0) {\n    return true;\n  }\n\n  if (smallestChange.y !== 0 && overlap.y === 0) {\n    return true;\n  }\n\n  return false;\n};\nvar canScrollWindow = function canScrollWindow(viewport, change) {\n  return canPartiallyScroll({\n    current: viewport.scroll.current,\n    max: viewport.scroll.max,\n    change: change\n  });\n};\nvar getWindowOverlap = function getWindowOverlap(viewport, change) {\n  if (!canScrollWindow(viewport, change)) {\n    return null;\n  }\n\n  var max = viewport.scroll.max;\n  var current = viewport.scroll.current;\n  return getOverlap({\n    current: current,\n    max: max,\n    change: change\n  });\n};\nvar canScrollDroppable = function canScrollDroppable(droppable, change) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return false;\n  }\n\n  return canPartiallyScroll({\n    current: frame.scroll.current,\n    max: frame.scroll.max,\n    change: change\n  });\n};\nvar getDroppableOverlap = function getDroppableOverlap(droppable, change) {\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return null;\n  }\n\n  if (!canScrollDroppable(droppable, change)) {\n    return null;\n  }\n\n  return getOverlap({\n    current: frame.scroll.current,\n    max: frame.scroll.max,\n    change: change\n  });\n};\n\nvar getWindowScrollChange = (function (_ref) {\n  var viewport = _ref.viewport,\n      subject = _ref.subject,\n      center = _ref.center,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var scroll = getScroll({\n    dragStartTime: dragStartTime,\n    container: viewport.frame,\n    subject: subject,\n    center: center,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  return scroll && canScrollWindow(viewport, scroll) ? scroll : null;\n});\n\nvar getDroppableScrollChange = (function (_ref) {\n  var droppable = _ref.droppable,\n      subject = _ref.subject,\n      center = _ref.center,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening;\n  var frame = droppable.frame;\n\n  if (!frame) {\n    return null;\n  }\n\n  var scroll = getScroll({\n    dragStartTime: dragStartTime,\n    container: frame.pageMarginBox,\n    subject: subject,\n    center: center,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n  return scroll && canScrollDroppable(droppable, scroll) ? scroll : null;\n});\n\nvar scroll$1 = (function (_ref) {\n  var state = _ref.state,\n      dragStartTime = _ref.dragStartTime,\n      shouldUseTimeDampening = _ref.shouldUseTimeDampening,\n      scrollWindow = _ref.scrollWindow,\n      scrollDroppable = _ref.scrollDroppable;\n  var center = state.current.page.borderBoxCenter;\n  var draggable = state.dimensions.draggables[state.critical.draggable.id];\n  var subject = draggable.page.marginBox;\n\n  if (state.isWindowScrollAllowed) {\n    var viewport = state.viewport;\n\n    var _change = getWindowScrollChange({\n      dragStartTime: dragStartTime,\n      viewport: viewport,\n      subject: subject,\n      center: center,\n      shouldUseTimeDampening: shouldUseTimeDampening\n    });\n\n    if (_change) {\n      scrollWindow(_change);\n      return;\n    }\n  }\n\n  var droppable = getBestScrollableDroppable({\n    center: center,\n    destination: whatIsDraggedOver(state.impact),\n    droppables: state.dimensions.droppables\n  });\n\n  if (!droppable) {\n    return;\n  }\n\n  var change = getDroppableScrollChange({\n    dragStartTime: dragStartTime,\n    droppable: droppable,\n    subject: subject,\n    center: center,\n    shouldUseTimeDampening: shouldUseTimeDampening\n  });\n\n  if (change) {\n    scrollDroppable(droppable.descriptor.id, change);\n  }\n});\n\nvar createFluidScroller = (function (_ref) {\n  var scrollWindow = _ref.scrollWindow,\n      scrollDroppable = _ref.scrollDroppable;\n  var scheduleWindowScroll = rafSchd(scrollWindow);\n  var scheduleDroppableScroll = rafSchd(scrollDroppable);\n  var dragging = null;\n\n  var tryScroll = function tryScroll(state) {\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot fluid scroll if not dragging') : invariant(false) : void 0;\n    var _dragging = dragging,\n        shouldUseTimeDampening = _dragging.shouldUseTimeDampening,\n        dragStartTime = _dragging.dragStartTime;\n    scroll$1({\n      state: state,\n      scrollWindow: scheduleWindowScroll,\n      scrollDroppable: scheduleDroppableScroll,\n      dragStartTime: dragStartTime,\n      shouldUseTimeDampening: shouldUseTimeDampening\n    });\n  };\n\n  var start$1 = function start$1(state) {\n    start();\n    !!dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot start auto scrolling when already started') : invariant(false) : void 0;\n    var dragStartTime = Date.now();\n    var wasScrollNeeded = false;\n\n    var fakeScrollCallback = function fakeScrollCallback() {\n      wasScrollNeeded = true;\n    };\n\n    scroll$1({\n      state: state,\n      dragStartTime: 0,\n      shouldUseTimeDampening: false,\n      scrollWindow: fakeScrollCallback,\n      scrollDroppable: fakeScrollCallback\n    });\n    dragging = {\n      dragStartTime: dragStartTime,\n      shouldUseTimeDampening: wasScrollNeeded\n    };\n    finish();\n\n    if (wasScrollNeeded) {\n      tryScroll(state);\n    }\n  };\n\n  var stop = function stop() {\n    if (!dragging) {\n      return;\n    }\n\n    scheduleWindowScroll.cancel();\n    scheduleDroppableScroll.cancel();\n    dragging = null;\n  };\n\n  return {\n    start: start$1,\n    stop: stop,\n    scroll: tryScroll\n  };\n});\n\nvar createJumpScroller = (function (_ref) {\n  var move = _ref.move,\n      scrollDroppable = _ref.scrollDroppable,\n      scrollWindow = _ref.scrollWindow;\n\n  var moveByOffset = function moveByOffset(state, offset) {\n    var client = add(state.current.client.selection, offset);\n    move({\n      client: client\n    });\n  };\n\n  var scrollDroppableAsMuchAsItCan = function scrollDroppableAsMuchAsItCan(droppable, change) {\n    if (!canScrollDroppable(droppable, change)) {\n      return change;\n    }\n\n    var overlap = getDroppableOverlap(droppable, change);\n\n    if (!overlap) {\n      scrollDroppable(droppable.descriptor.id, change);\n      return null;\n    }\n\n    var whatTheDroppableCanScroll = subtract(change, overlap);\n    scrollDroppable(droppable.descriptor.id, whatTheDroppableCanScroll);\n    var remainder = subtract(change, whatTheDroppableCanScroll);\n    return remainder;\n  };\n\n  var scrollWindowAsMuchAsItCan = function scrollWindowAsMuchAsItCan(isWindowScrollAllowed, viewport, change) {\n    if (!isWindowScrollAllowed) {\n      return change;\n    }\n\n    if (!canScrollWindow(viewport, change)) {\n      return change;\n    }\n\n    var overlap = getWindowOverlap(viewport, change);\n\n    if (!overlap) {\n      scrollWindow(change);\n      return null;\n    }\n\n    var whatTheWindowCanScroll = subtract(change, overlap);\n    scrollWindow(whatTheWindowCanScroll);\n    var remainder = subtract(change, whatTheWindowCanScroll);\n    return remainder;\n  };\n\n  var jumpScroller = function jumpScroller(state) {\n    var request = state.scrollJumpRequest;\n\n    if (!request) {\n      return;\n    }\n\n    var destination = whatIsDraggedOver(state.impact);\n    !destination ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot perform a jump scroll when there is no destination') : invariant(false) : void 0;\n    var droppableRemainder = scrollDroppableAsMuchAsItCan(state.dimensions.droppables[destination], request);\n\n    if (!droppableRemainder) {\n      return;\n    }\n\n    var viewport = state.viewport;\n    var windowRemainder = scrollWindowAsMuchAsItCan(state.isWindowScrollAllowed, viewport, droppableRemainder);\n\n    if (!windowRemainder) {\n      return;\n    }\n\n    moveByOffset(state, windowRemainder);\n  };\n\n  return jumpScroller;\n});\n\nvar createAutoScroller = (function (_ref) {\n  var scrollDroppable = _ref.scrollDroppable,\n      scrollWindow = _ref.scrollWindow,\n      move = _ref.move;\n  var fluidScroller = createFluidScroller({\n    scrollWindow: scrollWindow,\n    scrollDroppable: scrollDroppable\n  });\n  var jumpScroll = createJumpScroller({\n    move: move,\n    scrollWindow: scrollWindow,\n    scrollDroppable: scrollDroppable\n  });\n\n  var scroll = function scroll(state) {\n    if (state.phase !== 'DRAGGING') {\n      return;\n    }\n\n    if (state.movementMode === 'FLUID') {\n      fluidScroller.scroll(state);\n      return;\n    }\n\n    if (!state.scrollJumpRequest) {\n      return;\n    }\n\n    jumpScroll(state);\n  };\n\n  var scroller = {\n    scroll: scroll,\n    start: fluidScroller.start,\n    stop: fluidScroller.stop\n  };\n  return scroller;\n});\n\nvar prefix$1 = 'data-rbd';\nvar dragHandle = function () {\n  var base = prefix$1 + \"-drag-handle\";\n  return {\n    base: base,\n    draggableId: base + \"-draggable-id\",\n    contextId: base + \"-context-id\"\n  };\n}();\nvar draggable = function () {\n  var base = prefix$1 + \"-draggable\";\n  return {\n    base: base,\n    contextId: base + \"-context-id\",\n    id: base + \"-id\"\n  };\n}();\nvar droppable = function () {\n  var base = prefix$1 + \"-droppable\";\n  return {\n    base: base,\n    contextId: base + \"-context-id\",\n    id: base + \"-id\"\n  };\n}();\nvar scrollContainer = {\n  contextId: prefix$1 + \"-scroll-container-context-id\"\n};\n\nvar makeGetSelector = function makeGetSelector(context) {\n  return function (attribute) {\n    return \"[\" + attribute + \"=\\\"\" + context + \"\\\"]\";\n  };\n};\n\nvar getStyles = function getStyles(rules, property) {\n  return rules.map(function (rule) {\n    var value = rule.styles[property];\n\n    if (!value) {\n      return '';\n    }\n\n    return rule.selector + \" { \" + value + \" }\";\n  }).join(' ');\n};\n\nvar noPointerEvents = 'pointer-events: none;';\nvar getStyles$1 = (function (contextId) {\n  var getSelector = makeGetSelector(contextId);\n\n  var dragHandle$1 = function () {\n    var grabCursor = \"\\n      cursor: -webkit-grab;\\n      cursor: grab;\\n    \";\n    return {\n      selector: getSelector(dragHandle.contextId),\n      styles: {\n        always: \"\\n          -webkit-touch-callout: none;\\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\\n          touch-action: manipulation;\\n        \",\n        resting: grabCursor,\n        dragging: noPointerEvents,\n        dropAnimating: grabCursor\n      }\n    };\n  }();\n\n  var draggable$1 = function () {\n    var transition = \"\\n      transition: \" + transitions.outOfTheWay + \";\\n    \";\n    return {\n      selector: getSelector(draggable.contextId),\n      styles: {\n        dragging: transition,\n        dropAnimating: transition,\n        userCancel: transition\n      }\n    };\n  }();\n\n  var droppable$1 = {\n    selector: getSelector(droppable.contextId),\n    styles: {\n      always: \"overflow-anchor: none;\"\n    }\n  };\n  var body = {\n    selector: 'body',\n    styles: {\n      dragging: \"\\n        cursor: grabbing;\\n        cursor: -webkit-grabbing;\\n        user-select: none;\\n        -webkit-user-select: none;\\n        -moz-user-select: none;\\n        -ms-user-select: none;\\n        overflow-anchor: none;\\n      \"\n    }\n  };\n  var rules = [draggable$1, dragHandle$1, droppable$1, body];\n  return {\n    always: getStyles(rules, 'always'),\n    resting: getStyles(rules, 'resting'),\n    dragging: getStyles(rules, 'dragging'),\n    dropAnimating: getStyles(rules, 'dropAnimating'),\n    userCancel: getStyles(rules, 'userCancel')\n  };\n});\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\nvar getHead = function getHead() {\n  var head = document.querySelector('head');\n  !head ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find the head to append a style to') : invariant(false) : void 0;\n  return head;\n};\n\nvar createStyleEl = function createStyleEl(nonce) {\n  var el = document.createElement('style');\n\n  if (nonce) {\n    el.setAttribute('nonce', nonce);\n  }\n\n  el.type = 'text/css';\n  return el;\n};\n\nfunction useStyleMarshal(contextId, nonce) {\n  var styles = useMemo(function () {\n    return getStyles$1(contextId);\n  }, [contextId]);\n  var alwaysRef = useRef(null);\n  var dynamicRef = useRef(null);\n  var setDynamicStyle = useCallback(memoizeOne(function (proposed) {\n    var el = dynamicRef.current;\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot set dynamic style element if it is not set') : invariant(false) : void 0;\n    el.textContent = proposed;\n  }), []);\n  var setAlwaysStyle = useCallback(function (proposed) {\n    var el = alwaysRef.current;\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot set dynamic style element if it is not set') : invariant(false) : void 0;\n    el.textContent = proposed;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    !(!alwaysRef.current && !dynamicRef.current) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'style elements already mounted') : invariant(false) : void 0;\n    var always = createStyleEl(nonce);\n    var dynamic = createStyleEl(nonce);\n    alwaysRef.current = always;\n    dynamicRef.current = dynamic;\n    always.setAttribute(prefix$1 + \"-always\", contextId);\n    dynamic.setAttribute(prefix$1 + \"-dynamic\", contextId);\n    getHead().appendChild(always);\n    getHead().appendChild(dynamic);\n    setAlwaysStyle(styles.always);\n    setDynamicStyle(styles.resting);\n    return function () {\n      var remove = function remove(ref) {\n        var current = ref.current;\n        !current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot unmount ref as it is not set') : invariant(false) : void 0;\n        getHead().removeChild(current);\n        ref.current = null;\n      };\n\n      remove(alwaysRef);\n      remove(dynamicRef);\n    };\n  }, [nonce, setAlwaysStyle, setDynamicStyle, styles.always, styles.resting, contextId]);\n  var dragging = useCallback(function () {\n    return setDynamicStyle(styles.dragging);\n  }, [setDynamicStyle, styles.dragging]);\n  var dropping = useCallback(function (reason) {\n    if (reason === 'DROP') {\n      setDynamicStyle(styles.dropAnimating);\n      return;\n    }\n\n    setDynamicStyle(styles.userCancel);\n  }, [setDynamicStyle, styles.dropAnimating, styles.userCancel]);\n  var resting = useCallback(function () {\n    if (!dynamicRef.current) {\n      return;\n    }\n\n    setDynamicStyle(styles.resting);\n  }, [setDynamicStyle, styles.resting]);\n  var marshal = useMemo(function () {\n    return {\n      dragging: dragging,\n      dropping: dropping,\n      resting: resting\n    };\n  }, [dragging, dropping, resting]);\n  return marshal;\n}\n\nvar getWindowFromEl = (function (el) {\n  return el && el.ownerDocument ? el.ownerDocument.defaultView : window;\n});\n\nfunction isHtmlElement(el) {\n  return el instanceof getWindowFromEl(el).HTMLElement;\n}\n\nfunction findDragHandle(contextId, draggableId) {\n  var selector = \"[\" + dragHandle.contextId + \"=\\\"\" + contextId + \"\\\"]\";\n  var possible = toArray(document.querySelectorAll(selector));\n\n  if (!possible.length) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find any drag handles in the context \\\"\" + contextId + \"\\\"\") : void 0;\n    return null;\n  }\n\n  var handle = find(possible, function (el) {\n    return el.getAttribute(dragHandle.draggableId) === draggableId;\n  });\n\n  if (!handle) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find drag handle with id \\\"\" + draggableId + \"\\\" as no handle with a matching id was found\") : void 0;\n    return null;\n  }\n\n  if (!isHtmlElement(handle)) {\n    process.env.NODE_ENV !== \"production\" ? warning('drag handle needs to be a HTMLElement') : void 0;\n    return null;\n  }\n\n  return handle;\n}\n\nfunction useFocusMarshal(contextId) {\n  var entriesRef = useRef({});\n  var recordRef = useRef(null);\n  var restoreFocusFrameRef = useRef(null);\n  var isMountedRef = useRef(false);\n  var register = useCallback(function register(id, focus) {\n    var entry = {\n      id: id,\n      focus: focus\n    };\n    entriesRef.current[id] = entry;\n    return function unregister() {\n      var entries = entriesRef.current;\n      var current = entries[id];\n\n      if (current !== entry) {\n        delete entries[id];\n      }\n    };\n  }, []);\n  var tryGiveFocus = useCallback(function tryGiveFocus(tryGiveFocusTo) {\n    var handle = findDragHandle(contextId, tryGiveFocusTo);\n\n    if (handle && handle !== document.activeElement) {\n      handle.focus();\n    }\n  }, [contextId]);\n  var tryShiftRecord = useCallback(function tryShiftRecord(previous, redirectTo) {\n    if (recordRef.current === previous) {\n      recordRef.current = redirectTo;\n    }\n  }, []);\n  var tryRestoreFocusRecorded = useCallback(function tryRestoreFocusRecorded() {\n    if (restoreFocusFrameRef.current) {\n      return;\n    }\n\n    if (!isMountedRef.current) {\n      return;\n    }\n\n    restoreFocusFrameRef.current = requestAnimationFrame(function () {\n      restoreFocusFrameRef.current = null;\n      var record = recordRef.current;\n\n      if (record) {\n        tryGiveFocus(record);\n      }\n    });\n  }, [tryGiveFocus]);\n  var tryRecordFocus = useCallback(function tryRecordFocus(id) {\n    recordRef.current = null;\n    var focused = document.activeElement;\n\n    if (!focused) {\n      return;\n    }\n\n    if (focused.getAttribute(dragHandle.draggableId) !== id) {\n      return;\n    }\n\n    recordRef.current = id;\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    isMountedRef.current = true;\n    return function clearFrameOnUnmount() {\n      isMountedRef.current = false;\n      var frameId = restoreFocusFrameRef.current;\n\n      if (frameId) {\n        cancelAnimationFrame(frameId);\n      }\n    };\n  }, []);\n  var marshal = useMemo(function () {\n    return {\n      register: register,\n      tryRecordFocus: tryRecordFocus,\n      tryRestoreFocusRecorded: tryRestoreFocusRecorded,\n      tryShiftRecord: tryShiftRecord\n    };\n  }, [register, tryRecordFocus, tryRestoreFocusRecorded, tryShiftRecord]);\n  return marshal;\n}\n\nfunction createRegistry() {\n  var entries = {\n    draggables: {},\n    droppables: {}\n  };\n  var subscribers = [];\n\n  function subscribe(cb) {\n    subscribers.push(cb);\n    return function unsubscribe() {\n      var index = subscribers.indexOf(cb);\n\n      if (index === -1) {\n        return;\n      }\n\n      subscribers.splice(index, 1);\n    };\n  }\n\n  function notify(event) {\n    if (subscribers.length) {\n      subscribers.forEach(function (cb) {\n        return cb(event);\n      });\n    }\n  }\n\n  function findDraggableById(id) {\n    return entries.draggables[id] || null;\n  }\n\n  function getDraggableById(id) {\n    var entry = findDraggableById(id);\n    !entry ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find draggable entry with id [\" + id + \"]\") : invariant(false) : void 0;\n    return entry;\n  }\n\n  var draggableAPI = {\n    register: function register(entry) {\n      entries.draggables[entry.descriptor.id] = entry;\n      notify({\n        type: 'ADDITION',\n        value: entry\n      });\n    },\n    update: function update(entry, last) {\n      var current = entries.draggables[last.descriptor.id];\n\n      if (!current) {\n        return;\n      }\n\n      if (current.uniqueId !== entry.uniqueId) {\n        return;\n      }\n\n      delete entries.draggables[last.descriptor.id];\n      entries.draggables[entry.descriptor.id] = entry;\n    },\n    unregister: function unregister(entry) {\n      var draggableId = entry.descriptor.id;\n      var current = findDraggableById(draggableId);\n\n      if (!current) {\n        return;\n      }\n\n      if (entry.uniqueId !== current.uniqueId) {\n        return;\n      }\n\n      delete entries.draggables[draggableId];\n      notify({\n        type: 'REMOVAL',\n        value: entry\n      });\n    },\n    getById: getDraggableById,\n    findById: findDraggableById,\n    exists: function exists(id) {\n      return Boolean(findDraggableById(id));\n    },\n    getAllByType: function getAllByType(type) {\n      return values(entries.draggables).filter(function (entry) {\n        return entry.descriptor.type === type;\n      });\n    }\n  };\n\n  function findDroppableById(id) {\n    return entries.droppables[id] || null;\n  }\n\n  function getDroppableById(id) {\n    var entry = findDroppableById(id);\n    !entry ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot find droppable entry with id [\" + id + \"]\") : invariant(false) : void 0;\n    return entry;\n  }\n\n  var droppableAPI = {\n    register: function register(entry) {\n      entries.droppables[entry.descriptor.id] = entry;\n    },\n    unregister: function unregister(entry) {\n      var current = findDroppableById(entry.descriptor.id);\n\n      if (!current) {\n        return;\n      }\n\n      if (entry.uniqueId !== current.uniqueId) {\n        return;\n      }\n\n      delete entries.droppables[entry.descriptor.id];\n    },\n    getById: getDroppableById,\n    findById: findDroppableById,\n    exists: function exists(id) {\n      return Boolean(findDroppableById(id));\n    },\n    getAllByType: function getAllByType(type) {\n      return values(entries.droppables).filter(function (entry) {\n        return entry.descriptor.type === type;\n      });\n    }\n  };\n\n  function clean() {\n    entries.draggables = {};\n    entries.droppables = {};\n    subscribers.length = 0;\n  }\n\n  return {\n    draggable: draggableAPI,\n    droppable: droppableAPI,\n    subscribe: subscribe,\n    clean: clean\n  };\n}\n\nfunction useRegistry() {\n  var registry = useMemo(createRegistry, []);\n  useEffect(function () {\n    return function unmount() {\n      requestAnimationFrame(registry.clean);\n    };\n  }, [registry]);\n  return registry;\n}\n\nvar StoreContext = React.createContext(null);\n\nvar getBodyElement = (function () {\n  var body = document.body;\n  !body ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot find document.body') : invariant(false) : void 0;\n  return body;\n});\n\nvar visuallyHidden = {\n  position: 'absolute',\n  width: '1px',\n  height: '1px',\n  margin: '-1px',\n  border: '0',\n  padding: '0',\n  overflow: 'hidden',\n  clip: 'rect(0 0 0 0)',\n  'clip-path': 'inset(100%)'\n};\n\nvar getId = function getId(contextId) {\n  return \"rbd-announcement-\" + contextId;\n};\nfunction useAnnouncer(contextId) {\n  var id = useMemo(function () {\n    return getId(contextId);\n  }, [contextId]);\n  var ref = useRef(null);\n  useEffect(function setup() {\n    var el = document.createElement('div');\n    ref.current = el;\n    el.id = id;\n    el.setAttribute('aria-live', 'assertive');\n    el.setAttribute('aria-atomic', 'true');\n\n    _extends(el.style, visuallyHidden);\n\n    getBodyElement().appendChild(el);\n    return function cleanup() {\n      setTimeout(function remove() {\n        var body = getBodyElement();\n\n        if (body.contains(el)) {\n          body.removeChild(el);\n        }\n\n        if (el === ref.current) {\n          ref.current = null;\n        }\n      });\n    };\n  }, [id]);\n  var announce = useCallback(function (message) {\n    var el = ref.current;\n\n    if (el) {\n      el.textContent = message;\n      return;\n    }\n\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      A screen reader message was trying to be announced but it was unable to do so.\\n      This can occur if you unmount your <DragDropContext /> in your onDragEnd.\\n      Consider calling provided.announce() before the unmount so that the instruction will\\n      not be lost for users relying on a screen reader.\\n\\n      Message not passed to screen reader:\\n\\n      \\\"\" + message + \"\\\"\\n    \") : void 0;\n  }, []);\n  return announce;\n}\n\nvar count = 0;\nvar defaults = {\n  separator: '::'\n};\nfunction reset() {\n  count = 0;\n}\nfunction useUniqueId(prefix, options) {\n  if (options === void 0) {\n    options = defaults;\n  }\n\n  return useMemo(function () {\n    return \"\" + prefix + options.separator + count++;\n  }, [options.separator, prefix]);\n}\n\nfunction getElementId(_ref) {\n  var contextId = _ref.contextId,\n      uniqueId = _ref.uniqueId;\n  return \"rbd-hidden-text-\" + contextId + \"-\" + uniqueId;\n}\nfunction useHiddenTextElement(_ref2) {\n  var contextId = _ref2.contextId,\n      text = _ref2.text;\n  var uniqueId = useUniqueId('hidden-text', {\n    separator: '-'\n  });\n  var id = useMemo(function () {\n    return getElementId({\n      contextId: contextId,\n      uniqueId: uniqueId\n    });\n  }, [uniqueId, contextId]);\n  useEffect(function mount() {\n    var el = document.createElement('div');\n    el.id = id;\n    el.textContent = text;\n    el.style.display = 'none';\n    getBodyElement().appendChild(el);\n    return function unmount() {\n      var body = getBodyElement();\n\n      if (body.contains(el)) {\n        body.removeChild(el);\n      }\n    };\n  }, [id, text]);\n  return id;\n}\n\nvar AppContext = React.createContext(null);\n\nvar peerDependencies = {\n\treact: \"^16.8.5 || ^17.0.0\",\n\t\"react-dom\": \"^16.8.5 || ^17.0.0\"\n};\n\nvar semver = /(\\d+)\\.(\\d+)\\.(\\d+)/;\n\nvar getVersion = function getVersion(value) {\n  var result = semver.exec(value);\n  !(result != null) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Unable to parse React version \" + value) : invariant(false) : void 0;\n  var major = Number(result[1]);\n  var minor = Number(result[2]);\n  var patch = Number(result[3]);\n  return {\n    major: major,\n    minor: minor,\n    patch: patch,\n    raw: value\n  };\n};\n\nvar isSatisfied = function isSatisfied(expected, actual) {\n  if (actual.major > expected.major) {\n    return true;\n  }\n\n  if (actual.major < expected.major) {\n    return false;\n  }\n\n  if (actual.minor > expected.minor) {\n    return true;\n  }\n\n  if (actual.minor < expected.minor) {\n    return false;\n  }\n\n  return actual.patch >= expected.patch;\n};\n\nvar checkReactVersion = (function (peerDepValue, actualValue) {\n  var peerDep = getVersion(peerDepValue);\n  var actual = getVersion(actualValue);\n\n  if (isSatisfied(peerDep, actual)) {\n    return;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    React version: [\" + actual.raw + \"]\\n    does not satisfy expected peer dependency version: [\" + peerDep.raw + \"]\\n\\n    This can result in run time bugs, and even fatal crashes\\n  \") : void 0;\n});\n\nvar suffix = \"\\n  We expect a html5 doctype: <!doctype html>\\n  This is to ensure consistent browser layout and measurement\\n\\n  More information: https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/guides/doctype.md\\n\";\nvar checkDoctype = (function (doc) {\n  var doctype = doc.doctype;\n\n  if (!doctype) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      No <!doctype html> found.\\n\\n      \" + suffix + \"\\n    \") : void 0;\n    return;\n  }\n\n  if (doctype.name.toLowerCase() !== 'html') {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Unexpected <!doctype> found: (\" + doctype.name + \")\\n\\n      \" + suffix + \"\\n    \") : void 0;\n  }\n\n  if (doctype.publicId !== '') {\n    process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Unexpected <!doctype> publicId found: (\" + doctype.publicId + \")\\n      A html5 doctype does not have a publicId\\n\\n      \" + suffix + \"\\n    \") : void 0;\n  }\n});\n\nfunction useDev(useHook) {\n  if (process.env.NODE_ENV !== 'production') {\n    useHook();\n  }\n}\n\nfunction useDevSetupWarning(fn, inputs) {\n  useDev(function () {\n    useEffect(function () {\n      try {\n        fn();\n      } catch (e) {\n        error(\"\\n          A setup problem was encountered.\\n\\n          > \" + e.message + \"\\n        \");\n      }\n    }, inputs);\n  });\n}\n\nfunction useStartupValidation() {\n  useDevSetupWarning(function () {\n    checkReactVersion(peerDependencies.react, React.version);\n    checkDoctype(document);\n  }, []);\n}\n\nfunction usePrevious(current) {\n  var ref = useRef(current);\n  useEffect(function () {\n    ref.current = current;\n  });\n  return ref;\n}\n\nfunction create() {\n  var lock = null;\n\n  function isClaimed() {\n    return Boolean(lock);\n  }\n\n  function isActive(value) {\n    return value === lock;\n  }\n\n  function claim(abandon) {\n    !!lock ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot claim lock as it is already claimed') : invariant(false) : void 0;\n    var newLock = {\n      abandon: abandon\n    };\n    lock = newLock;\n    return newLock;\n  }\n\n  function release() {\n    !lock ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot release lock when there is no lock') : invariant(false) : void 0;\n    lock = null;\n  }\n\n  function tryAbandon() {\n    if (lock) {\n      lock.abandon();\n      release();\n    }\n  }\n\n  return {\n    isClaimed: isClaimed,\n    isActive: isActive,\n    claim: claim,\n    release: release,\n    tryAbandon: tryAbandon\n  };\n}\n\nvar tab = 9;\nvar enter = 13;\nvar escape = 27;\nvar space = 32;\nvar pageUp = 33;\nvar pageDown = 34;\nvar end = 35;\nvar home = 36;\nvar arrowLeft = 37;\nvar arrowUp = 38;\nvar arrowRight = 39;\nvar arrowDown = 40;\n\nvar _preventedKeys;\nvar preventedKeys = (_preventedKeys = {}, _preventedKeys[enter] = true, _preventedKeys[tab] = true, _preventedKeys);\nvar preventStandardKeyEvents = (function (event) {\n  if (preventedKeys[event.keyCode]) {\n    event.preventDefault();\n  }\n});\n\nvar supportedEventName = function () {\n  var base = 'visibilitychange';\n\n  if (typeof document === 'undefined') {\n    return base;\n  }\n\n  var candidates = [base, \"ms\" + base, \"webkit\" + base, \"moz\" + base, \"o\" + base];\n  var supported = find(candidates, function (eventName) {\n    return \"on\" + eventName in document;\n  });\n  return supported || base;\n}();\n\nvar primaryButton = 0;\nvar sloppyClickThreshold = 5;\n\nfunction isSloppyClickThresholdExceeded(original, current) {\n  return Math.abs(current.x - original.x) >= sloppyClickThreshold || Math.abs(current.y - original.y) >= sloppyClickThreshold;\n}\n\nvar idle$1 = {\n  type: 'IDLE'\n};\n\nfunction getCaptureBindings(_ref) {\n  var cancel = _ref.cancel,\n      completed = _ref.completed,\n      getPhase = _ref.getPhase,\n      setPhase = _ref.setPhase;\n  return [{\n    eventName: 'mousemove',\n    fn: function fn(event) {\n      var button = event.button,\n          clientX = event.clientX,\n          clientY = event.clientY;\n\n      if (button !== primaryButton) {\n        return;\n      }\n\n      var point = {\n        x: clientX,\n        y: clientY\n      };\n      var phase = getPhase();\n\n      if (phase.type === 'DRAGGING') {\n        event.preventDefault();\n        phase.actions.move(point);\n        return;\n      }\n\n      !(phase.type === 'PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot be IDLE') : invariant(false) : void 0;\n      var pending = phase.point;\n\n      if (!isSloppyClickThresholdExceeded(pending, point)) {\n        return;\n      }\n\n      event.preventDefault();\n      var actions = phase.actions.fluidLift(point);\n      setPhase({\n        type: 'DRAGGING',\n        actions: actions\n      });\n    }\n  }, {\n    eventName: 'mouseup',\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n      phase.actions.drop({\n        shouldBlockNextClick: true\n      });\n      completed();\n    }\n  }, {\n    eventName: 'mousedown',\n    fn: function fn(event) {\n      if (getPhase().type === 'DRAGGING') {\n        event.preventDefault();\n      }\n\n      cancel();\n    }\n  }, {\n    eventName: 'keydown',\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type === 'PENDING') {\n        cancel();\n        return;\n      }\n\n      if (event.keyCode === escape) {\n        event.preventDefault();\n        cancel();\n        return;\n      }\n\n      preventStandardKeyEvents(event);\n    }\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'scroll',\n    options: {\n      passive: true,\n      capture: false\n    },\n    fn: function fn() {\n      if (getPhase().type === 'PENDING') {\n        cancel();\n      }\n    }\n  }, {\n    eventName: 'webkitmouseforcedown',\n    fn: function fn(event) {\n      var phase = getPhase();\n      !(phase.type !== 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Unexpected phase') : invariant(false) : void 0;\n\n      if (phase.actions.shouldRespectForcePress()) {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction useMouseSensor(api) {\n  var phaseRef = useRef(idle$1);\n  var unbindEventsRef = useRef(noop);\n  var startCaptureBinding = useMemo(function () {\n    return {\n      eventName: 'mousedown',\n      fn: function onMouseDown(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        if (event.button !== primaryButton) {\n          return;\n        }\n\n        if (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey) {\n          return;\n        }\n\n        var draggableId = api.findClosestDraggableId(event);\n\n        if (!draggableId) {\n          return;\n        }\n\n        var actions = api.tryGetLock(draggableId, stop, {\n          sourceEvent: event\n        });\n\n        if (!actions) {\n          return;\n        }\n\n        event.preventDefault();\n        var point = {\n          x: event.clientX,\n          y: event.clientY\n        };\n        unbindEventsRef.current();\n        startPendingDrag(actions, point);\n      }\n    };\n  }, [api]);\n  var preventForcePressBinding = useMemo(function () {\n    return {\n      eventName: 'webkitmouseforcewillbegin',\n      fn: function fn(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        var id = api.findClosestDraggableId(event);\n\n        if (!id) {\n          return;\n        }\n\n        var options = api.findOptionsForDraggable(id);\n\n        if (!options) {\n          return;\n        }\n\n        if (options.shouldRespectForcePress) {\n          return;\n        }\n\n        if (!api.canGetLock(id)) {\n          return;\n        }\n\n        event.preventDefault();\n      }\n    };\n  }, [api]);\n  var listenForCapture = useCallback(function listenForCapture() {\n    var options = {\n      passive: false,\n      capture: true\n    };\n    unbindEventsRef.current = bindEvents(window, [preventForcePressBinding, startCaptureBinding], options);\n  }, [preventForcePressBinding, startCaptureBinding]);\n  var stop = useCallback(function () {\n    var current = phaseRef.current;\n\n    if (current.type === 'IDLE') {\n      return;\n    }\n\n    phaseRef.current = idle$1;\n    unbindEventsRef.current();\n    listenForCapture();\n  }, [listenForCapture]);\n  var cancel = useCallback(function () {\n    var phase = phaseRef.current;\n    stop();\n\n    if (phase.type === 'DRAGGING') {\n      phase.actions.cancel({\n        shouldBlockNextClick: true\n      });\n    }\n\n    if (phase.type === 'PENDING') {\n      phase.actions.abort();\n    }\n  }, [stop]);\n  var bindCapturingEvents = useCallback(function bindCapturingEvents() {\n    var options = {\n      capture: true,\n      passive: false\n    };\n    var bindings = getCaptureBindings({\n      cancel: cancel,\n      completed: stop,\n      getPhase: function getPhase() {\n        return phaseRef.current;\n      },\n      setPhase: function setPhase(phase) {\n        phaseRef.current = phase;\n      }\n    });\n    unbindEventsRef.current = bindEvents(window, bindings, options);\n  }, [cancel, stop]);\n  var startPendingDrag = useCallback(function startPendingDrag(actions, point) {\n    !(phaseRef.current.type === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected to move from IDLE to PENDING drag') : invariant(false) : void 0;\n    phaseRef.current = {\n      type: 'PENDING',\n      point: point,\n      actions: actions\n    };\n    bindCapturingEvents();\n  }, [bindCapturingEvents]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n    };\n  }, [listenForCapture]);\n}\n\nvar _scrollJumpKeys;\n\nfunction noop$1() {}\n\nvar scrollJumpKeys = (_scrollJumpKeys = {}, _scrollJumpKeys[pageDown] = true, _scrollJumpKeys[pageUp] = true, _scrollJumpKeys[home] = true, _scrollJumpKeys[end] = true, _scrollJumpKeys);\n\nfunction getDraggingBindings(actions, stop) {\n  function cancel() {\n    stop();\n    actions.cancel();\n  }\n\n  function drop() {\n    stop();\n    actions.drop();\n  }\n\n  return [{\n    eventName: 'keydown',\n    fn: function fn(event) {\n      if (event.keyCode === escape) {\n        event.preventDefault();\n        cancel();\n        return;\n      }\n\n      if (event.keyCode === space) {\n        event.preventDefault();\n        drop();\n        return;\n      }\n\n      if (event.keyCode === arrowDown) {\n        event.preventDefault();\n        actions.moveDown();\n        return;\n      }\n\n      if (event.keyCode === arrowUp) {\n        event.preventDefault();\n        actions.moveUp();\n        return;\n      }\n\n      if (event.keyCode === arrowRight) {\n        event.preventDefault();\n        actions.moveRight();\n        return;\n      }\n\n      if (event.keyCode === arrowLeft) {\n        event.preventDefault();\n        actions.moveLeft();\n        return;\n      }\n\n      if (scrollJumpKeys[event.keyCode]) {\n        event.preventDefault();\n        return;\n      }\n\n      preventStandardKeyEvents(event);\n    }\n  }, {\n    eventName: 'mousedown',\n    fn: cancel\n  }, {\n    eventName: 'mouseup',\n    fn: cancel\n  }, {\n    eventName: 'click',\n    fn: cancel\n  }, {\n    eventName: 'touchstart',\n    fn: cancel\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'wheel',\n    fn: cancel,\n    options: {\n      passive: true\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction useKeyboardSensor(api) {\n  var unbindEventsRef = useRef(noop$1);\n  var startCaptureBinding = useMemo(function () {\n    return {\n      eventName: 'keydown',\n      fn: function onKeyDown(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        if (event.keyCode !== space) {\n          return;\n        }\n\n        var draggableId = api.findClosestDraggableId(event);\n\n        if (!draggableId) {\n          return;\n        }\n\n        var preDrag = api.tryGetLock(draggableId, stop, {\n          sourceEvent: event\n        });\n\n        if (!preDrag) {\n          return;\n        }\n\n        event.preventDefault();\n        var isCapturing = true;\n        var actions = preDrag.snapLift();\n        unbindEventsRef.current();\n\n        function stop() {\n          !isCapturing ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop capturing a keyboard drag when not capturing') : invariant(false) : void 0;\n          isCapturing = false;\n          unbindEventsRef.current();\n          listenForCapture();\n        }\n\n        unbindEventsRef.current = bindEvents(window, getDraggingBindings(actions, stop), {\n          capture: true,\n          passive: false\n        });\n      }\n    };\n  }, [api]);\n  var listenForCapture = useCallback(function tryStartCapture() {\n    var options = {\n      passive: false,\n      capture: true\n    };\n    unbindEventsRef.current = bindEvents(window, [startCaptureBinding], options);\n  }, [startCaptureBinding]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n    };\n  }, [listenForCapture]);\n}\n\nvar idle$2 = {\n  type: 'IDLE'\n};\nvar timeForLongPress = 120;\nvar forcePressThreshold = 0.15;\n\nfunction getWindowBindings(_ref) {\n  var cancel = _ref.cancel,\n      getPhase = _ref.getPhase;\n  return [{\n    eventName: 'orientationchange',\n    fn: cancel\n  }, {\n    eventName: 'resize',\n    fn: cancel\n  }, {\n    eventName: 'contextmenu',\n    fn: function fn(event) {\n      event.preventDefault();\n    }\n  }, {\n    eventName: 'keydown',\n    fn: function fn(event) {\n      if (getPhase().type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      if (event.keyCode === escape) {\n        event.preventDefault();\n      }\n\n      cancel();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction getHandleBindings(_ref2) {\n  var cancel = _ref2.cancel,\n      completed = _ref2.completed,\n      getPhase = _ref2.getPhase;\n  return [{\n    eventName: 'touchmove',\n    options: {\n      capture: false\n    },\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      phase.hasMoved = true;\n      var _event$touches$ = event.touches[0],\n          clientX = _event$touches$.clientX,\n          clientY = _event$touches$.clientY;\n      var point = {\n        x: clientX,\n        y: clientY\n      };\n      event.preventDefault();\n      phase.actions.move(point);\n    }\n  }, {\n    eventName: 'touchend',\n    fn: function fn(event) {\n      var phase = getPhase();\n\n      if (phase.type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n      phase.actions.drop({\n        shouldBlockNextClick: true\n      });\n      completed();\n    }\n  }, {\n    eventName: 'touchcancel',\n    fn: function fn(event) {\n      if (getPhase().type !== 'DRAGGING') {\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n      cancel();\n    }\n  }, {\n    eventName: 'touchforcechange',\n    fn: function fn(event) {\n      var phase = getPhase();\n      !(phase.type !== 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n      var touch = event.touches[0];\n\n      if (!touch) {\n        return;\n      }\n\n      var isForcePress = touch.force >= forcePressThreshold;\n\n      if (!isForcePress) {\n        return;\n      }\n\n      var shouldRespect = phase.actions.shouldRespectForcePress();\n\n      if (phase.type === 'PENDING') {\n        if (shouldRespect) {\n          cancel();\n        }\n\n        return;\n      }\n\n      if (shouldRespect) {\n        if (phase.hasMoved) {\n          event.preventDefault();\n          return;\n        }\n\n        cancel();\n        return;\n      }\n\n      event.preventDefault();\n    }\n  }, {\n    eventName: supportedEventName,\n    fn: cancel\n  }];\n}\n\nfunction useTouchSensor(api) {\n  var phaseRef = useRef(idle$2);\n  var unbindEventsRef = useRef(noop);\n  var getPhase = useCallback(function getPhase() {\n    return phaseRef.current;\n  }, []);\n  var setPhase = useCallback(function setPhase(phase) {\n    phaseRef.current = phase;\n  }, []);\n  var startCaptureBinding = useMemo(function () {\n    return {\n      eventName: 'touchstart',\n      fn: function onTouchStart(event) {\n        if (event.defaultPrevented) {\n          return;\n        }\n\n        var draggableId = api.findClosestDraggableId(event);\n\n        if (!draggableId) {\n          return;\n        }\n\n        var actions = api.tryGetLock(draggableId, stop, {\n          sourceEvent: event\n        });\n\n        if (!actions) {\n          return;\n        }\n\n        var touch = event.touches[0];\n        var clientX = touch.clientX,\n            clientY = touch.clientY;\n        var point = {\n          x: clientX,\n          y: clientY\n        };\n        unbindEventsRef.current();\n        startPendingDrag(actions, point);\n      }\n    };\n  }, [api]);\n  var listenForCapture = useCallback(function listenForCapture() {\n    var options = {\n      capture: true,\n      passive: false\n    };\n    unbindEventsRef.current = bindEvents(window, [startCaptureBinding], options);\n  }, [startCaptureBinding]);\n  var stop = useCallback(function () {\n    var current = phaseRef.current;\n\n    if (current.type === 'IDLE') {\n      return;\n    }\n\n    if (current.type === 'PENDING') {\n      clearTimeout(current.longPressTimerId);\n    }\n\n    setPhase(idle$2);\n    unbindEventsRef.current();\n    listenForCapture();\n  }, [listenForCapture, setPhase]);\n  var cancel = useCallback(function () {\n    var phase = phaseRef.current;\n    stop();\n\n    if (phase.type === 'DRAGGING') {\n      phase.actions.cancel({\n        shouldBlockNextClick: true\n      });\n    }\n\n    if (phase.type === 'PENDING') {\n      phase.actions.abort();\n    }\n  }, [stop]);\n  var bindCapturingEvents = useCallback(function bindCapturingEvents() {\n    var options = {\n      capture: true,\n      passive: false\n    };\n    var args = {\n      cancel: cancel,\n      completed: stop,\n      getPhase: getPhase\n    };\n    var unbindTarget = bindEvents(window, getHandleBindings(args), options);\n    var unbindWindow = bindEvents(window, getWindowBindings(args), options);\n\n    unbindEventsRef.current = function unbindAll() {\n      unbindTarget();\n      unbindWindow();\n    };\n  }, [cancel, getPhase, stop]);\n  var startDragging = useCallback(function startDragging() {\n    var phase = getPhase();\n    !(phase.type === 'PENDING') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot start dragging from phase \" + phase.type) : invariant(false) : void 0;\n    var actions = phase.actions.fluidLift(phase.point);\n    setPhase({\n      type: 'DRAGGING',\n      actions: actions,\n      hasMoved: false\n    });\n  }, [getPhase, setPhase]);\n  var startPendingDrag = useCallback(function startPendingDrag(actions, point) {\n    !(getPhase().type === 'IDLE') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected to move from IDLE to PENDING drag') : invariant(false) : void 0;\n    var longPressTimerId = setTimeout(startDragging, timeForLongPress);\n    setPhase({\n      type: 'PENDING',\n      point: point,\n      actions: actions,\n      longPressTimerId: longPressTimerId\n    });\n    bindCapturingEvents();\n  }, [bindCapturingEvents, getPhase, setPhase, startDragging]);\n  useIsomorphicLayoutEffect(function mount() {\n    listenForCapture();\n    return function unmount() {\n      unbindEventsRef.current();\n      var phase = getPhase();\n\n      if (phase.type === 'PENDING') {\n        clearTimeout(phase.longPressTimerId);\n        setPhase(idle$2);\n      }\n    };\n  }, [getPhase, listenForCapture, setPhase]);\n  useIsomorphicLayoutEffect(function webkitHack() {\n    var unbind = bindEvents(window, [{\n      eventName: 'touchmove',\n      fn: function fn() {},\n      options: {\n        capture: false,\n        passive: false\n      }\n    }]);\n    return unbind;\n  }, []);\n}\n\nfunction useValidateSensorHooks(sensorHooks) {\n  useDev(function () {\n    var previousRef = usePrevious(sensorHooks);\n    useDevSetupWarning(function () {\n      !(previousRef.current.length === sensorHooks.length) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot change the amount of sensor hooks after mounting') : invariant(false) : void 0;\n    });\n  });\n}\n\nvar interactiveTagNames = {\n  input: true,\n  button: true,\n  textarea: true,\n  select: true,\n  option: true,\n  optgroup: true,\n  video: true,\n  audio: true\n};\n\nfunction isAnInteractiveElement(parent, current) {\n  if (current == null) {\n    return false;\n  }\n\n  var hasAnInteractiveTag = Boolean(interactiveTagNames[current.tagName.toLowerCase()]);\n\n  if (hasAnInteractiveTag) {\n    return true;\n  }\n\n  var attribute = current.getAttribute('contenteditable');\n\n  if (attribute === 'true' || attribute === '') {\n    return true;\n  }\n\n  if (current === parent) {\n    return false;\n  }\n\n  return isAnInteractiveElement(parent, current.parentElement);\n}\n\nfunction isEventInInteractiveElement(draggable, event) {\n  var target = event.target;\n\n  if (!isHtmlElement(target)) {\n    return false;\n  }\n\n  return isAnInteractiveElement(draggable, target);\n}\n\nvar getBorderBoxCenterPosition = (function (el) {\n  return getRect(el.getBoundingClientRect()).center;\n});\n\nfunction isElement(el) {\n  return el instanceof getWindowFromEl(el).Element;\n}\n\nvar supportedMatchesName = function () {\n  var base = 'matches';\n\n  if (typeof document === 'undefined') {\n    return base;\n  }\n\n  var candidates = [base, 'msMatchesSelector', 'webkitMatchesSelector'];\n  var value = find(candidates, function (name) {\n    return name in Element.prototype;\n  });\n  return value || base;\n}();\n\nfunction closestPonyfill(el, selector) {\n  if (el == null) {\n    return null;\n  }\n\n  if (el[supportedMatchesName](selector)) {\n    return el;\n  }\n\n  return closestPonyfill(el.parentElement, selector);\n}\n\nfunction closest$1(el, selector) {\n  if (el.closest) {\n    return el.closest(selector);\n  }\n\n  return closestPonyfill(el, selector);\n}\n\nfunction getSelector(contextId) {\n  return \"[\" + dragHandle.contextId + \"=\\\"\" + contextId + \"\\\"]\";\n}\n\nfunction findClosestDragHandleFromEvent(contextId, event) {\n  var target = event.target;\n\n  if (!isElement(target)) {\n    process.env.NODE_ENV !== \"production\" ? warning('event.target must be a Element') : void 0;\n    return null;\n  }\n\n  var selector = getSelector(contextId);\n  var handle = closest$1(target, selector);\n\n  if (!handle) {\n    return null;\n  }\n\n  if (!isHtmlElement(handle)) {\n    process.env.NODE_ENV !== \"production\" ? warning('drag handle must be a HTMLElement') : void 0;\n    return null;\n  }\n\n  return handle;\n}\n\nfunction tryGetClosestDraggableIdFromEvent(contextId, event) {\n  var handle = findClosestDragHandleFromEvent(contextId, event);\n\n  if (!handle) {\n    return null;\n  }\n\n  return handle.getAttribute(dragHandle.draggableId);\n}\n\nfunction findDraggable(contextId, draggableId) {\n  var selector = \"[\" + draggable.contextId + \"=\\\"\" + contextId + \"\\\"]\";\n  var possible = toArray(document.querySelectorAll(selector));\n  var draggable$1 = find(possible, function (el) {\n    return el.getAttribute(draggable.id) === draggableId;\n  });\n\n  if (!draggable$1) {\n    return null;\n  }\n\n  if (!isHtmlElement(draggable$1)) {\n    process.env.NODE_ENV !== \"production\" ? warning('Draggable element is not a HTMLElement') : void 0;\n    return null;\n  }\n\n  return draggable$1;\n}\n\nfunction preventDefault(event) {\n  event.preventDefault();\n}\n\nfunction _isActive(_ref) {\n  var expected = _ref.expected,\n      phase = _ref.phase,\n      isLockActive = _ref.isLockActive,\n      shouldWarn = _ref.shouldWarn;\n\n  if (!isLockActive()) {\n    if (shouldWarn) {\n      process.env.NODE_ENV !== \"production\" ? warning(\"\\n        Cannot perform action.\\n        The sensor no longer has an action lock.\\n\\n        Tips:\\n\\n        - Throw away your action handlers when forceStop() is called\\n        - Check actions.isActive() if you really need to\\n      \") : void 0;\n    }\n\n    return false;\n  }\n\n  if (expected !== phase) {\n    if (shouldWarn) {\n      process.env.NODE_ENV !== \"production\" ? warning(\"\\n        Cannot perform action.\\n        The actions you used belong to an outdated phase\\n\\n        Current phase: \" + expected + \"\\n        You called an action from outdated phase: \" + phase + \"\\n\\n        Tips:\\n\\n        - Do not use preDragActions actions after calling preDragActions.lift()\\n      \") : void 0;\n    }\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction canStart(_ref2) {\n  var lockAPI = _ref2.lockAPI,\n      store = _ref2.store,\n      registry = _ref2.registry,\n      draggableId = _ref2.draggableId;\n\n  if (lockAPI.isClaimed()) {\n    return false;\n  }\n\n  var entry = registry.draggable.findById(draggableId);\n\n  if (!entry) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find draggable with id: \" + draggableId) : void 0;\n    return false;\n  }\n\n  if (!entry.options.isEnabled) {\n    return false;\n  }\n\n  if (!canStartDrag(store.getState(), draggableId)) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction tryStart(_ref3) {\n  var lockAPI = _ref3.lockAPI,\n      contextId = _ref3.contextId,\n      store = _ref3.store,\n      registry = _ref3.registry,\n      draggableId = _ref3.draggableId,\n      forceSensorStop = _ref3.forceSensorStop,\n      sourceEvent = _ref3.sourceEvent;\n  var shouldStart = canStart({\n    lockAPI: lockAPI,\n    store: store,\n    registry: registry,\n    draggableId: draggableId\n  });\n\n  if (!shouldStart) {\n    return null;\n  }\n\n  var entry = registry.draggable.getById(draggableId);\n  var el = findDraggable(contextId, entry.descriptor.id);\n\n  if (!el) {\n    process.env.NODE_ENV !== \"production\" ? warning(\"Unable to find draggable element with id: \" + draggableId) : void 0;\n    return null;\n  }\n\n  if (sourceEvent && !entry.options.canDragInteractiveElements && isEventInInteractiveElement(el, sourceEvent)) {\n    return null;\n  }\n\n  var lock = lockAPI.claim(forceSensorStop || noop);\n  var phase = 'PRE_DRAG';\n\n  function getShouldRespectForcePress() {\n    return entry.options.shouldRespectForcePress;\n  }\n\n  function isLockActive() {\n    return lockAPI.isActive(lock);\n  }\n\n  function tryDispatch(expected, getAction) {\n    if (_isActive({\n      expected: expected,\n      phase: phase,\n      isLockActive: isLockActive,\n      shouldWarn: true\n    })) {\n      store.dispatch(getAction());\n    }\n  }\n\n  var tryDispatchWhenDragging = tryDispatch.bind(null, 'DRAGGING');\n\n  function lift$1(args) {\n    function completed() {\n      lockAPI.release();\n      phase = 'COMPLETED';\n    }\n\n    if (phase !== 'PRE_DRAG') {\n      completed();\n      !(phase === 'PRE_DRAG') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Cannot lift in phase \" + phase) : invariant(false) : void 0;\n    }\n\n    store.dispatch(lift(args.liftActionArgs));\n    phase = 'DRAGGING';\n\n    function finish(reason, options) {\n      if (options === void 0) {\n        options = {\n          shouldBlockNextClick: false\n        };\n      }\n\n      args.cleanup();\n\n      if (options.shouldBlockNextClick) {\n        var unbind = bindEvents(window, [{\n          eventName: 'click',\n          fn: preventDefault,\n          options: {\n            once: true,\n            passive: false,\n            capture: true\n          }\n        }]);\n        setTimeout(unbind);\n      }\n\n      completed();\n      store.dispatch(drop({\n        reason: reason\n      }));\n    }\n\n    return _extends({\n      isActive: function isActive() {\n        return _isActive({\n          expected: 'DRAGGING',\n          phase: phase,\n          isLockActive: isLockActive,\n          shouldWarn: false\n        });\n      },\n      shouldRespectForcePress: getShouldRespectForcePress,\n      drop: function drop(options) {\n        return finish('DROP', options);\n      },\n      cancel: function cancel(options) {\n        return finish('CANCEL', options);\n      }\n    }, args.actions);\n  }\n\n  function fluidLift(clientSelection) {\n    var move$1 = rafSchd(function (client) {\n      tryDispatchWhenDragging(function () {\n        return move({\n          client: client\n        });\n      });\n    });\n    var api = lift$1({\n      liftActionArgs: {\n        id: draggableId,\n        clientSelection: clientSelection,\n        movementMode: 'FLUID'\n      },\n      cleanup: function cleanup() {\n        return move$1.cancel();\n      },\n      actions: {\n        move: move$1\n      }\n    });\n    return _extends({}, api, {\n      move: move$1\n    });\n  }\n\n  function snapLift() {\n    var actions = {\n      moveUp: function moveUp$1() {\n        return tryDispatchWhenDragging(moveUp);\n      },\n      moveRight: function moveRight$1() {\n        return tryDispatchWhenDragging(moveRight);\n      },\n      moveDown: function moveDown$1() {\n        return tryDispatchWhenDragging(moveDown);\n      },\n      moveLeft: function moveLeft$1() {\n        return tryDispatchWhenDragging(moveLeft);\n      }\n    };\n    return lift$1({\n      liftActionArgs: {\n        id: draggableId,\n        clientSelection: getBorderBoxCenterPosition(el),\n        movementMode: 'SNAP'\n      },\n      cleanup: noop,\n      actions: actions\n    });\n  }\n\n  function abortPreDrag() {\n    var shouldRelease = _isActive({\n      expected: 'PRE_DRAG',\n      phase: phase,\n      isLockActive: isLockActive,\n      shouldWarn: true\n    });\n\n    if (shouldRelease) {\n      lockAPI.release();\n    }\n  }\n\n  var preDrag = {\n    isActive: function isActive() {\n      return _isActive({\n        expected: 'PRE_DRAG',\n        phase: phase,\n        isLockActive: isLockActive,\n        shouldWarn: false\n      });\n    },\n    shouldRespectForcePress: getShouldRespectForcePress,\n    fluidLift: fluidLift,\n    snapLift: snapLift,\n    abort: abortPreDrag\n  };\n  return preDrag;\n}\n\nvar defaultSensors = [useMouseSensor, useKeyboardSensor, useTouchSensor];\nfunction useSensorMarshal(_ref4) {\n  var contextId = _ref4.contextId,\n      store = _ref4.store,\n      registry = _ref4.registry,\n      customSensors = _ref4.customSensors,\n      enableDefaultSensors = _ref4.enableDefaultSensors;\n  var useSensors = [].concat(enableDefaultSensors ? defaultSensors : [], customSensors || []);\n  var lockAPI = useState(function () {\n    return create();\n  })[0];\n  var tryAbandonLock = useCallback(function tryAbandonLock(previous, current) {\n    if (previous.isDragging && !current.isDragging) {\n      lockAPI.tryAbandon();\n    }\n  }, [lockAPI]);\n  useIsomorphicLayoutEffect(function listenToStore() {\n    var previous = store.getState();\n    var unsubscribe = store.subscribe(function () {\n      var current = store.getState();\n      tryAbandonLock(previous, current);\n      previous = current;\n    });\n    return unsubscribe;\n  }, [lockAPI, store, tryAbandonLock]);\n  useIsomorphicLayoutEffect(function () {\n    return lockAPI.tryAbandon;\n  }, [lockAPI.tryAbandon]);\n  var canGetLock = useCallback(function (draggableId) {\n    return canStart({\n      lockAPI: lockAPI,\n      registry: registry,\n      store: store,\n      draggableId: draggableId\n    });\n  }, [lockAPI, registry, store]);\n  var tryGetLock = useCallback(function (draggableId, forceStop, options) {\n    return tryStart({\n      lockAPI: lockAPI,\n      registry: registry,\n      contextId: contextId,\n      store: store,\n      draggableId: draggableId,\n      forceSensorStop: forceStop,\n      sourceEvent: options && options.sourceEvent ? options.sourceEvent : null\n    });\n  }, [contextId, lockAPI, registry, store]);\n  var findClosestDraggableId = useCallback(function (event) {\n    return tryGetClosestDraggableIdFromEvent(contextId, event);\n  }, [contextId]);\n  var findOptionsForDraggable = useCallback(function (id) {\n    var entry = registry.draggable.findById(id);\n    return entry ? entry.options : null;\n  }, [registry.draggable]);\n  var tryReleaseLock = useCallback(function tryReleaseLock() {\n    if (!lockAPI.isClaimed()) {\n      return;\n    }\n\n    lockAPI.tryAbandon();\n\n    if (store.getState().phase !== 'IDLE') {\n      store.dispatch(flush());\n    }\n  }, [lockAPI, store]);\n  var isLockClaimed = useCallback(lockAPI.isClaimed, [lockAPI]);\n  var api = useMemo(function () {\n    return {\n      canGetLock: canGetLock,\n      tryGetLock: tryGetLock,\n      findClosestDraggableId: findClosestDraggableId,\n      findOptionsForDraggable: findOptionsForDraggable,\n      tryReleaseLock: tryReleaseLock,\n      isLockClaimed: isLockClaimed\n    };\n  }, [canGetLock, tryGetLock, findClosestDraggableId, findOptionsForDraggable, tryReleaseLock, isLockClaimed]);\n  useValidateSensorHooks(useSensors);\n\n  for (var i = 0; i < useSensors.length; i++) {\n    useSensors[i](api);\n  }\n}\n\nvar createResponders = function createResponders(props) {\n  return {\n    onBeforeCapture: props.onBeforeCapture,\n    onBeforeDragStart: props.onBeforeDragStart,\n    onDragStart: props.onDragStart,\n    onDragEnd: props.onDragEnd,\n    onDragUpdate: props.onDragUpdate\n  };\n};\n\nfunction getStore(lazyRef) {\n  !lazyRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find store from lazy ref') : invariant(false) : void 0;\n  return lazyRef.current;\n}\n\nfunction App(props) {\n  var contextId = props.contextId,\n      setCallbacks = props.setCallbacks,\n      sensors = props.sensors,\n      nonce = props.nonce,\n      dragHandleUsageInstructions = props.dragHandleUsageInstructions;\n  var lazyStoreRef = useRef(null);\n  useStartupValidation();\n  var lastPropsRef = usePrevious(props);\n  var getResponders = useCallback(function () {\n    return createResponders(lastPropsRef.current);\n  }, [lastPropsRef]);\n  var announce = useAnnouncer(contextId);\n  var dragHandleUsageInstructionsId = useHiddenTextElement({\n    contextId: contextId,\n    text: dragHandleUsageInstructions\n  });\n  var styleMarshal = useStyleMarshal(contextId, nonce);\n  var lazyDispatch = useCallback(function (action) {\n    getStore(lazyStoreRef).dispatch(action);\n  }, []);\n  var marshalCallbacks = useMemo(function () {\n    return bindActionCreators({\n      publishWhileDragging: publishWhileDragging,\n      updateDroppableScroll: updateDroppableScroll,\n      updateDroppableIsEnabled: updateDroppableIsEnabled,\n      updateDroppableIsCombineEnabled: updateDroppableIsCombineEnabled,\n      collectionStarting: collectionStarting\n    }, lazyDispatch);\n  }, [lazyDispatch]);\n  var registry = useRegistry();\n  var dimensionMarshal = useMemo(function () {\n    return createDimensionMarshal(registry, marshalCallbacks);\n  }, [registry, marshalCallbacks]);\n  var autoScroller = useMemo(function () {\n    return createAutoScroller(_extends({\n      scrollWindow: scrollWindow,\n      scrollDroppable: dimensionMarshal.scrollDroppable\n    }, bindActionCreators({\n      move: move\n    }, lazyDispatch)));\n  }, [dimensionMarshal.scrollDroppable, lazyDispatch]);\n  var focusMarshal = useFocusMarshal(contextId);\n  var store = useMemo(function () {\n    return createStore({\n      announce: announce,\n      autoScroller: autoScroller,\n      dimensionMarshal: dimensionMarshal,\n      focusMarshal: focusMarshal,\n      getResponders: getResponders,\n      styleMarshal: styleMarshal\n    });\n  }, [announce, autoScroller, dimensionMarshal, focusMarshal, getResponders, styleMarshal]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (lazyStoreRef.current && lazyStoreRef.current !== store) {\n      process.env.NODE_ENV !== \"production\" ? warning('unexpected store change') : void 0;\n    }\n  }\n\n  lazyStoreRef.current = store;\n  var tryResetStore = useCallback(function () {\n    var current = getStore(lazyStoreRef);\n    var state = current.getState();\n\n    if (state.phase !== 'IDLE') {\n      current.dispatch(flush());\n    }\n  }, []);\n  var isDragging = useCallback(function () {\n    var state = getStore(lazyStoreRef).getState();\n    return state.isDragging || state.phase === 'DROP_ANIMATING';\n  }, []);\n  var appCallbacks = useMemo(function () {\n    return {\n      isDragging: isDragging,\n      tryAbort: tryResetStore\n    };\n  }, [isDragging, tryResetStore]);\n  setCallbacks(appCallbacks);\n  var getCanLift = useCallback(function (id) {\n    return canStartDrag(getStore(lazyStoreRef).getState(), id);\n  }, []);\n  var getIsMovementAllowed = useCallback(function () {\n    return isMovementAllowed(getStore(lazyStoreRef).getState());\n  }, []);\n  var appContext = useMemo(function () {\n    return {\n      marshal: dimensionMarshal,\n      focus: focusMarshal,\n      contextId: contextId,\n      canLift: getCanLift,\n      isMovementAllowed: getIsMovementAllowed,\n      dragHandleUsageInstructionsId: dragHandleUsageInstructionsId,\n      registry: registry\n    };\n  }, [contextId, dimensionMarshal, dragHandleUsageInstructionsId, focusMarshal, getCanLift, getIsMovementAllowed, registry]);\n  useSensorMarshal({\n    contextId: contextId,\n    store: store,\n    registry: registry,\n    customSensors: sensors,\n    enableDefaultSensors: props.enableDefaultSensors !== false\n  });\n  useEffect(function () {\n    return tryResetStore;\n  }, [tryResetStore]);\n  return React.createElement(AppContext.Provider, {\n    value: appContext\n  }, React.createElement(Provider, {\n    context: StoreContext,\n    store: store\n  }, props.children));\n}\n\nvar count$1 = 0;\nfunction reset$1() {\n  count$1 = 0;\n}\nfunction useInstanceCount() {\n  return useMemo(function () {\n    return \"\" + count$1++;\n  }, []);\n}\n\nfunction resetServerContext() {\n  reset$1();\n  reset();\n}\nfunction DragDropContext(props) {\n  var contextId = useInstanceCount();\n  var dragHandleUsageInstructions = props.dragHandleUsageInstructions || preset.dragHandleUsageInstructions;\n  return React.createElement(ErrorBoundary, null, function (setCallbacks) {\n    return React.createElement(App, {\n      nonce: props.nonce,\n      contextId: contextId,\n      setCallbacks: setCallbacks,\n      dragHandleUsageInstructions: dragHandleUsageInstructions,\n      enableDefaultSensors: props.enableDefaultSensors,\n      sensors: props.sensors,\n      onBeforeCapture: props.onBeforeCapture,\n      onBeforeDragStart: props.onBeforeDragStart,\n      onDragStart: props.onDragStart,\n      onDragUpdate: props.onDragUpdate,\n      onDragEnd: props.onDragEnd\n    }, props.children);\n  });\n}\n\nvar isEqual$1 = function isEqual(base) {\n  return function (value) {\n    return base === value;\n  };\n};\n\nvar isScroll = isEqual$1('scroll');\nvar isAuto = isEqual$1('auto');\nvar isVisible$1 = isEqual$1('visible');\n\nvar isEither = function isEither(overflow, fn) {\n  return fn(overflow.overflowX) || fn(overflow.overflowY);\n};\n\nvar isBoth = function isBoth(overflow, fn) {\n  return fn(overflow.overflowX) && fn(overflow.overflowY);\n};\n\nvar isElementScrollable = function isElementScrollable(el) {\n  var style = window.getComputedStyle(el);\n  var overflow = {\n    overflowX: style.overflowX,\n    overflowY: style.overflowY\n  };\n  return isEither(overflow, isScroll) || isEither(overflow, isAuto);\n};\n\nvar isBodyScrollable = function isBodyScrollable() {\n  if (process.env.NODE_ENV === 'production') {\n    return false;\n  }\n\n  var body = getBodyElement();\n  var html = document.documentElement;\n  !html ? process.env.NODE_ENV !== \"production\" ? invariant(false) : invariant(false) : void 0;\n\n  if (!isElementScrollable(body)) {\n    return false;\n  }\n\n  var htmlStyle = window.getComputedStyle(html);\n  var htmlOverflow = {\n    overflowX: htmlStyle.overflowX,\n    overflowY: htmlStyle.overflowY\n  };\n\n  if (isBoth(htmlOverflow, isVisible$1)) {\n    return false;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    We have detected that your <body> element might be a scroll container.\\n    We have found no reliable way of detecting whether the <body> element is a scroll container.\\n    Under most circumstances a <body> scroll bar will be on the <html> element (document.documentElement)\\n\\n    Because we cannot determine if the <body> is a scroll container, and generally it is not one,\\n    we will be treating the <body> as *not* a scroll container\\n\\n    More information: https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/guides/how-we-detect-scroll-containers.md\\n  \") : void 0;\n  return false;\n};\n\nvar getClosestScrollable = function getClosestScrollable(el) {\n  if (el == null) {\n    return null;\n  }\n\n  if (el === document.body) {\n    return isBodyScrollable() ? el : null;\n  }\n\n  if (el === document.documentElement) {\n    return null;\n  }\n\n  if (!isElementScrollable(el)) {\n    return getClosestScrollable(el.parentElement);\n  }\n\n  return el;\n};\n\nvar checkForNestedScrollContainers = (function (scrollable) {\n  if (!scrollable) {\n    return;\n  }\n\n  var anotherScrollParent = getClosestScrollable(scrollable.parentElement);\n\n  if (!anotherScrollParent) {\n    return;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n    Droppable: unsupported nested scroll container detected.\\n    A Droppable can only have one scroll parent (which can be itself)\\n    Nested scroll containers are currently not supported.\\n\\n    We hope to support nested scroll containers soon: https://github.com/atlassian/react-beautiful-dnd/issues/131\\n  \") : void 0;\n});\n\nvar getScroll$1 = (function (el) {\n  return {\n    x: el.scrollLeft,\n    y: el.scrollTop\n  };\n});\n\nvar getIsFixed = function getIsFixed(el) {\n  if (!el) {\n    return false;\n  }\n\n  var style = window.getComputedStyle(el);\n\n  if (style.position === 'fixed') {\n    return true;\n  }\n\n  return getIsFixed(el.parentElement);\n};\n\nvar getEnv = (function (start) {\n  var closestScrollable = getClosestScrollable(start);\n  var isFixedOnPage = getIsFixed(start);\n  return {\n    closestScrollable: closestScrollable,\n    isFixedOnPage: isFixedOnPage\n  };\n});\n\nvar getDroppableDimension = (function (_ref) {\n  var descriptor = _ref.descriptor,\n      isEnabled = _ref.isEnabled,\n      isCombineEnabled = _ref.isCombineEnabled,\n      isFixedOnPage = _ref.isFixedOnPage,\n      direction = _ref.direction,\n      client = _ref.client,\n      page = _ref.page,\n      closest = _ref.closest;\n\n  var frame = function () {\n    if (!closest) {\n      return null;\n    }\n\n    var scrollSize = closest.scrollSize,\n        frameClient = closest.client;\n    var maxScroll = getMaxScroll({\n      scrollHeight: scrollSize.scrollHeight,\n      scrollWidth: scrollSize.scrollWidth,\n      height: frameClient.paddingBox.height,\n      width: frameClient.paddingBox.width\n    });\n    return {\n      pageMarginBox: closest.page.marginBox,\n      frameClient: frameClient,\n      scrollSize: scrollSize,\n      shouldClipSubject: closest.shouldClipSubject,\n      scroll: {\n        initial: closest.scroll,\n        current: closest.scroll,\n        max: maxScroll,\n        diff: {\n          value: origin,\n          displacement: origin\n        }\n      }\n    };\n  }();\n\n  var axis = direction === 'vertical' ? vertical : horizontal;\n  var subject = getSubject({\n    page: page,\n    withPlaceholder: null,\n    axis: axis,\n    frame: frame\n  });\n  var dimension = {\n    descriptor: descriptor,\n    isCombineEnabled: isCombineEnabled,\n    isFixedOnPage: isFixedOnPage,\n    axis: axis,\n    isEnabled: isEnabled,\n    client: client,\n    page: page,\n    frame: frame,\n    subject: subject\n  };\n  return dimension;\n});\n\nvar getClient = function getClient(targetRef, closestScrollable) {\n  var base = getBox(targetRef);\n\n  if (!closestScrollable) {\n    return base;\n  }\n\n  if (targetRef !== closestScrollable) {\n    return base;\n  }\n\n  var top = base.paddingBox.top - closestScrollable.scrollTop;\n  var left = base.paddingBox.left - closestScrollable.scrollLeft;\n  var bottom = top + closestScrollable.scrollHeight;\n  var right = left + closestScrollable.scrollWidth;\n  var paddingBox = {\n    top: top,\n    right: right,\n    bottom: bottom,\n    left: left\n  };\n  var borderBox = expand(paddingBox, base.border);\n  var client = createBox({\n    borderBox: borderBox,\n    margin: base.margin,\n    border: base.border,\n    padding: base.padding\n  });\n  return client;\n};\n\nvar getDimension = (function (_ref) {\n  var ref = _ref.ref,\n      descriptor = _ref.descriptor,\n      env = _ref.env,\n      windowScroll = _ref.windowScroll,\n      direction = _ref.direction,\n      isDropDisabled = _ref.isDropDisabled,\n      isCombineEnabled = _ref.isCombineEnabled,\n      shouldClipSubject = _ref.shouldClipSubject;\n  var closestScrollable = env.closestScrollable;\n  var client = getClient(ref, closestScrollable);\n  var page = withScroll(client, windowScroll);\n\n  var closest = function () {\n    if (!closestScrollable) {\n      return null;\n    }\n\n    var frameClient = getBox(closestScrollable);\n    var scrollSize = {\n      scrollHeight: closestScrollable.scrollHeight,\n      scrollWidth: closestScrollable.scrollWidth\n    };\n    return {\n      client: frameClient,\n      page: withScroll(frameClient, windowScroll),\n      scroll: getScroll$1(closestScrollable),\n      scrollSize: scrollSize,\n      shouldClipSubject: shouldClipSubject\n    };\n  }();\n\n  var dimension = getDroppableDimension({\n    descriptor: descriptor,\n    isEnabled: !isDropDisabled,\n    isCombineEnabled: isCombineEnabled,\n    isFixedOnPage: env.isFixedOnPage,\n    direction: direction,\n    client: client,\n    page: page,\n    closest: closest\n  });\n  return dimension;\n});\n\nvar immediate = {\n  passive: false\n};\nvar delayed = {\n  passive: true\n};\nvar getListenerOptions = (function (options) {\n  return options.shouldPublishImmediately ? immediate : delayed;\n});\n\nfunction useRequiredContext(Context) {\n  var result = useContext(Context);\n  !result ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find required context') : invariant(false) : void 0;\n  return result;\n}\n\nvar getClosestScrollableFromDrag = function getClosestScrollableFromDrag(dragging) {\n  return dragging && dragging.env.closestScrollable || null;\n};\n\nfunction useDroppablePublisher(args) {\n  var whileDraggingRef = useRef(null);\n  var appContext = useRequiredContext(AppContext);\n  var uniqueId = useUniqueId('droppable');\n  var registry = appContext.registry,\n      marshal = appContext.marshal;\n  var previousRef = usePrevious(args);\n  var descriptor = useMemo(function () {\n    return {\n      id: args.droppableId,\n      type: args.type,\n      mode: args.mode\n    };\n  }, [args.droppableId, args.mode, args.type]);\n  var publishedDescriptorRef = useRef(descriptor);\n  var memoizedUpdateScroll = useMemo(function () {\n    return memoizeOne(function (x, y) {\n      !whileDraggingRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only update scroll when dragging') : invariant(false) : void 0;\n      var scroll = {\n        x: x,\n        y: y\n      };\n      marshal.updateDroppableScroll(descriptor.id, scroll);\n    });\n  }, [descriptor.id, marshal]);\n  var getClosestScroll = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n\n    if (!dragging || !dragging.env.closestScrollable) {\n      return origin;\n    }\n\n    return getScroll$1(dragging.env.closestScrollable);\n  }, []);\n  var updateScroll = useCallback(function () {\n    var scroll = getClosestScroll();\n    memoizedUpdateScroll(scroll.x, scroll.y);\n  }, [getClosestScroll, memoizedUpdateScroll]);\n  var scheduleScrollUpdate = useMemo(function () {\n    return rafSchd(updateScroll);\n  }, [updateScroll]);\n  var onClosestScroll = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n    var closest = getClosestScrollableFromDrag(dragging);\n    !(dragging && closest) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find scroll options while scrolling') : invariant(false) : void 0;\n    var options = dragging.scrollOptions;\n\n    if (options.shouldPublishImmediately) {\n      updateScroll();\n      return;\n    }\n\n    scheduleScrollUpdate();\n  }, [scheduleScrollUpdate, updateScroll]);\n  var getDimensionAndWatchScroll = useCallback(function (windowScroll, options) {\n    !!whileDraggingRef.current ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot collect a droppable while a drag is occurring') : invariant(false) : void 0;\n    var previous = previousRef.current;\n    var ref = previous.getDroppableRef();\n    !ref ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot collect without a droppable ref') : invariant(false) : void 0;\n    var env = getEnv(ref);\n    var dragging = {\n      ref: ref,\n      descriptor: descriptor,\n      env: env,\n      scrollOptions: options\n    };\n    whileDraggingRef.current = dragging;\n    var dimension = getDimension({\n      ref: ref,\n      descriptor: descriptor,\n      env: env,\n      windowScroll: windowScroll,\n      direction: previous.direction,\n      isDropDisabled: previous.isDropDisabled,\n      isCombineEnabled: previous.isCombineEnabled,\n      shouldClipSubject: !previous.ignoreContainerClipping\n    });\n    var scrollable = env.closestScrollable;\n\n    if (scrollable) {\n      scrollable.setAttribute(scrollContainer.contextId, appContext.contextId);\n      scrollable.addEventListener('scroll', onClosestScroll, getListenerOptions(dragging.scrollOptions));\n\n      if (process.env.NODE_ENV !== 'production') {\n        checkForNestedScrollContainers(scrollable);\n      }\n    }\n\n    return dimension;\n  }, [appContext.contextId, descriptor, onClosestScroll, previousRef]);\n  var getScrollWhileDragging = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n    var closest = getClosestScrollableFromDrag(dragging);\n    !(dragging && closest) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Can only recollect Droppable client for Droppables that have a scroll container') : invariant(false) : void 0;\n    return getScroll$1(closest);\n  }, []);\n  var dragStopped = useCallback(function () {\n    var dragging = whileDraggingRef.current;\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot stop drag when no active drag') : invariant(false) : void 0;\n    var closest = getClosestScrollableFromDrag(dragging);\n    whileDraggingRef.current = null;\n\n    if (!closest) {\n      return;\n    }\n\n    scheduleScrollUpdate.cancel();\n    closest.removeAttribute(scrollContainer.contextId);\n    closest.removeEventListener('scroll', onClosestScroll, getListenerOptions(dragging.scrollOptions));\n  }, [onClosestScroll, scheduleScrollUpdate]);\n  var scroll = useCallback(function (change) {\n    var dragging = whileDraggingRef.current;\n    !dragging ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot scroll when there is no drag') : invariant(false) : void 0;\n    var closest = getClosestScrollableFromDrag(dragging);\n    !closest ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot scroll a droppable with no closest scrollable') : invariant(false) : void 0;\n    closest.scrollTop += change.y;\n    closest.scrollLeft += change.x;\n  }, []);\n  var callbacks = useMemo(function () {\n    return {\n      getDimensionAndWatchScroll: getDimensionAndWatchScroll,\n      getScrollWhileDragging: getScrollWhileDragging,\n      dragStopped: dragStopped,\n      scroll: scroll\n    };\n  }, [dragStopped, getDimensionAndWatchScroll, getScrollWhileDragging, scroll]);\n  var entry = useMemo(function () {\n    return {\n      uniqueId: uniqueId,\n      descriptor: descriptor,\n      callbacks: callbacks\n    };\n  }, [callbacks, descriptor, uniqueId]);\n  useIsomorphicLayoutEffect(function () {\n    publishedDescriptorRef.current = entry.descriptor;\n    registry.droppable.register(entry);\n    return function () {\n      if (whileDraggingRef.current) {\n        process.env.NODE_ENV !== \"production\" ? warning('Unsupported: changing the droppableId or type of a Droppable during a drag') : void 0;\n        dragStopped();\n      }\n\n      registry.droppable.unregister(entry);\n    };\n  }, [callbacks, descriptor, dragStopped, entry, marshal, registry.droppable]);\n  useIsomorphicLayoutEffect(function () {\n    if (!whileDraggingRef.current) {\n      return;\n    }\n\n    marshal.updateDroppableIsEnabled(publishedDescriptorRef.current.id, !args.isDropDisabled);\n  }, [args.isDropDisabled, marshal]);\n  useIsomorphicLayoutEffect(function () {\n    if (!whileDraggingRef.current) {\n      return;\n    }\n\n    marshal.updateDroppableIsCombineEnabled(publishedDescriptorRef.current.id, args.isCombineEnabled);\n  }, [args.isCombineEnabled, marshal]);\n}\n\nfunction noop$2() {}\n\nvar empty = {\n  width: 0,\n  height: 0,\n  margin: noSpacing\n};\n\nvar getSize = function getSize(_ref) {\n  var isAnimatingOpenOnMount = _ref.isAnimatingOpenOnMount,\n      placeholder = _ref.placeholder,\n      animate = _ref.animate;\n\n  if (isAnimatingOpenOnMount) {\n    return empty;\n  }\n\n  if (animate === 'close') {\n    return empty;\n  }\n\n  return {\n    height: placeholder.client.borderBox.height,\n    width: placeholder.client.borderBox.width,\n    margin: placeholder.client.margin\n  };\n};\n\nvar getStyle = function getStyle(_ref2) {\n  var isAnimatingOpenOnMount = _ref2.isAnimatingOpenOnMount,\n      placeholder = _ref2.placeholder,\n      animate = _ref2.animate;\n  var size = getSize({\n    isAnimatingOpenOnMount: isAnimatingOpenOnMount,\n    placeholder: placeholder,\n    animate: animate\n  });\n  return {\n    display: placeholder.display,\n    boxSizing: 'border-box',\n    width: size.width,\n    height: size.height,\n    marginTop: size.margin.top,\n    marginRight: size.margin.right,\n    marginBottom: size.margin.bottom,\n    marginLeft: size.margin.left,\n    flexShrink: '0',\n    flexGrow: '0',\n    pointerEvents: 'none',\n    transition: animate !== 'none' ? transitions.placeholder : null\n  };\n};\n\nfunction Placeholder(props) {\n  var animateOpenTimerRef = useRef(null);\n  var tryClearAnimateOpenTimer = useCallback(function () {\n    if (!animateOpenTimerRef.current) {\n      return;\n    }\n\n    clearTimeout(animateOpenTimerRef.current);\n    animateOpenTimerRef.current = null;\n  }, []);\n  var animate = props.animate,\n      onTransitionEnd = props.onTransitionEnd,\n      onClose = props.onClose,\n      contextId = props.contextId;\n\n  var _useState = useState(props.animate === 'open'),\n      isAnimatingOpenOnMount = _useState[0],\n      setIsAnimatingOpenOnMount = _useState[1];\n\n  useEffect(function () {\n    if (!isAnimatingOpenOnMount) {\n      return noop$2;\n    }\n\n    if (animate !== 'open') {\n      tryClearAnimateOpenTimer();\n      setIsAnimatingOpenOnMount(false);\n      return noop$2;\n    }\n\n    if (animateOpenTimerRef.current) {\n      return noop$2;\n    }\n\n    animateOpenTimerRef.current = setTimeout(function () {\n      animateOpenTimerRef.current = null;\n      setIsAnimatingOpenOnMount(false);\n    });\n    return tryClearAnimateOpenTimer;\n  }, [animate, isAnimatingOpenOnMount, tryClearAnimateOpenTimer]);\n  var onSizeChangeEnd = useCallback(function (event) {\n    if (event.propertyName !== 'height') {\n      return;\n    }\n\n    onTransitionEnd();\n\n    if (animate === 'close') {\n      onClose();\n    }\n  }, [animate, onClose, onTransitionEnd]);\n  var style = getStyle({\n    isAnimatingOpenOnMount: isAnimatingOpenOnMount,\n    animate: props.animate,\n    placeholder: props.placeholder\n  });\n  return React.createElement(props.placeholder.tagName, {\n    style: style,\n    'data-rbd-placeholder-context-id': contextId,\n    onTransitionEnd: onSizeChangeEnd,\n    ref: props.innerRef\n  });\n}\n\nvar Placeholder$1 = React.memo(Placeholder);\n\nvar DroppableContext = React.createContext(null);\n\nfunction checkIsValidInnerRef(el) {\n  !(el && isHtmlElement(el)) ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"\\n    provided.innerRef has not been provided with a HTMLElement.\\n\\n    You can find a guide on using the innerRef callback functions at:\\n    https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/guides/using-inner-ref.md\\n  \") : invariant(false) : void 0;\n}\n\nfunction isBoolean(value) {\n  return typeof value === 'boolean';\n}\n\nfunction runChecks(args, checks) {\n  checks.forEach(function (check) {\n    return check(args);\n  });\n}\n\nvar shared = [function required(_ref) {\n  var props = _ref.props;\n  !props.droppableId ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'A Droppable requires a droppableId prop') : invariant(false) : void 0;\n  !(typeof props.droppableId === 'string') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"A Droppable requires a [string] droppableId. Provided: [\" + typeof props.droppableId + \"]\") : invariant(false) : void 0;\n}, function _boolean(_ref2) {\n  var props = _ref2.props;\n  !isBoolean(props.isDropDisabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'isDropDisabled must be a boolean') : invariant(false) : void 0;\n  !isBoolean(props.isCombineEnabled) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'isCombineEnabled must be a boolean') : invariant(false) : void 0;\n  !isBoolean(props.ignoreContainerClipping) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'ignoreContainerClipping must be a boolean') : invariant(false) : void 0;\n}, function ref(_ref3) {\n  var getDroppableRef = _ref3.getDroppableRef;\n  checkIsValidInnerRef(getDroppableRef());\n}];\nvar standard = [function placeholder(_ref4) {\n  var props = _ref4.props,\n      getPlaceholderRef = _ref4.getPlaceholderRef;\n\n  if (!props.placeholder) {\n    return;\n  }\n\n  var ref = getPlaceholderRef();\n\n  if (ref) {\n    return;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(\"\\n      Droppable setup issue [droppableId: \\\"\" + props.droppableId + \"\\\"]:\\n      DroppableProvided > placeholder could not be found.\\n\\n      Please be sure to add the {provided.placeholder} React Node as a child of your Droppable.\\n      More information: https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/api/droppable.md\\n    \") : void 0;\n}];\nvar virtual = [function hasClone(_ref5) {\n  var props = _ref5.props;\n  !props.renderClone ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Must provide a clone render function (renderClone) for virtual lists') : invariant(false) : void 0;\n}, function hasNoPlaceholder(_ref6) {\n  var getPlaceholderRef = _ref6.getPlaceholderRef;\n  !!getPlaceholderRef() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Expected virtual list to not have a placeholder') : invariant(false) : void 0;\n}];\nfunction useValidation(args) {\n  useDevSetupWarning(function () {\n    runChecks(args, shared);\n\n    if (args.props.mode === 'standard') {\n      runChecks(args, standard);\n    }\n\n    if (args.props.mode === 'virtual') {\n      runChecks(args, virtual);\n    }\n  });\n}\n\nvar AnimateInOut = function (_React$PureComponent) {\n  _inheritsLoose(AnimateInOut, _React$PureComponent);\n\n  function AnimateInOut() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n    _this.state = {\n      isVisible: Boolean(_this.props.on),\n      data: _this.props.on,\n      animate: _this.props.shouldAnimate && _this.props.on ? 'open' : 'none'\n    };\n\n    _this.onClose = function () {\n      if (_this.state.animate !== 'close') {\n        return;\n      }\n\n      _this.setState({\n        isVisible: false\n      });\n    };\n\n    return _this;\n  }\n\n  AnimateInOut.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n    if (!props.shouldAnimate) {\n      return {\n        isVisible: Boolean(props.on),\n        data: props.on,\n        animate: 'none'\n      };\n    }\n\n    if (props.on) {\n      return {\n        isVisible: true,\n        data: props.on,\n        animate: 'open'\n      };\n    }\n\n    if (state.isVisible) {\n      return {\n        isVisible: true,\n        data: state.data,\n        animate: 'close'\n      };\n    }\n\n    return {\n      isVisible: false,\n      animate: 'close',\n      data: null\n    };\n  };\n\n  var _proto = AnimateInOut.prototype;\n\n  _proto.render = function render() {\n    if (!this.state.isVisible) {\n      return null;\n    }\n\n    var provided = {\n      onClose: this.onClose,\n      data: this.state.data,\n      animate: this.state.animate\n    };\n    return this.props.children(provided);\n  };\n\n  return AnimateInOut;\n}(React.PureComponent);\n\nvar zIndexOptions = {\n  dragging: 5000,\n  dropAnimating: 4500\n};\n\nvar getDraggingTransition = function getDraggingTransition(shouldAnimateDragMovement, dropping) {\n  if (dropping) {\n    return transitions.drop(dropping.duration);\n  }\n\n  if (shouldAnimateDragMovement) {\n    return transitions.snap;\n  }\n\n  return transitions.fluid;\n};\n\nvar getDraggingOpacity = function getDraggingOpacity(isCombining, isDropAnimating) {\n  if (!isCombining) {\n    return null;\n  }\n\n  return isDropAnimating ? combine.opacity.drop : combine.opacity.combining;\n};\n\nvar getShouldDraggingAnimate = function getShouldDraggingAnimate(dragging) {\n  if (dragging.forceShouldAnimate != null) {\n    return dragging.forceShouldAnimate;\n  }\n\n  return dragging.mode === 'SNAP';\n};\n\nfunction getDraggingStyle(dragging) {\n  var dimension = dragging.dimension;\n  var box = dimension.client;\n  var offset = dragging.offset,\n      combineWith = dragging.combineWith,\n      dropping = dragging.dropping;\n  var isCombining = Boolean(combineWith);\n  var shouldAnimate = getShouldDraggingAnimate(dragging);\n  var isDropAnimating = Boolean(dropping);\n  var transform = isDropAnimating ? transforms.drop(offset, isCombining) : transforms.moveTo(offset);\n  var style = {\n    position: 'fixed',\n    top: box.marginBox.top,\n    left: box.marginBox.left,\n    boxSizing: 'border-box',\n    width: box.borderBox.width,\n    height: box.borderBox.height,\n    transition: getDraggingTransition(shouldAnimate, dropping),\n    transform: transform,\n    opacity: getDraggingOpacity(isCombining, isDropAnimating),\n    zIndex: isDropAnimating ? zIndexOptions.dropAnimating : zIndexOptions.dragging,\n    pointerEvents: 'none'\n  };\n  return style;\n}\n\nfunction getSecondaryStyle(secondary) {\n  return {\n    transform: transforms.moveTo(secondary.offset),\n    transition: secondary.shouldAnimateDisplacement ? null : 'none'\n  };\n}\n\nfunction getStyle$1(mapped) {\n  return mapped.type === 'DRAGGING' ? getDraggingStyle(mapped) : getSecondaryStyle(mapped);\n}\n\nfunction getDimension$1(descriptor, el, windowScroll) {\n  if (windowScroll === void 0) {\n    windowScroll = origin;\n  }\n\n  var computedStyles = window.getComputedStyle(el);\n  var borderBox = el.getBoundingClientRect();\n  var client = calculateBox(borderBox, computedStyles);\n  var page = withScroll(client, windowScroll);\n  var placeholder = {\n    client: client,\n    tagName: el.tagName.toLowerCase(),\n    display: computedStyles.display\n  };\n  var displaceBy = {\n    x: client.marginBox.width,\n    y: client.marginBox.height\n  };\n  var dimension = {\n    descriptor: descriptor,\n    placeholder: placeholder,\n    displaceBy: displaceBy,\n    client: client,\n    page: page\n  };\n  return dimension;\n}\n\nfunction useDraggablePublisher(args) {\n  var uniqueId = useUniqueId('draggable');\n  var descriptor = args.descriptor,\n      registry = args.registry,\n      getDraggableRef = args.getDraggableRef,\n      canDragInteractiveElements = args.canDragInteractiveElements,\n      shouldRespectForcePress = args.shouldRespectForcePress,\n      isEnabled = args.isEnabled;\n  var options = useMemo(function () {\n    return {\n      canDragInteractiveElements: canDragInteractiveElements,\n      shouldRespectForcePress: shouldRespectForcePress,\n      isEnabled: isEnabled\n    };\n  }, [canDragInteractiveElements, isEnabled, shouldRespectForcePress]);\n  var getDimension = useCallback(function (windowScroll) {\n    var el = getDraggableRef();\n    !el ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Cannot get dimension when no ref is set') : invariant(false) : void 0;\n    return getDimension$1(descriptor, el, windowScroll);\n  }, [descriptor, getDraggableRef]);\n  var entry = useMemo(function () {\n    return {\n      uniqueId: uniqueId,\n      descriptor: descriptor,\n      options: options,\n      getDimension: getDimension\n    };\n  }, [descriptor, getDimension, options, uniqueId]);\n  var publishedRef = useRef(entry);\n  var isFirstPublishRef = useRef(true);\n  useIsomorphicLayoutEffect(function () {\n    registry.draggable.register(publishedRef.current);\n    return function () {\n      return registry.draggable.unregister(publishedRef.current);\n    };\n  }, [registry.draggable]);\n  useIsomorphicLayoutEffect(function () {\n    if (isFirstPublishRef.current) {\n      isFirstPublishRef.current = false;\n      return;\n    }\n\n    var last = publishedRef.current;\n    publishedRef.current = entry;\n    registry.draggable.update(entry, last);\n  }, [entry, registry.draggable]);\n}\n\nfunction useValidation$1(props, contextId, getRef) {\n  useDevSetupWarning(function () {\n    function prefix(id) {\n      return \"Draggable[id: \" + id + \"]: \";\n    }\n\n    var id = props.draggableId;\n    !id ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Draggable requires a draggableId') : invariant(false) : void 0;\n    !(typeof id === 'string') ? process.env.NODE_ENV !== \"production\" ? invariant(false, \"Draggable requires a [string] draggableId.\\n      Provided: [type: \" + typeof id + \"] (value: \" + id + \")\") : invariant(false) : void 0;\n    !isInteger(props.index) ? process.env.NODE_ENV !== \"production\" ? invariant(false, prefix(id) + \" requires an integer index prop\") : invariant(false) : void 0;\n\n    if (props.mapped.type === 'DRAGGING') {\n      return;\n    }\n\n    checkIsValidInnerRef(getRef());\n\n    if (props.isEnabled) {\n      !findDragHandle(contextId, id) ? process.env.NODE_ENV !== \"production\" ? invariant(false, prefix(id) + \" Unable to find drag handle\") : invariant(false) : void 0;\n    }\n  });\n}\nfunction useClonePropValidation(isClone) {\n  useDev(function () {\n    var initialRef = useRef(isClone);\n    useDevSetupWarning(function () {\n      !(isClone === initialRef.current) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Draggable isClone prop value changed during component life') : invariant(false) : void 0;\n    }, [isClone]);\n  });\n}\n\nfunction preventHtml5Dnd(event) {\n  event.preventDefault();\n}\n\nfunction Draggable(props) {\n  var ref = useRef(null);\n  var setRef = useCallback(function (el) {\n    ref.current = el;\n  }, []);\n  var getRef = useCallback(function () {\n    return ref.current;\n  }, []);\n\n  var _useRequiredContext = useRequiredContext(AppContext),\n      contextId = _useRequiredContext.contextId,\n      dragHandleUsageInstructionsId = _useRequiredContext.dragHandleUsageInstructionsId,\n      registry = _useRequiredContext.registry;\n\n  var _useRequiredContext2 = useRequiredContext(DroppableContext),\n      type = _useRequiredContext2.type,\n      droppableId = _useRequiredContext2.droppableId;\n\n  var descriptor = useMemo(function () {\n    return {\n      id: props.draggableId,\n      index: props.index,\n      type: type,\n      droppableId: droppableId\n    };\n  }, [props.draggableId, props.index, type, droppableId]);\n  var children = props.children,\n      draggableId = props.draggableId,\n      isEnabled = props.isEnabled,\n      shouldRespectForcePress = props.shouldRespectForcePress,\n      canDragInteractiveElements = props.canDragInteractiveElements,\n      isClone = props.isClone,\n      mapped = props.mapped,\n      dropAnimationFinishedAction = props.dropAnimationFinished;\n  useValidation$1(props, contextId, getRef);\n  useClonePropValidation(isClone);\n\n  if (!isClone) {\n    var forPublisher = useMemo(function () {\n      return {\n        descriptor: descriptor,\n        registry: registry,\n        getDraggableRef: getRef,\n        canDragInteractiveElements: canDragInteractiveElements,\n        shouldRespectForcePress: shouldRespectForcePress,\n        isEnabled: isEnabled\n      };\n    }, [descriptor, registry, getRef, canDragInteractiveElements, shouldRespectForcePress, isEnabled]);\n    useDraggablePublisher(forPublisher);\n  }\n\n  var dragHandleProps = useMemo(function () {\n    return isEnabled ? {\n      tabIndex: 0,\n      role: 'button',\n      'aria-describedby': dragHandleUsageInstructionsId,\n      'data-rbd-drag-handle-draggable-id': draggableId,\n      'data-rbd-drag-handle-context-id': contextId,\n      draggable: false,\n      onDragStart: preventHtml5Dnd\n    } : null;\n  }, [contextId, dragHandleUsageInstructionsId, draggableId, isEnabled]);\n  var onMoveEnd = useCallback(function (event) {\n    if (mapped.type !== 'DRAGGING') {\n      return;\n    }\n\n    if (!mapped.dropping) {\n      return;\n    }\n\n    if (event.propertyName !== 'transform') {\n      return;\n    }\n\n    dropAnimationFinishedAction();\n  }, [dropAnimationFinishedAction, mapped]);\n  var provided = useMemo(function () {\n    var style = getStyle$1(mapped);\n    var onTransitionEnd = mapped.type === 'DRAGGING' && mapped.dropping ? onMoveEnd : null;\n    var result = {\n      innerRef: setRef,\n      draggableProps: {\n        'data-rbd-draggable-context-id': contextId,\n        'data-rbd-draggable-id': draggableId,\n        style: style,\n        onTransitionEnd: onTransitionEnd\n      },\n      dragHandleProps: dragHandleProps\n    };\n    return result;\n  }, [contextId, dragHandleProps, draggableId, mapped, onMoveEnd, setRef]);\n  var rubric = useMemo(function () {\n    return {\n      draggableId: descriptor.id,\n      type: descriptor.type,\n      source: {\n        index: descriptor.index,\n        droppableId: descriptor.droppableId\n      }\n    };\n  }, [descriptor.droppableId, descriptor.id, descriptor.index, descriptor.type]);\n  return children(provided, mapped.snapshot, rubric);\n}\n\nvar isStrictEqual = (function (a, b) {\n  return a === b;\n});\n\nvar whatIsDraggedOverFromResult = (function (result) {\n  var combine = result.combine,\n      destination = result.destination;\n\n  if (destination) {\n    return destination.droppableId;\n  }\n\n  if (combine) {\n    return combine.droppableId;\n  }\n\n  return null;\n});\n\nvar getCombineWithFromResult = function getCombineWithFromResult(result) {\n  return result.combine ? result.combine.draggableId : null;\n};\n\nvar getCombineWithFromImpact = function getCombineWithFromImpact(impact) {\n  return impact.at && impact.at.type === 'COMBINE' ? impact.at.combine.draggableId : null;\n};\n\nfunction getDraggableSelector() {\n  var memoizedOffset = memoizeOne(function (x, y) {\n    return {\n      x: x,\n      y: y\n    };\n  });\n  var getMemoizedSnapshot = memoizeOne(function (mode, isClone, draggingOver, combineWith, dropping) {\n    return {\n      isDragging: true,\n      isClone: isClone,\n      isDropAnimating: Boolean(dropping),\n      dropAnimation: dropping,\n      mode: mode,\n      draggingOver: draggingOver,\n      combineWith: combineWith,\n      combineTargetFor: null\n    };\n  });\n  var getMemoizedProps = memoizeOne(function (offset, mode, dimension, isClone, draggingOver, combineWith, forceShouldAnimate) {\n    return {\n      mapped: {\n        type: 'DRAGGING',\n        dropping: null,\n        draggingOver: draggingOver,\n        combineWith: combineWith,\n        mode: mode,\n        offset: offset,\n        dimension: dimension,\n        forceShouldAnimate: forceShouldAnimate,\n        snapshot: getMemoizedSnapshot(mode, isClone, draggingOver, combineWith, null)\n      }\n    };\n  });\n\n  var selector = function selector(state, ownProps) {\n    if (state.isDragging) {\n      if (state.critical.draggable.id !== ownProps.draggableId) {\n        return null;\n      }\n\n      var offset = state.current.client.offset;\n      var dimension = state.dimensions.draggables[ownProps.draggableId];\n      var draggingOver = whatIsDraggedOver(state.impact);\n      var combineWith = getCombineWithFromImpact(state.impact);\n      var forceShouldAnimate = state.forceShouldAnimate;\n      return getMemoizedProps(memoizedOffset(offset.x, offset.y), state.movementMode, dimension, ownProps.isClone, draggingOver, combineWith, forceShouldAnimate);\n    }\n\n    if (state.phase === 'DROP_ANIMATING') {\n      var completed = state.completed;\n\n      if (completed.result.draggableId !== ownProps.draggableId) {\n        return null;\n      }\n\n      var isClone = ownProps.isClone;\n      var _dimension = state.dimensions.draggables[ownProps.draggableId];\n      var result = completed.result;\n      var mode = result.mode;\n\n      var _draggingOver = whatIsDraggedOverFromResult(result);\n\n      var _combineWith = getCombineWithFromResult(result);\n\n      var duration = state.dropDuration;\n      var dropping = {\n        duration: duration,\n        curve: curves.drop,\n        moveTo: state.newHomeClientOffset,\n        opacity: _combineWith ? combine.opacity.drop : null,\n        scale: _combineWith ? combine.scale.drop : null\n      };\n      return {\n        mapped: {\n          type: 'DRAGGING',\n          offset: state.newHomeClientOffset,\n          dimension: _dimension,\n          dropping: dropping,\n          draggingOver: _draggingOver,\n          combineWith: _combineWith,\n          mode: mode,\n          forceShouldAnimate: null,\n          snapshot: getMemoizedSnapshot(mode, isClone, _draggingOver, _combineWith, dropping)\n        }\n      };\n    }\n\n    return null;\n  };\n\n  return selector;\n}\n\nfunction getSecondarySnapshot(combineTargetFor) {\n  return {\n    isDragging: false,\n    isDropAnimating: false,\n    isClone: false,\n    dropAnimation: null,\n    mode: null,\n    draggingOver: null,\n    combineTargetFor: combineTargetFor,\n    combineWith: null\n  };\n}\n\nvar atRest = {\n  mapped: {\n    type: 'SECONDARY',\n    offset: origin,\n    combineTargetFor: null,\n    shouldAnimateDisplacement: true,\n    snapshot: getSecondarySnapshot(null)\n  }\n};\n\nfunction getSecondarySelector() {\n  var memoizedOffset = memoizeOne(function (x, y) {\n    return {\n      x: x,\n      y: y\n    };\n  });\n  var getMemoizedSnapshot = memoizeOne(getSecondarySnapshot);\n  var getMemoizedProps = memoizeOne(function (offset, combineTargetFor, shouldAnimateDisplacement) {\n    if (combineTargetFor === void 0) {\n      combineTargetFor = null;\n    }\n\n    return {\n      mapped: {\n        type: 'SECONDARY',\n        offset: offset,\n        combineTargetFor: combineTargetFor,\n        shouldAnimateDisplacement: shouldAnimateDisplacement,\n        snapshot: getMemoizedSnapshot(combineTargetFor)\n      }\n    };\n  });\n\n  var getFallback = function getFallback(combineTargetFor) {\n    return combineTargetFor ? getMemoizedProps(origin, combineTargetFor, true) : null;\n  };\n\n  var getProps = function getProps(ownId, draggingId, impact, afterCritical) {\n    var visualDisplacement = impact.displaced.visible[ownId];\n    var isAfterCriticalInVirtualList = Boolean(afterCritical.inVirtualList && afterCritical.effected[ownId]);\n    var combine = tryGetCombine(impact);\n    var combineTargetFor = combine && combine.draggableId === ownId ? draggingId : null;\n\n    if (!visualDisplacement) {\n      if (!isAfterCriticalInVirtualList) {\n        return getFallback(combineTargetFor);\n      }\n\n      if (impact.displaced.invisible[ownId]) {\n        return null;\n      }\n\n      var change = negate(afterCritical.displacedBy.point);\n\n      var _offset = memoizedOffset(change.x, change.y);\n\n      return getMemoizedProps(_offset, combineTargetFor, true);\n    }\n\n    if (isAfterCriticalInVirtualList) {\n      return getFallback(combineTargetFor);\n    }\n\n    var displaceBy = impact.displacedBy.point;\n    var offset = memoizedOffset(displaceBy.x, displaceBy.y);\n    return getMemoizedProps(offset, combineTargetFor, visualDisplacement.shouldAnimate);\n  };\n\n  var selector = function selector(state, ownProps) {\n    if (state.isDragging) {\n      if (state.critical.draggable.id === ownProps.draggableId) {\n        return null;\n      }\n\n      return getProps(ownProps.draggableId, state.critical.draggable.id, state.impact, state.afterCritical);\n    }\n\n    if (state.phase === 'DROP_ANIMATING') {\n      var completed = state.completed;\n\n      if (completed.result.draggableId === ownProps.draggableId) {\n        return null;\n      }\n\n      return getProps(ownProps.draggableId, completed.result.draggableId, completed.impact, completed.afterCritical);\n    }\n\n    return null;\n  };\n\n  return selector;\n}\n\nvar makeMapStateToProps = function makeMapStateToProps() {\n  var draggingSelector = getDraggableSelector();\n  var secondarySelector = getSecondarySelector();\n\n  var selector = function selector(state, ownProps) {\n    return draggingSelector(state, ownProps) || secondarySelector(state, ownProps) || atRest;\n  };\n\n  return selector;\n};\nvar mapDispatchToProps = {\n  dropAnimationFinished: dropAnimationFinished\n};\nvar ConnectedDraggable = connect(makeMapStateToProps, mapDispatchToProps, null, {\n  context: StoreContext,\n  pure: true,\n  areStatePropsEqual: isStrictEqual\n})(Draggable);\n\nfunction PrivateDraggable(props) {\n  var droppableContext = useRequiredContext(DroppableContext);\n  var isUsingCloneFor = droppableContext.isUsingCloneFor;\n\n  if (isUsingCloneFor === props.draggableId && !props.isClone) {\n    return null;\n  }\n\n  return React.createElement(ConnectedDraggable, props);\n}\nfunction PublicDraggable(props) {\n  var isEnabled = typeof props.isDragDisabled === 'boolean' ? !props.isDragDisabled : true;\n  var canDragInteractiveElements = Boolean(props.disableInteractiveElementBlocking);\n  var shouldRespectForcePress = Boolean(props.shouldRespectForcePress);\n  return React.createElement(PrivateDraggable, _extends({}, props, {\n    isClone: false,\n    isEnabled: isEnabled,\n    canDragInteractiveElements: canDragInteractiveElements,\n    shouldRespectForcePress: shouldRespectForcePress\n  }));\n}\n\nfunction Droppable(props) {\n  var appContext = useContext(AppContext);\n  !appContext ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Could not find app context') : invariant(false) : void 0;\n  var contextId = appContext.contextId,\n      isMovementAllowed = appContext.isMovementAllowed;\n  var droppableRef = useRef(null);\n  var placeholderRef = useRef(null);\n  var children = props.children,\n      droppableId = props.droppableId,\n      type = props.type,\n      mode = props.mode,\n      direction = props.direction,\n      ignoreContainerClipping = props.ignoreContainerClipping,\n      isDropDisabled = props.isDropDisabled,\n      isCombineEnabled = props.isCombineEnabled,\n      snapshot = props.snapshot,\n      useClone = props.useClone,\n      updateViewportMaxScroll = props.updateViewportMaxScroll,\n      getContainerForClone = props.getContainerForClone;\n  var getDroppableRef = useCallback(function () {\n    return droppableRef.current;\n  }, []);\n  var setDroppableRef = useCallback(function (value) {\n    droppableRef.current = value;\n  }, []);\n  var getPlaceholderRef = useCallback(function () {\n    return placeholderRef.current;\n  }, []);\n  var setPlaceholderRef = useCallback(function (value) {\n    placeholderRef.current = value;\n  }, []);\n  useValidation({\n    props: props,\n    getDroppableRef: getDroppableRef,\n    getPlaceholderRef: getPlaceholderRef\n  });\n  var onPlaceholderTransitionEnd = useCallback(function () {\n    if (isMovementAllowed()) {\n      updateViewportMaxScroll({\n        maxScroll: getMaxWindowScroll()\n      });\n    }\n  }, [isMovementAllowed, updateViewportMaxScroll]);\n  useDroppablePublisher({\n    droppableId: droppableId,\n    type: type,\n    mode: mode,\n    direction: direction,\n    isDropDisabled: isDropDisabled,\n    isCombineEnabled: isCombineEnabled,\n    ignoreContainerClipping: ignoreContainerClipping,\n    getDroppableRef: getDroppableRef\n  });\n  var placeholder = React.createElement(AnimateInOut, {\n    on: props.placeholder,\n    shouldAnimate: props.shouldAnimatePlaceholder\n  }, function (_ref) {\n    var onClose = _ref.onClose,\n        data = _ref.data,\n        animate = _ref.animate;\n    return React.createElement(Placeholder$1, {\n      placeholder: data,\n      onClose: onClose,\n      innerRef: setPlaceholderRef,\n      animate: animate,\n      contextId: contextId,\n      onTransitionEnd: onPlaceholderTransitionEnd\n    });\n  });\n  var provided = useMemo(function () {\n    return {\n      innerRef: setDroppableRef,\n      placeholder: placeholder,\n      droppableProps: {\n        'data-rbd-droppable-id': droppableId,\n        'data-rbd-droppable-context-id': contextId\n      }\n    };\n  }, [contextId, droppableId, placeholder, setDroppableRef]);\n  var isUsingCloneFor = useClone ? useClone.dragging.draggableId : null;\n  var droppableContext = useMemo(function () {\n    return {\n      droppableId: droppableId,\n      type: type,\n      isUsingCloneFor: isUsingCloneFor\n    };\n  }, [droppableId, isUsingCloneFor, type]);\n\n  function getClone() {\n    if (!useClone) {\n      return null;\n    }\n\n    var dragging = useClone.dragging,\n        render = useClone.render;\n    var node = React.createElement(PrivateDraggable, {\n      draggableId: dragging.draggableId,\n      index: dragging.source.index,\n      isClone: true,\n      isEnabled: true,\n      shouldRespectForcePress: false,\n      canDragInteractiveElements: true\n    }, function (draggableProvided, draggableSnapshot) {\n      return render(draggableProvided, draggableSnapshot, dragging);\n    });\n    return ReactDOM.createPortal(node, getContainerForClone());\n  }\n\n  return React.createElement(DroppableContext.Provider, {\n    value: droppableContext\n  }, children(provided, snapshot), getClone());\n}\n\nvar isMatchingType = function isMatchingType(type, critical) {\n  return type === critical.droppable.type;\n};\n\nvar getDraggable = function getDraggable(critical, dimensions) {\n  return dimensions.draggables[critical.draggable.id];\n};\n\nvar makeMapStateToProps$1 = function makeMapStateToProps() {\n  var idleWithAnimation = {\n    placeholder: null,\n    shouldAnimatePlaceholder: true,\n    snapshot: {\n      isDraggingOver: false,\n      draggingOverWith: null,\n      draggingFromThisWith: null,\n      isUsingPlaceholder: false\n    },\n    useClone: null\n  };\n\n  var idleWithoutAnimation = _extends({}, idleWithAnimation, {\n    shouldAnimatePlaceholder: false\n  });\n\n  var getDraggableRubric = memoizeOne(function (descriptor) {\n    return {\n      draggableId: descriptor.id,\n      type: descriptor.type,\n      source: {\n        index: descriptor.index,\n        droppableId: descriptor.droppableId\n      }\n    };\n  });\n  var getMapProps = memoizeOne(function (id, isEnabled, isDraggingOverForConsumer, isDraggingOverForImpact, dragging, renderClone) {\n    var draggableId = dragging.descriptor.id;\n    var isHome = dragging.descriptor.droppableId === id;\n\n    if (isHome) {\n      var useClone = renderClone ? {\n        render: renderClone,\n        dragging: getDraggableRubric(dragging.descriptor)\n      } : null;\n      var _snapshot = {\n        isDraggingOver: isDraggingOverForConsumer,\n        draggingOverWith: isDraggingOverForConsumer ? draggableId : null,\n        draggingFromThisWith: draggableId,\n        isUsingPlaceholder: true\n      };\n      return {\n        placeholder: dragging.placeholder,\n        shouldAnimatePlaceholder: false,\n        snapshot: _snapshot,\n        useClone: useClone\n      };\n    }\n\n    if (!isEnabled) {\n      return idleWithoutAnimation;\n    }\n\n    if (!isDraggingOverForImpact) {\n      return idleWithAnimation;\n    }\n\n    var snapshot = {\n      isDraggingOver: isDraggingOverForConsumer,\n      draggingOverWith: draggableId,\n      draggingFromThisWith: null,\n      isUsingPlaceholder: true\n    };\n    return {\n      placeholder: dragging.placeholder,\n      shouldAnimatePlaceholder: true,\n      snapshot: snapshot,\n      useClone: null\n    };\n  });\n\n  var selector = function selector(state, ownProps) {\n    var id = ownProps.droppableId;\n    var type = ownProps.type;\n    var isEnabled = !ownProps.isDropDisabled;\n    var renderClone = ownProps.renderClone;\n\n    if (state.isDragging) {\n      var critical = state.critical;\n\n      if (!isMatchingType(type, critical)) {\n        return idleWithoutAnimation;\n      }\n\n      var dragging = getDraggable(critical, state.dimensions);\n      var isDraggingOver = whatIsDraggedOver(state.impact) === id;\n      return getMapProps(id, isEnabled, isDraggingOver, isDraggingOver, dragging, renderClone);\n    }\n\n    if (state.phase === 'DROP_ANIMATING') {\n      var completed = state.completed;\n\n      if (!isMatchingType(type, completed.critical)) {\n        return idleWithoutAnimation;\n      }\n\n      var _dragging = getDraggable(completed.critical, state.dimensions);\n\n      return getMapProps(id, isEnabled, whatIsDraggedOverFromResult(completed.result) === id, whatIsDraggedOver(completed.impact) === id, _dragging, renderClone);\n    }\n\n    if (state.phase === 'IDLE' && state.completed && !state.shouldFlush) {\n      var _completed = state.completed;\n\n      if (!isMatchingType(type, _completed.critical)) {\n        return idleWithoutAnimation;\n      }\n\n      var wasOver = whatIsDraggedOver(_completed.impact) === id;\n      var wasCombining = Boolean(_completed.impact.at && _completed.impact.at.type === 'COMBINE');\n      var isHome = _completed.critical.droppable.id === id;\n\n      if (wasOver) {\n        return wasCombining ? idleWithAnimation : idleWithoutAnimation;\n      }\n\n      if (isHome) {\n        return idleWithAnimation;\n      }\n\n      return idleWithoutAnimation;\n    }\n\n    return idleWithoutAnimation;\n  };\n\n  return selector;\n};\nvar mapDispatchToProps$1 = {\n  updateViewportMaxScroll: updateViewportMaxScroll\n};\n\nfunction getBody() {\n  !document.body ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'document.body is not ready') : invariant(false) : void 0;\n  return document.body;\n}\n\nvar defaultProps = {\n  mode: 'standard',\n  type: 'DEFAULT',\n  direction: 'vertical',\n  isDropDisabled: false,\n  isCombineEnabled: false,\n  ignoreContainerClipping: false,\n  renderClone: null,\n  getContainerForClone: getBody\n};\nvar ConnectedDroppable = connect(makeMapStateToProps$1, mapDispatchToProps$1, null, {\n  context: StoreContext,\n  pure: true,\n  areStatePropsEqual: isStrictEqual\n})(Droppable);\nConnectedDroppable.defaultProps = defaultProps;\n\nexport { DragDropContext, PublicDraggable as Draggable, ConnectedDroppable as Droppable, resetServerContext, useKeyboardSensor, useMouseSensor, useTouchSensor };\n","import { useEffect, useRef } from 'react';\nexport default function usePrevious(state) {\n    var ref = useRef();\n    useEffect(function () {\n        ref.current = state;\n    });\n    return ref.current;\n}\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","import { isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nexport default function getBoundingClientRect(element, includeScale) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  var rect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (isHTMLElement(element) && includeScale) {\n    var offsetHeight = element.offsetHeight;\n    var offsetWidth = element.offsetWidth; // Do not attempt to divide by 0, otherwise we get `Infinity` as scale\n    // Fallback to 1 in case both values are `0`\n\n    if (offsetWidth > 0) {\n      scaleX = round(rect.width) / offsetWidth || 1;\n    }\n\n    if (offsetHeight > 0) {\n      scaleY = round(rect.height) / offsetHeight || 1;\n    }\n  }\n\n  return {\n    width: rect.width / scaleX,\n    height: rect.height / scaleY,\n    top: rect.top / scaleY,\n    right: rect.right / scaleX,\n    bottom: rect.bottom / scaleY,\n    left: rect.left / scaleX,\n    x: rect.left / scaleX,\n    y: rect.top / scaleY\n  };\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') !== -1;\n  var isIE = navigator.userAgent.indexOf('Trident') !== -1;\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport getComputedStyle from \"./dom-utils/getComputedStyle.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport validateModifiers from \"./utils/validateModifiers.js\";\nimport uniqueBy from \"./utils/uniqueBy.js\";\nimport getBasePlacement from \"./utils/getBasePlacement.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nimport { auto } from \"./enums.js\";\nvar INVALID_ELEMENT_ERROR = 'Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.';\nvar INFINITE_LOOP_ERROR = 'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        }); // Validate the provided modifiers so that the consumer will get warned\n        // if one of the modifiers is invalid for any reason\n\n        if (process.env.NODE_ENV !== \"production\") {\n          var modifiers = uniqueBy([].concat(orderedModifiers, state.options.modifiers), function (_ref) {\n            var name = _ref.name;\n            return name;\n          });\n          validateModifiers(modifiers);\n\n          if (getBasePlacement(state.options.placement) === auto) {\n            var flipModifier = state.orderedModifiers.find(function (_ref2) {\n              var name = _ref2.name;\n              return name === 'flip';\n            });\n\n            if (!flipModifier) {\n              console.error(['Popper: \"auto\" placements require the \"flip\" modifier be', 'present and enabled to work.'].join(' '));\n            }\n          }\n\n          var _getComputedStyle = getComputedStyle(popper),\n              marginTop = _getComputedStyle.marginTop,\n              marginRight = _getComputedStyle.marginRight,\n              marginBottom = _getComputedStyle.marginBottom,\n              marginLeft = _getComputedStyle.marginLeft; // We no longer take into account `margins` on the popper, and it can\n          // cause bugs with positioning, so we'll warn the consumer\n\n\n          if ([marginTop, marginRight, marginBottom, marginLeft].some(function (margin) {\n            return parseFloat(margin);\n          })) {\n            console.warn(['Popper: CSS \"margin\" styles cannot be used to apply padding', 'between the popper and its reference element or boundary.', 'To replicate margin, use the `offset` modifier, as well as', 'the `padding` option in the `preventOverflow` and `flip`', 'modifiers.'].join(' '));\n          }\n        }\n\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n        var __debug_loops__ = 0;\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (process.env.NODE_ENV !== \"production\") {\n            __debug_loops__ += 1;\n\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref3) {\n        var name = _ref3.name,\n            _ref3$options = _ref3.options,\n            options = _ref3$options === void 0 ? {} : _ref3$options,\n            effect = _ref3.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  var win = window;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var transitionProperty = getComputedStyle(state.elements.popper).transitionProperty || '';\n\n    if (adaptive && ['transform', 'top', 'right', 'bottom', 'left'].some(function (property) {\n      return transitionProperty.indexOf(property) >= 0;\n    })) {\n      console.warn(['Popper: Detected CSS transitions on at least one of the following', 'CSS properties: \"transform\", \"top\", \"right\", \"bottom\", \"left\".', '\\n\\n', 'Disable the \"computeStyles\" modifier\\'s `adaptive` option to allow', 'for smooth transitions, or remove these properties from the CSS', 'transition declaration on the popper element if only transitioning', 'opacity or background-color for example.', '\\n\\n', 'We recommend using the popper element as a wrapper around an inner', 'element that can have any CSS property transitioned for animations.'].join(' '));\n    }\n  }\n\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element) {\n  var rect = getBoundingClientRect(element);\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nexport default function getViewportRect(element) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0; // NB: This isn't supported on iOS <= 12. If the keyboard is open, the popper\n  // can be obscured underneath it.\n  // Also, `html.clientHeight` adds the bottom bar height in Safari iOS, even\n  // if it isn't open, so if this isn't available, the popper will be detected\n  // to overflow the bottom of the screen too early.\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height; // Uses Layout Viewport (like Chrome; Safari does not currently)\n    // In Chrome, it returns a value very close to 0 (+/-) but contains rounding\n    // errors due to floating point numbers, so we need to check precision.\n    // Safari returns a number <= 0, usually < -1 when pinch-zoomed\n    // Feature detection fails in mobile emulation mode in Chrome.\n    // Math.abs(win.innerWidth / visualViewport.scale - visualViewport.width) <\n    // 0.001\n    // Fallback here: \"Not Safari\" userAgent\n\n    if (!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases – research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: The `allowedAutoPlacements` option did not allow any', 'placements. Ensure the `placement` option matches the variation', 'of the allowed placements.', 'For example, \"auto\" cannot be used to allow \"bottom-start\".', 'Use \"auto-start\" instead.'].join(' '));\n    }\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isHTMLElement(arrowElement)) {\n      console.error(['Popper: \"arrow\" element must be an HTMLElement (not an SVGElement).', 'To use an SVG arrow, wrap it in an HTMLElement that will be used as', 'the arrow.'].join(' '));\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: \"arrow\" modifier\\'s `element` must be a child of the popper', 'element.'].join(' '));\n    }\n\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import * as React from 'react';\n\n/**\n * Takes an argument and if it's an array, returns the first item in the array,\n * otherwise returns the argument. Used for Preact compatibility.\n */\nexport var unwrapArray = function unwrapArray(arg) {\n  return Array.isArray(arg) ? arg[0] : arg;\n};\n/**\n * Takes a maybe-undefined function and arbitrary args and invokes the function\n * only if it is defined.\n */\n\nexport var safeInvoke = function safeInvoke(fn) {\n  if (typeof fn === 'function') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return fn.apply(void 0, args);\n  }\n};\n/**\n * Sets a ref using either a ref callback or a ref object\n */\n\nexport var setRef = function setRef(ref, node) {\n  // if its a function call it\n  if (typeof ref === 'function') {\n    return safeInvoke(ref, node);\n  } // otherwise we should treat it as a ref object\n  else if (ref != null) {\n      ref.current = node;\n    }\n};\n/**\n * Simple ponyfill for Object.fromEntries\n */\n\nexport var fromEntries = function fromEntries(entries) {\n  return entries.reduce(function (acc, _ref) {\n    var key = _ref[0],\n        value = _ref[1];\n    acc[key] = value;\n    return acc;\n  }, {});\n};\n/**\n * Small wrapper around `useLayoutEffect` to get rid of the warning on SSR envs\n */\n\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' && window.document && window.document.createElement ? React.useLayoutEffect : React.useEffect;","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { createPopper as defaultCreatePopper } from '@popperjs/core';\nimport isEqual from 'react-fast-compare';\nimport { fromEntries, useIsomorphicLayoutEffect } from './utils';\nvar EMPTY_MODIFIERS = [];\nexport var usePopper = function usePopper(referenceElement, popperElement, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var prevOptions = React.useRef(null);\n  var optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n\n  var _React$useState = React.useState({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0'\n      },\n      arrow: {\n        position: 'absolute'\n      }\n    },\n    attributes: {}\n  }),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var updateStateModifier = React.useMemo(function () {\n    return {\n      name: 'updateState',\n      enabled: true,\n      phase: 'write',\n      fn: function fn(_ref) {\n        var state = _ref.state;\n        var elements = Object.keys(state.elements);\n        ReactDOM.flushSync(function () {\n          setState({\n            styles: fromEntries(elements.map(function (element) {\n              return [element, state.styles[element] || {}];\n            })),\n            attributes: fromEntries(elements.map(function (element) {\n              return [element, state.attributes[element]];\n            }))\n          });\n        });\n      },\n      requires: ['computeStyles']\n    };\n  }, []);\n  var popperOptions = React.useMemo(function () {\n    var newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [].concat(optionsWithDefaults.modifiers, [updateStateModifier, {\n        name: 'applyStyles',\n        enabled: false\n      }])\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    } else {\n      prevOptions.current = newOptions;\n      return newOptions;\n    }\n  }, [optionsWithDefaults.onFirstUpdate, optionsWithDefaults.placement, optionsWithDefaults.strategy, optionsWithDefaults.modifiers, updateStateModifier]);\n  var popperInstanceRef = React.useRef();\n  useIsomorphicLayoutEffect(function () {\n    if (popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n  useIsomorphicLayoutEffect(function () {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    var createPopper = options.createPopper || defaultCreatePopper;\n    var popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n    popperInstanceRef.current = popperInstance;\n    return function () {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n  return {\n    state: popperInstanceRef.current ? popperInstanceRef.current.state : null,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n};","import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { usePopper } from 'react-popper';\n\nfunction useGetLatest(val) {\n  var ref = React.useRef(val);\n  ref.current = val;\n  return React.useCallback(function () {\n    return ref.current;\n  }, []);\n}\n\nvar noop = function noop() {// do nothing\n};\n\nfunction useControlledState(_ref) {\n  var initial = _ref.initial,\n      value = _ref.value,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? noop : _ref$onChange;\n\n  if (initial === undefined && value === undefined) {\n    throw new TypeError('Either \"value\" or \"initial\" variable must be set. Now both are undefined');\n  }\n\n  var _React$useState = React.useState(initial),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var getLatest = useGetLatest(state);\n  var set = React.useCallback(function (updater) {\n    var state = getLatest();\n    var updatedState = typeof updater === 'function' ? updater(state) : updater;\n    if (typeof updatedState.persist === 'function') updatedState.persist();\n    setState(updatedState);\n    if (typeof onChange === 'function') onChange(updatedState);\n  }, [getLatest, onChange]);\n  var isControlled = value !== undefined;\n  return [isControlled ? value : state, isControlled ? onChange : set];\n}\nfunction generateBoundingClientRect(x, y) {\n  if (x === void 0) {\n    x = 0;\n  }\n\n  if (y === void 0) {\n    y = 0;\n  }\n\n  return function () {\n    return {\n      width: 0,\n      height: 0,\n      top: y,\n      right: x,\n      bottom: y,\n      left: x,\n      x: 0,\n      y: 0,\n      toJSON: function toJSON() {\n        return null;\n      }\n    };\n  };\n}\n\nvar _excluded = [\"styles\", \"attributes\"];\nvar virtualElement = {\n  getBoundingClientRect: generateBoundingClientRect()\n};\nvar defaultConfig = {\n  closeOnOutsideClick: true,\n  closeOnTriggerHidden: false,\n  defaultVisible: false,\n  delayHide: 0,\n  delayShow: 0,\n  followCursor: false,\n  interactive: false,\n  mutationObserverOptions: {\n    attributes: true,\n    childList: true,\n    subtree: true\n  },\n  offset: [0, 6],\n  trigger: 'hover'\n};\nfunction usePopperTooltip(config, popperOptions) {\n  var _popperProps$state, _popperProps$state$mo, _popperProps$state$mo2;\n\n  if (config === void 0) {\n    config = {};\n  }\n\n  if (popperOptions === void 0) {\n    popperOptions = {};\n  }\n\n  // Merging options with default options.\n  // Keys with undefined values are replaced with the default ones if any.\n  // Keys with other values pass through.\n  var finalConfig = Object.keys(defaultConfig).reduce(function (config, key) {\n    var _extends2;\n\n    return _extends({}, config, (_extends2 = {}, _extends2[key] = config[key] !== undefined ? config[key] : defaultConfig[key], _extends2));\n  }, config);\n  var defaultModifiers = React.useMemo(function () {\n    return [{\n      name: 'offset',\n      options: {\n        offset: finalConfig.offset\n      }\n    }];\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  Array.isArray(finalConfig.offset) ? finalConfig.offset : []);\n\n  var finalPopperOptions = _extends({}, popperOptions, {\n    placement: popperOptions.placement || finalConfig.placement,\n    modifiers: popperOptions.modifiers || defaultModifiers\n  });\n\n  var _React$useState = React.useState(null),\n      triggerRef = _React$useState[0],\n      setTriggerRef = _React$useState[1];\n\n  var _React$useState2 = React.useState(null),\n      tooltipRef = _React$useState2[0],\n      setTooltipRef = _React$useState2[1];\n\n  var _useControlledState = useControlledState({\n    initial: finalConfig.defaultVisible,\n    value: finalConfig.visible,\n    onChange: finalConfig.onVisibleChange\n  }),\n      visible = _useControlledState[0],\n      setVisible = _useControlledState[1];\n\n  var timer = React.useRef();\n  React.useEffect(function () {\n    return function () {\n      return clearTimeout(timer.current);\n    };\n  }, []);\n\n  var _usePopper = usePopper(finalConfig.followCursor ? virtualElement : triggerRef, tooltipRef, finalPopperOptions),\n      styles = _usePopper.styles,\n      attributes = _usePopper.attributes,\n      popperProps = _objectWithoutPropertiesLoose(_usePopper, _excluded);\n\n  var update = popperProps.update;\n  var getLatest = useGetLatest({\n    visible: visible,\n    triggerRef: triggerRef,\n    tooltipRef: tooltipRef,\n    finalConfig: finalConfig\n  });\n  var isTriggeredBy = React.useCallback(function (trigger) {\n    return Array.isArray(finalConfig.trigger) ? finalConfig.trigger.includes(trigger) : finalConfig.trigger === trigger;\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  Array.isArray(finalConfig.trigger) ? finalConfig.trigger : [finalConfig.trigger]);\n  var hideTooltip = React.useCallback(function () {\n    clearTimeout(timer.current);\n    timer.current = window.setTimeout(function () {\n      return setVisible(false);\n    }, finalConfig.delayHide);\n  }, [finalConfig.delayHide, setVisible]);\n  var showTooltip = React.useCallback(function () {\n    clearTimeout(timer.current);\n    timer.current = window.setTimeout(function () {\n      return setVisible(true);\n    }, finalConfig.delayShow);\n  }, [finalConfig.delayShow, setVisible]);\n  var toggleTooltip = React.useCallback(function () {\n    if (getLatest().visible) {\n      hideTooltip();\n    } else {\n      showTooltip();\n    }\n  }, [getLatest, hideTooltip, showTooltip]); // Handle click outside\n\n  React.useEffect(function () {\n    if (!getLatest().finalConfig.closeOnOutsideClick) return;\n\n    var handleClickOutside = function handleClickOutside(event) {\n      var _event$composedPath;\n\n      var _getLatest = getLatest(),\n          tooltipRef = _getLatest.tooltipRef,\n          triggerRef = _getLatest.triggerRef;\n\n      var target = (event.composedPath == null ? void 0 : (_event$composedPath = event.composedPath()) == null ? void 0 : _event$composedPath[0]) || event.target;\n\n      if (target instanceof Node) {\n        if (tooltipRef != null && triggerRef != null && !tooltipRef.contains(target) && !triggerRef.contains(target)) {\n          hideTooltip();\n        }\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return function () {\n      return document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [getLatest, hideTooltip]); // Trigger: click\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('click')) return;\n    triggerRef.addEventListener('click', toggleTooltip);\n    return function () {\n      return triggerRef.removeEventListener('click', toggleTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, toggleTooltip]); // Trigger: double-click\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('double-click')) return;\n    triggerRef.addEventListener('dblclick', toggleTooltip);\n    return function () {\n      return triggerRef.removeEventListener('dblclick', toggleTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, toggleTooltip]); // Trigger: right-click\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('right-click')) return;\n\n    var preventDefaultAndToggle = function preventDefaultAndToggle(event) {\n      // Don't show the context menu\n      event.preventDefault();\n      toggleTooltip();\n    };\n\n    triggerRef.addEventListener('contextmenu', preventDefaultAndToggle);\n    return function () {\n      return triggerRef.removeEventListener('contextmenu', preventDefaultAndToggle);\n    };\n  }, [triggerRef, isTriggeredBy, toggleTooltip]); // Trigger: focus\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('focus')) return;\n    triggerRef.addEventListener('focus', showTooltip);\n    triggerRef.addEventListener('blur', hideTooltip);\n    return function () {\n      triggerRef.removeEventListener('focus', showTooltip);\n      triggerRef.removeEventListener('blur', hideTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, showTooltip, hideTooltip]); // Trigger: hover on trigger\n\n  React.useEffect(function () {\n    if (triggerRef == null || !isTriggeredBy('hover')) return;\n    triggerRef.addEventListener('mouseenter', showTooltip);\n    triggerRef.addEventListener('mouseleave', hideTooltip);\n    return function () {\n      triggerRef.removeEventListener('mouseenter', showTooltip);\n      triggerRef.removeEventListener('mouseleave', hideTooltip);\n    };\n  }, [triggerRef, isTriggeredBy, showTooltip, hideTooltip]); // Trigger: hover on tooltip, keep it open if hovered\n\n  React.useEffect(function () {\n    if (tooltipRef == null || !isTriggeredBy('hover') || !getLatest().finalConfig.interactive) return;\n    tooltipRef.addEventListener('mouseenter', showTooltip);\n    tooltipRef.addEventListener('mouseleave', hideTooltip);\n    return function () {\n      tooltipRef.removeEventListener('mouseenter', showTooltip);\n      tooltipRef.removeEventListener('mouseleave', hideTooltip);\n    };\n  }, [tooltipRef, isTriggeredBy, showTooltip, hideTooltip, getLatest]); // Handle closing tooltip if trigger hidden\n\n  var isReferenceHidden = popperProps == null ? void 0 : (_popperProps$state = popperProps.state) == null ? void 0 : (_popperProps$state$mo = _popperProps$state.modifiersData) == null ? void 0 : (_popperProps$state$mo2 = _popperProps$state$mo.hide) == null ? void 0 : _popperProps$state$mo2.isReferenceHidden;\n  React.useEffect(function () {\n    if (finalConfig.closeOnTriggerHidden && isReferenceHidden) hideTooltip();\n  }, [finalConfig.closeOnTriggerHidden, hideTooltip, isReferenceHidden]); // Handle follow cursor\n\n  React.useEffect(function () {\n    if (!finalConfig.followCursor || triggerRef == null) return;\n\n    function setMousePosition(_ref) {\n      var clientX = _ref.clientX,\n          clientY = _ref.clientY;\n      virtualElement.getBoundingClientRect = generateBoundingClientRect(clientX, clientY);\n      update == null ? void 0 : update();\n    }\n\n    triggerRef.addEventListener('mousemove', setMousePosition);\n    return function () {\n      return triggerRef.removeEventListener('mousemove', setMousePosition);\n    };\n  }, [finalConfig.followCursor, triggerRef, update]); // Handle tooltip DOM mutation changes (aka mutation observer)\n\n  React.useEffect(function () {\n    if (tooltipRef == null || update == null || finalConfig.mutationObserverOptions == null) return;\n    var observer = new MutationObserver(update);\n    observer.observe(tooltipRef, finalConfig.mutationObserverOptions);\n    return function () {\n      return observer.disconnect();\n    };\n  }, [finalConfig.mutationObserverOptions, tooltipRef, update]); // Tooltip props getter\n\n  var getTooltipProps = function getTooltipProps(args) {\n    if (args === void 0) {\n      args = {};\n    }\n\n    return _extends({}, args, {\n      style: _extends({}, args.style, styles.popper)\n    }, attributes.popper, {\n      'data-popper-interactive': finalConfig.interactive\n    });\n  }; // Arrow props getter\n\n\n  var getArrowProps = function getArrowProps(args) {\n    if (args === void 0) {\n      args = {};\n    }\n\n    return _extends({}, args, attributes.arrow, {\n      style: _extends({}, args.style, styles.arrow),\n      'data-popper-arrow': true\n    });\n  };\n\n  return _extends({\n    getArrowProps: getArrowProps,\n    getTooltipProps: getTooltipProps,\n    setTooltipRef: setTooltipRef,\n    setTriggerRef: setTriggerRef,\n    tooltipRef: tooltipRef,\n    triggerRef: triggerRef,\n    visible: visible\n  }, popperProps);\n}\n\nexport { usePopperTooltip };\n//# sourceMappingURL=react-popper-tooltip.js.map\n","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { usePopperTooltip } from 'react-popper-tooltip';\n\nimport { GrafanaTheme2, renderMarkdown } from '@grafana/data';\nimport { Button, Portal, useStyles2 } from '@grafana/ui';\n\nimport { FlexItem } from '../../components/QueryEditor';\n\nimport { QueryBuilderOperation, QueryBuilderOperationDef } from './types';\n\nexport interface Props {\n  operation: QueryBuilderOperation;\n  def: QueryBuilderOperationDef;\n}\n\nexport const OperationInfoButton = React.memo<Props>(({ def, operation }) => {\n  const styles = useStyles2(getStyles);\n  const [show, setShow] = useState(false);\n  const { getTooltipProps, setTooltipRef, setTriggerRef, visible } = usePopperTooltip({\n    placement: 'top',\n    visible: show,\n    offset: [0, 16],\n    onVisibleChange: setShow,\n    interactive: true,\n    trigger: ['click'],\n  });\n\n  return (\n    <>\n      <Button\n        title=\"Click to show description\"\n        ref={setTriggerRef}\n        icon=\"info-circle\"\n        size=\"sm\"\n        variant=\"secondary\"\n        fill=\"text\"\n      />\n      {visible && (\n        <Portal>\n          <div ref={setTooltipRef} {...getTooltipProps()} className={styles.docBox}>\n            <div className={styles.docBoxHeader}>\n              <span>{def.renderer(operation, def, '<expr>')}</span>\n              <FlexItem grow={1} />\n              <Button\n                icon=\"times\"\n                onClick={() => setShow(false)}\n                fill=\"text\"\n                variant=\"secondary\"\n                title=\"Remove operation\"\n              />\n            </div>\n            <div\n              className={styles.docBoxBody}\n              dangerouslySetInnerHTML={{ __html: getOperationDocs(def, operation) }}\n            ></div>\n          </div>\n        </Portal>\n      )}\n    </>\n  );\n});\n\nOperationInfoButton.displayName = 'OperationDocs';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    docBox: css({\n      overflow: 'hidden',\n      background: theme.colors.background.primary,\n      border: `1px solid ${theme.colors.border.strong}`,\n      boxShadow: theme.shadows.z3,\n      maxWidth: '600px',\n      padding: theme.spacing(1),\n      borderRadius: theme.shape.borderRadius(),\n      zIndex: theme.zIndex.tooltip,\n    }),\n    docBoxHeader: css({\n      fontSize: theme.typography.h5.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace,\n      paddingBottom: theme.spacing(1),\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    docBoxBody: css({\n      // The markdown paragraph has a marginBottom this removes it\n      marginBottom: theme.spacing(-1),\n      color: theme.colors.text.secondary,\n    }),\n    signature: css({\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontFamily: theme.typography.fontFamilyMonospace,\n    }),\n    dropdown: css({\n      opacity: 0,\n      color: theme.colors.text.secondary,\n    }),\n  };\n};\nfunction getOperationDocs(def: QueryBuilderOperationDef, op: QueryBuilderOperation): string {\n  return renderMarkdown(def.explainHandler ? def.explainHandler(op, def) : def.documentation ?? 'no docs');\n}\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Button, Select, useStyles2 } from '@grafana/ui';\n\nimport { FlexItem } from '../../components/QueryEditor';\n\nimport { OperationInfoButton } from './OperationInfoButton';\nimport { VisualQueryModeller, QueryBuilderOperation, QueryBuilderOperationDef } from './types';\n\nexport interface Props {\n  operation: QueryBuilderOperation;\n  def: QueryBuilderOperationDef;\n  index: number;\n  queryModeller: VisualQueryModeller;\n  dragHandleProps: any;\n  onChange: (index: number, update: QueryBuilderOperation) => void;\n  onRemove: (index: number) => void;\n}\n\ninterface State {\n  isOpen?: boolean;\n  alternatives?: Array<SelectableValue<QueryBuilderOperationDef>>;\n}\n\nexport const OperationHeader = React.memo<Props>(\n  ({ operation, def, index, onChange, onRemove, queryModeller, dragHandleProps }) => {\n    const styles = useStyles2(getStyles);\n    const [state, setState] = useState<State>({});\n\n    const onToggleSwitcher = () => {\n      if (state.isOpen) {\n        setState({ ...state, isOpen: false });\n      } else {\n        const alternatives = queryModeller\n          .getAlternativeOperations(def.alternativesKey!)\n          .map((alt) => ({ label: alt.name, value: alt }));\n        setState({ isOpen: true, alternatives });\n      }\n    };\n\n    return (\n      <div className={styles.header}>\n        {!state.isOpen && (\n          <>\n            <div {...dragHandleProps}>{def.name ?? def.id}</div>\n            <FlexItem grow={1} />\n            <div className={`${styles.operationHeaderButtons} operation-header-show-on-hover`}>\n              <Button\n                icon=\"angle-down\"\n                size=\"sm\"\n                onClick={onToggleSwitcher}\n                fill=\"text\"\n                variant=\"secondary\"\n                title=\"Click to view alternative operations\"\n              />\n              <OperationInfoButton def={def} operation={operation} />\n              <Button\n                icon=\"times\"\n                size=\"sm\"\n                onClick={() => onRemove(index)}\n                fill=\"text\"\n                variant=\"secondary\"\n                title=\"Remove operation\"\n              />\n            </div>\n          </>\n        )}\n        {state.isOpen && (\n          <div className={styles.selectWrapper}>\n            <Select\n              autoFocus\n              openMenuOnFocus\n              placeholder=\"Replace with\"\n              options={state.alternatives}\n              isOpen={true}\n              onCloseMenu={onToggleSwitcher}\n              onChange={(value) => {\n                if (value.value) {\n                  // Operation should exist if it is selectable\n                  const newDef = queryModeller.getOperationDef(value.value.id)!;\n\n                  // copy default params, and override with all current params\n                  const newParams = [...newDef.defaultParams];\n                  for (let i = 0; i < Math.min(operation.params.length, newParams.length); i++) {\n                    if (newDef.params[i].type === def.params[i].type) {\n                      newParams[i] = operation.params[i];\n                    }\n                  }\n\n                  const changedOp = { ...operation, params: newParams, id: value.value.id };\n                  onChange(index, def.changeTypeHandler ? def.changeTypeHandler(changedOp, newDef) : changedOp);\n                }\n              }}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nOperationHeader.displayName = 'OperationHeader';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    header: css({\n      borderBottom: `1px solid ${theme.colors.border.medium}`,\n      padding: theme.spacing(0.5, 0.5, 0.5, 1),\n      display: 'flex',\n      alignItems: 'center',\n      '&:hover .operation-header-show-on-hover': css({\n        opacity: 1,\n      }),\n    }),\n    operationHeaderButtons: css({\n      opacity: 0,\n      transition: theme.transitions.create(['opacity'], {\n        duration: theme.transitions.duration.short,\n      }),\n    }),\n    selectWrapper: css({\n      paddingRight: theme.spacing(2),\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport React, { ComponentType } from 'react';\n\nimport { GrafanaTheme2, SelectableValue, toOption } from '@grafana/data';\nimport { AutoSizeInput, Button, Checkbox, Select, useStyles2 } from '@grafana/ui';\n\nimport { Stack } from '../../components/QueryEditor';\n\nimport { getOperationParamId } from './operationUtils';\nimport { QueryBuilderOperationParamDef, QueryBuilderOperationParamEditorProps } from './types';\n\nexport function getOperationParamEditor(\n  paramDef: QueryBuilderOperationParamDef\n): ComponentType<QueryBuilderOperationParamEditorProps> {\n  if (paramDef.editor) {\n    return paramDef.editor;\n  }\n\n  if (paramDef.options) {\n    return SelectInputParamEditor;\n  }\n\n  switch (paramDef.type) {\n    case 'boolean':\n      return BoolInputParamEditor;\n    case 'number':\n    case 'string':\n    default:\n      return SimpleInputParamEditor;\n  }\n}\n\nfunction SimpleInputParamEditor(props: QueryBuilderOperationParamEditorProps) {\n  return (\n    <AutoSizeInput\n      id={getOperationParamId(props.operationIndex, props.index)}\n      defaultValue={props.value?.toString()}\n      minWidth={props.paramDef.minWidth}\n      placeholder={props.paramDef.placeholder}\n      title={props.paramDef.description}\n      onCommitChange={(evt) => {\n        props.onChange(props.index, evt.currentTarget.value);\n        if (props.paramDef.runQueryOnEnter && evt.type === 'keydown') {\n          props.onRunQuery();\n        }\n      }}\n    />\n  );\n}\n\nfunction BoolInputParamEditor(props: QueryBuilderOperationParamEditorProps) {\n  return (\n    <Checkbox\n      id={getOperationParamId(props.operationIndex, props.index)}\n      value={props.value as boolean}\n      onChange={(evt) => props.onChange(props.index, evt.currentTarget.checked)}\n    />\n  );\n}\n\nfunction SelectInputParamEditor({\n  paramDef,\n  value,\n  index,\n  operationIndex,\n  onChange,\n}: QueryBuilderOperationParamEditorProps) {\n  const styles = useStyles2(getStyles);\n  let selectOptions = paramDef.options as Array<SelectableValue<any>>;\n\n  if (!selectOptions[0]?.label) {\n    selectOptions = paramDef.options!.map((option) => ({\n      label: option.toString(),\n      value: option as string,\n    }));\n  }\n\n  let valueOption = selectOptions.find((x) => x.value === value) ?? toOption(value as string);\n\n  // If we have optional options param and don't have value, we want to render button with which we add optional options.\n  // This makes it easier to understand what needs to be selected and what is optional.\n  if (!value && paramDef.optional) {\n    return (\n      <div className={styles.optionalParam}>\n        <Button\n          size=\"sm\"\n          variant=\"secondary\"\n          title={`Add ${paramDef.name}`}\n          icon=\"plus\"\n          onClick={() => onChange(index, selectOptions[0].value)}\n        >\n          {paramDef.name}\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <Stack gap={0.5} direction=\"row\" alignItems=\"center\" wrap={false}>\n      <Select\n        id={getOperationParamId(operationIndex, index)}\n        value={valueOption}\n        options={selectOptions}\n        placeholder={paramDef.placeholder}\n        allowCustomValue={true}\n        onChange={(value) => onChange(index, value.value!)}\n      />\n      {paramDef.optional && (\n        <Button\n          data-testid={`operations.${index}.remove-param`}\n          size=\"sm\"\n          fill=\"text\"\n          icon=\"times\"\n          variant=\"secondary\"\n          title={`Remove ${paramDef.name}`}\n          onClick={() => onChange(index, '')}\n        />\n      )}\n    </Stack>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    optionalParam: css({\n      marginTop: theme.spacing(1),\n    }),\n  };\n};\n","import { css, cx } from '@emotion/css';\nimport React, { useEffect, useState } from 'react';\nimport { Draggable } from 'react-beautiful-dnd';\n\nimport { DataSourceApi, GrafanaTheme2 } from '@grafana/data';\nimport { Button, Icon, Tooltip, useStyles2 } from '@grafana/ui';\n\nimport { Stack } from '../../components/QueryEditor';\n\nimport { OperationHeader } from './OperationHeader';\nimport { getOperationParamEditor } from './OperationParamEditor';\nimport { getOperationParamId } from './operationUtils';\nimport {\n  QueryBuilderOperation,\n  QueryBuilderOperationDef,\n  QueryBuilderOperationParamDef,\n  QueryBuilderOperationParamValue,\n  VisualQueryModeller,\n} from './types';\n\nexport interface Props {\n  operation: QueryBuilderOperation;\n  index: number;\n  query: any;\n  datasource: DataSourceApi;\n  queryModeller: VisualQueryModeller;\n  onChange: (index: number, update: QueryBuilderOperation) => void;\n  onRemove: (index: number) => void;\n  onRunQuery: () => void;\n  flash?: boolean;\n  highlight?: boolean;\n}\n\nexport function OperationEditor({\n  operation,\n  index,\n  onRemove,\n  onChange,\n  onRunQuery,\n  queryModeller,\n  query,\n  datasource,\n  flash,\n  highlight,\n}: Props) {\n  const styles = useStyles2(getStyles);\n  const def = queryModeller.getOperationDef(operation.id);\n  const shouldFlash = useFlash(flash);\n\n  if (!def) {\n    return <span>Operation {operation.id} not found</span>;\n  }\n\n  const onParamValueChanged = (paramIdx: number, value: QueryBuilderOperationParamValue) => {\n    const update: QueryBuilderOperation = { ...operation, params: [...operation.params] };\n    update.params[paramIdx] = value;\n    callParamChangedThenOnChange(def, update, index, paramIdx, onChange);\n  };\n\n  const onAddRestParam = () => {\n    const update: QueryBuilderOperation = { ...operation, params: [...operation.params, ''] };\n    callParamChangedThenOnChange(def, update, index, operation.params.length, onChange);\n  };\n\n  const onRemoveRestParam = (paramIdx: number) => {\n    const update: QueryBuilderOperation = {\n      ...operation,\n      params: [...operation.params.slice(0, paramIdx), ...operation.params.slice(paramIdx + 1)],\n    };\n    callParamChangedThenOnChange(def, update, index, paramIdx, onChange);\n  };\n\n  const operationElements: React.ReactNode[] = [];\n\n  for (let paramIndex = 0; paramIndex < operation.params.length; paramIndex++) {\n    const paramDef = def.params[Math.min(def.params.length - 1, paramIndex)];\n    const Editor = getOperationParamEditor(paramDef);\n\n    operationElements.push(\n      <div className={styles.paramRow} key={`${paramIndex}-1`}>\n        {!paramDef.hideName && (\n          <div className={styles.paramName}>\n            <label htmlFor={getOperationParamId(index, paramIndex)}>{paramDef.name}</label>\n            {paramDef.description && (\n              <Tooltip placement=\"top\" content={paramDef.description} theme=\"info\">\n                <Icon name=\"info-circle\" size=\"sm\" className={styles.infoIcon} />\n              </Tooltip>\n            )}\n          </div>\n        )}\n        <div className={styles.paramValue}>\n          <Stack gap={0.5} direction=\"row\" alignItems=\"center\" wrap={false}>\n            <Editor\n              index={paramIndex}\n              paramDef={paramDef}\n              value={operation.params[paramIndex]}\n              operation={operation}\n              operationIndex={index}\n              onChange={onParamValueChanged}\n              onRunQuery={onRunQuery}\n              query={query}\n              datasource={datasource}\n            />\n            {paramDef.restParam && (operation.params.length > def.params.length || paramDef.optional) && (\n              <Button\n                data-testid={`operations.${index}.remove-rest-param`}\n                size=\"sm\"\n                fill=\"text\"\n                icon=\"times\"\n                variant=\"secondary\"\n                title={`Remove ${paramDef.name}`}\n                onClick={() => onRemoveRestParam(paramIndex)}\n              />\n            )}\n          </Stack>\n        </div>\n      </div>\n    );\n  }\n\n  // Handle adding button for rest params\n  let restParam: React.ReactNode | undefined;\n  if (def.params.length > 0) {\n    const lastParamDef = def.params[def.params.length - 1];\n    if (lastParamDef.restParam) {\n      restParam = renderAddRestParamButton(lastParamDef, onAddRestParam, index, operation.params.length, styles);\n    }\n  }\n\n  return (\n    <Draggable draggableId={`operation-${index}`} index={index}>\n      {(provided) => (\n        <div\n          className={cx(styles.card, (shouldFlash || highlight) && styles.cardHighlight)}\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          data-testid={`operations.${index}.wrapper`}\n        >\n          <OperationHeader\n            operation={operation}\n            dragHandleProps={provided.dragHandleProps}\n            def={def}\n            index={index}\n            onChange={onChange}\n            onRemove={onRemove}\n            queryModeller={queryModeller}\n          />\n          <div className={styles.body}>{operationElements}</div>\n          {restParam}\n          {index < query.operations.length - 1 && (\n            <div className={styles.arrow}>\n              <div className={styles.arrowLine} />\n              <div className={styles.arrowArrow} />\n            </div>\n          )}\n        </div>\n      )}\n    </Draggable>\n  );\n}\n\n/**\n * When flash is switched on makes sure it is switched of right away, so we just flash the highlight and then fade\n * out.\n * @param flash\n */\nfunction useFlash(flash?: boolean) {\n  const [keepFlash, setKeepFlash] = useState(true);\n  useEffect(() => {\n    let t: any;\n    if (flash) {\n      t = setTimeout(() => {\n        setKeepFlash(false);\n      }, 1000);\n    } else {\n      setKeepFlash(true);\n    }\n\n    return () => clearTimeout(t);\n  }, [flash]);\n\n  return keepFlash && flash;\n}\n\nfunction renderAddRestParamButton(\n  paramDef: QueryBuilderOperationParamDef,\n  onAddRestParam: () => void,\n  operationIndex: number,\n  paramIndex: number,\n  styles: OperationEditorStyles\n) {\n  return (\n    <div className={styles.restParam} key={`${paramIndex}-2`}>\n      <Button\n        size=\"sm\"\n        icon=\"plus\"\n        title={`Add ${paramDef.name}`}\n        variant=\"secondary\"\n        onClick={onAddRestParam}\n        data-testid={`operations.${operationIndex}.add-rest-param`}\n      >\n        {paramDef.name}\n      </Button>\n    </div>\n  );\n}\n\nfunction callParamChangedThenOnChange(\n  def: QueryBuilderOperationDef,\n  operation: QueryBuilderOperation,\n  operationIndex: number,\n  paramIndex: number,\n  onChange: (index: number, update: QueryBuilderOperation) => void\n) {\n  if (def.paramChangedHandler) {\n    onChange(operationIndex, def.paramChangedHandler(paramIndex, operation, def));\n  } else {\n    onChange(operationIndex, operation);\n  }\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    card: css({\n      background: theme.colors.background.primary,\n      border: `1px solid ${theme.colors.border.medium}`,\n      display: 'flex',\n      flexDirection: 'column',\n      cursor: 'grab',\n      borderRadius: theme.shape.borderRadius(1),\n      marginBottom: theme.spacing(1),\n      position: 'relative',\n      transition: 'all 0.5s ease-in 0s',\n    }),\n    cardHighlight: css({\n      boxShadow: `0px 0px 4px 0px ${theme.colors.primary.border}`,\n      border: `1px solid ${theme.colors.primary.border}`,\n    }),\n    infoIcon: css({\n      marginLeft: theme.spacing(0.5),\n      color: theme.colors.text.secondary,\n      ':hover': {\n        color: theme.colors.text.primary,\n      },\n    }),\n    body: css({\n      margin: theme.spacing(1, 1, 0.5, 1),\n      display: 'table',\n    }),\n    paramRow: css({\n      label: 'paramRow',\n      display: 'table-row',\n      verticalAlign: 'middle',\n    }),\n    paramName: css({\n      display: 'table-cell',\n      padding: theme.spacing(0, 1, 0, 0),\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      verticalAlign: 'middle',\n      height: '32px',\n    }),\n    paramValue: css({\n      label: 'paramValue',\n      display: 'table-cell',\n      verticalAlign: 'middle',\n    }),\n    restParam: css({\n      padding: theme.spacing(0, 1, 1, 1),\n    }),\n    arrow: css({\n      position: 'absolute',\n      top: '0',\n      right: '-18px',\n      display: 'flex',\n    }),\n    arrowLine: css({\n      height: '2px',\n      width: '8px',\n      backgroundColor: theme.colors.border.strong,\n      position: 'relative',\n      top: '14px',\n    }),\n    arrowArrow: css({\n      width: 0,\n      height: 0,\n      borderTop: `5px solid transparent`,\n      borderBottom: `5px solid transparent`,\n      borderLeft: `7px solid ${theme.colors.border.strong}`,\n      position: 'relative',\n      top: '10px',\n    }),\n  };\n};\n\ntype OperationEditorStyles = ReturnType<typeof getStyles>;\n","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { DragDropContext, Droppable, DropResult } from 'react-beautiful-dnd';\nimport { useMountedState, usePrevious } from 'react-use';\n\nimport { DataSourceApi, GrafanaTheme2 } from '@grafana/data';\nimport { Button, Cascader, CascaderOption, useStyles2 } from '@grafana/ui';\n\nimport { Stack } from '../../components/QueryEditor';\n\nimport { OperationEditor } from './OperationEditor';\nimport { QueryBuilderOperation, QueryWithOperations, VisualQueryModeller } from './types';\n\nexport interface Props<T extends QueryWithOperations> {\n  query: T;\n  datasource: DataSourceApi;\n  onChange: (query: T) => void;\n  onRunQuery: () => void;\n  queryModeller: VisualQueryModeller;\n  explainMode?: boolean;\n  highlightedOp?: QueryBuilderOperation;\n}\n\nexport function OperationList<T extends QueryWithOperations>({\n  query,\n  datasource,\n  queryModeller,\n  onChange,\n  onRunQuery,\n  highlightedOp,\n}: Props<T>) {\n  const styles = useStyles2(getStyles);\n  const { operations } = query;\n\n  const opsToHighlight = useOperationsHighlight(operations);\n\n  const [cascaderOpen, setCascaderOpen] = useState(false);\n\n  const onOperationChange = (index: number, update: QueryBuilderOperation) => {\n    const updatedList = [...operations];\n    updatedList.splice(index, 1, update);\n    onChange({ ...query, operations: updatedList });\n  };\n\n  const onRemove = (index: number) => {\n    const updatedList = [...operations.slice(0, index), ...operations.slice(index + 1)];\n    onChange({ ...query, operations: updatedList });\n  };\n\n  const addOptions: CascaderOption[] = queryModeller.getCategories().map((category) => {\n    return {\n      value: category,\n      label: category,\n      items: queryModeller.getOperationsForCategory(category).map((operation) => ({\n        value: operation.id,\n        label: operation.name,\n        isLeaf: true,\n      })),\n    };\n  });\n\n  const onAddOperation = (value: string) => {\n    const operationDef = queryModeller.getOperationDef(value);\n    if (!operationDef) {\n      return;\n    }\n    onChange(operationDef.addOperationHandler(operationDef, query, queryModeller));\n    setCascaderOpen(false);\n  };\n\n  const onDragEnd = (result: DropResult) => {\n    if (!result.destination) {\n      return;\n    }\n\n    const updatedList = [...operations];\n    const element = updatedList[result.source.index];\n    updatedList.splice(result.source.index, 1);\n    updatedList.splice(result.destination.index, 0, element);\n    onChange({ ...query, operations: updatedList });\n  };\n\n  const onCascaderBlur = () => {\n    setCascaderOpen(false);\n  };\n\n  return (\n    <Stack gap={1} direction=\"column\">\n      <Stack gap={1}>\n        {operations.length > 0 && (\n          <DragDropContext onDragEnd={onDragEnd}>\n            <Droppable droppableId=\"sortable-field-mappings\" direction=\"horizontal\">\n              {(provided) => (\n                <div className={styles.operationList} ref={provided.innerRef} {...provided.droppableProps}>\n                  {operations.map((op, index) => {\n                    return (\n                      <OperationEditor\n                        key={op.id + JSON.stringify(op.params) + index}\n                        queryModeller={queryModeller}\n                        index={index}\n                        operation={op}\n                        query={query}\n                        datasource={datasource}\n                        onChange={onOperationChange}\n                        onRemove={onRemove}\n                        onRunQuery={onRunQuery}\n                        flash={opsToHighlight[index]}\n                        highlight={highlightedOp === op}\n                      />\n                    );\n                  })}\n                  {provided.placeholder}\n                </div>\n              )}\n            </Droppable>\n          </DragDropContext>\n        )}\n        <div className={styles.addButton}>\n          {cascaderOpen ? (\n            <Cascader\n              options={addOptions}\n              onSelect={onAddOperation}\n              onBlur={onCascaderBlur}\n              autoFocus={true}\n              alwaysOpen={true}\n              hideActiveLevelLabel={true}\n              placeholder={'Search'}\n            />\n          ) : (\n            <Button icon={'plus'} variant={'secondary'} onClick={() => setCascaderOpen(true)} title={'Add operation'}>\n              Operations\n            </Button>\n          )}\n        </div>\n      </Stack>\n    </Stack>\n  );\n}\n\n/**\n * Returns indexes of operations that should be highlighted. We check the diff of operations added but at the same time\n * we want to highlight operations only after the initial render, so we check for mounted state and calculate the diff\n * only after.\n * @param operations\n */\nfunction useOperationsHighlight(operations: QueryBuilderOperation[]) {\n  const isMounted = useMountedState();\n  const prevOperations = usePrevious(operations);\n\n  if (!isMounted()) {\n    return operations.map(() => false);\n  }\n\n  if (!prevOperations) {\n    return operations.map(() => true);\n  }\n\n  let newOps: boolean[] = [];\n\n  if (prevOperations.length - 1 === operations.length && operations.every((op) => prevOperations.includes(op))) {\n    // In case we remove one op and does not change any ops then don't highlight anything.\n    return operations.map(() => false);\n  }\n  if (prevOperations.length + 1 === operations.length && prevOperations.every((op) => operations.includes(op))) {\n    // If we add a single op just find it and highlight just that.\n    const newOp = operations.find((op) => !prevOperations.includes(op));\n    newOps = operations.map((op) => {\n      return op === newOp;\n    });\n  } else {\n    // Default diff of all ops.\n    newOps = operations.map((op, index) => {\n      return !isSameOp(op.id, prevOperations[index]?.id);\n    });\n  }\n  return newOps;\n}\n\nfunction isSameOp(op1?: string, op2?: string) {\n  return op1 === op2 || `__${op1}_by` === op2 || op1 === `__${op2}_by`;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    heading: css({\n      label: 'heading',\n      fontSize: 12,\n      fontWeight: theme.typography.fontWeightMedium,\n      marginBottom: 0,\n    }),\n    operationList: css({\n      label: 'operationList',\n      display: 'flex',\n      flexWrap: 'wrap',\n      gap: theme.spacing(2),\n    }),\n    addButton: css({\n      label: 'addButton',\n      width: 126,\n      paddingBottom: theme.spacing(1),\n    }),\n  };\n};\n","import { useCallback, useEffect, useRef } from 'react';\nexport default function useMountedState() {\n    var mountedRef = useRef(false);\n    var get = useCallback(function () { return mountedRef.current; }, []);\n    useEffect(function () {\n        mountedRef.current = true;\n        return function () {\n            mountedRef.current = false;\n        };\n    }, []);\n    return get;\n}\n","import { css, cx } from '@emotion/css';\nimport Prism, { Grammar } from 'prismjs';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useTheme2 } from '@grafana/ui';\n\nexport interface Props {\n  query: string;\n  lang: {\n    grammar: Grammar;\n    name: string;\n  };\n}\nexport function RawQuery({ query, lang }: Props) {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  const highlighted = Prism.highlight(query, lang.grammar, lang.name);\n\n  return (\n    <div\n      className={cx(styles.editorField, 'prism-syntax-highlight')}\n      aria-label=\"selector\"\n      dangerouslySetInnerHTML={{ __html: highlighted }}\n    />\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    editorField: css({\n      fontFamily: theme.typography.fontFamilyMonospace,\n      fontSize: theme.typography.bodySmall.fontSize,\n    }),\n  };\n};\n","import { Grammar } from 'prismjs';\nimport React from 'react';\n\nimport { OperationExplainedBox } from './OperationExplainedBox';\nimport { RawQuery } from './RawQuery';\nimport { QueryBuilderOperation, QueryWithOperations, VisualQueryModeller } from './types';\n\nexport interface Props<T extends QueryWithOperations> {\n  query: T;\n  queryModeller: VisualQueryModeller;\n  explainMode?: boolean;\n  stepNumber: number;\n  lang: {\n    grammar: Grammar;\n    name: string;\n  };\n  onMouseEnter?: (op: QueryBuilderOperation, index: number) => void;\n  onMouseLeave?: (op: QueryBuilderOperation, index: number) => void;\n}\n\nexport function OperationListExplained<T extends QueryWithOperations>({\n  query,\n  queryModeller,\n  stepNumber,\n  lang,\n  onMouseEnter,\n  onMouseLeave,\n}: Props<T>) {\n  return (\n    <>\n      {query.operations.map((op, index) => {\n        const def = queryModeller.getOperationDef(op.id);\n        if (!def) {\n          return `Operation ${op.id} not found`;\n        }\n        const title = def.renderer(op, def, '<expr>');\n        const body = def.explainHandler ? def.explainHandler(op, def) : def.documentation ?? 'no docs';\n\n        return (\n          <div\n            key={index}\n            onMouseEnter={() => onMouseEnter?.(op, index)}\n            onMouseLeave={() => onMouseLeave?.(op, index)}\n          >\n            <OperationExplainedBox\n              stepNumber={index + stepNumber}\n              title={<RawQuery query={title} lang={lang} />}\n              markdown={body}\n            />\n          </div>\n        );\n      })}\n    </>\n  );\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { Stack } from \"../../components/QueryEditor\";\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nexport function OperationsEditorRow({ children }: Props) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.root}>\n      <Stack gap={1}>{children}</Stack>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    root: css({\n      padding: theme.spacing(1, 1, 0, 1),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.borderRadius(1),\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport React, { useState, useEffect } from 'react';\n\nimport { GrafanaTheme2, PanelData, QueryHint } from '@grafana/data';\nimport { Button, Tooltip, useStyles2 } from '@grafana/ui';\n\nimport { PrometheusDatasource } from '../../datasource';\n\nimport { LokiAndPromQueryModellerBase, PromLokiVisualQuery } from './LokiAndPromQueryModellerBase';\n\nexport interface Props<T extends PromLokiVisualQuery> {\n  query: T;\n  datasource: PrometheusDatasource;\n  queryModeller: LokiAndPromQueryModellerBase;\n  buildVisualQueryFromString: (expr: string) => { query: T };\n  onChange: (update: T) => void;\n  data?: PanelData;\n}\n\nexport const QueryBuilderHints = <T extends PromLokiVisualQuery>({\n  datasource,\n  query: visualQuery,\n  onChange,\n  data,\n  queryModeller,\n  buildVisualQueryFromString,\n}: Props<T>) => {\n  const [hints, setHints] = useState<QueryHint[]>([]);\n  const styles = useStyles2(getStyles);\n\n  useEffect(() => {\n    const query = { expr: queryModeller.renderQuery(visualQuery), refId: '' };\n    // For now show only actionable hints\n    const hints = datasource.getQueryHints(query, data?.series || []).filter((hint) => hint.fix?.action);\n    setHints(hints);\n  }, [datasource, visualQuery, data, queryModeller]);\n\n  return (\n    <>\n      {hints.length > 0 && (\n        <div className={styles.container}>\n          {hints.map((hint) => {\n            return (\n              <Tooltip content={`${hint.label} ${hint.fix?.label}`} key={hint.type}>\n                <Button\n                  onClick={() => {\n                    if (hint?.fix?.action) {\n                      const query = { expr: queryModeller.renderQuery(visualQuery), refId: '' };\n                      const newQuery = datasource.modifyQuery(query, hint.fix.action);\n                      const newVisualQuery = buildVisualQueryFromString(newQuery.expr);\n                      return onChange(newVisualQuery.query);\n                    }\n                  }}\n                  fill=\"outline\"\n                  size=\"sm\"\n                  className={styles.hint}\n                >\n                  {'hint: ' + hint.fix?.action?.type.toLowerCase().replace('_', ' ') + '()'}\n                </Button>\n              </Tooltip>\n            );\n          })}\n        </div>\n      )}\n    </>\n  );\n};\n\nQueryBuilderHints.displayName = 'QueryBuilderHints';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    container: css`\n      display: flex;\n      align-items: start;\n    `,\n    hint: css`\n      margin-right: ${theme.spacing(1)};\n    `,\n  };\n};\n","import { css } from '@emotion/css';\nimport React, { useCallback, useState } from 'react';\nimport Highlighter from 'react-highlight-words';\n\nimport { SelectableValue, toOption, GrafanaTheme2 } from '@grafana/data';\nimport { Select, FormatOptionLabelMeta, useStyles2 } from '@grafana/ui';\n\nimport { EditorField, EditorFieldGroup } from '../../components/QueryEditor';\nimport { PromVisualQuery } from '../types';\n\n// We are matching words split with space\nconst splitSeparator = ' ';\n\nexport interface Props {\n  query: PromVisualQuery;\n  onChange: (query: PromVisualQuery) => void;\n  onGetMetrics: () => Promise<SelectableValue[]>;\n}\n\nexport function MetricSelect({ query, onChange, onGetMetrics }: Props) {\n  const styles = useStyles2(getStyles);\n  const [state, setState] = useState<{\n    metrics?: Array<SelectableValue<any>>;\n    isLoading?: boolean;\n  }>({});\n\n  const customFilterOption = useCallback((option: SelectableValue<any>, searchQuery: string) => {\n    const label = option.label ?? option.value;\n    if (!label) {\n      return false;\n    }\n\n    // custom value is not a string label but a react node\n    if (!label.toLowerCase) {\n      return true;\n    }\n\n    const searchWords = searchQuery.split(splitSeparator);\n    return searchWords.reduce((acc, cur) => acc && label.toLowerCase().includes(cur.toLowerCase()), true);\n  }, []);\n\n  const formatOptionLabel = useCallback(\n    (option: SelectableValue<any>, meta: FormatOptionLabelMeta<any>) => {\n      // For newly created custom value we don't want to add highlight\n      if (option['__isNew__']) {\n        return option.label;\n      }\n\n      return (\n        <Highlighter\n          searchWords={meta.inputValue.split(splitSeparator)}\n          textToHighlight={option.label ?? ''}\n          highlightClassName={styles.highlight}\n        />\n      );\n    },\n    [styles.highlight]\n  );\n\n  return (\n    <EditorFieldGroup>\n      <EditorField label=\"Metric\">\n        <Select\n          inputId=\"prometheus-metric-select\"\n          className={styles.select}\n          value={query.metric ? toOption(query.metric) : undefined}\n          placeholder=\"Select metric\"\n          allowCustomValue\n          formatOptionLabel={formatOptionLabel}\n          filterOption={customFilterOption}\n          onOpenMenu={async () => {\n            setState({ isLoading: true });\n            const metrics = await onGetMetrics();\n            setState({ metrics, isLoading: undefined });\n          }}\n          isLoading={state.isLoading}\n          options={state.metrics}\n          onChange={({ value }) => {\n            if (value) {\n              onChange({ ...query, metric: value });\n            }\n          }}\n        />\n      </EditorField>\n    </EditorFieldGroup>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  select: css`\n    min-width: 125px;\n  `,\n  highlight: css`\n    label: select__match-highlight;\n    background: inherit;\n    padding: inherit;\n    color: ${theme.colors.warning.contrastText};\n    background-color: ${theme.colors.warning.main};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2, toOption } from '@grafana/data';\nimport { AutoSizeInput, IconButton, Select, useStyles2 } from '@grafana/ui';\n\nimport { EditorRows, FlexItem } from '../../components/QueryEditor';\nimport { PrometheusDatasource } from '../../datasource';\nimport { binaryScalarDefs } from '../binaryScalarOperations';\nimport { PromVisualQueryBinary } from '../types';\n\nimport { PromQueryBuilder } from './PromQueryBuilder';\n\nexport interface Props {\n  nestedQuery: PromVisualQueryBinary;\n  datasource: PrometheusDatasource;\n  index: number;\n  onChange: (index: number, update: PromVisualQueryBinary) => void;\n  onRemove: (index: number) => void;\n  onRunQuery: () => void;\n  showExplain: boolean;\n}\n\nexport const NestedQuery = React.memo<Props>((props) => {\n  const { nestedQuery, index, datasource, onChange, onRemove, onRunQuery, showExplain } = props;\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.card}>\n      <div className={styles.header}>\n        <div className={styles.name}>Operator</div>\n        <Select\n          width=\"auto\"\n          options={operators}\n          value={toOption(nestedQuery.operator)}\n          onChange={(value) => {\n            onChange(index, {\n              ...nestedQuery,\n              operator: value.value!,\n            });\n          }}\n        />\n        <div className={styles.name}>Vector matches</div>\n        <div className={styles.vectorMatchWrapper}>\n          <Select<PromVisualQueryBinary['vectorMatchesType']>\n            width=\"auto\"\n            value={nestedQuery.vectorMatchesType || 'on'}\n            allowCustomValue\n            options={[\n              { value: 'on', label: 'on' },\n              { value: 'ignoring', label: 'ignoring' },\n            ]}\n            onChange={(val) => {\n              onChange(index, {\n                ...nestedQuery,\n                vectorMatchesType: val.value,\n              });\n            }}\n          />\n          <AutoSizeInput\n            className={styles.vectorMatchInput}\n            minWidth={20}\n            defaultValue={nestedQuery.vectorMatches}\n            onCommitChange={(evt) => {\n              onChange(index, {\n                ...nestedQuery,\n                vectorMatches: evt.currentTarget.value,\n                vectorMatchesType: nestedQuery.vectorMatchesType || 'on',\n              });\n            }}\n          />\n        </div>\n        <FlexItem grow={1} />\n        <IconButton name=\"times\" size=\"sm\" onClick={() => onRemove(index)} />\n      </div>\n      <div className={styles.body}>\n        <EditorRows>\n          <PromQueryBuilder\n            showExplain={showExplain}\n            query={nestedQuery.query}\n            datasource={datasource}\n            onRunQuery={onRunQuery}\n            onChange={(update) => {\n              onChange(index, { ...nestedQuery, query: update });\n            }}\n          />\n        </EditorRows>\n      </div>\n    </div>\n  );\n});\n\nconst operators = binaryScalarDefs.map((def) => ({ label: def.sign, value: def.sign }));\n\nNestedQuery.displayName = 'NestedQuery';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    card: css({\n      label: 'card',\n      display: 'flex',\n      flexDirection: 'column',\n      gap: theme.spacing(0.5),\n    }),\n    header: css({\n      label: 'header',\n      padding: theme.spacing(0.5, 0.5, 0.5, 1),\n      gap: theme.spacing(1),\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    name: css({\n      label: 'name',\n      whiteSpace: 'nowrap',\n    }),\n    body: css({\n      label: 'body',\n      paddingLeft: theme.spacing(2),\n    }),\n    vectorMatchInput: css({\n      label: 'vectorMatchInput',\n      marginLeft: -1,\n    }),\n    vectorMatchWrapper: css({\n      label: 'vectorMatchWrapper',\n      display: 'flex',\n    }),\n  };\n};\n","import React from 'react';\n\nimport { Stack } from '../../components/QueryEditor';\nimport { PrometheusDatasource } from '../../datasource';\nimport { PromVisualQuery, PromVisualQueryBinary } from '../types';\n\nimport { NestedQuery } from './NestedQuery';\n\nexport interface Props {\n  query: PromVisualQuery;\n  datasource: PrometheusDatasource;\n  onChange: (query: PromVisualQuery) => void;\n  onRunQuery: () => void;\n  showExplain: boolean;\n}\n\nexport function NestedQueryList(props: Props) {\n  const { query, datasource, onChange, onRunQuery, showExplain } = props;\n  const nestedQueries = query.binaryQueries ?? [];\n\n  const onNestedQueryUpdate = (index: number, update: PromVisualQueryBinary) => {\n    const updatedList = [...nestedQueries];\n    updatedList.splice(index, 1, update);\n    onChange({ ...query, binaryQueries: updatedList });\n  };\n\n  const onRemove = (index: number) => {\n    const updatedList = [...nestedQueries.slice(0, index), ...nestedQueries.slice(index + 1)];\n    onChange({ ...query, binaryQueries: updatedList });\n  };\n\n  return (\n    <Stack direction=\"column\" gap={1}>\n      {nestedQueries.map((nestedQuery, index) => (\n        <NestedQuery\n          key={index.toString()}\n          nestedQuery={nestedQuery}\n          index={index}\n          onChange={onNestedQueryUpdate}\n          datasource={datasource}\n          onRemove={onRemove}\n          onRunQuery={onRunQuery}\n          showExplain={showExplain}\n        />\n      ))}\n    </Stack>\n  );\n}\n","import React from 'react';\n\nimport { Stack } from '../../components/QueryEditor';\nimport metricsqlGrammar from '../../metricsql';\nimport { promQueryModeller } from '../PromQueryModeller';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { OperationExplainedBox } from '../shared/OperationExplainedBox';\nimport { OperationListExplained } from '../shared/OperationListExplained';\nimport { RawQuery } from '../shared/RawQuery';\nimport { PromVisualQuery } from '../types';\n\nexport const EXPLAIN_LABEL_FILTER_CONTENT = 'Fetch all series matching metric name and label filters.';\n\nexport interface Props {\n  query: string;\n}\n\nexport const PromQueryBuilderExplained = React.memo<Props>(({ query }) => {\n  const visQuery = buildVisualQueryFromString(query || '').query;\n  const lang = { grammar: metricsqlGrammar, name: 'promql' };\n\n  return (\n    <Stack gap={0.5} direction=\"column\">\n      <OperationExplainedBox\n        stepNumber={1}\n        title={<RawQuery query={`${visQuery.metric} ${promQueryModeller.renderLabels(visQuery.labels)}`} lang={lang} />}\n      >\n        {EXPLAIN_LABEL_FILTER_CONTENT}\n      </OperationExplainedBox>\n      <OperationListExplained<PromVisualQuery>\n        stepNumber={2}\n        queryModeller={promQueryModeller}\n        query={visQuery}\n        lang={lang}\n      />\n    </Stack>\n  );\n});\n\nPromQueryBuilderExplained.displayName = 'PromQueryBuilderExplained';\n","import React, { useCallback, useState } from 'react';\n\nimport { DataSourceApi, PanelData, SelectableValue } from '@grafana/data';\n\nimport { EditorRow } from '../../components/QueryEditor';\nimport { PrometheusDatasource } from '../../datasource';\nimport { getMetadataString } from '../../language_provider';\nimport metricsqlGrammar from '../../metricsql';\nimport { promQueryModeller } from '../PromQueryModeller';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { LabelFilters } from '../shared/LabelFilters';\nimport { OperationExplainedBox } from '../shared/OperationExplainedBox';\nimport { OperationList } from '../shared/OperationList';\nimport { OperationListExplained } from '../shared/OperationListExplained';\nimport { OperationsEditorRow } from '../shared/OperationsEditorRow';\nimport { QueryBuilderHints } from '../shared/QueryBuilderHints';\nimport { RawQuery } from '../shared/RawQuery';\nimport { QueryBuilderLabelFilter, QueryBuilderOperation } from '../shared/types';\nimport { PromVisualQuery } from '../types';\n\nimport { MetricSelect } from './MetricSelect';\nimport { NestedQueryList } from './NestedQueryList';\nimport { EXPLAIN_LABEL_FILTER_CONTENT } from './PromQueryBuilderExplained';\n\nexport interface Props {\n  query: PromVisualQuery;\n  datasource: PrometheusDatasource;\n  onChange: (update: PromVisualQuery) => void;\n  onRunQuery: () => void;\n  data?: PanelData;\n  showExplain: boolean;\n}\n\nexport const PromQueryBuilder = React.memo<Props>((props) => {\n  const { datasource, query, onChange, onRunQuery, data, showExplain } = props;\n  const [highlightedOp, setHighlightedOp] = useState<QueryBuilderOperation | undefined>();\n  const onChangeLabels = (labels: QueryBuilderLabelFilter[]) => {\n    onChange({ ...query, labels });\n  };\n\n  /**\n   * Map metric metadata to SelectableValue for Select component and also adds defined template variables to the list.\n   */\n  const withTemplateVariableOptions = useCallback(\n    async (optionsPromise: Promise<Array<{ value: string; description?: string }>>): Promise<SelectableValue[]> => {\n      const variables = datasource.getVariables();\n      const options = await optionsPromise;\n      return [\n        ...variables.map((value) => ({ label: value, value })),\n        ...options.map((option) => ({ label: option.value, value: option.value, title: option.description })),\n      ];\n    },\n    [datasource]\n  );\n\n  const onGetLabelNames = async (forLabel: Partial<QueryBuilderLabelFilter>): Promise<Array<{ value: string }>> => {\n    // If no metric we need to use a different method\n    if (!query.metric) {\n      // Todo add caching but inside language provider!\n      await datasource.languageProvider.fetchLabels();\n      return datasource.languageProvider.getLabelKeys().map((k) => ({ value: k }));\n    }\n\n    const labelsToConsider = query.labels.filter((x) => x !== forLabel);\n    labelsToConsider.push({ label: '__name__', op: '=', value: query.metric });\n    const expr = promQueryModeller.renderLabels(labelsToConsider);\n    const labelsIndex = await datasource.languageProvider.fetchSeriesLabels(expr);\n\n    // filter out already used labels\n    return Object.keys(labelsIndex)\n      .filter((labelName) => !labelsToConsider.find((filter) => filter.label === labelName))\n      .map((k) => ({ value: k }));\n  };\n\n  const onGetLabelValues = async (forLabel: Partial<QueryBuilderLabelFilter>) => {\n    if (!forLabel.label) {\n      return [];\n    }\n\n    // If no metric we need to use a different method\n    if (!query.metric) {\n      return (await datasource.languageProvider.getLabelValues(forLabel.label)).map((v) => ({ value: v }));\n    }\n\n    const labelsToConsider = query.labels.filter((x) => x !== forLabel);\n    labelsToConsider.push({ label: '__name__', op: '=', value: query.metric });\n    const expr = promQueryModeller.renderLabels(labelsToConsider);\n    const result = await datasource.languageProvider.fetchSeriesLabels(expr);\n    const forLabelInterpolated = datasource.interpolateString(forLabel.label);\n    return result[forLabelInterpolated].map((v) => ({ value: v })) ?? [];\n  };\n\n  const onGetMetrics = useCallback(() => {\n    return withTemplateVariableOptions(getMetrics(datasource, query));\n  }, [datasource, query, withTemplateVariableOptions]);\n\n  const lang = { grammar: metricsqlGrammar, name: 'promql' };\n\n  return (\n    <>\n      <EditorRow>\n        <MetricSelect query={query} onChange={onChange} onGetMetrics={onGetMetrics} />\n        <LabelFilters\n          labelsFilters={query.labels}\n          onChange={onChangeLabels}\n          onGetLabelNames={(forLabel: Partial<QueryBuilderLabelFilter>) =>\n            withTemplateVariableOptions(onGetLabelNames(forLabel))\n          }\n          onGetLabelValues={(forLabel: Partial<QueryBuilderLabelFilter>) =>\n            withTemplateVariableOptions(onGetLabelValues(forLabel))\n          }\n        />\n      </EditorRow>\n      {showExplain && (\n        <OperationExplainedBox\n          stepNumber={1}\n          title={<RawQuery query={`${query.metric} ${promQueryModeller.renderLabels(query.labels)}`} lang={lang} />}\n        >\n          {EXPLAIN_LABEL_FILTER_CONTENT}\n        </OperationExplainedBox>\n      )}\n      <OperationsEditorRow>\n        <OperationList<PromVisualQuery>\n          queryModeller={promQueryModeller}\n          datasource={datasource as DataSourceApi}\n          query={query}\n          onChange={onChange}\n          onRunQuery={onRunQuery}\n          highlightedOp={highlightedOp}\n        />\n        <QueryBuilderHints<PromVisualQuery>\n          datasource={datasource}\n          query={query}\n          onChange={onChange}\n          data={data}\n          queryModeller={promQueryModeller}\n          buildVisualQueryFromString={buildVisualQueryFromString}\n        />\n      </OperationsEditorRow>\n      {showExplain && (\n        <OperationListExplained<PromVisualQuery>\n          lang={lang}\n          query={query}\n          stepNumber={2}\n          queryModeller={promQueryModeller}\n          onMouseEnter={(op) => setHighlightedOp(op)}\n          onMouseLeave={() => setHighlightedOp(undefined)}\n        />\n      )}\n      {query.binaryQueries && query.binaryQueries.length > 0 && (\n        <NestedQueryList\n          query={query}\n          datasource={datasource}\n          onChange={onChange}\n          onRunQuery={onRunQuery}\n          showExplain={showExplain}\n        />\n      )}\n    </>\n  );\n});\n\n/**\n * Returns list of metrics, either all or filtered by query param. It also adds description string to each metric if it\n * exists.\n * @param datasource\n * @param query\n */\nasync function getMetrics(\n  datasource: PrometheusDatasource,\n  query: PromVisualQuery\n): Promise<Array<{ value: string; description?: string }>> {\n  // Makes sure we loaded the metadata for metrics. Usually this is done in the start() method of the provider but we\n  // don't use it with the visual builder and there is no need to run all the start() setup anyway.\n  if (!datasource.languageProvider.metricsMetadata) {\n    await datasource.languageProvider.loadMetricsMetadata();\n  }\n\n  // Error handling for when metrics metadata returns as undefined\n  if (!datasource.languageProvider.metricsMetadata) {\n    datasource.languageProvider.metricsMetadata = {};\n  }\n\n  let metrics;\n  if (query.labels.length > 0) {\n    const expr = promQueryModeller.renderLabels(query.labels);\n    metrics = (await datasource.languageProvider.getSeries(expr, true))['__name__'] ?? [];\n  } else {\n    metrics = (await datasource.languageProvider.getLabelValues('__name__')) ?? [];\n  }\n\n  return metrics.map((m) => ({\n    value: m,\n    description: getMetadataString(m, datasource.languageProvider.metricsMetadata!),\n  }));\n}\n\nPromQueryBuilder.displayName = 'PromQueryBuilder';\n","import React from 'react';\n\nimport { EditorRow, EditorFieldGroup, EditorField } from '../../components/QueryEditor';\nimport metricsqlGrammar from '../../metricsql';\nimport { RawQuery } from '../shared/RawQuery';\n\nexport interface Props {\n  query: string;\n}\n\nexport function QueryPreview({ query }: Props) {\n  return (\n    <EditorRow>\n      <EditorFieldGroup>\n        <EditorField label=\"Raw query\">\n          <RawQuery query={query} lang={{ grammar: metricsqlGrammar, name: 'promql' }} />\n        </EditorField>\n      </EditorFieldGroup>\n    </EditorRow>\n  );\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport React, { useEffect, useReducer } from 'react';\n\nimport { PanelData } from '@grafana/data';\n\nimport { PrometheusDatasource } from '../../datasource';\nimport { PromQuery } from '../../types';\nimport { promQueryModeller } from '../PromQueryModeller';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { PromVisualQuery } from '../types';\n\nimport { PromQueryBuilder } from './PromQueryBuilder';\nimport { QueryPreview } from './QueryPreview';\n\nexport interface Props {\n  query: PromQuery;\n  datasource: PrometheusDatasource;\n  onChange: (update: PromQuery) => void;\n  onRunQuery: () => void;\n  data?: PanelData;\n  showRawQuery?: boolean;\n  showExplain: boolean;\n}\n\nexport interface State {\n  visQuery?: PromVisualQuery;\n  expr: string;\n}\n\n/**\n * This component is here just to contain the translation logic between string query and the visual query builder model.\n */\nexport function PromQueryBuilderContainer(props: Props) {\n  const { query, onChange, onRunQuery, datasource, data, showRawQuery, showExplain } = props;\n  const [state, dispatch] = useReducer(stateSlice.reducer, { expr: query.expr });\n\n  // Only rebuild visual query if expr changes from outside\n  useEffect(() => {\n    dispatch(exprChanged(query.expr));\n  }, [query.expr]);\n\n  const onVisQueryChange = (visQuery: PromVisualQuery) => {\n    const expr = promQueryModeller.renderQuery(visQuery);\n    dispatch(visualQueryChange({ visQuery, expr }));\n    onChange({ ...props.query, expr: expr });\n  };\n\n  if (!state.visQuery) {\n    return null;\n  }\n\n  return (\n    <>\n      <PromQueryBuilder\n        query={state.visQuery}\n        datasource={datasource}\n        onChange={onVisQueryChange}\n        onRunQuery={onRunQuery}\n        data={data}\n        showExplain={showExplain}\n      />\n      {showRawQuery && <QueryPreview query={query.expr} />}\n    </>\n  );\n}\n\nconst stateSlice = createSlice({\n  name: 'prom-builder-container',\n  initialState: { expr: '' } as State,\n  reducers: {\n    visualQueryChange: (state, action: PayloadAction<{ visQuery: PromVisualQuery; expr: string }>) => {\n      state.expr = action.payload.expr;\n      state.visQuery = action.payload.visQuery;\n    },\n    exprChanged: (state, action: PayloadAction<string>) => {\n      if (!state.visQuery || state.expr !== action.payload) {\n        state.expr = action.payload;\n        const parseResult = buildVisualQueryFromString(action.payload);\n        state.visQuery = parseResult.query;\n      }\n    },\n  },\n});\n\nconst { visualQueryChange, exprChanged } = stateSlice.actions;\n","import { css, cx } from '@emotion/css';\nimport { isEqual } from 'lodash';\nimport React, { memo, useCallback } from 'react';\nimport { usePrevious } from 'react-use';\n\nimport { InlineFormLabel, RadioButtonGroup } from '@grafana/ui';\n\nimport { PrometheusDatasource } from '../datasource';\nimport { PromQuery } from '../types';\n\nexport interface PromExploreExtraFieldProps {\n  query: PromQuery;\n  onChange: (value: PromQuery) => void;\n  onRunQuery: () => void;\n  datasource: PrometheusDatasource;\n}\n\nexport const PromExploreExtraField: React.FC<PromExploreExtraFieldProps> = memo(\n  ({ query, onChange, onRunQuery }) => {\n    const rangeOptions = getQueryTypeOptions(true);\n    const prevQuery = usePrevious(query);\n\n    function onChangeQueryStep(interval: string) {\n      onChange({ ...query, interval });\n    }\n\n    function onStepChange(e: React.SyntheticEvent<HTMLInputElement>) {\n      if (e.currentTarget.value !== query.interval) {\n        onChangeQueryStep(e.currentTarget.value);\n      }\n    }\n\n    function onReturnKeyDown(e: React.KeyboardEvent<HTMLInputElement>) {\n      if (e.key === 'Enter' && e.shiftKey) {\n        onRunQuery();\n      }\n    }\n\n    const onQueryTypeChange = getQueryTypeChangeHandler(query, onChange);\n\n    return (\n      <div aria-label=\"Prometheus extra field\" className=\"gf-form-inline\" data-testid={testIds.extraFieldEditor}>\n        {/*Query type field*/}\n        <div\n          data-testid={testIds.queryTypeField}\n          className={cx(\n            'gf-form explore-input-margin',\n            css`\n              flex-wrap: nowrap;\n            `\n          )}\n          aria-label=\"Query type field\"\n        >\n          <InlineFormLabel width=\"auto\">Query type</InlineFormLabel>\n\n          <RadioButtonGroup\n            options={rangeOptions}\n            value={query.range && query.instant ? 'both' : query.instant ? 'instant' : 'range'}\n            onChange={onQueryTypeChange}\n          />\n        </div>\n        {/*Step field*/}\n        <div\n          data-testid={testIds.stepField}\n          className={cx(\n            'gf-form',\n            css`\n              flex-wrap: nowrap;\n            `\n          )}\n          aria-label=\"Step field\"\n        >\n          <InlineFormLabel\n            width={6}\n            tooltip={\n              'Time units and built-in variables can be used here, for example: $__interval, $__rate_interval, 5s, 1m, 3h, 1d, 1y (Default if no unit is specified: s)'\n            }\n          >\n            Min step\n          </InlineFormLabel>\n          <input\n            type={'text'}\n            className=\"gf-form-input width-4\"\n            placeholder={'auto'}\n            onChange={onStepChange}\n            onKeyDown={onReturnKeyDown}\n            value={query.interval ?? ''}\n          />\n        </div>\n      </div>\n    );\n  }\n);\n\nPromExploreExtraField.displayName = 'PromExploreExtraField';\n\nexport function getQueryTypeOptions(includeBoth: boolean) {\n  const rangeOptions = [\n    { value: 'range', label: 'Range', description: 'Run query over a range of time' },\n    {\n      value: 'instant',\n      label: 'Instant',\n      description: 'Run query against a single point in time. For this query, the \"To\" time is used',\n    },\n  ];\n\n  if (includeBoth) {\n    rangeOptions.push({ value: 'both', label: 'Both', description: 'Run an Instant query and a Range query' });\n  }\n\n  return rangeOptions;\n}\n\nexport function getQueryTypeChangeHandler(query: PromQuery, onChange: (update: PromQuery) => void) {\n  return (queryType: string) => {\n    if (queryType === 'instant') {\n      onChange({ ...query, instant: true, range: false, exemplar: false });\n    } else if (queryType === 'range') {\n      onChange({ ...query, instant: false, range: true });\n    } else {\n      onChange({ ...query, instant: true, range: true });\n    }\n  };\n}\n\nexport const testIds = {\n  extraFieldEditor: 'prom-editor-extra-field',\n  stepField: 'prom-editor-extra-field-step',\n  queryTypeField: 'prom-editor-extra-field-query-type',\n};\n","import { map } from 'lodash';\nimport React, { FC, useEffect, useState, memo } from 'react';\n\nimport { DataQueryRequest, PanelData, ScopedVars, textUtil, rangeUtil } from '@grafana/data';\n\nimport { PrometheusDatasource } from '../datasource';\nimport { PromQuery } from '../types';\n\ninterface Props {\n  datasource: PrometheusDatasource;\n  query: PromQuery;\n  panelData?: PanelData;\n}\n\nconst PromLink: FC<Props> = ({ panelData, query, datasource }) => {\n  const [href, setHref] = useState('');\n\n  useEffect(() => {\n    if (panelData) {\n      const getExternalLink = () => {\n        if (!panelData.request) {\n          return '';\n        }\n\n        const {\n          request: { range, interval, scopedVars },\n        } = panelData;\n\n        const start = datasource.getPrometheusTime(range.from, false);\n        const end = datasource.getPrometheusTime(range.to, true);\n        const rangeDiff = Math.ceil(end - start);\n        const endTime = range.to.utc().format('YYYY-MM-DD HH:mm');\n\n        const enrichedScopedVars: ScopedVars = {\n          ...scopedVars,\n          // As we support $__rate_interval variable in min step, we need add it to scopedVars\n          ...datasource.getRateIntervalScopedVariable(\n            rangeUtil.intervalToSeconds(interval),\n            rangeUtil.intervalToSeconds(datasource.interval)\n          ),\n        };\n\n        const options = {\n          interval,\n          scopedVars: enrichedScopedVars,\n        } as DataQueryRequest<PromQuery>;\n\n        const customQueryParameters: { [key: string]: string } = {};\n        if (datasource.customQueryParameters) {\n          for (const [k, v] of datasource.customQueryParameters) {\n            customQueryParameters[k] = v;\n          }\n        }\n\n        const queryOptions = datasource.createQuery(query, options, start, end);\n\n        const expr = {\n          ...customQueryParameters,\n          'g0.expr': queryOptions.expr,\n          'g0.range_input': rangeDiff + 's',\n          'g0.end_input': endTime,\n          'g0.step_input': queryOptions.step,\n          'g0.tab': 0,\n        };\n\n        const args = map(expr, (v: string, k: string) => {\n          return k + '=' + encodeURIComponent(v);\n        }).join('&');\n        return `${datasource.directUrl}/graph?${args}`;\n      };\n\n      setHref(getExternalLink());\n    }\n  }, [datasource, panelData, query]);\n\n  return (\n    <a href={textUtil.sanitizeUrl(href)} target=\"_blank\" rel=\"noopener noreferrer\">\n      Prometheus\n    </a>\n  );\n};\n\nexport default memo(PromLink);\n","import React, { PureComponent } from 'react';\n\nimport store from '../store';\n\nexport interface Props<T> {\n  storageKey: string;\n  defaultValue: T;\n  children: (value: T, onSaveToStore: (value: T) => void, onDeleteFromStore: () => void) => React.ReactNode;\n}\n\ninterface State<T> {\n  value: T;\n}\n\nexport class LocalStorageValueProvider<T> extends PureComponent<Props<T>, State<T>> {\n  constructor(props: Props<T>) {\n    super(props);\n\n    const { storageKey, defaultValue } = props;\n\n    this.state = {\n      value: store.getObject(storageKey, defaultValue),\n    };\n  }\n\n  onSaveToStore = (value: T) => {\n    const { storageKey } = this.props;\n    try {\n      store.setObject(storageKey, value);\n    } catch (error) {\n      console.error(error);\n    }\n    this.setState({ value });\n  };\n\n  onDeleteFromStore = () => {\n    const { storageKey, defaultValue } = this.props;\n    try {\n      store.delete(storageKey);\n    } catch (error) {\n      console.log(error);\n    }\n    this.setState({ value: defaultValue });\n  };\n\n  render() {\n    const { children } = this.props;\n    const { value } = this.state;\n\n    return <>{children(value, this.onSaveToStore, this.onDeleteFromStore)}</>;\n  }\n}\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","var safeIsNaN = Number.isNaN ||\n    function ponyfill(value) {\n        return typeof value === 'number' && value !== value;\n    };\nfunction isEqual(first, second) {\n    if (first === second) {\n        return true;\n    }\n    if (safeIsNaN(first) && safeIsNaN(second)) {\n        return true;\n    }\n    return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (!isEqual(newInputs[i], lastInputs[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var lastThis;\n    var lastArgs = [];\n    var lastResult;\n    var calledOnce = false;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n            return lastResult;\n        }\n        lastResult = resultFn.apply(this, newArgs);\n        calledOnce = true;\n        lastThis = this;\n        lastArgs = newArgs;\n        return lastResult;\n    }\n    return memoized;\n}\n\nexport default memoizeOne;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport memoizeOne from 'memoize-one';\nimport { createElement, PureComponent } from 'react';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\n// Animation frame based implementation of setTimeout.\n// Inspired by Joe Lambert, https://gist.github.com/joelambert/1002116#file-requesttimeout-js\nvar hasNativePerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';\nvar now = hasNativePerformanceNow ? function () {\n  return performance.now();\n} : function () {\n  return Date.now();\n};\nfunction cancelTimeout(timeoutID) {\n  cancelAnimationFrame(timeoutID.id);\n}\nfunction requestTimeout(callback, delay) {\n  var start = now();\n\n  function tick() {\n    if (now() - start >= delay) {\n      callback.call(null);\n    } else {\n      timeoutID.id = requestAnimationFrame(tick);\n    }\n  }\n\n  var timeoutID = {\n    id: requestAnimationFrame(tick)\n  };\n  return timeoutID;\n}\n\nvar size = -1; // This utility copied from \"dom-helpers\" package.\n\nfunction getScrollbarSize(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (size === -1 || recalculate) {\n    var div = document.createElement('div');\n    var style = div.style;\n    style.width = '50px';\n    style.height = '50px';\n    style.overflow = 'scroll';\n    document.body.appendChild(div);\n    size = div.offsetWidth - div.clientWidth;\n    document.body.removeChild(div);\n  }\n\n  return size;\n}\nvar cachedRTLResult = null; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).\n// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.\n// The safest way to check this is to intentionally set a negative offset,\n// and then verify that the subsequent \"scroll\" event matches the negative offset.\n// If it does not match, then we can assume a non-standard RTL scroll implementation.\n\nfunction getRTLOffsetType(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (cachedRTLResult === null || recalculate) {\n    var outerDiv = document.createElement('div');\n    var outerStyle = outerDiv.style;\n    outerStyle.width = '50px';\n    outerStyle.height = '50px';\n    outerStyle.overflow = 'scroll';\n    outerStyle.direction = 'rtl';\n    var innerDiv = document.createElement('div');\n    var innerStyle = innerDiv.style;\n    innerStyle.width = '100px';\n    innerStyle.height = '100px';\n    outerDiv.appendChild(innerDiv);\n    document.body.appendChild(outerDiv);\n\n    if (outerDiv.scrollLeft > 0) {\n      cachedRTLResult = 'positive-descending';\n    } else {\n      outerDiv.scrollLeft = 1;\n\n      if (outerDiv.scrollLeft === 0) {\n        cachedRTLResult = 'negative';\n      } else {\n        cachedRTLResult = 'positive-ascending';\n      }\n    }\n\n    document.body.removeChild(outerDiv);\n    return cachedRTLResult;\n  }\n\n  return cachedRTLResult;\n}\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL = 150;\n\nvar defaultItemKey = function defaultItemKey(_ref) {\n  var columnIndex = _ref.columnIndex,\n      data = _ref.data,\n      rowIndex = _ref.rowIndex;\n  return rowIndex + \":\" + columnIndex;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsOverscanCount = null;\nvar devWarningsOverscanRowsColumnsCount = null;\nvar devWarningsTagName = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsOverscanCount = /*#__PURE__*/new WeakSet();\n    devWarningsOverscanRowsColumnsCount = /*#__PURE__*/new WeakSet();\n    devWarningsTagName = /*#__PURE__*/new WeakSet();\n  }\n}\n\nfunction createGridComponent(_ref2) {\n  var _class;\n\n  var getColumnOffset = _ref2.getColumnOffset,\n      getColumnStartIndexForOffset = _ref2.getColumnStartIndexForOffset,\n      getColumnStopIndexForStartIndex = _ref2.getColumnStopIndexForStartIndex,\n      getColumnWidth = _ref2.getColumnWidth,\n      getEstimatedTotalHeight = _ref2.getEstimatedTotalHeight,\n      getEstimatedTotalWidth = _ref2.getEstimatedTotalWidth,\n      getOffsetForColumnAndAlignment = _ref2.getOffsetForColumnAndAlignment,\n      getOffsetForRowAndAlignment = _ref2.getOffsetForRowAndAlignment,\n      getRowHeight = _ref2.getRowHeight,\n      getRowOffset = _ref2.getRowOffset,\n      getRowStartIndexForOffset = _ref2.getRowStartIndexForOffset,\n      getRowStopIndexForStartIndex = _ref2.getRowStopIndexForStartIndex,\n      initInstanceProps = _ref2.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref2.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref2.validateProps;\n  return _class = /*#__PURE__*/function (_PureComponent) {\n    _inheritsLoose(Grid, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function Grid(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_this));\n      _this._resetIsScrollingTimeoutId = null;\n      _this._outerRef = void 0;\n      _this.state = {\n        instance: _assertThisInitialized(_this),\n        isScrolling: false,\n        horizontalScrollDirection: 'forward',\n        scrollLeft: typeof _this.props.initialScrollLeft === 'number' ? _this.props.initialScrollLeft : 0,\n        scrollTop: typeof _this.props.initialScrollTop === 'number' ? _this.props.initialScrollTop : 0,\n        scrollUpdateWasRequested: false,\n        verticalScrollDirection: 'forward'\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanColumnStartIndex, overscanColumnStopIndex, overscanRowStartIndex, overscanRowStopIndex, visibleColumnStartIndex, visibleColumnStopIndex, visibleRowStartIndex, visibleRowStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanColumnStartIndex: overscanColumnStartIndex,\n          overscanColumnStopIndex: overscanColumnStopIndex,\n          overscanRowStartIndex: overscanRowStartIndex,\n          overscanRowStopIndex: overscanRowStopIndex,\n          visibleColumnStartIndex: visibleColumnStartIndex,\n          visibleColumnStopIndex: visibleColumnStopIndex,\n          visibleRowStartIndex: visibleRowStartIndex,\n          visibleRowStopIndex: visibleRowStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollLeft, scrollTop, horizontalScrollDirection, verticalScrollDirection, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          horizontalScrollDirection: horizontalScrollDirection,\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          verticalScrollDirection: verticalScrollDirection,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (rowIndex, columnIndex) {\n        var _this$props = _this.props,\n            columnWidth = _this$props.columnWidth,\n            direction = _this$props.direction,\n            rowHeight = _this$props.rowHeight;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && columnWidth, shouldResetStyleCacheOnItemSizeChange && direction, shouldResetStyleCacheOnItemSizeChange && rowHeight);\n\n        var key = rowIndex + \":\" + columnIndex;\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(key)) {\n          style = itemStyleCache[key];\n        } else {\n          var _offset = getColumnOffset(_this.props, columnIndex, _this._instanceProps);\n\n          var isRtl = direction === 'rtl';\n          itemStyleCache[key] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : _offset,\n            right: isRtl ? _offset : undefined,\n            top: getRowOffset(_this.props, rowIndex, _this._instanceProps),\n            height: getRowHeight(_this.props, rowIndex, _this._instanceProps),\n            width: getColumnWidth(_this.props, columnIndex, _this._instanceProps)\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScroll = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientHeight = _event$currentTarget.clientHeight,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollTop = _event$currentTarget.scrollTop,\n            scrollHeight = _event$currentTarget.scrollHeight,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n          // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n          // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n          // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n\n          var calculatedScrollLeft = scrollLeft;\n\n          if (direction === 'rtl') {\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                calculatedScrollLeft = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                calculatedScrollLeft = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          calculatedScrollLeft = Math.max(0, Math.min(calculatedScrollLeft, scrollWidth - clientWidth));\n          var calculatedScrollTop = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n            scrollLeft: calculatedScrollLeft,\n            scrollTop: calculatedScrollTop,\n            verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward',\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1);\n        });\n      };\n\n      return _this;\n    }\n\n    Grid.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = Grid.prototype;\n\n    _proto.scrollTo = function scrollTo(_ref3) {\n      var scrollLeft = _ref3.scrollLeft,\n          scrollTop = _ref3.scrollTop;\n\n      if (scrollLeft !== undefined) {\n        scrollLeft = Math.max(0, scrollLeft);\n      }\n\n      if (scrollTop !== undefined) {\n        scrollTop = Math.max(0, scrollTop);\n      }\n\n      this.setState(function (prevState) {\n        if (scrollLeft === undefined) {\n          scrollLeft = prevState.scrollLeft;\n        }\n\n        if (scrollTop === undefined) {\n          scrollTop = prevState.scrollTop;\n        }\n\n        if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n          return null;\n        }\n\n        return {\n          horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          scrollUpdateWasRequested: true,\n          verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward'\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(_ref4) {\n      var _ref4$align = _ref4.align,\n          align = _ref4$align === void 0 ? 'auto' : _ref4$align,\n          columnIndex = _ref4.columnIndex,\n          rowIndex = _ref4.rowIndex;\n      var _this$props2 = this.props,\n          columnCount = _this$props2.columnCount,\n          height = _this$props2.height,\n          rowCount = _this$props2.rowCount,\n          width = _this$props2.width;\n      var _this$state = this.state,\n          scrollLeft = _this$state.scrollLeft,\n          scrollTop = _this$state.scrollTop;\n      var scrollbarSize = getScrollbarSize();\n\n      if (columnIndex !== undefined) {\n        columnIndex = Math.max(0, Math.min(columnIndex, columnCount - 1));\n      }\n\n      if (rowIndex !== undefined) {\n        rowIndex = Math.max(0, Math.min(rowIndex, rowCount - 1));\n      }\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps); // The scrollbar size should be considered when scrolling an item into view,\n      // to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n\n      var horizontalScrollbarSize = estimatedTotalWidth > width ? scrollbarSize : 0;\n      var verticalScrollbarSize = estimatedTotalHeight > height ? scrollbarSize : 0;\n      this.scrollTo({\n        scrollLeft: columnIndex !== undefined ? getOffsetForColumnAndAlignment(this.props, columnIndex, align, scrollLeft, this._instanceProps, verticalScrollbarSize) : scrollLeft,\n        scrollTop: rowIndex !== undefined ? getOffsetForRowAndAlignment(this.props, rowIndex, align, scrollTop, this._instanceProps, horizontalScrollbarSize) : scrollTop\n      });\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props3 = this.props,\n          initialScrollLeft = _this$props3.initialScrollLeft,\n          initialScrollTop = _this$props3.initialScrollTop;\n\n      if (this._outerRef != null) {\n        var outerRef = this._outerRef;\n\n        if (typeof initialScrollLeft === 'number') {\n          outerRef.scrollLeft = initialScrollLeft;\n        }\n\n        if (typeof initialScrollTop === 'number') {\n          outerRef.scrollTop = initialScrollTop;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var direction = this.props.direction;\n      var _this$state2 = this.state,\n          scrollLeft = _this$state2.scrollLeft,\n          scrollTop = _this$state2.scrollTop,\n          scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n        // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n        // So we need to determine which browser behavior we're dealing with, and mimic it.\n        var outerRef = this._outerRef;\n\n        if (direction === 'rtl') {\n          switch (getRTLOffsetType()) {\n            case 'negative':\n              outerRef.scrollLeft = -scrollLeft;\n              break;\n\n            case 'positive-ascending':\n              outerRef.scrollLeft = scrollLeft;\n              break;\n\n            default:\n              var clientWidth = outerRef.clientWidth,\n                  scrollWidth = outerRef.scrollWidth;\n              outerRef.scrollLeft = scrollWidth - clientWidth - scrollLeft;\n              break;\n          }\n        } else {\n          outerRef.scrollLeft = Math.max(0, scrollLeft);\n        }\n\n        outerRef.scrollTop = Math.max(0, scrollTop);\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props4 = this.props,\n          children = _this$props4.children,\n          className = _this$props4.className,\n          columnCount = _this$props4.columnCount,\n          direction = _this$props4.direction,\n          height = _this$props4.height,\n          innerRef = _this$props4.innerRef,\n          innerElementType = _this$props4.innerElementType,\n          innerTagName = _this$props4.innerTagName,\n          itemData = _this$props4.itemData,\n          _this$props4$itemKey = _this$props4.itemKey,\n          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey : _this$props4$itemKey,\n          outerElementType = _this$props4.outerElementType,\n          outerTagName = _this$props4.outerTagName,\n          rowCount = _this$props4.rowCount,\n          style = _this$props4.style,\n          useIsScrolling = _this$props4.useIsScrolling,\n          width = _this$props4.width;\n      var isScrolling = this.state.isScrolling;\n\n      var _this$_getHorizontalR = this._getHorizontalRangeToRender(),\n          columnStartIndex = _this$_getHorizontalR[0],\n          columnStopIndex = _this$_getHorizontalR[1];\n\n      var _this$_getVerticalRan = this._getVerticalRangeToRender(),\n          rowStartIndex = _this$_getVerticalRan[0],\n          rowStopIndex = _this$_getVerticalRan[1];\n\n      var items = [];\n\n      if (columnCount > 0 && rowCount) {\n        for (var _rowIndex = rowStartIndex; _rowIndex <= rowStopIndex; _rowIndex++) {\n          for (var _columnIndex = columnStartIndex; _columnIndex <= columnStopIndex; _columnIndex++) {\n            items.push(createElement(children, {\n              columnIndex: _columnIndex,\n              data: itemData,\n              isScrolling: useIsScrolling ? isScrolling : undefined,\n              key: itemKey({\n                columnIndex: _columnIndex,\n                data: itemData,\n                rowIndex: _rowIndex\n              }),\n              rowIndex: _rowIndex,\n              style: this._getItemStyle(_rowIndex, _columnIndex)\n            }));\n          }\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: this._onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: estimatedTotalHeight,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: estimatedTotalWidth\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      var _this$props5 = this.props,\n          columnCount = _this$props5.columnCount,\n          onItemsRendered = _this$props5.onItemsRendered,\n          onScroll = _this$props5.onScroll,\n          rowCount = _this$props5.rowCount;\n\n      if (typeof onItemsRendered === 'function') {\n        if (columnCount > 0 && rowCount > 0) {\n          var _this$_getHorizontalR2 = this._getHorizontalRangeToRender(),\n              _overscanColumnStartIndex = _this$_getHorizontalR2[0],\n              _overscanColumnStopIndex = _this$_getHorizontalR2[1],\n              _visibleColumnStartIndex = _this$_getHorizontalR2[2],\n              _visibleColumnStopIndex = _this$_getHorizontalR2[3];\n\n          var _this$_getVerticalRan2 = this._getVerticalRangeToRender(),\n              _overscanRowStartIndex = _this$_getVerticalRan2[0],\n              _overscanRowStopIndex = _this$_getVerticalRan2[1],\n              _visibleRowStartIndex = _this$_getVerticalRan2[2],\n              _visibleRowStopIndex = _this$_getVerticalRan2[3];\n\n          this._callOnItemsRendered(_overscanColumnStartIndex, _overscanColumnStopIndex, _overscanRowStartIndex, _overscanRowStopIndex, _visibleColumnStartIndex, _visibleColumnStopIndex, _visibleRowStartIndex, _visibleRowStopIndex);\n        }\n      }\n\n      if (typeof onScroll === 'function') {\n        var _this$state3 = this.state,\n            _horizontalScrollDirection = _this$state3.horizontalScrollDirection,\n            _scrollLeft = _this$state3.scrollLeft,\n            _scrollTop = _this$state3.scrollTop,\n            _scrollUpdateWasRequested = _this$state3.scrollUpdateWasRequested,\n            _verticalScrollDirection = _this$state3.verticalScrollDirection;\n\n        this._callOnScroll(_scrollLeft, _scrollTop, _horizontalScrollDirection, _verticalScrollDirection, _scrollUpdateWasRequested);\n      }\n    } // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n    ;\n\n    _proto._getHorizontalRangeToRender = function _getHorizontalRangeToRender() {\n      var _this$props6 = this.props,\n          columnCount = _this$props6.columnCount,\n          overscanColumnCount = _this$props6.overscanColumnCount,\n          overscanColumnsCount = _this$props6.overscanColumnsCount,\n          overscanCount = _this$props6.overscanCount,\n          rowCount = _this$props6.rowCount;\n      var _this$state4 = this.state,\n          horizontalScrollDirection = _this$state4.horizontalScrollDirection,\n          isScrolling = _this$state4.isScrolling,\n          scrollLeft = _this$state4.scrollLeft;\n      var overscanCountResolved = overscanColumnCount || overscanColumnsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getColumnStartIndexForOffset(this.props, scrollLeft, this._instanceProps);\n      var stopIndex = getColumnStopIndexForStartIndex(this.props, startIndex, scrollLeft, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || horizontalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || horizontalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(columnCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    _proto._getVerticalRangeToRender = function _getVerticalRangeToRender() {\n      var _this$props7 = this.props,\n          columnCount = _this$props7.columnCount,\n          overscanCount = _this$props7.overscanCount,\n          overscanRowCount = _this$props7.overscanRowCount,\n          overscanRowsCount = _this$props7.overscanRowsCount,\n          rowCount = _this$props7.rowCount;\n      var _this$state5 = this.state,\n          isScrolling = _this$state5.isScrolling,\n          verticalScrollDirection = _this$state5.verticalScrollDirection,\n          scrollTop = _this$state5.scrollTop;\n      var overscanCountResolved = overscanRowCount || overscanRowsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getRowStartIndexForOffset(this.props, scrollTop, this._instanceProps);\n      var stopIndex = getRowStopIndexForStartIndex(this.props, startIndex, scrollTop, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || verticalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || verticalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(rowCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return Grid;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    useIsScrolling: false\n  }, _class;\n}\n\nvar validateSharedProps = function validateSharedProps(_ref5, _ref6) {\n  var children = _ref5.children,\n      direction = _ref5.direction,\n      height = _ref5.height,\n      innerTagName = _ref5.innerTagName,\n      outerTagName = _ref5.outerTagName,\n      overscanColumnsCount = _ref5.overscanColumnsCount,\n      overscanCount = _ref5.overscanCount,\n      overscanRowsCount = _ref5.overscanRowsCount,\n      width = _ref5.width;\n  var instance = _ref6.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof overscanCount === 'number') {\n      if (devWarningsOverscanCount && !devWarningsOverscanCount.has(instance)) {\n        devWarningsOverscanCount.add(instance);\n        console.warn('The overscanCount prop has been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (typeof overscanColumnsCount === 'number' || typeof overscanRowsCount === 'number') {\n      if (devWarningsOverscanRowsColumnsCount && !devWarningsOverscanRowsColumnsCount.has(instance)) {\n        devWarningsOverscanRowsColumnsCount.add(instance);\n        console.warn('The overscanColumnsCount and overscanRowsCount props have been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName && !devWarningsTagName.has(instance)) {\n        devWarningsTagName.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    switch (direction) {\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    if (typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Grids must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    }\n\n    if (typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Grids must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE = 50;\n\nvar getEstimatedTotalHeight = function getEstimatedTotalHeight(_ref, _ref2) {\n  var rowCount = _ref.rowCount;\n  var rowMetadataMap = _ref2.rowMetadataMap,\n      estimatedRowHeight = _ref2.estimatedRowHeight,\n      lastMeasuredRowIndex = _ref2.lastMeasuredRowIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredRowIndex >= rowCount) {\n    lastMeasuredRowIndex = rowCount - 1;\n  }\n\n  if (lastMeasuredRowIndex >= 0) {\n    var itemMetadata = rowMetadataMap[lastMeasuredRowIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = rowCount - lastMeasuredRowIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedRowHeight;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getEstimatedTotalWidth = function getEstimatedTotalWidth(_ref3, _ref4) {\n  var columnCount = _ref3.columnCount;\n  var columnMetadataMap = _ref4.columnMetadataMap,\n      estimatedColumnWidth = _ref4.estimatedColumnWidth,\n      lastMeasuredColumnIndex = _ref4.lastMeasuredColumnIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredColumnIndex >= columnCount) {\n    lastMeasuredColumnIndex = columnCount - 1;\n  }\n\n  if (lastMeasuredColumnIndex >= 0) {\n    var itemMetadata = columnMetadataMap[lastMeasuredColumnIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = columnCount - lastMeasuredColumnIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedColumnWidth;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getItemMetadata = function getItemMetadata(itemType, props, index, instanceProps) {\n  var itemMetadataMap, itemSize, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    itemSize = props.columnWidth;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    itemSize = props.rowHeight;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    if (itemType === 'column') {\n      instanceProps.lastMeasuredColumnIndex = index;\n    } else {\n      instanceProps.lastMeasuredRowIndex = index;\n    }\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem = function findNearestItem(itemType, props, instanceProps, offset) {\n  var itemMetadataMap, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch(itemType, props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch(itemType, props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch = function findNearestItemBinarySearch(itemType, props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata(itemType, props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch = function findNearestItemExponentialSearch(itemType, props, instanceProps, index, offset) {\n  var itemCount = itemType === 'column' ? props.columnCount : props.rowCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata(itemType, props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch(itemType, props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getOffsetForIndexAndAlignment = function getOffsetForIndexAndAlignment(itemType, props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n  var size = itemType === 'column' ? props.width : props.height;\n  var itemMetadata = getItemMetadata(itemType, props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n  // To ensure it reflects actual measurements instead of just estimates.\n\n  var estimatedTotalSize = itemType === 'column' ? getEstimatedTotalWidth(props, instanceProps) : getEstimatedTotalHeight(props, instanceProps);\n  var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n  var minOffset = Math.max(0, itemMetadata.offset - size + scrollbarSize + itemMetadata.size);\n\n  if (align === 'smart') {\n    if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n      align = 'auto';\n    } else {\n      align = 'center';\n    }\n  }\n\n  switch (align) {\n    case 'start':\n      return maxOffset;\n\n    case 'end':\n      return minOffset;\n\n    case 'center':\n      return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n    case 'auto':\n    default:\n      if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n        return scrollOffset;\n      } else if (minOffset > maxOffset) {\n        // Because we only take into account the scrollbar size when calculating minOffset\n        // this value can be larger than maxOffset when at the end of the list\n        return minOffset;\n      } else if (scrollOffset < minOffset) {\n        return minOffset;\n      } else {\n        return maxOffset;\n      }\n\n  }\n};\n\nvar VariableSizeGrid = /*#__PURE__*/createGridComponent({\n  getColumnOffset: function getColumnOffset(props, index, instanceProps) {\n    return getItemMetadata('column', props, index, instanceProps).offset;\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(props, scrollLeft, instanceProps) {\n    return findNearestItem('column', props, instanceProps, scrollLeft);\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(props, startIndex, scrollLeft, instanceProps) {\n    var columnCount = props.columnCount,\n        width = props.width;\n    var itemMetadata = getItemMetadata('column', props, startIndex, instanceProps);\n    var maxOffset = scrollLeft + width;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < columnCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('column', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  getColumnWidth: function getColumnWidth(props, index, instanceProps) {\n    return instanceProps.columnMetadataMap[index].size;\n  },\n  getEstimatedTotalHeight: getEstimatedTotalHeight,\n  getEstimatedTotalWidth: getEstimatedTotalWidth,\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('column', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('row', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getRowOffset: function getRowOffset(props, index, instanceProps) {\n    return getItemMetadata('row', props, index, instanceProps).offset;\n  },\n  getRowHeight: function getRowHeight(props, index, instanceProps) {\n    return instanceProps.rowMetadataMap[index].size;\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(props, scrollTop, instanceProps) {\n    return findNearestItem('row', props, instanceProps, scrollTop);\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(props, startIndex, scrollTop, instanceProps) {\n    var rowCount = props.rowCount,\n        height = props.height;\n    var itemMetadata = getItemMetadata('row', props, startIndex, instanceProps);\n    var maxOffset = scrollTop + height;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < rowCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('row', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref5 = props,\n        estimatedColumnWidth = _ref5.estimatedColumnWidth,\n        estimatedRowHeight = _ref5.estimatedRowHeight;\n    var instanceProps = {\n      columnMetadataMap: {},\n      estimatedColumnWidth: estimatedColumnWidth || DEFAULT_ESTIMATED_ITEM_SIZE,\n      estimatedRowHeight: estimatedRowHeight || DEFAULT_ESTIMATED_ITEM_SIZE,\n      lastMeasuredColumnIndex: -1,\n      lastMeasuredRowIndex: -1,\n      rowMetadataMap: {}\n    };\n\n    instance.resetAfterColumnIndex = function (columnIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        columnIndex: columnIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterRowIndex = function (rowIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        rowIndex: rowIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterIndices = function (_ref6) {\n      var columnIndex = _ref6.columnIndex,\n          rowIndex = _ref6.rowIndex,\n          _ref6$shouldForceUpda = _ref6.shouldForceUpdate,\n          shouldForceUpdate = _ref6$shouldForceUpda === void 0 ? true : _ref6$shouldForceUpda;\n\n      if (typeof columnIndex === 'number') {\n        instanceProps.lastMeasuredColumnIndex = Math.min(instanceProps.lastMeasuredColumnIndex, columnIndex - 1);\n      }\n\n      if (typeof rowIndex === 'number') {\n        instanceProps.lastMeasuredRowIndex = Math.min(instanceProps.lastMeasuredRowIndex, rowIndex - 1);\n      } // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref7) {\n    var columnWidth = _ref7.columnWidth,\n        rowHeight = _ref7.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'function') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      } else if (typeof rowHeight !== 'function') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL$1 = 150;\n\nvar defaultItemKey$1 = function defaultItemKey(index, data) {\n  return index;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsDirection = null;\nvar devWarningsTagName$1 = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsDirection = /*#__PURE__*/new WeakSet();\n    devWarningsTagName$1 = /*#__PURE__*/new WeakSet();\n  }\n}\n\nfunction createListComponent(_ref) {\n  var _class;\n\n  var getItemOffset = _ref.getItemOffset,\n      getEstimatedTotalSize = _ref.getEstimatedTotalSize,\n      getItemSize = _ref.getItemSize,\n      getOffsetForIndexAndAlignment = _ref.getOffsetForIndexAndAlignment,\n      getStartIndexForOffset = _ref.getStartIndexForOffset,\n      getStopIndexForStartIndex = _ref.getStopIndexForStartIndex,\n      initInstanceProps = _ref.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref.validateProps;\n  return _class = /*#__PURE__*/function (_PureComponent) {\n    _inheritsLoose(List, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function List(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_this));\n      _this._outerRef = void 0;\n      _this._resetIsScrollingTimeoutId = null;\n      _this.state = {\n        instance: _assertThisInitialized(_this),\n        isScrolling: false,\n        scrollDirection: 'forward',\n        scrollOffset: typeof _this.props.initialScrollOffset === 'number' ? _this.props.initialScrollOffset : 0,\n        scrollUpdateWasRequested: false\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanStartIndex, overscanStopIndex, visibleStartIndex, visibleStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanStartIndex: overscanStartIndex,\n          overscanStopIndex: overscanStopIndex,\n          visibleStartIndex: visibleStartIndex,\n          visibleStopIndex: visibleStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollDirection, scrollOffset, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          scrollDirection: scrollDirection,\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (index) {\n        var _this$props = _this.props,\n            direction = _this$props.direction,\n            itemSize = _this$props.itemSize,\n            layout = _this$props.layout;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && itemSize, shouldResetStyleCacheOnItemSizeChange && layout, shouldResetStyleCacheOnItemSizeChange && direction);\n\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(index)) {\n          style = itemStyleCache[index];\n        } else {\n          var _offset = getItemOffset(_this.props, index, _this._instanceProps);\n\n          var size = getItemSize(_this.props, index, _this._instanceProps); // TODO Deprecate direction \"horizontal\"\n\n          var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n          var isRtl = direction === 'rtl';\n          var offsetHorizontal = isHorizontal ? _offset : 0;\n          itemStyleCache[index] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : offsetHorizontal,\n            right: isRtl ? offsetHorizontal : undefined,\n            top: !isHorizontal ? _offset : 0,\n            height: !isHorizontal ? size : '100%',\n            width: isHorizontal ? size : '100%'\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScrollHorizontal = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollLeft) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction;\n          var scrollOffset = scrollLeft;\n\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n            // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                scrollOffset = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                scrollOffset = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          scrollOffset = Math.max(0, Math.min(scrollOffset, scrollWidth - clientWidth));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollLeft ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._onScrollVertical = function (event) {\n        var _event$currentTarget2 = event.currentTarget,\n            clientHeight = _event$currentTarget2.clientHeight,\n            scrollHeight = _event$currentTarget2.scrollHeight,\n            scrollTop = _event$currentTarget2.scrollTop;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          var scrollOffset = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL$1);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1, null);\n        });\n      };\n\n      return _this;\n    }\n\n    List.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps$1(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = List.prototype;\n\n    _proto.scrollTo = function scrollTo(scrollOffset) {\n      scrollOffset = Math.max(0, scrollOffset);\n      this.setState(function (prevState) {\n        if (prevState.scrollOffset === scrollOffset) {\n          return null;\n        }\n\n        return {\n          scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: true\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(index, align) {\n      if (align === void 0) {\n        align = 'auto';\n      }\n\n      var itemCount = this.props.itemCount;\n      var scrollOffset = this.state.scrollOffset;\n      index = Math.max(0, Math.min(index, itemCount - 1));\n      this.scrollTo(getOffsetForIndexAndAlignment(this.props, index, align, scrollOffset, this._instanceProps));\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props2 = this.props,\n          direction = _this$props2.direction,\n          initialScrollOffset = _this$props2.initialScrollOffset,\n          layout = _this$props2.layout;\n\n      if (typeof initialScrollOffset === 'number' && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          outerRef.scrollLeft = initialScrollOffset;\n        } else {\n          outerRef.scrollTop = initialScrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var _this$props3 = this.props,\n          direction = _this$props3.direction,\n          layout = _this$props3.layout;\n      var _this$state = this.state,\n          scrollOffset = _this$state.scrollOffset,\n          scrollUpdateWasRequested = _this$state.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // So we need to determine which browser behavior we're dealing with, and mimic it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                outerRef.scrollLeft = -scrollOffset;\n                break;\n\n              case 'positive-ascending':\n                outerRef.scrollLeft = scrollOffset;\n                break;\n\n              default:\n                var clientWidth = outerRef.clientWidth,\n                    scrollWidth = outerRef.scrollWidth;\n                outerRef.scrollLeft = scrollWidth - clientWidth - scrollOffset;\n                break;\n            }\n          } else {\n            outerRef.scrollLeft = scrollOffset;\n          }\n        } else {\n          outerRef.scrollTop = scrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props4 = this.props,\n          children = _this$props4.children,\n          className = _this$props4.className,\n          direction = _this$props4.direction,\n          height = _this$props4.height,\n          innerRef = _this$props4.innerRef,\n          innerElementType = _this$props4.innerElementType,\n          innerTagName = _this$props4.innerTagName,\n          itemCount = _this$props4.itemCount,\n          itemData = _this$props4.itemData,\n          _this$props4$itemKey = _this$props4.itemKey,\n          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey$1 : _this$props4$itemKey,\n          layout = _this$props4.layout,\n          outerElementType = _this$props4.outerElementType,\n          outerTagName = _this$props4.outerTagName,\n          style = _this$props4.style,\n          useIsScrolling = _this$props4.useIsScrolling,\n          width = _this$props4.width;\n      var isScrolling = this.state.isScrolling; // TODO Deprecate direction \"horizontal\"\n\n      var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n      var onScroll = isHorizontal ? this._onScrollHorizontal : this._onScrollVertical;\n\n      var _this$_getRangeToRend = this._getRangeToRender(),\n          startIndex = _this$_getRangeToRend[0],\n          stopIndex = _this$_getRangeToRend[1];\n\n      var items = [];\n\n      if (itemCount > 0) {\n        for (var _index = startIndex; _index <= stopIndex; _index++) {\n          items.push(createElement(children, {\n            data: itemData,\n            key: itemKey(_index, itemData),\n            index: _index,\n            isScrolling: useIsScrolling ? isScrolling : undefined,\n            style: this._getItemStyle(_index)\n          }));\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalSize = getEstimatedTotalSize(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: isHorizontal ? '100%' : estimatedTotalSize,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: isHorizontal ? estimatedTotalSize : '100%'\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      if (typeof this.props.onItemsRendered === 'function') {\n        var itemCount = this.props.itemCount;\n\n        if (itemCount > 0) {\n          var _this$_getRangeToRend2 = this._getRangeToRender(),\n              _overscanStartIndex = _this$_getRangeToRend2[0],\n              _overscanStopIndex = _this$_getRangeToRend2[1],\n              _visibleStartIndex = _this$_getRangeToRend2[2],\n              _visibleStopIndex = _this$_getRangeToRend2[3];\n\n          this._callOnItemsRendered(_overscanStartIndex, _overscanStopIndex, _visibleStartIndex, _visibleStopIndex);\n        }\n      }\n\n      if (typeof this.props.onScroll === 'function') {\n        var _this$state2 = this.state,\n            _scrollDirection = _this$state2.scrollDirection,\n            _scrollOffset = _this$state2.scrollOffset,\n            _scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n        this._callOnScroll(_scrollDirection, _scrollOffset, _scrollUpdateWasRequested);\n      }\n    } // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n    ;\n\n    _proto._getRangeToRender = function _getRangeToRender() {\n      var _this$props5 = this.props,\n          itemCount = _this$props5.itemCount,\n          overscanCount = _this$props5.overscanCount;\n      var _this$state3 = this.state,\n          isScrolling = _this$state3.isScrolling,\n          scrollDirection = _this$state3.scrollDirection,\n          scrollOffset = _this$state3.scrollOffset;\n\n      if (itemCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getStartIndexForOffset(this.props, scrollOffset, this._instanceProps);\n      var stopIndex = getStopIndexForStartIndex(this.props, startIndex, scrollOffset, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || scrollDirection === 'backward' ? Math.max(1, overscanCount) : 1;\n      var overscanForward = !isScrolling || scrollDirection === 'forward' ? Math.max(1, overscanCount) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(itemCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return List;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    layout: 'vertical',\n    overscanCount: 2,\n    useIsScrolling: false\n  }, _class;\n} // NOTE: I considered further wrapping individual items with a pure ListItem component.\n// This would avoid ever calling the render function for the same index more than once,\n// But it would also add the overhead of a lot of components/fibers.\n// I assume people already do this (render function returning a class component),\n// So my doing it would just unnecessarily double the wrappers.\n\nvar validateSharedProps$1 = function validateSharedProps(_ref2, _ref3) {\n  var children = _ref2.children,\n      direction = _ref2.direction,\n      height = _ref2.height,\n      layout = _ref2.layout,\n      innerTagName = _ref2.innerTagName,\n      outerTagName = _ref2.outerTagName,\n      width = _ref2.width;\n  var instance = _ref3.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName$1 && !devWarningsTagName$1.has(instance)) {\n        devWarningsTagName$1.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    } // TODO Deprecate direction \"horizontal\"\n\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n\n    switch (direction) {\n      case 'horizontal':\n      case 'vertical':\n        if (devWarningsDirection && !devWarningsDirection.has(instance)) {\n          devWarningsDirection.add(instance);\n          console.warn('The direction prop should be either \"ltr\" (default) or \"rtl\". ' + 'Please use the layout prop to specify \"vertical\" (default) or \"horizontal\" orientation.');\n        }\n\n        break;\n\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    switch (layout) {\n      case 'horizontal':\n      case 'vertical':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"layout\" prop has been specified. ' + 'Value should be either \"horizontal\" or \"vertical\". ' + (\"\\\"\" + layout + \"\\\" was specified.\"));\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    if (isHorizontal && typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Horizontal lists must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    } else if (!isHorizontal && typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Vertical lists must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE$1 = 50;\n\nvar getItemMetadata$1 = function getItemMetadata(props, index, instanceProps) {\n  var _ref = props,\n      itemSize = _ref.itemSize;\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    instanceProps.lastMeasuredIndex = index;\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem$1 = function findNearestItem(props, instanceProps, offset) {\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch$1(props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch$1(props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch$1 = function findNearestItemBinarySearch(props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata$1(props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch$1 = function findNearestItemExponentialSearch(props, instanceProps, index, offset) {\n  var itemCount = props.itemCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata$1(props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch$1(props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getEstimatedTotalSize = function getEstimatedTotalSize(_ref2, _ref3) {\n  var itemCount = _ref2.itemCount;\n  var itemMetadataMap = _ref3.itemMetadataMap,\n      estimatedItemSize = _ref3.estimatedItemSize,\n      lastMeasuredIndex = _ref3.lastMeasuredIndex;\n  var totalSizeOfMeasuredItems = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredIndex >= itemCount) {\n    lastMeasuredIndex = itemCount - 1;\n  }\n\n  if (lastMeasuredIndex >= 0) {\n    var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n    totalSizeOfMeasuredItems = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = itemCount - lastMeasuredIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedItemSize;\n  return totalSizeOfMeasuredItems + totalSizeOfUnmeasuredItems;\n};\n\nvar VariableSizeList = /*#__PURE__*/createListComponent({\n  getItemOffset: function getItemOffset(props, index, instanceProps) {\n    return getItemMetadata$1(props, index, instanceProps).offset;\n  },\n  getItemSize: function getItemSize(props, index, instanceProps) {\n    return instanceProps.itemMetadataMap[index].size;\n  },\n  getEstimatedTotalSize: getEstimatedTotalSize,\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(props, index, align, scrollOffset, instanceProps) {\n    var direction = props.direction,\n        height = props.height,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n    // To ensure it reflects actual measurements instead of just estimates.\n\n    var estimatedTotalSize = getEstimatedTotalSize(props, instanceProps);\n    var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n    var minOffset = Math.max(0, itemMetadata.offset - size + itemMetadata.size);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(props, offset, instanceProps) {\n    return findNearestItem$1(props, instanceProps, offset);\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(props, startIndex, scrollOffset, instanceProps) {\n    var direction = props.direction,\n        height = props.height,\n        itemCount = props.itemCount,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, startIndex, instanceProps);\n    var maxOffset = scrollOffset + size;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < itemCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata$1(props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref4 = props,\n        estimatedItemSize = _ref4.estimatedItemSize;\n    var instanceProps = {\n      itemMetadataMap: {},\n      estimatedItemSize: estimatedItemSize || DEFAULT_ESTIMATED_ITEM_SIZE$1,\n      lastMeasuredIndex: -1\n    };\n\n    instance.resetAfterIndex = function (index, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instanceProps.lastMeasuredIndex = Math.min(instanceProps.lastMeasuredIndex, index - 1); // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref5) {\n    var itemSize = _ref5.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'function') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeGrid = /*#__PURE__*/createGridComponent({\n  getColumnOffset: function getColumnOffset(_ref, index) {\n    var columnWidth = _ref.columnWidth;\n    return index * columnWidth;\n  },\n  getColumnWidth: function getColumnWidth(_ref2, index) {\n    var columnWidth = _ref2.columnWidth;\n    return columnWidth;\n  },\n  getRowOffset: function getRowOffset(_ref3, index) {\n    var rowHeight = _ref3.rowHeight;\n    return index * rowHeight;\n  },\n  getRowHeight: function getRowHeight(_ref4, index) {\n    var rowHeight = _ref4.rowHeight;\n    return rowHeight;\n  },\n  getEstimatedTotalHeight: function getEstimatedTotalHeight(_ref5) {\n    var rowCount = _ref5.rowCount,\n        rowHeight = _ref5.rowHeight;\n    return rowHeight * rowCount;\n  },\n  getEstimatedTotalWidth: function getEstimatedTotalWidth(_ref6) {\n    var columnCount = _ref6.columnCount,\n        columnWidth = _ref6.columnWidth;\n    return columnWidth * columnCount;\n  },\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(_ref7, columnIndex, align, scrollLeft, instanceProps, scrollbarSize) {\n    var columnCount = _ref7.columnCount,\n        columnWidth = _ref7.columnWidth,\n        width = _ref7.width;\n    var lastColumnOffset = Math.max(0, columnCount * columnWidth - width);\n    var maxOffset = Math.min(lastColumnOffset, columnIndex * columnWidth);\n    var minOffset = Math.max(0, columnIndex * columnWidth - width + scrollbarSize + columnWidth);\n\n    if (align === 'smart') {\n      if (scrollLeft >= minOffset - width && scrollLeft <= maxOffset + width) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(width / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastColumnOffset + Math.floor(width / 2)) {\n          return lastColumnOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollLeft >= minOffset && scrollLeft <= maxOffset) {\n          return scrollLeft;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollLeft < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(_ref8, rowIndex, align, scrollTop, instanceProps, scrollbarSize) {\n    var rowHeight = _ref8.rowHeight,\n        height = _ref8.height,\n        rowCount = _ref8.rowCount;\n    var lastRowOffset = Math.max(0, rowCount * rowHeight - height);\n    var maxOffset = Math.min(lastRowOffset, rowIndex * rowHeight);\n    var minOffset = Math.max(0, rowIndex * rowHeight - height + scrollbarSize + rowHeight);\n\n    if (align === 'smart') {\n      if (scrollTop >= minOffset - height && scrollTop <= maxOffset + height) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(height / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastRowOffset + Math.floor(height / 2)) {\n          return lastRowOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollTop >= minOffset && scrollTop <= maxOffset) {\n          return scrollTop;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollTop < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(_ref9, scrollLeft) {\n    var columnWidth = _ref9.columnWidth,\n        columnCount = _ref9.columnCount;\n    return Math.max(0, Math.min(columnCount - 1, Math.floor(scrollLeft / columnWidth)));\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(_ref10, startIndex, scrollLeft) {\n    var columnWidth = _ref10.columnWidth,\n        columnCount = _ref10.columnCount,\n        width = _ref10.width;\n    var left = startIndex * columnWidth;\n    var numVisibleColumns = Math.ceil((width + scrollLeft - left) / columnWidth);\n    return Math.max(0, Math.min(columnCount - 1, startIndex + numVisibleColumns - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(_ref11, scrollTop) {\n    var rowHeight = _ref11.rowHeight,\n        rowCount = _ref11.rowCount;\n    return Math.max(0, Math.min(rowCount - 1, Math.floor(scrollTop / rowHeight)));\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(_ref12, startIndex, scrollTop) {\n    var rowHeight = _ref12.rowHeight,\n        rowCount = _ref12.rowCount,\n        height = _ref12.height;\n    var top = startIndex * rowHeight;\n    var numVisibleRows = Math.ceil((height + scrollTop - top) / rowHeight);\n    return Math.max(0, Math.min(rowCount - 1, startIndex + numVisibleRows - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref13) {\n    var columnWidth = _ref13.columnWidth,\n        rowHeight = _ref13.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'number') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      }\n\n      if (typeof rowHeight !== 'number') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeList = /*#__PURE__*/createListComponent({\n  getItemOffset: function getItemOffset(_ref, index) {\n    var itemSize = _ref.itemSize;\n    return index * itemSize;\n  },\n  getItemSize: function getItemSize(_ref2, index) {\n    var itemSize = _ref2.itemSize;\n    return itemSize;\n  },\n  getEstimatedTotalSize: function getEstimatedTotalSize(_ref3) {\n    var itemCount = _ref3.itemCount,\n        itemSize = _ref3.itemSize;\n    return itemSize * itemCount;\n  },\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(_ref4, index, align, scrollOffset) {\n    var direction = _ref4.direction,\n        height = _ref4.height,\n        itemCount = _ref4.itemCount,\n        itemSize = _ref4.itemSize,\n        layout = _ref4.layout,\n        width = _ref4.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var lastItemOffset = Math.max(0, itemCount * itemSize - size);\n    var maxOffset = Math.min(lastItemOffset, index * itemSize);\n    var minOffset = Math.max(0, index * itemSize - size + itemSize);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        {\n          // \"Centered\" offset is usually the average of the min and max.\n          // But near the edges of the list, this doesn't hold true.\n          var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n          if (middleOffset < Math.ceil(size / 2)) {\n            return 0; // near the beginning\n          } else if (middleOffset > lastItemOffset + Math.floor(size / 2)) {\n            return lastItemOffset; // near the end\n          } else {\n            return middleOffset;\n          }\n        }\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(_ref5, offset) {\n    var itemCount = _ref5.itemCount,\n        itemSize = _ref5.itemSize;\n    return Math.max(0, Math.min(itemCount - 1, Math.floor(offset / itemSize)));\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(_ref6, startIndex, scrollOffset) {\n    var direction = _ref6.direction,\n        height = _ref6.height,\n        itemCount = _ref6.itemCount,\n        itemSize = _ref6.itemSize,\n        layout = _ref6.layout,\n        width = _ref6.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var offset = startIndex * itemSize;\n    var size = isHorizontal ? width : height;\n    var numVisibleItems = Math.ceil((size + scrollOffset - offset) / itemSize);\n    return Math.max(0, Math.min(itemCount - 1, startIndex + numVisibleItems - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref7) {\n    var itemSize = _ref7.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'number') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\n// Pulled from react-compat\n// https://github.com/developit/preact-compat/blob/7c5de00e7c85e2ffd011bf3af02899b63f699d3a/src/index.js#L349\nfunction shallowDiffers(prev, next) {\n  for (var attribute in prev) {\n    if (!(attribute in next)) {\n      return true;\n    }\n  }\n\n  for (var _attribute in next) {\n    if (prev[_attribute] !== next[_attribute]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar _excluded = [\"style\"],\n    _excluded2 = [\"style\"];\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-api.html#reactmemo\n\nfunction areEqual(prevProps, nextProps) {\n  var prevStyle = prevProps.style,\n      prevRest = _objectWithoutPropertiesLoose(prevProps, _excluded);\n\n  var nextStyle = nextProps.style,\n      nextRest = _objectWithoutPropertiesLoose(nextProps, _excluded2);\n\n  return !shallowDiffers(prevStyle, nextStyle) && !shallowDiffers(prevRest, nextRest);\n}\n\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-component.html#shouldcomponentupdate\n\nfunction shouldComponentUpdate(nextProps, nextState) {\n  return !areEqual(this.props, nextProps) || shallowDiffers(this.state, nextState);\n}\n\nexport { FixedSizeGrid, FixedSizeList, VariableSizeGrid, VariableSizeList, areEqual, shouldComponentUpdate };\n//# sourceMappingURL=index.esm.js.map\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import { css, cx } from '@emotion/css';\nimport React, { ChangeEvent } from 'react';\nimport { FixedSizeList } from 'react-window';\n\nimport { GrafanaTheme } from '@grafana/data';\nimport {\n  Button,\n  HorizontalGroup,\n  Input,\n  Label,\n  LoadingPlaceholder,\n  stylesFactory,\n  withTheme,\n  BrowserLabel as PromLabel,\n} from '@grafana/ui';\n\nimport PromQlLanguageProvider from '../language_provider';\nimport { escapeLabelValueInExactSelector, escapeLabelValueInRegexSelector } from '../language_utils';\n\n// Hard limit on labels to render\nconst EMPTY_SELECTOR = '{}';\nconst METRIC_LABEL = '__name__';\nconst LIST_ITEM_SIZE = 25;\n\nexport interface BrowserProps {\n  languageProvider: PromQlLanguageProvider;\n  onChange: (selector: string) => void;\n  theme: GrafanaTheme;\n  autoSelect?: number;\n  hide?: () => void;\n  lastUsedLabels: string[];\n  storeLastUsedLabels: (labels: string[]) => void;\n  deleteLastUsedLabels: () => void;\n}\n\ninterface BrowserState {\n  labels: SelectableLabel[];\n  labelSearchTerm: string;\n  metricSearchTerm: string;\n  status: string;\n  error: string;\n  validationStatus: string;\n  valueSearchTerm: string;\n}\n\ninterface FacettableValue {\n  name: string;\n  selected?: boolean;\n  details?: string;\n}\n\nexport interface SelectableLabel {\n  name: string;\n  selected?: boolean;\n  loading?: boolean;\n  values?: FacettableValue[];\n  hidden?: boolean;\n  facets?: number;\n}\n\nexport function buildSelector(labels: SelectableLabel[]): string {\n  let singleMetric = '';\n  const selectedLabels = [];\n  for (const label of labels) {\n    if ((label.name === METRIC_LABEL || label.selected) && label.values && label.values.length > 0) {\n      const selectedValues = label.values.filter((value) => value.selected).map((value) => value.name);\n      if (selectedValues.length > 1) {\n        selectedLabels.push(`${label.name}=~\"${selectedValues.map(escapeLabelValueInRegexSelector).join('|')}\"`);\n      } else if (selectedValues.length === 1) {\n        if (label.name === METRIC_LABEL) {\n          singleMetric = selectedValues[0];\n        } else {\n          selectedLabels.push(`${label.name}=\"${escapeLabelValueInExactSelector(selectedValues[0])}\"`);\n        }\n      }\n    }\n  }\n  return [singleMetric, '{', selectedLabels.join(','), '}'].join('');\n}\n\nexport function facetLabels(\n  labels: SelectableLabel[],\n  possibleLabels: Record<string, string[]>,\n  lastFacetted?: string\n): SelectableLabel[] {\n  return labels.map((label) => {\n    const possibleValues = possibleLabels[label.name];\n    if (possibleValues) {\n      let existingValues: FacettableValue[];\n      if (label.name === lastFacetted && label.values) {\n        // Facetting this label, show all values\n        existingValues = label.values;\n      } else {\n        // Keep selection in other facets\n        const selectedValues: Set<string> = new Set(\n          label.values?.filter((value) => value.selected).map((value) => value.name) || []\n        );\n        // Values for this label have not been requested yet, let's use the facetted ones as the initial values\n        existingValues = possibleValues.map((value) => ({ name: value, selected: selectedValues.has(value) }));\n      }\n      return {\n        ...label,\n        loading: false,\n        values: existingValues,\n        hidden: !possibleValues,\n        facets: existingValues.length,\n      };\n    }\n\n    // Label is facetted out, hide all values\n    return { ...label, loading: false, hidden: !possibleValues, values: undefined, facets: 0 };\n  });\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => ({\n  wrapper: css`\n    background-color: ${theme.colors.bg2};\n    padding: ${theme.spacing.sm};\n    width: 100%;\n  `,\n  list: css`\n    margin-top: ${theme.spacing.sm};\n    display: flex;\n    flex-wrap: wrap;\n    max-height: 200px;\n    overflow: auto;\n    align-content: flex-start;\n  `,\n  section: css`\n    & + & {\n      margin: ${theme.spacing.md} 0;\n    }\n    position: relative;\n  `,\n  selector: css`\n    font-family: ${theme.typography.fontFamily.monospace};\n    margin-bottom: ${theme.spacing.sm};\n  `,\n  status: css`\n    padding: ${theme.spacing.xs};\n    color: ${theme.colors.textSemiWeak};\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    /* using absolute positioning because flex interferes with ellipsis */\n    position: absolute;\n    width: 50%;\n    right: 0;\n    text-align: right;\n    transition: opacity 100ms linear;\n    opacity: 0;\n  `,\n  statusShowing: css`\n    opacity: 1;\n  `,\n  error: css`\n    color: ${theme.palette.brandDanger};\n  `,\n  valueList: css`\n    margin-right: ${theme.spacing.sm};\n    resize: horizontal;\n  `,\n  valueListWrapper: css`\n    border-left: 1px solid ${theme.colors.border2};\n    margin: ${theme.spacing.sm} 0;\n    padding: ${theme.spacing.sm} 0 ${theme.spacing.sm} ${theme.spacing.sm};\n  `,\n  valueListArea: css`\n    display: flex;\n    flex-wrap: wrap;\n    margin-top: ${theme.spacing.sm};\n  `,\n  valueTitle: css`\n    margin-left: -${theme.spacing.xs};\n    margin-bottom: ${theme.spacing.sm};\n  `,\n  validationStatus: css`\n    padding: ${theme.spacing.xs};\n    margin-bottom: ${theme.spacing.sm};\n    color: ${theme.colors.textStrong};\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  `,\n}));\n\n/**\n * TODO #33976: Remove duplicated code. The component is very similar to LokiLabelBrowser.tsx. Check if it's possible\n *              to create a single, generic component.\n */\nexport class UnthemedPrometheusMetricsBrowser extends React.Component<BrowserProps, BrowserState> {\n  valueListsRef = React.createRef<HTMLDivElement>();\n  state: BrowserState = {\n    labels: [] as SelectableLabel[],\n    labelSearchTerm: '',\n    metricSearchTerm: '',\n    status: 'Ready',\n    error: '',\n    validationStatus: '',\n    valueSearchTerm: '',\n  };\n\n  onChangeLabelSearch = (event: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ labelSearchTerm: event.target.value });\n  };\n\n  onChangeMetricSearch = (event: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ metricSearchTerm: event.target.value });\n  };\n\n  onChangeValueSearch = (event: ChangeEvent<HTMLInputElement>) => {\n    this.setState({ valueSearchTerm: event.target.value });\n  };\n\n  onClickRunQuery = () => {\n    const selector = buildSelector(this.state.labels);\n    this.props.onChange(selector);\n  };\n\n  onClickRunRateQuery = () => {\n    const selector = buildSelector(this.state.labels);\n    const query = `rate(${selector}[$__interval])`;\n    this.props.onChange(query);\n  };\n\n  onClickClear = () => {\n    this.setState((state) => {\n      const labels: SelectableLabel[] = state.labels.map((label) => ({\n        ...label,\n        values: undefined,\n        selected: false,\n        loading: false,\n        hidden: false,\n        facets: undefined,\n      }));\n      return {\n        labels,\n        labelSearchTerm: '',\n        metricSearchTerm: '',\n        status: '',\n        error: '',\n        validationStatus: '',\n        valueSearchTerm: '',\n      };\n    });\n    this.props.deleteLastUsedLabels();\n    // Get metrics\n    this.fetchValues(METRIC_LABEL, EMPTY_SELECTOR);\n  };\n\n  onClickLabel = (name: string, value: string | undefined, event: React.MouseEvent<HTMLElement>) => {\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label) {\n      return;\n    }\n    // Toggle selected state\n    const selected = !label.selected;\n    let nextValue: Partial<SelectableLabel> = { selected };\n    if (label.values && !selected) {\n      // Deselect all values if label was deselected\n      const values = label.values.map((value) => ({ ...value, selected: false }));\n      nextValue = { ...nextValue, facets: 0, values };\n    }\n    // Resetting search to prevent empty results\n    this.setState({ labelSearchTerm: '' });\n    this.updateLabelState(name, nextValue, '', () => this.doFacettingForLabel(name));\n  };\n\n  onClickValue = (name: string, value: string | undefined, event: React.MouseEvent<HTMLElement>) => {\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label || !label.values) {\n      return;\n    }\n    // Resetting search to prevent empty results\n    this.setState({ labelSearchTerm: '' });\n    // Toggling value for selected label, leaving other values intact\n    const values = label.values.map((v) => ({ ...v, selected: v.name === value ? !v.selected : v.selected }));\n    this.updateLabelState(name, { values }, '', () => this.doFacetting(name));\n  };\n\n  onClickMetric = (name: string, value: string | undefined, event: React.MouseEvent<HTMLElement>) => {\n    // Finding special metric label\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label || !label.values) {\n      return;\n    }\n    // Resetting search to prevent empty results\n    this.setState({ metricSearchTerm: '' });\n    // Toggling value for selected label, leaving other values intact\n    const values = label.values.map((v) => ({\n      ...v,\n      selected: v.name === value || v.selected ? !v.selected : v.selected,\n    }));\n    // Toggle selected state of special metrics label\n    const selected = values.some((v) => v.selected);\n    this.updateLabelState(name, { selected, values }, '', () => this.doFacetting(name));\n  };\n\n  onClickValidate = () => {\n    const selector = buildSelector(this.state.labels);\n    this.validateSelector(selector);\n  };\n\n  updateLabelState(name: string, updatedFields: Partial<SelectableLabel>, status = '', cb?: () => void) {\n    this.setState((state) => {\n      const labels: SelectableLabel[] = state.labels.map((label) => {\n        if (label.name === name) {\n          return { ...label, ...updatedFields };\n        }\n        return label;\n      });\n      // New status overrides errors\n      const error = status ? '' : state.error;\n      return { labels, status, error, validationStatus: '' };\n    }, cb);\n  }\n\n  componentDidMount() {\n    const { languageProvider, lastUsedLabels } = this.props;\n    if (languageProvider) {\n      const selectedLabels: string[] = lastUsedLabels;\n      languageProvider.start().then(() => {\n        let rawLabels: string[] = languageProvider.getLabelKeys();\n        // Get metrics\n        this.fetchValues(METRIC_LABEL, EMPTY_SELECTOR);\n        // Auto-select previously selected labels\n        const labels: SelectableLabel[] = rawLabels.map((label, i, arr) => ({\n          name: label,\n          selected: selectedLabels.includes(label),\n          loading: false,\n        }));\n        // Pre-fetch values for selected labels\n        this.setState({ labels }, () => {\n          this.state.labels.forEach((label) => {\n            if (label.selected) {\n              this.fetchValues(label.name, EMPTY_SELECTOR);\n            }\n          });\n        });\n      });\n    }\n  }\n\n  doFacettingForLabel(name: string) {\n    const label = this.state.labels.find((l) => l.name === name);\n    if (!label) {\n      return;\n    }\n    const selectedLabels = this.state.labels.filter((label) => label.selected).map((label) => label.name);\n    this.props.storeLastUsedLabels(selectedLabels);\n    if (label.selected) {\n      // Refetch values for newly selected label...\n      if (!label.values) {\n        this.fetchValues(name, buildSelector(this.state.labels));\n      }\n    } else {\n      // Only need to facet when deselecting labels\n      this.doFacetting();\n    }\n  }\n\n  doFacetting = (lastFacetted?: string) => {\n    const selector = buildSelector(this.state.labels);\n    if (selector === EMPTY_SELECTOR) {\n      // Clear up facetting\n      const labels: SelectableLabel[] = this.state.labels.map((label) => {\n        return { ...label, facets: 0, values: undefined, hidden: false };\n      });\n      this.setState({ labels }, () => {\n        // Get fresh set of values\n        this.state.labels.forEach(\n          (label) => (label.selected || label.name === METRIC_LABEL) && this.fetchValues(label.name, selector)\n        );\n      });\n    } else {\n      // Do facetting\n      this.fetchSeries(selector, lastFacetted);\n    }\n  };\n\n  async fetchValues(name: string, selector: string) {\n    const { languageProvider } = this.props;\n    this.updateLabelState(name, { loading: true }, `Fetching values for ${name}`);\n    try {\n      let rawValues = await languageProvider.getLabelValues(name);\n      // If selector changed, clear loading state and discard result by returning early\n      if (selector !== buildSelector(this.state.labels)) {\n        this.updateLabelState(name, { loading: false });\n        return;\n      }\n      const values: FacettableValue[] = [];\n      const { metricsMetadata } = languageProvider;\n      for (const labelValue of rawValues) {\n        const value: FacettableValue = { name: labelValue };\n        // Adding type/help text to metrics\n        if (name === METRIC_LABEL && metricsMetadata) {\n          const meta = metricsMetadata[labelValue];\n          if (meta) {\n            value.details = `(${meta.type}) ${meta.help}`;\n          }\n        }\n        values.push(value);\n      }\n      this.updateLabelState(name, { values, loading: false });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async fetchSeries(selector: string, lastFacetted?: string) {\n    const { languageProvider } = this.props;\n    if (lastFacetted) {\n      this.updateLabelState(lastFacetted, { loading: true }, `Facetting labels for ${selector}`);\n    }\n    try {\n      const possibleLabels = await languageProvider.fetchSeriesLabels(selector, true);\n      // If selector changed, clear loading state and discard result by returning early\n      if (selector !== buildSelector(this.state.labels)) {\n        if (lastFacetted) {\n          this.updateLabelState(lastFacetted, { loading: false });\n        }\n        return;\n      }\n      if (Object.keys(possibleLabels).length === 0) {\n        this.setState({ error: `Empty results, no matching label for ${selector}` });\n        return;\n      }\n      const labels: SelectableLabel[] = facetLabels(this.state.labels, possibleLabels, lastFacetted);\n      this.setState({ labels, error: '' });\n      if (lastFacetted) {\n        this.updateLabelState(lastFacetted, { loading: false });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async validateSelector(selector: string) {\n    const { languageProvider } = this.props;\n    this.setState({ validationStatus: `Validating selector ${selector}`, error: '' });\n    const streams = await languageProvider.fetchSeries(selector);\n    this.setState({ validationStatus: `Selector is valid (${streams.length} series found)` });\n  }\n\n  render() {\n    const { theme } = this.props;\n    const { labels, labelSearchTerm, metricSearchTerm, status, error, validationStatus, valueSearchTerm } = this.state;\n    const styles = getStyles(theme);\n    if (labels.length === 0) {\n      return (\n        <div className={styles.wrapper}>\n          <LoadingPlaceholder text=\"Loading labels...\" />\n        </div>\n      );\n    }\n\n    // Filter metrics\n    let metrics = labels.find((label) => label.name === METRIC_LABEL);\n    if (metrics && metricSearchTerm) {\n      metrics = {\n        ...metrics,\n        values: metrics.values?.filter((value) => value.selected || value.name.includes(metricSearchTerm)),\n      };\n    }\n\n    // Filter labels\n    let nonMetricLabels = labels.filter((label) => !label.hidden && label.name !== METRIC_LABEL);\n    if (labelSearchTerm) {\n      nonMetricLabels = nonMetricLabels.filter((label) => label.selected || label.name.includes(labelSearchTerm));\n    }\n\n    // Filter non-metric label values\n    let selectedLabels = nonMetricLabels.filter((label) => label.selected && label.values);\n    if (valueSearchTerm) {\n      selectedLabels = selectedLabels.map((label) => ({\n        ...label,\n        values: label.values?.filter((value) => value.selected || value.name.includes(valueSearchTerm)),\n      }));\n    }\n    const selector = buildSelector(this.state.labels);\n    const empty = selector === EMPTY_SELECTOR;\n    const metricCount = metrics?.values?.length || 0;\n\n    return (\n      <div className={styles.wrapper}>\n        <HorizontalGroup align=\"flex-start\" spacing=\"lg\">\n          <div>\n            <div className={styles.section}>\n              <Label description=\"Once a metric is selected only possible labels are shown.\">1. Select a metric</Label>\n              <div>\n                <Input\n                  onChange={this.onChangeMetricSearch}\n                  aria-label=\"Filter expression for metric\"\n                  value={metricSearchTerm}\n                />\n              </div>\n              <div role=\"list\" className={styles.valueListWrapper}>\n                <FixedSizeList\n                  height={Math.min(450, metricCount * LIST_ITEM_SIZE)}\n                  itemCount={metricCount}\n                  itemSize={LIST_ITEM_SIZE}\n                  itemKey={(i) => (metrics!.values as FacettableValue[])[i].name}\n                  width={300}\n                  className={styles.valueList}\n                >\n                  {({ index, style }) => {\n                    const value = metrics?.values?.[index];\n                    if (!value) {\n                      return null;\n                    }\n                    return (\n                      <div style={style}>\n                        <PromLabel\n                          name={metrics!.name}\n                          value={value?.name}\n                          title={value.details}\n                          active={value?.selected}\n                          onClick={this.onClickMetric}\n                          searchTerm={metricSearchTerm}\n                        />\n                      </div>\n                    );\n                  }}\n                </FixedSizeList>\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <div className={styles.section}>\n              <Label description=\"Once label values are selected, only possible label combinations are shown.\">\n                2. Select labels to search in\n              </Label>\n              <div>\n                <Input\n                  onChange={this.onChangeLabelSearch}\n                  aria-label=\"Filter expression for label\"\n                  value={labelSearchTerm}\n                />\n              </div>\n              {/* Using fixed height here to prevent jumpy layout */}\n              <div className={styles.list} style={{ height: 120 }}>\n                {nonMetricLabels.map((label) => (\n                  <PromLabel\n                    key={label.name}\n                    name={label.name}\n                    loading={label.loading}\n                    active={label.selected}\n                    hidden={label.hidden}\n                    facets={label.facets}\n                    onClick={this.onClickLabel}\n                    searchTerm={labelSearchTerm}\n                  />\n                ))}\n              </div>\n            </div>\n            <div className={styles.section}>\n              <Label description=\"Use the search field to find values across selected labels.\">\n                3. Select (multiple) values for your labels\n              </Label>\n              <div>\n                <Input\n                  onChange={this.onChangeValueSearch}\n                  aria-label=\"Filter expression for label values\"\n                  value={valueSearchTerm}\n                />\n              </div>\n              <div className={styles.valueListArea} ref={this.valueListsRef}>\n                {selectedLabels.map((label) => (\n                  <div\n                    role=\"list\"\n                    key={label.name}\n                    aria-label={`Values for ${label.name}`}\n                    className={styles.valueListWrapper}\n                  >\n                    <div className={styles.valueTitle}>\n                      <PromLabel\n                        name={label.name}\n                        loading={label.loading}\n                        active={label.selected}\n                        hidden={label.hidden}\n                        //If no facets, we want to show number of all label values\n                        facets={label.facets || label.values?.length}\n                        onClick={this.onClickLabel}\n                      />\n                    </div>\n                    <FixedSizeList\n                      height={Math.min(200, LIST_ITEM_SIZE * (label.values?.length || 0))}\n                      itemCount={label.values?.length || 0}\n                      itemSize={28}\n                      itemKey={(i) => (label.values as FacettableValue[])[i].name}\n                      width={200}\n                      className={styles.valueList}\n                    >\n                      {({ index, style }) => {\n                        const value = label.values?.[index];\n                        if (!value) {\n                          return null;\n                        }\n                        return (\n                          <div style={style}>\n                            <PromLabel\n                              name={label.name}\n                              value={value?.name}\n                              active={value?.selected}\n                              onClick={this.onClickValue}\n                              searchTerm={valueSearchTerm}\n                            />\n                          </div>\n                        );\n                      }}\n                    </FixedSizeList>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </HorizontalGroup>\n\n        <div className={styles.section}>\n          <Label>4. Resulting selector</Label>\n          <div aria-label=\"selector\" className={styles.selector}>\n            {selector}\n          </div>\n          {validationStatus && <div className={styles.validationStatus}>{validationStatus}</div>}\n          <HorizontalGroup>\n            <Button aria-label=\"Use selector for query button\" disabled={empty} onClick={this.onClickRunQuery}>\n              Use query\n            </Button>\n            <Button\n              aria-label=\"Use selector as metrics button\"\n              variant=\"secondary\"\n              disabled={empty}\n              onClick={this.onClickRunRateQuery}\n            >\n              Use as rate query\n            </Button>\n            <Button\n              aria-label=\"Validate submit button\"\n              variant=\"secondary\"\n              disabled={empty}\n              onClick={this.onClickValidate}\n            >\n              Validate selector\n            </Button>\n            <Button aria-label=\"Selector clear button\" variant=\"secondary\" onClick={this.onClickClear}>\n              Clear\n            </Button>\n            <div className={cx(styles.status, (status || error) && styles.statusShowing)}>\n              <span className={error ? styles.error : ''}>{error || status}</span>\n            </div>\n          </HorizontalGroup>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const PrometheusMetricsBrowser = withTheme(UnthemedPrometheusMetricsBrowser);\n","// The MIT License (MIT)\n//\n// Copyright (c) Celian Garcia and Augustin Husson @ Amadeus IT Group\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n'use strict';\n// noinspection JSUnusedGlobalSymbols\nexport var promLanguageDefinition = {\n    id: 'promql',\n    extensions: ['.promql'],\n    aliases: ['Prometheus', 'prometheus', 'prom', 'Prom', 'promql', 'Promql', 'promQL', 'PromQL'],\n    mimetypes: [],\n    loader: function () { return import('./promql'); } // eslint-disable-line @typescript-eslint/explicit-function-return-type\n};\n","import { useRef } from 'react';\nvar useLatest = function (value) {\n    var ref = useRef(value);\n    ref.current = value;\n    return ref;\n};\nexport default useLatest;\n","import { monacoTypes } from '@grafana/ui';\n\n// this thing here is a workaround in a way.\n// what we want to achieve, is that when the autocomplete-window\n// opens, the \"second, extra popup\" with the extra help,\n// also opens automatically.\n// but there is no API to achieve it.\n// the way to do it is to implement the `storageService`\n// interface, and provide our custom implementation,\n// which will default to `true` for the correct string-key.\n// unfortunately, while the typescript-interface exists,\n// it is not exported from monaco-editor,\n// so we cannot rely on typescript to make sure\n// we do it right. all we can do is to manually\n// lookup the interface, and make sure we code our code right.\n// our code is a \"best effort\" approach,\n// i am not 100% how the `scope` and `target` things work,\n// but so far it seems to work ok.\n// i would use an another approach, if there was one available.\n\nfunction makeStorageService() {\n  // we need to return an object that fulfills this interface:\n  // https://github.com/microsoft/vscode/blob/ff1e16eebb93af79fd6d7af1356c4003a120c563/src/vs/platform/storage/common/storage.ts#L37\n  // unfortunately it is not export from monaco-editor\n\n  const strings = new Map<string, string>();\n\n  // we want this to be true by default\n  strings.set('expandSuggestionDocs', true.toString());\n\n  return {\n    // we do not implement the on* handlers\n    onDidChangeValue: (data: unknown): void => undefined,\n    onDidChangeTarget: (data: unknown): void => undefined,\n    onWillSaveState: (data: unknown): void => undefined,\n\n    get: (key: string, scope: unknown, fallbackValue?: string): string | undefined => {\n      return strings.get(key) ?? fallbackValue;\n    },\n\n    getBoolean: (key: string, scope: unknown, fallbackValue?: boolean): boolean | undefined => {\n      const val = strings.get(key);\n      if (val !== undefined) {\n        // the interface-docs say the value will be converted\n        // to a boolean but do not specify how, so we improvise\n        return val === 'true';\n      } else {\n        return fallbackValue;\n      }\n    },\n\n    getNumber: (key: string, scope: unknown, fallbackValue?: number): number | undefined => {\n      const val = strings.get(key);\n      if (val !== undefined) {\n        return parseInt(val, 10);\n      } else {\n        return fallbackValue;\n      }\n    },\n\n    store: (\n      key: string,\n      value: string | boolean | number | undefined | null,\n      scope: unknown,\n      target: unknown\n    ): void => {\n      // the interface-docs say if the value is nullish, it should act as delete\n      if (value === null || value === undefined) {\n        strings.delete(key);\n      } else {\n        strings.set(key, value.toString());\n      }\n    },\n\n    remove: (key: string, scope: unknown): void => {\n      strings.delete(key);\n    },\n\n    keys: (scope: unknown, target: unknown): string[] => {\n      return Array.from(strings.keys());\n    },\n\n    logStorage: (): void => {\n      console.log('logStorage: not implemented');\n    },\n\n    migrate: (): Promise<void> => {\n      // we do not implement this\n      return Promise.resolve(undefined);\n    },\n\n    isNew: (scope: unknown): boolean => {\n      // we create a new storage for every session, we do not persist it,\n      // so we return `true`.\n      return true;\n    },\n\n    flush: (reason?: unknown): Promise<void> => {\n      // we do not implement this\n      return Promise.resolve(undefined);\n    },\n  };\n}\n\nlet overrideServices: monacoTypes.editor.IEditorOverrideServices | null = null;\n\nexport function getOverrideServices(): monacoTypes.editor.IEditorOverrideServices {\n  // only have one instance of this for every query editor\n  if (overrideServices === null) {\n    overrideServices = {\n      storageService: makeStorageService(),\n    };\n  }\n\n  return overrideServices;\n}\n","// this helper class is used to make typescript warn you when you forget\n// a case-block in a switch statement.\n// example code that triggers the typescript-error:\n//\n// const x:'A'|'B'|'C' = 'A';\n//\n// switch(x) {\n//   case 'A':\n//     // something\n//   case 'B':\n//     // something\n//   default:\n//     throw new NeverCaseError(x);\n// }\n//\n//\n// typescript will show an error in this case,\n// when you add the missing `case 'C'` code,\n// the problem will be fixed.\n\nexport class NeverCaseError extends Error {\n  constructor(value: never) {\n    super('should never happen');\n  }\n}\n","import { escapeLabelValueInExactSelector } from '../../../language_utils';\nimport { FUNCTIONS } from '../../../metricsql';\n\nimport type { Situation, Label } from './situation';\nimport { NeverCaseError } from './util';\n// FIXME: we should not load this from the \"outside\", but we cannot do that while we have the \"old\" query-field too\n\nexport type CompletionType = 'HISTORY' | 'FUNCTION' | 'METRIC_NAME' | 'DURATION' | 'LABEL_NAME' | 'LABEL_VALUE';\n\ntype Completion = {\n  type: CompletionType;\n  label: string;\n  insertText: string;\n  detail?: string;\n  documentation?: string;\n  triggerOnInsert?: boolean;\n};\n\ntype Metric = {\n  name: string;\n  help: string;\n  type: string;\n};\n\nexport type DataProvider = {\n  getHistory: () => Promise<string[]>;\n  getAllMetricNames: () => Promise<Metric[]>;\n  getAllLabelNames: () => Promise<string[]>;\n  getLabelValues: (labelName: string) => Promise<string[]>;\n  getSeries: (selector: string) => Promise<Record<string, string[]>>;\n};\n\n// we order items like: history, functions, metrics\n\nasync function getAllMetricNamesCompletions(dataProvider: DataProvider): Promise<Completion[]> {\n  const metrics = await dataProvider.getAllMetricNames();\n  return metrics.map((metric) => ({\n    type: 'METRIC_NAME',\n    label: metric.name,\n    insertText: metric.name,\n    detail: `${metric.name} : ${metric.type}`,\n    documentation: metric.help,\n  }));\n}\n\nconst FUNCTION_COMPLETIONS: Completion[] = FUNCTIONS.map((f) => ({\n  type: 'FUNCTION',\n  label: f.label,\n  insertText: f.insertText ?? '', // i don't know what to do when this is nullish. it should not be.\n  detail: f.detail,\n  documentation: f.documentation,\n}));\n\nasync function getAllFunctionsAndMetricNamesCompletions(dataProvider: DataProvider): Promise<Completion[]> {\n  const metricNames = await getAllMetricNamesCompletions(dataProvider);\n  return [...FUNCTION_COMPLETIONS, ...metricNames];\n}\n\nconst DURATION_COMPLETIONS: Completion[] = [\n  '$__interval',\n  '$__range',\n  '$__rate_interval',\n  '1m',\n  '5m',\n  '10m',\n  '30m',\n  '1h',\n  '1d',\n].map((text) => ({\n  type: 'DURATION',\n  label: text,\n  insertText: text,\n}));\n\nasync function getAllHistoryCompletions(dataProvider: DataProvider): Promise<Completion[]> {\n  // function getAllHistoryCompletions(queryHistory: PromHistoryItem[]): Completion[] {\n  // NOTE: the typescript types are wrong. historyItem.query.expr can be undefined\n  const allHistory = await dataProvider.getHistory();\n  // FIXME: find a better history-limit\n  return allHistory.slice(0, 10).map((expr) => ({\n    type: 'HISTORY',\n    label: expr,\n    insertText: expr,\n  }));\n}\n\nfunction makeSelector(metricName: string | undefined, labels: Label[]): string {\n  const allLabels = [...labels];\n\n  // we transform the metricName to a label, if it exists\n  if (metricName !== undefined) {\n    allLabels.push({ name: '__name__', value: metricName, op: '=' });\n  }\n\n  const allLabelTexts = allLabels.map(\n    (label) => `${label.name}${label.op}\"${escapeLabelValueInExactSelector(label.value)}\"`\n  );\n\n  return `{${allLabelTexts.join(',')}}`;\n}\n\nasync function getLabelNames(\n  metric: string | undefined,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<string[]> {\n  if (metric === undefined && otherLabels.length === 0) {\n    // if there is no filtering, we have to use a special endpoint\n    return dataProvider.getAllLabelNames();\n  } else {\n    const selector = makeSelector(metric, otherLabels);\n    const data = await dataProvider.getSeries(selector);\n    const possibleLabelNames = Object.keys(data); // all names from prometheus\n    const usedLabelNames = new Set(otherLabels.map((l) => l.name)); // names used in the query\n    return possibleLabelNames.filter((l) => !usedLabelNames.has(l));\n  }\n}\n\nasync function getLabelNamesForCompletions(\n  metric: string | undefined,\n  suffix: string,\n  triggerOnInsert: boolean,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<Completion[]> {\n  const labelNames = await getLabelNames(metric, otherLabels, dataProvider);\n  return labelNames.map((text) => ({\n    type: 'LABEL_NAME',\n    label: text,\n    insertText: `${text}${suffix}`,\n    triggerOnInsert,\n  }));\n}\n\nasync function getLabelNamesForSelectorCompletions(\n  metric: string | undefined,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<Completion[]> {\n  return getLabelNamesForCompletions(metric, '=', true, otherLabels, dataProvider);\n}\nasync function getLabelNamesForByCompletions(\n  metric: string | undefined,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<Completion[]> {\n  return getLabelNamesForCompletions(metric, '', false, otherLabels, dataProvider);\n}\n\nasync function getLabelValues(\n  metric: string | undefined,\n  labelName: string,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<string[]> {\n  if (metric === undefined && otherLabels.length === 0) {\n    // if there is no filtering, we have to use a special endpoint\n    return dataProvider.getLabelValues(labelName);\n  } else {\n    const selector = makeSelector(metric, otherLabels);\n    const data = await dataProvider.getSeries(selector);\n    return data[labelName] ?? [];\n  }\n}\n\nasync function getLabelValuesForMetricCompletions(\n  metric: string | undefined,\n  labelName: string,\n  betweenQuotes: boolean,\n  otherLabels: Label[],\n  dataProvider: DataProvider\n): Promise<Completion[]> {\n  const values = await getLabelValues(metric, labelName, otherLabels, dataProvider);\n  return values.map((text) => ({\n    type: 'LABEL_VALUE',\n    label: text,\n    insertText: betweenQuotes ? text : `\"${text}\"`, // FIXME: escaping strange characters?\n  }));\n}\n\nexport async function getCompletions(situation: Situation, dataProvider: DataProvider): Promise<Completion[]> {\n  switch (situation.type) {\n    case 'IN_DURATION':\n      return DURATION_COMPLETIONS;\n    case 'IN_FUNCTION':\n      return getAllFunctionsAndMetricNamesCompletions(dataProvider);\n    case 'AT_ROOT': {\n      return getAllFunctionsAndMetricNamesCompletions(dataProvider);\n    }\n    case 'EMPTY': {\n      const metricNames = await getAllMetricNamesCompletions(dataProvider);\n      const historyCompletions = await getAllHistoryCompletions(dataProvider);\n      return [...historyCompletions, ...FUNCTION_COMPLETIONS, ...metricNames];\n    }\n    case 'IN_LABEL_SELECTOR_NO_LABEL_NAME':\n      return getLabelNamesForSelectorCompletions(situation.metricName, situation.otherLabels, dataProvider);\n    case 'IN_GROUPING':\n      return getLabelNamesForByCompletions(situation.metricName, situation.otherLabels, dataProvider);\n    case 'IN_LABEL_SELECTOR_WITH_LABEL_NAME':\n      return getLabelValuesForMetricCompletions(\n        situation.metricName,\n        situation.labelName,\n        situation.betweenQuotes,\n        situation.otherLabels,\n        dataProvider\n      );\n    default:\n      throw new NeverCaseError(situation);\n  }\n}\n","import type { SyntaxNode, Tree } from '@lezer/common';\nimport {\n  AggregateExpr,\n  AggregateModifier,\n  EqlRegex,\n  EqlSingle,\n  FunctionCallBody,\n  GroupingLabels,\n  Identifier,\n  LabelMatcher,\n  LabelMatchers,\n  LabelMatchList,\n  LabelName,\n  MatchOp,\n  MatrixSelector,\n  MetricIdentifier,\n  Neq,\n  NeqRegex,\n  parser,\n  PromQL,\n  StringLiteral,\n  VectorSelector,\n} from '@prometheus-io/lezer-promql';\n\nimport { NeverCaseError } from './util';\n\ntype Direction = 'parent' | 'firstChild' | 'lastChild' | 'nextSibling';\n\ntype NodeTypeId =\n  | 0 // this is used as error-id\n  | typeof AggregateExpr\n  | typeof AggregateModifier\n  | typeof FunctionCallBody\n  | typeof GroupingLabels\n  | typeof Identifier\n  | typeof LabelMatcher\n  | typeof LabelMatchers\n  | typeof LabelMatchList\n  | typeof LabelName\n  | typeof MetricIdentifier\n  | typeof PromQL\n  | typeof StringLiteral\n  | typeof VectorSelector\n  | typeof MatrixSelector\n  | typeof MatchOp\n  | typeof EqlSingle\n  | typeof Neq\n  | typeof EqlRegex\n  | typeof NeqRegex;\n\ntype Path = Array<[Direction, NodeTypeId]>;\n\nfunction move(node: SyntaxNode, direction: Direction): SyntaxNode | null {\n  switch (direction) {\n    case 'parent':\n      return node.parent;\n    case 'firstChild':\n      return node.firstChild;\n    case 'lastChild':\n      return node.lastChild;\n    case 'nextSibling':\n      return node.nextSibling;\n    default:\n      throw new NeverCaseError(direction);\n  }\n}\n\nfunction walk(node: SyntaxNode, path: Path): SyntaxNode | null {\n  let current: SyntaxNode | null = node;\n  for (const [direction, expectedType] of path) {\n    current = move(current, direction);\n    if (current === null) {\n      // we could not move in the direction, we stop\n      return null;\n    }\n    if (current.type.id !== expectedType) {\n      // the reached node has wrong type, we stop\n      return null;\n    }\n  }\n  return current;\n}\n\nfunction getNodeText(node: SyntaxNode, text: string): string {\n  return text.slice(node.from, node.to);\n}\n\nfunction parsePromQLStringLiteral(text: string): string {\n  // if it is a string-literal, it is inside quotes of some kind\n  const inside = text.slice(1, text.length - 1);\n\n  // FIXME: support https://prometheus.io/docs/prometheus/latest/querying/basics/#string-literals\n  // FIXME: maybe check other promql code, if all is supported or not\n\n  // for now we do only some very simple un-escaping\n\n  // we start with double-quotes\n  if (text.startsWith('\"') && text.endsWith('\"')) {\n    // NOTE: this is not 100% perfect, we only unescape the double-quote,\n    // there might be other characters too\n    return inside.replace(/\\\\\"/, '\"');\n  }\n\n  // then single-quote\n  if (text.startsWith(\"'\") && text.endsWith(\"'\")) {\n    // NOTE: this is not 100% perfect, we only unescape the single-quote,\n    // there might be other characters too\n    return inside.replace(/\\\\'/, \"'\");\n  }\n\n  // then backticks\n  if (text.startsWith('`') && text.endsWith('`')) {\n    return inside;\n  }\n\n  throw new Error('FIXME: invalid string literal');\n}\n\ntype LabelOperator = '=' | '!=' | '=~' | '!~';\n\nexport type Label = {\n  name: string;\n  value: string;\n  op: LabelOperator;\n};\n\nexport type Situation =\n  | {\n      type: 'IN_FUNCTION';\n    }\n  | {\n      type: 'AT_ROOT';\n    }\n  | {\n      type: 'EMPTY';\n    }\n  | {\n      type: 'IN_DURATION';\n    }\n  | {\n      type: 'IN_LABEL_SELECTOR_NO_LABEL_NAME';\n      metricName?: string;\n      otherLabels: Label[];\n    }\n  | {\n      type: 'IN_GROUPING';\n      metricName: string;\n      otherLabels: Label[];\n    }\n  | {\n      type: 'IN_LABEL_SELECTOR_WITH_LABEL_NAME';\n      metricName?: string;\n      labelName: string;\n      betweenQuotes: boolean;\n      otherLabels: Label[];\n    };\n\ntype Resolver = {\n  path: NodeTypeId[];\n  fun: (node: SyntaxNode, text: string, pos: number) => Situation | null;\n};\n\nfunction isPathMatch(resolverPath: NodeTypeId[], cursorPath: number[]): boolean {\n  return resolverPath.every((item, index) => item === cursorPath[index]);\n}\n\nconst ERROR_NODE_NAME: NodeTypeId = 0; // this is used as error-id\n\nconst RESOLVERS: Resolver[] = [\n  {\n    path: [LabelMatchers, VectorSelector],\n    fun: resolveLabelKeysWithEquals,\n  },\n  {\n    path: [PromQL],\n    fun: resolveTopLevel,\n  },\n  {\n    path: [FunctionCallBody],\n    fun: resolveInFunction,\n  },\n  {\n    path: [StringLiteral, LabelMatcher],\n    fun: resolveLabelMatcher,\n  },\n  {\n    path: [ERROR_NODE_NAME, LabelMatcher],\n    fun: resolveLabelMatcher,\n  },\n  {\n    path: [ERROR_NODE_NAME, MatrixSelector],\n    fun: resolveDurations,\n  },\n  {\n    path: [GroupingLabels],\n    fun: resolveLabelsForGrouping,\n  },\n];\n\nconst LABEL_OP_MAP = new Map<number, LabelOperator>([\n  [EqlSingle, '='],\n  [EqlRegex, '=~'],\n  [Neq, '!='],\n  [NeqRegex, '!~'],\n]);\n\nfunction getLabelOp(opNode: SyntaxNode): LabelOperator | null {\n  const opChild = opNode.firstChild;\n  if (opChild === null) {\n    return null;\n  }\n\n  return LABEL_OP_MAP.get(opChild.type.id) ?? null;\n}\n\nfunction getLabel(labelMatcherNode: SyntaxNode, text: string): Label | null {\n  if (labelMatcherNode.type.id !== LabelMatcher) {\n    return null;\n  }\n\n  const nameNode = walk(labelMatcherNode, [['firstChild', LabelName]]);\n\n  if (nameNode === null) {\n    return null;\n  }\n\n  const opNode = walk(nameNode, [['nextSibling', MatchOp]]);\n  if (opNode === null) {\n    return null;\n  }\n\n  const op = getLabelOp(opNode);\n  if (op === null) {\n    return null;\n  }\n\n  const valueNode = walk(labelMatcherNode, [['lastChild', StringLiteral]]);\n\n  if (valueNode === null) {\n    return null;\n  }\n\n  const name = getNodeText(nameNode, text);\n  const value = parsePromQLStringLiteral(getNodeText(valueNode, text));\n\n  return { name, value, op };\n}\n\nfunction getLabels(labelMatchersNode: SyntaxNode, text: string): Label[] {\n  if (labelMatchersNode.type.id !== LabelMatchers) {\n    return [];\n  }\n\n  let listNode: SyntaxNode | null = walk(labelMatchersNode, [['firstChild', LabelMatchList]]);\n\n  const labels: Label[] = [];\n\n  while (listNode !== null) {\n    const matcherNode = walk(listNode, [['lastChild', LabelMatcher]]);\n    if (matcherNode === null) {\n      // unexpected, we stop\n      return [];\n    }\n\n    const label = getLabel(matcherNode, text);\n    if (label !== null) {\n      labels.push(label);\n    }\n\n    // there might be more labels\n    listNode = walk(listNode, [['firstChild', LabelMatchList]]);\n  }\n\n  // our labels-list is last-first, so we reverse it\n  labels.reverse();\n\n  return labels;\n}\n\nfunction getNodeChildren(node: SyntaxNode): SyntaxNode[] {\n  let child: SyntaxNode | null = node.firstChild;\n  const children: SyntaxNode[] = [];\n  while (child !== null) {\n    children.push(child);\n    child = child.nextSibling;\n  }\n  return children;\n}\n\nfunction getNodeInSubtree(node: SyntaxNode, typeId: NodeTypeId): SyntaxNode | null {\n  // first we try the current node\n  if (node.type.id === typeId) {\n    return node;\n  }\n\n  // then we try the children\n  const children = getNodeChildren(node);\n  for (const child of children) {\n    const n = getNodeInSubtree(child, typeId);\n    if (n !== null) {\n      return n;\n    }\n  }\n\n  return null;\n}\n\nfunction resolveLabelsForGrouping(node: SyntaxNode, text: string, pos: number): Situation | null {\n  const aggrExpNode = walk(node, [\n    ['parent', AggregateModifier],\n    ['parent', AggregateExpr],\n  ]);\n  if (aggrExpNode === null) {\n    return null;\n  }\n  const bodyNode = aggrExpNode.getChild(FunctionCallBody);\n  if (bodyNode === null) {\n    return null;\n  }\n\n  const metricIdNode = getNodeInSubtree(bodyNode, MetricIdentifier);\n  if (metricIdNode === null) {\n    return null;\n  }\n\n  const idNode = walk(metricIdNode, [['firstChild', Identifier]]);\n  if (idNode === null) {\n    return null;\n  }\n\n  const metricName = getNodeText(idNode, text);\n  return {\n    type: 'IN_GROUPING',\n    metricName,\n    otherLabels: [],\n  };\n}\n\nfunction resolveLabelMatcher(node: SyntaxNode, text: string, pos: number): Situation | null {\n  // we can arrive here in two situation. `node` is either:\n  // - a StringNode (like in `{job=\"^\"}`)\n  // - or an error node (like in `{job=^}`)\n  const inStringNode = !node.type.isError;\n\n  const parent = walk(node, [['parent', LabelMatcher]]);\n  if (parent === null) {\n    return null;\n  }\n\n  const labelNameNode = walk(parent, [['firstChild', LabelName]]);\n  if (labelNameNode === null) {\n    return null;\n  }\n\n  const labelName = getNodeText(labelNameNode, text);\n\n  // now we need to go up, to the parent of LabelMatcher,\n  // there can be one or many `LabelMatchList` parents, we have\n  // to go through all of them\n\n  const firstListNode = walk(parent, [['parent', LabelMatchList]]);\n  if (firstListNode === null) {\n    return null;\n  }\n\n  let listNode = firstListNode;\n\n  // we keep going through the parent-nodes\n  // as long as they are LabelMatchList.\n  // as soon as we reawch LabelMatchers, we stop\n  let labelMatchersNode: SyntaxNode | null = null;\n  while (labelMatchersNode === null) {\n    const p = listNode.parent;\n    if (p === null) {\n      return null;\n    }\n\n    const { id } = p.type;\n\n    switch (id) {\n      case LabelMatchList:\n        //we keep looping\n        listNode = p;\n        continue;\n      case LabelMatchers:\n        // we reached the end, we can stop the loop\n        labelMatchersNode = p;\n        continue;\n      default:\n        // we reached some other node, we stop\n        return null;\n    }\n  }\n\n  // now we need to find the other names\n  const allLabels = getLabels(labelMatchersNode, text);\n\n  // we need to remove \"our\" label from all-labels, if it is in there\n  const otherLabels = allLabels.filter((label) => label.name !== labelName);\n\n  const metricNameNode = walk(labelMatchersNode, [\n    ['parent', VectorSelector],\n    ['firstChild', MetricIdentifier],\n    ['firstChild', Identifier],\n  ]);\n\n  if (metricNameNode === null) {\n    // we are probably in a situation without a metric name\n    return {\n      type: 'IN_LABEL_SELECTOR_WITH_LABEL_NAME',\n      labelName,\n      betweenQuotes: inStringNode,\n      otherLabels,\n    };\n  }\n\n  const metricName = getNodeText(metricNameNode, text);\n\n  return {\n    type: 'IN_LABEL_SELECTOR_WITH_LABEL_NAME',\n    metricName,\n    labelName,\n    betweenQuotes: inStringNode,\n    otherLabels,\n  };\n}\n\nfunction resolveTopLevel(node: SyntaxNode, text: string, pos: number): Situation {\n  return {\n    type: 'AT_ROOT',\n  };\n}\n\nfunction resolveInFunction(node: SyntaxNode, text: string, pos: number): Situation {\n  return {\n    type: 'IN_FUNCTION',\n  };\n}\n\nfunction resolveDurations(node: SyntaxNode, text: string, pos: number): Situation {\n  return {\n    type: 'IN_DURATION',\n  };\n}\n\nfunction subTreeHasError(node: SyntaxNode): boolean {\n  return getNodeInSubtree(node, ERROR_NODE_NAME) !== null;\n}\n\nfunction resolveLabelKeysWithEquals(node: SyntaxNode, text: string, pos: number): Situation | null {\n  // for example `something{^}`\n\n  // there are some false positives that can end up in this situation, that we want\n  // to eliminate:\n  // `something{a~^}` (if this subtree contains any error-node, we stop)\n  if (subTreeHasError(node)) {\n    return null;\n  }\n\n  // next false positive:\n  // `something{a=\"1\"^}`\n  const child = walk(node, [['firstChild', LabelMatchList]]);\n  if (child !== null) {\n    // means the label-matching part contains at least one label already.\n    //\n    // in this case, we will need to have a `,` character at the end,\n    // to be able to suggest adding the next label.\n    // the area between the end-of-the-child-node and the cursor-pos\n    // must contain a `,` in this case.\n    const textToCheck = text.slice(child.to, pos);\n\n    if (!textToCheck.includes(',')) {\n      return null;\n    }\n  }\n\n  const metricNameNode = walk(node, [\n    ['parent', VectorSelector],\n    ['firstChild', MetricIdentifier],\n    ['firstChild', Identifier],\n  ]);\n\n  const otherLabels = getLabels(node, text);\n\n  if (metricNameNode === null) {\n    // we are probably in a situation without a metric name.\n    return {\n      type: 'IN_LABEL_SELECTOR_NO_LABEL_NAME',\n      otherLabels,\n    };\n  }\n\n  const metricName = getNodeText(metricNameNode, text);\n\n  return {\n    type: 'IN_LABEL_SELECTOR_NO_LABEL_NAME',\n    metricName,\n    otherLabels,\n  };\n}\n\n// we find the first error-node in the tree that is at the cursor-position.\n// NOTE: this might be too slow, might need to optimize it\n// (ideas: we do not need to go into every subtree, based on from/to)\n// also, only go to places that are in the sub-tree of the node found\n// by default by lezer. problem is, `next()` will go upward too,\n// and we do not want to go higher than our node\nfunction getErrorNode(tree: Tree, pos: number): SyntaxNode | null {\n  const cur = tree.cursorAt(pos);\n  while (true) {\n    if (cur.from === pos && cur.to === pos) {\n      const { node } = cur;\n      if (node.type.isError) {\n        return node;\n      }\n    }\n\n    if (!cur.next()) {\n      break;\n    }\n  }\n  return null;\n}\n\nexport function getSituation(text: string, pos: number): Situation | null {\n  // there is a special-case when we are at the start of writing text,\n  // so we handle that case first\n\n  if (text === '') {\n    return {\n      type: 'EMPTY',\n    };\n  }\n\n  /*\n\tPromQL\n  Expr\n  VectorSelector\n  LabelMatchers\n  */\n  const tree = parser.parse(text);\n\n  // if the tree contains error, it is very probable that\n  // our node is one of those error-nodes.\n  // also, if there are errors, the node lezer finds us,\n  // might not be the best node.\n  // so first we check if there is an error-node at the cursor-position\n  const maybeErrorNode = getErrorNode(tree, pos);\n\n  const cur = maybeErrorNode != null ? maybeErrorNode.cursor() : tree.cursorAt(pos);\n  const currentNode = cur.node;\n\n  const ids = [cur.type.id];\n  while (cur.parent()) {\n    ids.push(cur.type.id);\n  }\n\n  for (let resolver of RESOLVERS) {\n    // i do not use a foreach because i want to stop as soon\n    // as i find something\n    if (isPathMatch(resolver.path, ids)) {\n      return resolver.fun(currentNode, text, pos);\n    }\n  }\n\n  return null;\n}\n","import {IMarkdownString} from \"monaco-editor\";\n\nimport type { Monaco, monacoTypes } from '@grafana/ui';\n\nimport { getCompletions, DataProvider, CompletionType } from './completions';\nimport { getSituation } from './situation';\nimport { NeverCaseError } from './util';\n\nexport function getSuggestOptions(): monacoTypes.editor.ISuggestOptions {\n  return {\n    // monaco-editor sometimes provides suggestions automatically, i am not\n    // sure based on what, seems to be by analyzing the words already\n    // written.\n    // to try it out:\n    // - enter `go_goroutines{job~`\n    // - have the cursor at the end of the string\n    // - press ctrl-enter\n    // - you will get two suggestions\n    // those were not provided by grafana, they are offered automatically.\n    // i want to remove those. the only way i found is:\n    // - every suggestion-item has a `kind` attribute,\n    //   that controls the icon to the left of the suggestion.\n    // - items auto-generated by monaco have `kind` set to `text`.\n    // - we make sure grafana-provided suggestions do not have `kind` set to `text`.\n    // - and then we tell monaco not to show suggestions of kind `text`\n    showWords: false,\n  };\n}\n\nfunction getMonacoCompletionItemKind(type: CompletionType, monaco: Monaco): monacoTypes.languages.CompletionItemKind {\n  switch (type) {\n    case 'DURATION':\n      return monaco.languages.CompletionItemKind.Unit;\n    case 'FUNCTION':\n      return monaco.languages.CompletionItemKind.Variable;\n    case 'HISTORY':\n      return monaco.languages.CompletionItemKind.Snippet;\n    case 'LABEL_NAME':\n      return monaco.languages.CompletionItemKind.Enum;\n    case 'LABEL_VALUE':\n      return monaco.languages.CompletionItemKind.EnumMember;\n    case 'METRIC_NAME':\n      return monaco.languages.CompletionItemKind.Constructor;\n    default:\n      throw new NeverCaseError(type);\n  }\n}\nexport function getCompletionProvider(\n  monaco: Monaco,\n  dataProvider: DataProvider\n): monacoTypes.languages.CompletionItemProvider {\n  const provideCompletionItems = (\n    model: monacoTypes.editor.ITextModel,\n    position: monacoTypes.Position\n  ): monacoTypes.languages.ProviderResult<monacoTypes.languages.CompletionList> => {\n    const word = model.getWordAtPosition(position);\n    const range =\n      word != null\n        ? monaco.Range.lift({\n            startLineNumber: position.lineNumber,\n            endLineNumber: position.lineNumber,\n            startColumn: word.startColumn,\n            endColumn: word.endColumn,\n          })\n        : monaco.Range.fromPositions(position);\n    // documentation says `position` will be \"adjusted\" in `getOffsetAt`\n    // i don't know what that means, to be sure i clone it\n    const positionClone = {\n      column: position.column,\n      lineNumber: position.lineNumber,\n    };\n    const offset = model.getOffsetAt(positionClone);\n    const situation = getSituation(model.getValue(), offset);\n    const completionsPromise = situation != null ? getCompletions(situation, dataProvider) : Promise.resolve([]);\n    return completionsPromise.then((items) => {\n      // monaco by-default alphabetically orders the items.\n      // to stop it, we use a number-as-string sortkey,\n      // so that monaco keeps the order we use\n      const maxIndexDigits = items.length.toString().length;\n      const suggestions: monacoTypes.languages.CompletionItem[] = items.map((item, index) => ({\n        kind: getMonacoCompletionItemKind(item.type, monaco),\n        label: item.label,\n        insertText: item.insertText,\n        detail: item.detail,\n        documentation: { value: item.documentation } as IMarkdownString,\n        sortText: index.toString().padStart(maxIndexDigits, '0'), // to force the order we have\n        range,\n        command: item.triggerOnInsert\n          ? {\n              id: 'editor.action.triggerSuggest',\n              title: '',\n            }\n          : undefined,\n      }));\n      return { suggestions };\n    });\n  };\n\n  return {\n    triggerCharacters: ['{', ',', '[', '(', '=', '~', ' ', '\"'],\n    provideCompletionItems,\n  };\n}\n","import { css } from '@emotion/css';\nimport { promLanguageDefinition } from 'monaco-promql';\nimport React, { useRef, useEffect } from 'react';\nimport { useLatest } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { useTheme2, ReactMonacoEditor, Monaco, monacoTypes } from '@grafana/ui';\n\nimport { Props } from './MonacoQueryFieldProps';\nimport { getOverrideServices } from './getOverrideServices';\nimport { getCompletionProvider, getSuggestOptions } from './monaco-completion-provider';\n\nconst options: monacoTypes.editor.IStandaloneEditorConstructionOptions = {\n  codeLens: false,\n  contextmenu: false,\n  // we need `fixedOverflowWidgets` because otherwise in grafana-dashboards\n  // the popup is clipped by the panel-visualizations.\n  fixedOverflowWidgets: true,\n  folding: false,\n  fontSize: 14,\n  lineDecorationsWidth: 8, // used as \"padding-left\"\n  lineNumbers: 'off',\n  minimap: { enabled: false },\n  overviewRulerBorder: false,\n  overviewRulerLanes: 0,\n  padding: {\n    // these numbers were picked so that visually this matches the previous version\n    // of the query-editor the best\n    top: 4,\n    bottom: 5,\n  },\n  renderLineHighlight: 'none',\n  scrollbar: {\n    vertical: 'hidden',\n    verticalScrollbarSize: 8, // used as \"padding-right\"\n    horizontal: 'hidden',\n    horizontalScrollbarSize: 0,\n  },\n  scrollBeyondLastLine: false,\n  suggest: getSuggestOptions(),\n  suggestFontSize: 12,\n  wordWrap: 'on',\n};\n\n// this number was chosen by testing various values. it might be necessary\n// because of the width of the border, not sure.\n//it needs to do 2 things:\n// 1. when the editor is single-line, it should make the editor height be visually correct\n// 2. when the editor is multi-line, the editor should not be \"scrollable\" (meaning,\n//    you do a scroll-movement in the editor, and it will scroll the content by a couple pixels\n//    up & down. this we want to avoid)\nconst EDITOR_HEIGHT_OFFSET = 2;\n\nconst PROMQL_LANG_ID = promLanguageDefinition.id;\n\n// we must only run the promql-setup code once\nlet PROMQL_SETUP_STARTED = false;\n\nfunction ensurePromQL(monaco: Monaco) {\n  if (PROMQL_SETUP_STARTED === false) {\n    PROMQL_SETUP_STARTED = true;\n    const { aliases, extensions, mimetypes, loader } = promLanguageDefinition;\n    monaco.languages.register({ id: PROMQL_LANG_ID, aliases, extensions, mimetypes });\n\n    loader().then((mod) => {\n      monaco.languages.setMonarchTokensProvider(PROMQL_LANG_ID, mod.language);\n      monaco.languages.setLanguageConfiguration(PROMQL_LANG_ID, mod.languageConfiguration);\n    });\n  }\n}\n\nconst getStyles = (theme: GrafanaTheme2, placeholder: string) => {\n  return {\n    container: css`\n      border-radius: ${theme.shape.borderRadius()};\n      border: 1px solid ${theme.components.input.borderColor};\n    `,\n    placeholder: css`\n      ::after {\n        content: '${placeholder}';\n        font-family: ${theme.typography.fontFamilyMonospace};\n        opacity: 0.3;\n      }\n    `,\n  };\n};\n\nconst MonacoQueryField = (props: Props) => {\n  // we need only one instance of `overrideServices` during the lifetime of the react component\n  const overrideServicesRef = useRef(getOverrideServices());\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { languageProvider, history, onBlur, onRunQuery, initialValue, placeholder } = props;\n\n  const lpRef = useLatest(languageProvider);\n  const historyRef = useLatest(history);\n  const onRunQueryRef = useLatest(onRunQuery);\n  const onBlurRef = useLatest(onBlur);\n\n  const autocompleteDisposeFun = useRef<(() => void) | null>(null);\n\n  const theme = useTheme2();\n  const styles = getStyles(theme, placeholder);\n\n  useEffect(() => {\n    // when we unmount, we unregister the autocomplete-function, if it was registered\n    return () => {\n      autocompleteDisposeFun.current?.();\n    };\n  }, []);\n\n  return (\n    <div\n      aria-label={selectors.components.QueryField.container}\n      className={styles.container}\n      // NOTE: we will be setting inline-style-width/height on this element\n      ref={containerRef}\n    >\n      <ReactMonacoEditor\n        overrideServices={overrideServicesRef.current}\n        options={options}\n        language=\"promql\"\n        value={initialValue}\n        beforeMount={(monaco) => {\n          ensurePromQL(monaco);\n        }}\n        onMount={(editor, monaco) => {\n          // we setup on-blur\n          editor.onDidBlurEditorWidget(() => {\n            onBlurRef.current(editor.getValue());\n          });\n\n          // we construct a DataProvider object\n          const getSeries = (selector: string) => lpRef.current.getSeries(selector);\n\n          const getHistory = () =>\n            Promise.resolve(historyRef.current.map((h) => h.query.expr).filter((expr) => expr !== undefined));\n\n          const getAllMetricNames = () => {\n            const { metrics, metricsMetadata } = lpRef.current;\n            const result = metrics.map((m) => {\n              const metaItem = metricsMetadata?.[m];\n              return {\n                name: m,\n                help: metaItem?.help ?? '',\n                type: metaItem?.type ?? '',\n              };\n            });\n\n            return Promise.resolve(result);\n          };\n\n          const getAllLabelNames = () => Promise.resolve(lpRef.current.getLabelKeys());\n\n          const getLabelValues = (labelName: string) => lpRef.current.getLabelValues(labelName);\n\n          const dataProvider = { getSeries, getHistory, getAllMetricNames, getAllLabelNames, getLabelValues };\n          const completionProvider = getCompletionProvider(monaco, dataProvider);\n\n          // completion-providers in monaco are not registered directly to editor-instances,\n          // they are registered to languages. this makes it hard for us to have\n          // separate completion-providers for every query-field-instance\n          // (but we need that, because they might connect to different datasources).\n          // the trick we do is, we wrap the callback in a \"proxy\",\n          // and in the proxy, the first thing is, we check if we are called from\n          // \"our editor instance\", and if not, we just return nothing. if yes,\n          // we call the completion-provider.\n          const filteringCompletionProvider: monacoTypes.languages.CompletionItemProvider = {\n            ...completionProvider,\n            provideCompletionItems: (model, position, context, token) => {\n              // if the model-id does not match, then this call is from a different editor-instance,\n              // not \"our instance\", so return nothing\n              if (editor.getModel()?.id !== model.id) {\n                return { suggestions: [] };\n              }\n              return completionProvider.provideCompletionItems(model, position, context, token);\n            },\n          };\n\n          const { dispose } = monaco.languages.registerCompletionItemProvider(\n            PROMQL_LANG_ID,\n            filteringCompletionProvider\n          );\n\n          autocompleteDisposeFun.current = dispose;\n          // this code makes the editor resize itself so that the content fits\n          // (it will grow taller when necessary)\n          // FIXME: maybe move this functionality into CodeEditor, like:\n          // <CodeEditor resizingMode=\"single-line\"/>\n          const updateElementHeight = () => {\n            const containerDiv = containerRef.current;\n            if (containerDiv !== null) {\n              const pixelHeight = editor.getContentHeight();\n              containerDiv.style.height = `${pixelHeight + EDITOR_HEIGHT_OFFSET}px`;\n              containerDiv.style.width = '100%';\n              const pixelWidth = containerDiv.clientWidth;\n              editor.layout({ width: pixelWidth, height: pixelHeight });\n            }\n          };\n\n          editor.onDidContentSizeChange(updateElementHeight);\n          updateElementHeight();\n\n          // handle: shift + enter\n          // FIXME: maybe move this functionality into CodeEditor?\n          editor.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, () => {\n            onRunQueryRef.current(editor.getValue());\n          });\n\n          /* Something in this configuration of monaco doesn't bubble up [mod]+K, which the\n          command palette uses. Pass the event out of monaco manually\n          */\n          editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyK, function () {\n            global.dispatchEvent(new KeyboardEvent('keydown', { key: 'k', metaKey: true }));\n          });\n\n          if (placeholder) {\n            const placeholderDecorators = [\n              {\n                range: new monaco.Range(1, 1, 1, 1),\n                contents: [\n                  { value: \"**bold** _italics_ regular `code`\" }\n                ],\n                options: {\n                  className: styles.placeholder,\n                  isWholeLine: true,\n                },\n              },\n            ];\n\n            let decorators: string[] = [];\n\n            const checkDecorators: () => void = () => {\n              const model = editor.getModel();\n\n              if (!model) {\n                return;\n              }\n\n              const newDecorators = model.getValueLength() === 0 ? placeholderDecorators : [];\n              decorators = model.deltaDecorations(decorators, newDecorators);\n            };\n\n            checkDecorators();\n            editor.onDidChangeModelContent(checkDecorators);\n          }\n        }}\n      />\n    </div>\n  );\n};\n\n// we will lazy-load this module using React.lazy,\n// and that only supports default-exports,\n// so we have to default-export this, even if\n// it is against the style-guidelines.\n\nexport default MonacoQueryField;\n","import React, { Suspense } from 'react';\n\nimport Field from './MonacoQueryField'\nimport { Props } from './MonacoQueryFieldProps';\n\n// const Field = React.lazy(() => import(/* webpackChunkName: \"prom-query-field\" */ './MonacoQueryField'));\n\nexport const MonacoQueryFieldLazy = (props: Props) => {\n  return (\n    <Suspense fallback={null}>\n      <Field {...props} />\n    </Suspense>\n  );\n};\n","import React, { useRef } from 'react';\n\nimport { MonacoQueryFieldLazy } from './MonacoQueryFieldLazy';\nimport { Props as MonacoProps } from './MonacoQueryFieldProps';\n\ntype Props = Omit<MonacoProps, 'onRunQuery' | 'onBlur'> & {\n  onChange: (query: string) => void;\n  onRunQuery: () => void;\n  runQueryOnBlur: boolean;\n};\n\nexport const MonacoQueryFieldWrapper = (props: Props) => {\n  const lastRunValueRef = useRef<string | null>(null);\n  const { runQueryOnBlur, onRunQuery, onChange, ...rest } = props;\n\n  const handleRunQuery = (value: string) => {\n    lastRunValueRef.current = value;\n    onChange(value);\n    onRunQuery();\n  };\n\n  const handleBlur = (value: string) => {\n    if (runQueryOnBlur) {\n      // run handleRunQuery only if the current value is different from the last-time-executed value\n      if (value !== lastRunValueRef.current) {\n        handleRunQuery(value);\n      }\n    } else {\n      onChange(value);\n    }\n  };\n\n  return <MonacoQueryFieldLazy onRunQuery={handleRunQuery} onBlur={handleBlur} {...rest} />;\n};\n","import { LanguageMap, languages as prismLanguages } from 'prismjs';\nimport React, { ReactNode } from 'react';\nimport { Plugin } from 'slate';\nimport { Editor } from 'slate-react';\n\nimport { CoreApp, isDataFrame, QueryEditorProps, QueryHint, TimeRange, toLegacyResponseData } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport {\n  BracesPlugin,\n  DOMUtil,\n  Icon,\n  SlatePrism,\n  SuggestionsState,\n  TypeaheadInput,\n  TypeaheadOutput,\n} from '@grafana/ui';\n\nimport { PrometheusDatasource } from '../datasource';\nimport { roundMsToMin } from '../language_utils';\nimport { PromOptions, PromQuery } from '../types';\nimport {\n  CancelablePromise,\n  isCancelablePromiseRejection,\n  makePromiseCancelable,\n} from '../utils/CancelablePromise';\n\nimport {LocalStorageValueProvider} from \"./LocalStorageValueProvider\";\nimport { PrometheusMetricsBrowser } from './PrometheusMetricsBrowser';\nimport { MonacoQueryFieldWrapper } from './monaco-query-field/MonacoQueryFieldWrapper';\n\nexport const RECORDING_RULES_GROUP = '__recording_rules__';\nconst LAST_USED_LABELS_KEY = 'grafana.datasources.prometheus.browser.labels';\n\nfunction getChooserText(metricsLookupDisabled: boolean, hasSyntax: boolean, hasMetrics: boolean) {\n  if (metricsLookupDisabled) {\n    return '(Disabled)';\n  }\n\n  if (!hasSyntax) {\n    return 'Loading metrics...';\n  }\n\n  if (!hasMetrics) {\n    return '(No metrics found)';\n  }\n\n  return 'Metrics browser';\n}\n\nexport function willApplySuggestion(suggestion: string, { typeaheadContext, typeaheadText }: SuggestionsState): string {\n  // Modify suggestion based on context\n  switch (typeaheadContext) {\n    case 'context-labels': {\n      const nextChar = DOMUtil.getNextCharacter();\n      if (!nextChar || nextChar === '}' || nextChar === ',') {\n        suggestion += '=';\n      }\n      break;\n    }\n\n    case 'context-label-values': {\n      // Always add quotes and remove existing ones instead\n      if (!typeaheadText.match(/^(!?=~?\"|\")/)) {\n        suggestion = `\"${suggestion}`;\n      }\n      if (DOMUtil.getNextCharacter() !== '\"') {\n        suggestion = `${suggestion}\"`;\n      }\n      break;\n    }\n\n    default:\n  }\n  return suggestion;\n}\n\ninterface PromQueryFieldProps extends QueryEditorProps<PrometheusDatasource, PromQuery, PromOptions> {\n  ExtraFieldElement?: ReactNode;\n  'data-testid'?: string;\n}\n\ninterface PromQueryFieldState {\n  labelBrowserVisible: boolean;\n  syntaxLoaded: boolean;\n  hint: QueryHint | null;\n}\n\nclass PromQueryField extends React.PureComponent<PromQueryFieldProps, PromQueryFieldState> {\n  plugins: Array<Plugin<Editor>>;\n  declare languageProviderInitializationPromise: CancelablePromise<any>;\n\n  constructor(props: PromQueryFieldProps, context: React.Context<any>) {\n    super(props, context);\n\n    this.plugins = [\n      BracesPlugin(),\n      SlatePrism(\n        {\n          onlyIn: (node: any) => node.type === 'code_block',\n          getSyntax: (node: any) => 'promql',\n        },\n        { ...(prismLanguages as LanguageMap), promql: this.props.datasource.languageProvider.syntax }\n      ),\n    ];\n\n    this.state = {\n      labelBrowserVisible: false,\n      syntaxLoaded: false,\n      hint: null,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.datasource.languageProvider) {\n      this.refreshMetrics();\n    }\n    this.refreshHint();\n  }\n\n  componentWillUnmount() {\n    if (this.languageProviderInitializationPromise) {\n      this.languageProviderInitializationPromise.cancel();\n    }\n  }\n\n  componentDidUpdate(prevProps: PromQueryFieldProps) {\n    const {\n      data,\n      datasource: { languageProvider },\n      range,\n    } = this.props;\n\n    if (languageProvider !== prevProps.datasource.languageProvider) {\n      // We reset this only on DS change so we do not flesh loading state on every rangeChange which happens on every\n      // query run if using relative range.\n      this.setState({\n        syntaxLoaded: false,\n      });\n    }\n\n    const changedRangeToRefresh = this.rangeChangedToRefresh(range, prevProps.range);\n    // We want to refresh metrics when language provider changes and/or when range changes (we round up intervals to a minute)\n    if (languageProvider !== prevProps.datasource.languageProvider || changedRangeToRefresh) {\n      this.refreshMetrics();\n    }\n\n    if (data && prevProps.data && prevProps.data.series !== data.series) {\n      this.refreshHint();\n    }\n  }\n\n  refreshHint = () => {\n    const { datasource, query, data } = this.props;\n    const initHints = datasource.getInitHints();\n    const initHint = initHints.length > 0 ? initHints[0] : null;\n\n    if (!data || data.series.length === 0) {\n      this.setState({\n        hint: initHint,\n      });\n      return;\n    }\n\n    const result = isDataFrame(data.series[0]) ? data.series.map(toLegacyResponseData) : data.series;\n    const queryHints = datasource.getQueryHints(query, result);\n    let queryHint = queryHints.length > 0 ? queryHints[0] : null;\n\n    this.setState({ hint: queryHint ?? initHint });\n  };\n\n  refreshMetrics = async () => {\n    const {\n      datasource: { languageProvider },\n    } = this.props;\n\n    this.languageProviderInitializationPromise = makePromiseCancelable(languageProvider.start());\n\n    try {\n      const remainingTasks = await this.languageProviderInitializationPromise.promise;\n      await Promise.all(remainingTasks);\n      this.onUpdateLanguage();\n    } catch (err) {\n      if (isCancelablePromiseRejection(err) && err.isCanceled) {\n        // do nothing, promise was canceled\n      } else {\n        throw err;\n      }\n    }\n  };\n\n  rangeChangedToRefresh(range?: TimeRange, prevRange?: TimeRange): boolean {\n    if (range && prevRange) {\n      const sameMinuteFrom = roundMsToMin(range.from.valueOf()) === roundMsToMin(prevRange.from.valueOf());\n      const sameMinuteTo = roundMsToMin(range.to.valueOf()) === roundMsToMin(prevRange.to.valueOf());\n      // If both are same, don't need to refresh.\n      return !(sameMinuteFrom && sameMinuteTo);\n    }\n    return false;\n  }\n\n  /**\n   * TODO #33976: Remove this, add histogram group (query = `histogram_quantile(0.95, sum(rate(${metric}[5m])) by (le))`;)\n   */\n  onChangeLabelBrowser = (selector: string) => {\n    this.onChangeQuery(selector, true);\n    this.setState({ labelBrowserVisible: false });\n  };\n\n  onChangeQuery = (value: string, override?: boolean) => {\n    // Send text change to parent\n    const { query, onChange, onRunQuery } = this.props;\n    if (onChange) {\n      const nextQuery: PromQuery = { ...query, expr: value };\n      onChange(nextQuery);\n\n      if (override && onRunQuery) {\n        onRunQuery();\n      }\n    }\n  };\n\n  onClickChooserButton = () => {\n    this.setState((state) => ({ labelBrowserVisible: !state.labelBrowserVisible }));\n\n    reportInteraction('user_grafana_prometheus_metrics_browser_clicked', {\n      editorMode: this.state.labelBrowserVisible ? 'metricViewClosed' : 'metricViewOpen',\n      app: this.props?.app ?? '',\n    });\n  };\n\n  onClickHintFix = () => {\n    const { datasource, query, onChange, onRunQuery } = this.props;\n    const { hint } = this.state;\n    if (hint?.fix?.action) {\n      onChange(datasource.modifyQuery(query, hint.fix.action));\n    }\n    onRunQuery();\n  };\n\n  onUpdateLanguage = () => {\n    const {\n      datasource: { languageProvider },\n    } = this.props;\n    const { metrics } = languageProvider;\n\n    if (!metrics) {\n      return;\n    }\n\n    this.setState({ syntaxLoaded: true });\n  };\n\n  onTypeahead = async (typeahead: TypeaheadInput): Promise<TypeaheadOutput> => {\n    const {\n      datasource: { languageProvider },\n    } = this.props;\n\n    if (!languageProvider) {\n      return { suggestions: [] };\n    }\n\n    const { history } = this.props;\n    const { prefix, text, value, wrapperClasses, labelKey } = typeahead;\n\n    const result = await languageProvider.provideCompletionItems(\n      { text, value, prefix, wrapperClasses, labelKey },\n      { history }\n    );\n\n    return result;\n  };\n\n  render() {\n    const {\n      datasource,\n      datasource: { languageProvider },\n      query,\n      ExtraFieldElement,\n      history = [],\n    } = this.props;\n\n    const { labelBrowserVisible, syntaxLoaded, hint } = this.state;\n    const hasMetrics = languageProvider.metrics.length > 0;\n    const chooserText = getChooserText(datasource.lookupsDisabled, syntaxLoaded, hasMetrics);\n    const buttonDisabled = !(syntaxLoaded && hasMetrics);\n\n    return (\n      <LocalStorageValueProvider<string[]> storageKey={LAST_USED_LABELS_KEY} defaultValue={[]}>\n        {(lastUsedLabels, onLastUsedLabelsSave, onLastUsedLabelsDelete) => {\n          return (\n            <>\n              <div\n                className=\"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1\"\n                data-testid={this.props['data-testid']}\n              >\n                <button\n                  className=\"gf-form-label query-keyword pointer\"\n                  onClick={this.onClickChooserButton}\n                  disabled={buttonDisabled}\n                >\n                  {chooserText}\n                  <Icon name={labelBrowserVisible ? 'angle-down' : 'angle-right'} />\n                </button>\n\n                <div className=\"gf-form gf-form--grow flex-shrink-1 min-width-15\">\n                  <MonacoQueryFieldWrapper\n                    runQueryOnBlur={this.props.app !== CoreApp.Explore}\n                    languageProvider={languageProvider}\n                    history={history}\n                    onChange={this.onChangeQuery}\n                    onRunQuery={this.props.onRunQuery}\n                    initialValue={query.expr ?? ''}\n                    placeholder=\"Enter a PromQL query…\"\n                  />\n                </div>\n              </div>\n              {labelBrowserVisible && (\n                <div className=\"gf-form\">\n                  <PrometheusMetricsBrowser\n                    languageProvider={languageProvider}\n                    onChange={this.onChangeLabelBrowser}\n                    lastUsedLabels={lastUsedLabels || []}\n                    storeLastUsedLabels={onLastUsedLabelsSave}\n                    deleteLastUsedLabels={onLastUsedLabelsDelete}\n                  />\n                </div>\n              )}\n\n              {ExtraFieldElement}\n              {hint ? (\n                <div className=\"query-row-break\">\n                  <div className=\"prom-query-field-info text-warning\">\n                    {hint.label}{' '}\n                    {hint.fix ? (\n                      <a className=\"text-link muted\" onClick={this.onClickHintFix}>\n                        {hint.fix.label}\n                      </a>\n                    ) : null}\n                  </div>\n                </div>\n              ) : null}\n            </>\n          );\n        }}\n      </LocalStorageValueProvider>\n    );\n  }\n}\n\nexport default PromQueryField;\n","// https://github.com/facebook/react/issues/5465\n\nexport interface CancelablePromise<T> {\n  promise: Promise<T>;\n  cancel: () => void;\n}\n\nexport interface CancelablePromiseRejection {\n  isCanceled: boolean;\n}\n\nexport function isCancelablePromiseRejection(promise: unknown): promise is CancelablePromiseRejection {\n  return typeof promise === 'object' && promise !== null && 'isCanceled' in promise;\n}\n\nexport const makePromiseCancelable = <T>(promise: Promise<T>): CancelablePromise<T> => {\n  let hasCanceled_ = false;\n\n  const wrappedPromise = new Promise<T>((resolve, reject) => {\n    const canceledPromiseRejection: CancelablePromiseRejection = { isCanceled: true };\n    promise.then((val) => (hasCanceled_ ? reject(canceledPromiseRejection) : resolve(val)));\n    promise.catch((error) => (hasCanceled_ ? reject(canceledPromiseRejection) : reject(error)));\n  });\n\n  return {\n    promise: wrappedPromise,\n    cancel() {\n      hasCanceled_ = true;\n    },\n  };\n};\n","import { map } from 'lodash';\nimport React, { PureComponent } from 'react';\n\n// Types\nimport { CoreApp, SelectableValue } from '@grafana/data';\nimport { InlineFormLabel, LegacyForms, Select } from '@grafana/ui';\n\nimport { PromQuery } from '../types';\n\nimport PromLink from './PromLink';\nimport PromQueryField from './PromQueryField';\nimport { PromQueryEditorProps } from './types';\n\nconst { Switch } = LegacyForms;\n\nexport const FORMAT_OPTIONS: Array<SelectableValue<string>> = [\n  { label: 'Time series', value: 'time_series' },\n  { label: 'Table', value: 'table' },\n  { label: 'Heatmap', value: 'heatmap' },\n];\n\nexport const INTERVAL_FACTOR_OPTIONS: Array<SelectableValue<number>> = map([1, 2, 3, 4, 5, 10], (value: number) => ({\n  value,\n  label: '1/' + value,\n}));\n\ninterface State {\n  legendFormat?: string;\n  formatOption: SelectableValue<string>;\n  interval?: string;\n  intervalFactorOption: SelectableValue<number>;\n  instant: boolean;\n  exemplar: boolean;\n}\n\nexport class PromQueryEditor extends PureComponent<PromQueryEditorProps, State> {\n  // Query target to be modified and used for queries\n  query: PromQuery;\n\n  constructor(props: PromQueryEditorProps) {\n    super(props);\n    // Use default query to prevent undefined input values\n    const defaultQuery: Partial<PromQuery> = {\n      expr: '',\n      legendFormat: '',\n      interval: '',\n      exemplar: false,\n    };\n    const query = Object.assign({}, defaultQuery, props.query);\n    this.query = query;\n    // Query target properties that are fully controlled inputs\n    this.state = {\n      // Fully controlled text inputs\n      interval: query.interval,\n      legendFormat: query.legendFormat,\n      // Select options\n      formatOption: FORMAT_OPTIONS.find((option) => option.value === query.format) || FORMAT_OPTIONS[0],\n      intervalFactorOption:\n        INTERVAL_FACTOR_OPTIONS.find((option) => option.value === query.intervalFactor) || INTERVAL_FACTOR_OPTIONS[0],\n      // Switch options\n      instant: Boolean(query.instant),\n      exemplar: Boolean(query.exemplar),\n    };\n  }\n\n  onFieldChange = (query: PromQuery, override?: any) => {\n    this.query.expr = query.expr;\n  };\n\n  onFormatChange = (option: SelectableValue<string>) => {\n    this.query.format = option.value;\n    this.setState({ formatOption: option }, this.onRunQuery);\n  };\n\n  onInstantChange = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    const instant = (e.target as HTMLInputElement).checked;\n    this.query.instant = instant;\n    this.setState({ instant }, this.onRunQuery);\n  };\n\n  onIntervalChange = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    const interval = e.currentTarget.value;\n    this.query.interval = interval;\n    this.setState({ interval });\n  };\n\n  onIntervalFactorChange = (option: SelectableValue<number>) => {\n    this.query.intervalFactor = option.value;\n    this.setState({ intervalFactorOption: option }, this.onRunQuery);\n  };\n\n  onLegendChange = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    const legendFormat = e.currentTarget.value;\n    this.query.legendFormat = legendFormat;\n    this.setState({ legendFormat });\n  };\n\n  onRunQuery = () => {\n    const { query } = this;\n    // Change of query.hide happens outside of this component and is just passed as prop. We have to update it when running queries.\n    const { hide } = this.props.query;\n    this.props.onChange({ ...query, hide });\n    this.props.onRunQuery();\n  };\n\n  render() {\n    const { datasource, query, range, data } = this.props;\n    const { formatOption, instant, interval, intervalFactorOption, legendFormat } = this.state;\n\n    return (\n      <PromQueryField\n        datasource={datasource}\n        query={query}\n        range={range}\n        onRunQuery={this.onRunQuery}\n        onChange={this.onFieldChange}\n        history={[]}\n        data={data}\n        data-testid={testIds.editor}\n        ExtraFieldElement={\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <InlineFormLabel\n                width={7}\n                tooltip=\"Controls the name of the time series, using name or pattern. For example\n        {{hostname}} will be replaced with label value for the label hostname.\"\n              >\n                Legend\n              </InlineFormLabel>\n              <input\n                type=\"text\"\n                className=\"gf-form-input\"\n                placeholder=\"legend format\"\n                value={legendFormat}\n                onChange={this.onLegendChange}\n                onBlur={this.onRunQuery}\n              />\n            </div>\n\n            <div className=\"gf-form\">\n              <InlineFormLabel\n                width={7}\n                tooltip={\n                  <>\n                    An additional lower limit for the step parameter of the Prometheus query and for the{' '}\n                    <code>$__interval</code> and <code>$__rate_interval</code> variables. The limit is absolute and not\n                    modified by the &quot;Resolution&quot; setting.\n                  </>\n                }\n              >\n                Min step\n              </InlineFormLabel>\n              <input\n                type=\"text\"\n                className=\"gf-form-input width-8\"\n                aria-label=\"Set lower limit for the step parameter\"\n                placeholder={interval}\n                onChange={this.onIntervalChange}\n                onBlur={this.onRunQuery}\n                value={interval}\n              />\n            </div>\n\n            <div className=\"gf-form\">\n              <div className=\"gf-form-label\">Resolution</div>\n              <Select\n                aria-label=\"Select resolution\"\n                isSearchable={false}\n                options={INTERVAL_FACTOR_OPTIONS}\n                onChange={this.onIntervalFactorChange}\n                value={intervalFactorOption}\n              />\n            </div>\n\n            <div className=\"gf-form\">\n              <div className=\"gf-form-label width-7\">Format</div>\n              <Select\n                className=\"select-container\"\n                width={16}\n                isSearchable={false}\n                options={FORMAT_OPTIONS}\n                onChange={this.onFormatChange}\n                value={formatOption}\n                aria-label=\"Select format\"\n              />\n              <Switch label=\"Instant\" checked={instant} onChange={this.onInstantChange} />\n\n              <InlineFormLabel width={10} tooltip=\"Link to Graph in Prometheus\">\n                <PromLink\n                  datasource={datasource}\n                  query={this.query} // Use modified query\n                  panelData={data}\n                />\n              </InlineFormLabel>\n            </div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport const testIds = {\n  editor: 'prom-editor',\n  exemplar: 'exemplar-editor',\n};\n","import { useReducer } from 'react';\nvar toggleReducer = function (state, nextValue) {\n    return typeof nextValue === 'boolean' ? nextValue : !state;\n};\nvar useToggle = function (initialValue) {\n    return useReducer(toggleReducer, initialValue);\n};\nexport default useToggle;\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport { useToggle } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Icon, useStyles2 } from '@grafana/ui';\n\nimport { Stack }  from '../../components/QueryEditor';\n\nexport interface Props {\n  title: string;\n  collapsedInfo: string[];\n  children: React.ReactNode;\n}\n\nexport function QueryOptionGroup({ title, children, collapsedInfo }: Props) {\n  const [isOpen, toggleOpen] = useToggle(false);\n  const styles = useStyles2(getStyles);\n\n  return (\n    <Stack gap={0} direction=\"column\">\n      <div className={styles.header} onClick={toggleOpen} title=\"Click to edit options\">\n        <div className={styles.toggle}>\n          <Icon name={isOpen ? 'angle-down' : 'angle-right'} />\n        </div>\n        <h6 className={styles.title}>{title}</h6>\n        {!isOpen && (\n          <div className={styles.description}>\n            {collapsedInfo.map((x, i) => (\n              <span key={i}>{x}</span>\n            ))}\n          </div>\n        )}\n      </div>\n      {isOpen && <div className={styles.body}>{children}</div>}\n    </Stack>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    switchLabel: css({\n      color: theme.colors.text.secondary,\n      cursor: 'pointer',\n      fontSize: theme.typography.bodySmall.fontSize,\n      '&:hover': {\n        color: theme.colors.text.primary,\n      },\n    }),\n    header: css({\n      display: 'flex',\n      cursor: 'pointer',\n      alignItems: 'baseline',\n      color: theme.colors.text.primary,\n      '&:hover': {\n        background: theme.colors.emphasize(theme.colors.background.primary, 0.03),\n      },\n    }),\n    title: css({\n      flexGrow: 1,\n      overflow: 'hidden',\n      fontSize: theme.typography.bodySmall.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      margin: 0,\n    }),\n    description: css({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize,\n      paddingLeft: theme.spacing(2),\n      gap: theme.spacing(2),\n      display: 'flex',\n    }),\n    body: css({\n      display: 'flex',\n      paddingTop: theme.spacing(2),\n      gap: theme.spacing(2),\n      flexWrap: 'wrap',\n    }),\n    toggle: css({\n      color: theme.colors.text.secondary,\n      marginRight: `${theme.spacing(1)}`,\n    }),\n  };\n};\n","import React, { useRef } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Select, AutoSizeInput } from '@grafana/ui';\n\nimport { EditorField } from '../../components/QueryEditor';\nimport { LegendFormatMode } from '../../types';\n\nexport interface Props {\n  legendFormat: string | undefined;\n  onChange: (legendFormat: string) => void;\n  onRunQuery: () => void;\n}\n\nconst legendModeOptions = [\n  {\n    label: 'Auto',\n    value: LegendFormatMode.Auto,\n    description: 'Only includes unique labels',\n  },\n  { label: 'Verbose', value: LegendFormatMode.Verbose, description: 'All label names and values' },\n  { label: 'Custom', value: LegendFormatMode.Custom, description: 'Provide a naming template' },\n];\n\n/**\n * Tests for this component are on the parent level (PromQueryBuilderOptions).\n */\nexport const PromQueryLegendEditor = React.memo<Props>(({ legendFormat, onChange, onRunQuery }) => {\n  const mode = getLegendMode(legendFormat);\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  const onLegendFormatChanged = (evt: React.FormEvent<HTMLInputElement>) => {\n    let newFormat = evt.currentTarget.value;\n    if (newFormat.length === 0) {\n      newFormat = LegendFormatMode.Auto;\n    }\n\n    if (newFormat !== legendFormat) {\n      onChange(newFormat);\n      onRunQuery();\n    }\n  };\n\n  const onLegendModeChanged = (value: SelectableValue<LegendFormatMode>) => {\n    switch (value.value!) {\n      case LegendFormatMode.Auto:\n        onChange(LegendFormatMode.Auto);\n        break;\n      case LegendFormatMode.Custom:\n        onChange('{{label_name}}');\n        setTimeout(() => {\n          inputRef.current?.focus();\n          inputRef.current?.setSelectionRange(2, 12, 'forward');\n        }, 10);\n        break;\n      case LegendFormatMode.Verbose:\n        onChange('');\n        break;\n    }\n    onRunQuery();\n  };\n\n  return (\n    <EditorField\n      label=\"Legend\"\n      tooltip=\"Series name override or template. Ex. {{hostname}} will be replaced with label value for hostname.\"\n    >\n      <>\n        {mode === LegendFormatMode.Custom && (\n          <AutoSizeInput\n            id=\"legendFormat\"\n            minWidth={22}\n            placeholder=\"auto\"\n            defaultValue={legendFormat}\n            onCommitChange={onLegendFormatChanged}\n            ref={inputRef}\n          />\n        )}\n        {mode !== LegendFormatMode.Custom && (\n          <Select\n            inputId=\"legend.mode\"\n            isSearchable={false}\n            placeholder=\"Select legend mode\"\n            options={legendModeOptions}\n            width={22}\n            onChange={onLegendModeChanged}\n            value={legendModeOptions.find((x) => x.value === mode)}\n          />\n        )}\n      </>\n    </EditorField>\n  );\n});\n\nPromQueryLegendEditor.displayName = 'PromQueryLegendEditor';\n\nfunction getLegendMode(legendFormat: string | undefined) {\n  // This special value means the new smart minimal series naming\n  if (legendFormat === LegendFormatMode.Auto) {\n    return LegendFormatMode.Auto;\n  }\n\n  // Missing or empty legend format is the old verbose behavior\n  if (legendFormat == null || legendFormat === '') {\n    return LegendFormatMode.Verbose;\n  }\n\n  return LegendFormatMode.Custom;\n}\n\nexport function getLegendModeLabel(legendFormat: string | undefined) {\n  const mode = getLegendMode(legendFormat);\n  if (mode !== LegendFormatMode.Custom) {\n    return legendModeOptions.find((x) => x.value === mode)?.label;\n  }\n  return legendFormat;\n}\n","import React, { SyntheticEvent } from 'react';\n\nimport { CoreApp, SelectableValue } from '@grafana/data';\nimport { AutoSizeInput, RadioButtonGroup, Select } from '@grafana/ui';\n\nimport { getQueryTypeChangeHandler, getQueryTypeOptions } from '../../components/PromExploreExtraField';\nimport { FORMAT_OPTIONS, INTERVAL_FACTOR_OPTIONS } from '../../components/PromQueryEditor';\nimport { EditorField, EditorRow, EditorSwitch } from '../../components/QueryEditor';\nimport { PromQuery } from '../../types';\nimport { QueryOptionGroup } from '../shared/QueryOptionGroup';\n\nimport { getLegendModeLabel, PromQueryLegendEditor } from './PromQueryLegendEditor';\n\nexport interface UIOptions {\n  exemplars: boolean;\n  type: boolean;\n  format: boolean;\n  minStep: boolean;\n  legend: boolean;\n  resolution: boolean;\n}\n\nexport interface Props {\n  query: PromQuery;\n  app?: CoreApp;\n  onChange: (update: PromQuery) => void;\n  onRunQuery: () => void;\n}\n\nexport const PromQueryBuilderOptions = React.memo<Props>(({ query, app, onChange, onRunQuery }) => {\n  const onChangeFormat = (value: SelectableValue<string>) => {\n    onChange({ ...query, format: value.value });\n    onRunQuery();\n  };\n\n  const onChangeStep = (evt: React.FormEvent<HTMLInputElement>) => {\n    onChange({ ...query, interval: evt.currentTarget.value });\n    onRunQuery();\n  };\n\n  const queryTypeOptions = getQueryTypeOptions(app === CoreApp.Explore || app === CoreApp.PanelEditor);\n  const onQueryTypeChange = getQueryTypeChangeHandler(query, onChange);\n\n  const onIntervalFactorChange = (value: SelectableValue<number>) => {\n    onChange({ ...query, intervalFactor: value.value });\n    onRunQuery();\n  };\n\n  const formatOption = FORMAT_OPTIONS.find((option) => option.value === query.format) || FORMAT_OPTIONS[0];\n  const queryTypeValue = getQueryTypeValue(query);\n  const queryTypeLabel = queryTypeOptions.find((x) => x.value === queryTypeValue)!.label;\n\n  return (\n    <EditorRow>\n      <QueryOptionGroup\n        title=\"Options\"\n        collapsedInfo={getCollapsedInfo(query, formatOption.label!, queryTypeLabel, app)}\n      >\n        <PromQueryLegendEditor\n          legendFormat={query.legendFormat}\n          onChange={(legendFormat) => onChange({ ...query, legendFormat })}\n          onRunQuery={onRunQuery}\n        />\n        <EditorField\n          label=\"Min step\"\n          tooltip={\n            <>\n              An additional lower limit for the step parameter of the Prometheus query and for the{' '}\n              <code>$__interval</code> and <code>$__rate_interval</code> variables.\n            </>\n          }\n        >\n          <AutoSizeInput\n            type=\"text\"\n            aria-label=\"Set lower limit for the step parameter\"\n            placeholder={'auto'}\n            minWidth={10}\n            onCommitChange={onChangeStep}\n            defaultValue={query.interval}\n          />\n        </EditorField>\n        <EditorField label=\"Format\">\n          <Select value={formatOption} allowCustomValue onChange={onChangeFormat} options={FORMAT_OPTIONS} />\n        </EditorField>\n        <EditorField label=\"Type\">\n          <RadioButtonGroup options={queryTypeOptions} value={queryTypeValue} onChange={onQueryTypeChange} />\n        </EditorField>\n        {query.intervalFactor && query.intervalFactor > 1 && (\n          <EditorField label=\"Resolution\">\n            <Select\n              aria-label=\"Select resolution\"\n              isSearchable={false}\n              options={INTERVAL_FACTOR_OPTIONS}\n              onChange={onIntervalFactorChange}\n              value={INTERVAL_FACTOR_OPTIONS.find((option) => option.value === query.intervalFactor)}\n            />\n          </EditorField>\n        )}\n      </QueryOptionGroup>\n    </EditorRow>\n  );\n});\n\nfunction getQueryTypeValue(query: PromQuery) {\n  return query.range && query.instant ? 'both' : query.instant ? 'instant' : 'range';\n}\n\nfunction getCollapsedInfo(query: PromQuery, formatOption: string, queryType: string, app?: CoreApp): string[] {\n  const items: string[] = [];\n\n  items.push(`Legend: ${getLegendModeLabel(query.legendFormat)}`);\n  items.push(`Format: ${formatOption}`);\n  items.push(`Step: ${query.interval ?? 'auto'}`);\n  items.push(`Type: ${queryType}`);\n  return items;\n}\n\nPromQueryBuilderOptions.displayName = 'PromQueryBuilderOptions';\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { testIds } from '../../components/PromQueryEditor';\nimport PromQueryField from '../../components/PromQueryField';\nimport { PromQueryEditorProps } from '../../components/types';\n\nimport { PromQueryBuilderExplained } from './PromQueryBuilderExplained';\n\ntype Props = PromQueryEditorProps & {\n  showExplain: boolean;\n};\n\nexport function PromQueryCodeEditor(props: Props) {\n  const { query, datasource, range, onRunQuery, onChange, data, app, showExplain } = props;\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.wrapper}>\n      <PromQueryField\n        datasource={datasource}\n        query={query}\n        range={range}\n        onRunQuery={onRunQuery}\n        onChange={onChange}\n        history={[]}\n        data={data}\n        data-testid={testIds.editor}\n        app={app}\n      />\n\n      {showExplain && <PromQueryBuilderExplained query={query.expr} />}\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    // This wrapper styling can be removed after the old PromQueryEditor is removed.\n    // This is removing margin bottom on the old legacy inline form styles\n    wrapper: css`\n      .gf-form {\n        margin-bottom: 0;\n      }\n    `,\n  };\n};\n","import React, { SyntheticEvent, useCallback, useEffect, useState } from 'react';\n\nimport { CoreApp, LoadingState } from '@grafana/data';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Button, ConfirmModal } from '@grafana/ui';\n\nimport { EditorHeader, EditorRows, FlexItem, InlineSelect, Space } from '../../components/QueryEditor';\nimport { PromQueryEditorProps } from '../../components/types';\nimport { PromQuery } from '../../types';\nimport { promQueryModeller } from '../PromQueryModeller';\nimport { buildVisualQueryFromString } from '../parsing';\nimport { FeedbackLink } from '../shared/FeedbackLink';\nimport { QueryEditorModeToggle } from '../shared/QueryEditorModeToggle';\nimport { QueryHeaderSwitch } from '../shared/QueryHeaderSwitch';\nimport { promQueryEditorExplainKey, promQueryEditorRawQueryKey, useFlag } from '../shared/hooks/useFlag';\nimport { QueryEditorMode } from '../shared/types';\nimport { changeEditorMode, getQueryWithDefaults } from '../state';\n\nimport { PromQueryBuilderContainer } from './PromQueryBuilderContainer';\nimport { PromQueryBuilderOptions } from './PromQueryBuilderOptions';\nimport { PromQueryCodeEditor } from './PromQueryCodeEditor';\n\ntype Props = PromQueryEditorProps;\n\nexport const PromQueryEditorSelector = React.memo<Props>((props) => {\n  const { onChange, onRunQuery, data, app } = props;\n  const [parseModalOpen, setParseModalOpen] = useState(false);\n  const [dataIsStale, setDataIsStale] = useState(false);\n  const { flag: explain, setFlag: setExplain } = useFlag(promQueryEditorExplainKey);\n  const { flag: rawQuery, setFlag: setRawQuery } = useFlag(promQueryEditorRawQueryKey, true);\n\n  const query = getQueryWithDefaults(props.query, app);\n  // This should be filled in from the defaults by now.\n  const editorMode = query.editorMode!;\n\n  const onEditorModeChange = useCallback(\n    (newMetricEditorMode: QueryEditorMode) => {\n      reportInteraction('user_grafana_prometheus_editor_mode_clicked', {\n        newEditor: newMetricEditorMode,\n        previousEditor: query.editorMode ?? '',\n        newQuery: !query.expr,\n        app: app ?? '',\n      });\n\n      if (newMetricEditorMode === QueryEditorMode.Builder) {\n        const result = buildVisualQueryFromString(query.expr || '');\n        // If there are errors, give user a chance to decide if they want to go to builder as that can lose some data.\n        if (result.errors.length) {\n          setParseModalOpen(true);\n          return;\n        }\n      }\n      changeEditorMode(query, newMetricEditorMode, onChange);\n    },\n    [onChange, query, app]\n  );\n\n  useEffect(() => {\n    setDataIsStale(false);\n  }, [data]);\n\n  const onQueryPreviewChange = (event: SyntheticEvent<HTMLInputElement>) => {\n    const isEnabled = event.currentTarget.checked;\n    setRawQuery(isEnabled);\n  };\n\n  const onChangeInternal = (query: PromQuery) => {\n    setDataIsStale(true);\n    onChange(query);\n  };\n\n  const onShowExplainChange = (e: SyntheticEvent<HTMLInputElement>) => {\n    setExplain(e.currentTarget.checked);\n  };\n\n  return (\n    <>\n      <ConfirmModal\n        isOpen={parseModalOpen}\n        title=\"Query parsing\"\n        body=\"There were errors while trying to parse the query. Continuing to visual builder may lose some parts of the query.\"\n        confirmText=\"Continue\"\n        onConfirm={() => {\n          changeEditorMode(query, QueryEditorMode.Builder, onChange);\n          setParseModalOpen(false);\n        }}\n        onDismiss={() => setParseModalOpen(false)}\n      />\n      <EditorHeader>\n        <InlineSelect\n          value={null}\n          placeholder=\"Query patterns\"\n          allowCustomValue\n          onChange={({ value }) => {\n            // TODO: Bit convoluted as we don't have access to visualQuery model here. Maybe would make sense to\n            //  move it inside the editor?\n            const result = buildVisualQueryFromString(query.expr || '');\n            result.query.operations = value?.operations!;\n            onChange({\n              ...query,\n              expr: promQueryModeller.renderQuery(result.query),\n            });\n          }}\n          options={promQueryModeller.getQueryPatterns().map((x) => ({ label: x.name, value: x }))}\n        />\n\n        <QueryHeaderSwitch label=\"Explain\" value={explain} onChange={onShowExplainChange} />\n        {editorMode === QueryEditorMode.Builder && (\n          <>\n            <QueryHeaderSwitch label=\"Raw query\" value={rawQuery} onChange={onQueryPreviewChange} />\n            <FeedbackLink feedbackUrl=\"https://github.com/grafana/grafana/discussions/47693\" />\n          </>\n        )}\n        <FlexItem grow={1} />\n        {app !== CoreApp.Explore && (\n          <Button\n            variant={dataIsStale ? 'primary' : 'secondary'}\n            size=\"sm\"\n            onClick={onRunQuery}\n            icon={data?.state === LoadingState.Loading ? 'fa fa-spinner' : undefined}\n            disabled={data?.state === LoadingState.Loading}\n          >\n            Run queries\n          </Button>\n        )}\n        <QueryEditorModeToggle mode={editorMode} onChange={onEditorModeChange} />\n      </EditorHeader>\n      <Space v={0.5} />\n      <EditorRows>\n        {editorMode === QueryEditorMode.Code && <PromQueryCodeEditor {...props} query={query} showExplain={explain} />}\n        {editorMode === QueryEditorMode.Builder && (\n          <PromQueryBuilderContainer\n            query={query}\n            datasource={props.datasource}\n            onChange={onChangeInternal}\n            onRunQuery={props.onRunQuery}\n            data={data}\n            showRawQuery={rawQuery}\n            showExplain={explain}\n          />\n        )}\n        <PromQueryBuilderOptions query={query} app={props.app} onChange={onChange} onRunQuery={onRunQuery} />\n      </EditorRows>\n    </>\n  );\n});\n\nPromQueryEditorSelector.displayName = 'PromQueryEditorSelector';\n","import React, { memo, useEffect } from 'react';\n\nimport { QueryEditorProps, CoreApp } from '@grafana/data';\n\nimport { PrometheusDatasource } from '../datasource';\nimport { PromQuery, PromOptions } from '../types';\n\nimport { PromExploreExtraField } from './PromExploreExtraField';\nimport PromQueryField from './PromQueryField';\n\nexport type Props = QueryEditorProps<PrometheusDatasource, PromQuery, PromOptions>;\n\nexport const PromExploreQueryEditor = memo((props: Props) => {\n  const { range, query, data, datasource, history, onChange, onRunQuery } = props;\n\n  // Setting default values\n  useEffect(() => {\n    if (query.expr === undefined) {\n      onChange({ ...query, expr: '' });\n    }\n    if (query.exemplar === undefined) {\n      onChange({ ...query, exemplar: true });\n    }\n\n    // Override query type to \"Both\" only for new queries (no query.expr).\n    if (!query.instant && !query.range && !query.expr) {\n      onChange({ ...query, instant: true, range: true });\n    }\n  }, [onChange, query]);\n\n  return (\n    <PromQueryField\n      app={CoreApp.Explore}\n      datasource={datasource}\n      query={query}\n      range={range}\n      onRunQuery={onRunQuery}\n      onChange={onChange}\n      onBlur={() => {}}\n      history={history}\n      data={data}\n      data-testid={testIds.editor}\n      ExtraFieldElement={\n        <PromExploreExtraField query={query} onChange={onChange} datasource={datasource} onRunQuery={onRunQuery} />\n      }\n    />\n  );\n});\n\nPromExploreQueryEditor.displayName = 'PromExploreQueryEditor';\n\nexport const testIds = {\n  editor: 'prom-editor-explore',\n};\n","import React from 'react';\n\nimport PromQueryField from './PromQueryField';\nimport { PromQueryEditorProps } from './types';\n\nexport function PromQueryEditorForAlerting(props: PromQueryEditorProps) {\n  const { datasource, query, range, data, onChange, onRunQuery } = props;\n\n  return (\n    <PromQueryField\n      datasource={datasource}\n      query={query}\n      onRunQuery={onRunQuery}\n      onChange={onChange}\n      history={[]}\n      range={range}\n      data={data}\n      data-testid={testIds.editor}\n    />\n  );\n}\n\nexport const testIds = {\n  editor: 'prom-editor-cloud-alerting',\n};\n","import React, { memo } from 'react';\n\nimport { CoreApp } from '@grafana/data';\nimport { config } from '@grafana/runtime';\n\nimport { PromQueryEditorSelector } from '../querybuilder/components/PromQueryEditorSelector';\n\nimport { PromExploreQueryEditor } from './PromExploreQueryEditor';\nimport { PromQueryEditor } from './PromQueryEditor';\nimport { PromQueryEditorForAlerting } from './PromQueryEditorForAlerting';\nimport { PromQueryEditorProps } from './types';\n\nexport function PromQueryEditorByApp(props: PromQueryEditorProps) {\n  const { app } = props;\n\n  switch (app) {\n    case CoreApp.CloudAlerting:\n      return <PromQueryEditorForAlerting {...props} />;\n    case CoreApp.Explore:\n      if (config.featureToggles.promQueryBuilder) {\n        return <PromQueryEditorSelector {...props} />;\n      }\n      return <PromExploreQueryEditor {...props} />;\n    default:\n      if (config.featureToggles.promQueryBuilder) {\n        return <PromQueryEditorSelector {...props} />;\n      }\n      return <PromQueryEditor {...props} />;\n  }\n}\n\nexport default memo(PromQueryEditorByApp);\n","//DOCS: https://prometheus.io/docs/alerting/latest/configuration/\n\nimport { DataSourceJsonData } from '@grafana/data';\n\nexport type AlertManagerCortexConfig = {\n  template_files: Record<string, string>;\n  alertmanager_config: AlertmanagerConfig;\n  /** { [name]: provenance } */\n  template_file_provenances?: Record<string, string>;\n};\n\nexport type TLSConfig = {\n  ca_file: string;\n  cert_file: string;\n  key_file: string;\n  server_name?: string;\n  insecure_skip_verify?: boolean;\n};\n\nexport type HTTPConfigCommon = {\n  proxy_url?: string;\n  tls_config?: TLSConfig;\n};\n\nexport type HTTPConfigBasicAuth = {\n  basic_auth: {\n    username: string;\n  } & ({ password: string } | { password_file: string });\n};\n\nexport type HTTPConfigBearerToken = {\n  bearer_token: string;\n};\n\nexport type HTTPConfigBearerTokenFile = {\n  bearer_token_file: string;\n};\n\nexport type HTTPConfig = HTTPConfigCommon & (HTTPConfigBasicAuth | HTTPConfigBearerToken | HTTPConfigBearerTokenFile);\n\nexport type EmailConfig = {\n  to: string;\n\n  send_resolved?: string;\n  from?: string;\n  smarthost?: string;\n  hello?: string;\n  auth_username?: string;\n  auth_password?: string;\n  auth_secret?: string;\n  auth_identity?: string;\n  require_tls?: boolean;\n  tls_config?: TLSConfig;\n  html?: string;\n  text?: string;\n  headers?: Record<string, string>;\n};\n\nexport type WebhookConfig = {\n  url: string;\n\n  send_resolved?: boolean;\n  http_config?: HTTPConfig;\n  max_alerts?: number;\n};\n\nexport type GrafanaManagedReceiverConfig = {\n  uid?: string;\n  disableResolveMessage: boolean;\n  secureFields?: Record<string, boolean>;\n  secureSettings?: Record<string, any>;\n  settings: Record<string, any>;\n  type: string;\n  name: string;\n  updated?: string;\n  created?: string;\n  provenance?: string;\n};\n\nexport type Receiver = {\n  name: string;\n\n  email_configs?: EmailConfig[];\n  pagerduty_configs?: any[];\n  pushover_configs?: any[];\n  slack_configs?: any[];\n  opsgenie_configs?: any[];\n  webhook_configs?: WebhookConfig[];\n  victorops_configs?: any[];\n  wechat_configs?: any[];\n  grafana_managed_receiver_configs?: GrafanaManagedReceiverConfig[];\n  [key: string]: any;\n};\n\ntype ObjectMatcher = [name: string, operator: MatcherOperator, value: string];\n\nexport type Route = {\n  receiver?: string;\n  group_by?: string[];\n  continue?: boolean;\n  object_matchers?: ObjectMatcher[];\n  matchers?: string[];\n  /** @deprecated use `object_matchers` */\n  match?: Record<string, string>;\n  /** @deprecated use `object_matchers` */\n  match_re?: Record<string, string>;\n  group_wait?: string;\n  group_interval?: string;\n  repeat_interval?: string;\n  routes?: Route[];\n  mute_time_intervals?: string[];\n  /** only the root policy might have a provenance field defined */\n  provenance?: string;\n};\n\nexport type InhibitRule = {\n  target_match: Record<string, string>;\n  target_match_re: Record<string, string>;\n  source_match: Record<string, string>;\n  source_match_re: Record<string, string>;\n  equal?: string[];\n};\n\nexport type AlertmanagerConfig = {\n  global?: {\n    smtp_from?: string;\n    smtp_smarthost?: string;\n    smtp_hello?: string;\n    smtp_auth_username?: string;\n    smtp_auth_password?: string;\n    smtp_auth_identity?: string;\n    smtp_auth_secret?: string;\n    smtp_require_tls?: boolean;\n    slack_api_url?: string;\n    victorops_api_key?: string;\n    victorops_api_url?: string;\n    pagerduty_url?: string;\n    opsgenie_api_key?: string;\n    opsgenie_api_url?: string;\n    wechat_api_url?: string;\n    wechat_api_secret?: string;\n    wechat_api_corp_id?: string;\n    http_config?: HTTPConfig;\n    resolve_timeout?: string;\n  };\n  templates?: string[];\n  route?: Route;\n  inhibit_rules?: InhibitRule[];\n  receivers?: Receiver[];\n  mute_time_intervals?: MuteTimeInterval[];\n  /** { [name]: provenance } */\n  muteTimeProvenances?: Record<string, string>;\n};\n\nexport type Matcher = {\n  name: string;\n  value: string;\n  isRegex: boolean;\n  isEqual: boolean;\n};\n\nexport enum SilenceState {\n  Active = 'active',\n  Expired = 'expired',\n  Pending = 'pending',\n}\n\nexport enum AlertState {\n  Unprocessed = 'unprocessed',\n  Active = 'active',\n  Suppressed = 'suppressed',\n}\n\nexport enum MatcherOperator {\n  equal = '=',\n  notEqual = '!=',\n  regex = '=~',\n  notRegex = '!~',\n}\n\nexport type Silence = {\n  id: string;\n  matchers?: Matcher[];\n  startsAt: string;\n  endsAt: string;\n  updatedAt: string;\n  createdBy: string;\n  comment: string;\n  status: {\n    state: SilenceState;\n  };\n};\n\nexport type SilenceCreatePayload = {\n  id?: string;\n  matchers?: Matcher[];\n  startsAt: string;\n  endsAt: string;\n  createdBy: string;\n  comment: string;\n};\n\nexport type AlertmanagerAlert = {\n  startsAt: string;\n  updatedAt: string;\n  endsAt: string;\n  generatorURL?: string;\n  labels: { [key: string]: string };\n  annotations: { [key: string]: string };\n  receivers: [\n    {\n      name: string;\n    }\n  ];\n  fingerprint: string;\n  status: {\n    state: AlertState;\n    silencedBy: string[];\n    inhibitedBy: string[];\n  };\n};\n\nexport type AlertmanagerGroup = {\n  labels: { [key: string]: string };\n  receiver: { name: string };\n  alerts: AlertmanagerAlert[];\n};\n\nexport interface AlertmanagerStatus {\n  cluster: {\n    peers: unknown;\n    status: string;\n  };\n  config: AlertmanagerConfig;\n  uptime: string;\n  versionInfo: {\n    branch: string;\n    buildDate: string;\n    buildUser: string;\n    goVersion: string;\n    revision: string;\n    version: string;\n  };\n}\n\nexport type TestReceiversAlert = Pick<AlertmanagerAlert, 'annotations' | 'labels'>;\n\nexport interface TestReceiversPayload {\n  receivers?: Receiver[];\n  alert?: TestReceiversAlert;\n}\n\ninterface TestReceiversResultGrafanaReceiverConfig {\n  name: string;\n  uid?: string;\n  error?: string;\n  status: 'ok' | 'failed';\n}\n\ninterface TestReceiversResultReceiver {\n  name: string;\n  grafana_managed_receiver_configs: TestReceiversResultGrafanaReceiverConfig[];\n}\nexport interface TestReceiversResult {\n  notified_at: string;\n  receivers: TestReceiversResultReceiver[];\n}\n\nexport interface ExternalAlertmanagers {\n  activeAlertManagers: AlertmanagerUrl[];\n  droppedAlertManagers: AlertmanagerUrl[];\n}\n\nexport interface AlertmanagerUrl {\n  url: string;\n}\n\nexport interface ExternalAlertmanagersResponse {\n  data: ExternalAlertmanagers;\n}\n\nexport enum AlertmanagerChoice {\n  Internal = 'internal',\n  External = 'external',\n  All = 'all',\n}\n\nexport interface ExternalAlertmanagerConfig {\n  alertmanagers: string[];\n  alertmanagersChoice: AlertmanagerChoice;\n}\n\nexport enum AlertManagerImplementation {\n  cortex = 'cortex',\n  mimir = 'mimir',\n  prometheus = 'prometheus',\n}\n\nexport interface TimeRange {\n  /** Times are in format `HH:MM` in UTC */\n  start_time: string;\n  end_time: string;\n}\nexport interface TimeInterval {\n  times?: TimeRange[];\n  weekdays?: string[];\n  days_of_month?: string[];\n  months?: string[];\n  years?: string[];\n}\n\nexport type MuteTimeInterval = {\n  name: string;\n  time_intervals: TimeInterval[];\n  provenance?: string;\n};\n\nexport interface AlertManagerDataSourceJsonData extends DataSourceJsonData {\n  implementation?: AlertManagerImplementation;\n  handleGrafanaManagedAlerts?: boolean;\n}\n","import { DashboardModel } from 'app/features/dashboard/state/DashboardModel';\nimport { VariableModel } from 'app/features/variables/types';\n\nimport { DataQuery } from '@grafana/data';\n\nimport { DashboardAcl } from './acl';\n\nexport interface DashboardDTO {\n  redirectUri?: string;\n  dashboard: DashboardDataDTO;\n  meta: DashboardMeta;\n}\n\nexport interface DashboardMeta {\n  slug?: string;\n  uid?: string;\n  canSave?: boolean;\n  canEdit?: boolean;\n  canDelete?: boolean;\n  canShare?: boolean;\n  canStar?: boolean;\n  canAdmin?: boolean;\n  url?: string;\n  folderId?: number;\n  folderUid?: string;\n  canMakeEditable?: boolean;\n  submenuEnabled?: boolean;\n  provisioned?: boolean;\n  provisionedExternalId?: string;\n  isStarred?: boolean;\n  showSettings?: boolean;\n  expires?: string;\n  isFolder?: boolean;\n  isSnapshot?: boolean;\n  folderTitle?: string;\n  folderUrl?: string;\n  created?: string;\n  createdBy?: string;\n  updated?: string;\n  updatedBy?: string;\n  fromScript?: boolean;\n  fromFile?: boolean;\n  hasUnsavedFolderChange?: boolean;\n  annotationsPermissions?: AnnotationsPermissions;\n  publicDashboardAccessToken?: string;\n  publicDashboardUid?: string;\n  publicDashboardEnabled?: boolean;\n  dashboardNotFound?: boolean;\n}\n\nexport interface AnnotationActions {\n  canAdd: boolean;\n  canEdit: boolean;\n  canDelete: boolean;\n}\n\nexport interface AnnotationsPermissions {\n  dashboard: AnnotationActions;\n  organization: AnnotationActions;\n}\n\nexport interface DashboardDataDTO {\n  title: string;\n  uid: string;\n  templating: {\n    list: VariableModel[];\n  };\n  panels?: any[];\n}\n\nexport enum DashboardRoutes {\n  Home = 'home-dashboard',\n  New = 'new-dashboard',\n  Normal = 'normal-dashboard',\n  Path = 'path-dashboard',\n  Scripted = 'scripted-dashboard',\n  Public = 'public-dashboard',\n}\n\nexport enum DashboardInitPhase {\n  NotStarted = 'Not started',\n  Fetching = 'Fetching',\n  Services = 'Services',\n  Failed = 'Failed',\n  Completed = 'Completed',\n}\n\nexport interface DashboardInitError {\n  message: string;\n  error: any;\n}\n\nexport enum KioskMode {\n  Off = 'off',\n  TV = 'tv',\n  Full = 'full',\n}\n\nexport type GetMutableDashboardModelFn = () => DashboardModel | null;\n\nexport interface QueriesToUpdateOnDashboardLoad {\n  panelId: number;\n  queries: DataQuery[];\n}\n\nexport interface DashboardState {\n  getModel: GetMutableDashboardModelFn;\n  initPhase: DashboardInitPhase;\n  initError: DashboardInitError | null;\n  permissions: DashboardAcl[];\n}\n","export enum OrgRole {\n  Viewer = 'Viewer',\n  Editor = 'Editor',\n  Admin = 'Admin',\n}\n\nexport interface DashboardAclDTO {\n  id?: number;\n  dashboardId?: number;\n  userId?: number;\n  userLogin?: string;\n  userEmail?: string;\n  teamId?: number;\n  team?: string;\n  permission?: PermissionLevel;\n  role?: OrgRole;\n  icon?: string;\n  inherited?: boolean;\n}\n\nexport interface DashboardAclUpdateDTO {\n  userId?: number;\n  teamId?: number;\n  role?: OrgRole;\n  permission?: PermissionLevel;\n}\n\nexport interface DashboardAcl {\n  id?: number;\n  dashboardId?: number;\n  userId?: number;\n  userLogin?: string;\n  userEmail?: string;\n  teamId?: number;\n  team?: string;\n  permission?: PermissionLevel;\n  role?: OrgRole;\n  icon?: string;\n  name?: string;\n  inherited?: boolean;\n  sortRank?: number;\n  userAvatarUrl?: string;\n  teamAvatarUrl?: string;\n}\n\nexport interface DashboardPermissionInfo {\n  value: PermissionLevel;\n  label: string;\n  description: string;\n}\n\nexport interface NewDashboardAclItem {\n  teamId: number;\n  userId: number;\n  role?: OrgRole;\n  permission: PermissionLevel;\n  type: AclTarget;\n}\n\nexport enum PermissionLevel {\n  View = 1,\n  Edit = 2,\n  Admin = 4,\n}\n\nexport enum PermissionLevelString {\n  View = 'View',\n  Edit = 'Edit',\n  Admin = 'Admin',\n}\n\nexport enum DataSourcePermissionLevel {\n  Query = 1,\n  Admin = 2,\n}\n\nexport enum AclTarget {\n  Team = 'Team',\n  User = 'User',\n  Viewer = 'Viewer',\n  Editor = 'Editor',\n}\n\nexport interface AclTargetInfo {\n  value: AclTarget;\n  label: string;\n}\n\nexport const dataSourceAclLevels = [\n  { value: DataSourcePermissionLevel.Query, label: 'Query', description: 'Can query data source.' },\n];\n\nexport const dashboardAclTargets: AclTargetInfo[] = [\n  { value: AclTarget.Team, label: 'Team' },\n  { value: AclTarget.User, label: 'User' },\n  { value: AclTarget.Viewer, label: 'Everyone With Viewer Role' },\n  { value: AclTarget.Editor, label: 'Everyone With Editor Role' },\n];\n\nexport const dashboardPermissionLevels: DashboardPermissionInfo[] = [\n  { value: PermissionLevel.View, label: PermissionLevelString.View, description: 'Can view dashboards.' },\n  {\n    value: PermissionLevel.Edit,\n    label: PermissionLevelString.Edit,\n    description: 'Can add, edit and delete dashboards.',\n  },\n  {\n    value: PermissionLevel.Admin,\n    label: 'Admin',\n    description: 'Can add/remove permissions and can add, edit and delete dashboards.',\n  },\n];\n\nexport enum TeamPermissionLevel {\n  Member = 0,\n  Admin = 4,\n}\n\nexport interface TeamPermissionInfo {\n  value: TeamPermissionLevel;\n  label: string;\n  description: string;\n}\n\nexport const teamsPermissionLevels: TeamPermissionInfo[] = [\n  { value: TeamPermissionLevel.Member, label: 'Member', description: 'Is team member' },\n  {\n    value: TeamPermissionLevel.Admin,\n    label: 'Admin',\n    description: 'Can add/remove permissions, members and delete team.',\n  },\n];\n","import { WithAccessControlMetadata } from '@grafana/data';\n\nimport { ApiKey, OrgRole, Role } from '.';\n\nexport interface OrgServiceAccount extends WithAccessControlMetadata {\n  serviceAccountId: number;\n  avatarUrl: string;\n  email: string;\n  login: string;\n  name: string;\n  displayName: string;\n  orgId: number;\n  role: OrgRole;\n  tokens: number[];\n}\n\nexport interface ServiceAccount {\n  id: number;\n  label: string;\n  avatarUrl: string;\n  login: string;\n  email: string;\n  name: string;\n  displayName: string;\n  orgId?: number;\n}\n\nexport interface ServiceAccountDTO extends WithAccessControlMetadata {\n  id: number;\n  orgId: number;\n  tokens: number;\n  name: string;\n  login: string;\n  avatarUrl?: string;\n  createdAt: string;\n  isDisabled: boolean;\n  teams: string[];\n  role: OrgRole;\n}\n\nexport interface ServiceAccountCreateApiResponse {\n  avatarUrl?: string;\n  id: number;\n  isDisabled: boolean;\n  login: string;\n  name: string;\n  orgId: number;\n  role: OrgRole;\n  tokens: number;\n}\n\nexport interface ServiceAccountProfileState {\n  serviceAccount: ServiceAccountDTO;\n  isLoading: boolean;\n  tokens: ApiKey[];\n}\n\nexport enum ServiceAccountStateFilter {\n  All = 'All',\n  WithExpiredTokens = 'WithExpiredTokens',\n  Disabled = 'Disabled',\n}\n\nexport interface ServiceAccountsState {\n  serviceAccounts: ServiceAccountDTO[];\n  isLoading: boolean;\n  roleOptions: Role[];\n  apiKeysMigrated: boolean;\n  showApiKeysMigrationInfo: boolean;\n\n  // search / filtering\n  query: string;\n  perPage: number;\n  page: number;\n  totalPages: number;\n  showPaging: boolean;\n  serviceAccountStateFilter: ServiceAccountStateFilter;\n}\n\nexport interface ServiceAccountsUpgradeStatus {\n  upgraded: boolean;\n}\n","export interface AppNotification {\n  id: string;\n  severity: AppNotificationSeverity;\n  icon: string;\n  title: string;\n  text: string;\n  traceId?: string;\n  component?: React.ReactElement;\n  showing: boolean;\n  timestamp: number;\n}\n\nexport enum AppNotificationSeverity {\n  Success = 'success',\n  Warning = 'warning',\n  Error = 'error',\n  Info = 'info',\n}\n\nexport enum AppNotificationTimeout {\n  Success = 3000,\n  Warning = 5000,\n  Error = 7000,\n}\n\nexport const timeoutMap = {\n  [AppNotificationSeverity.Success]: AppNotificationTimeout.Success,\n  [AppNotificationSeverity.Warning]: AppNotificationTimeout.Warning,\n  [AppNotificationSeverity.Error]: AppNotificationTimeout.Error,\n  [AppNotificationSeverity.Info]: AppNotificationTimeout.Success,\n};\n\nexport interface AppNotificationsState {\n  byId: Record<string, AppNotification>;\n  lastRead: number;\n}\n","import { RichHistorySearchFilters, RichHistorySettings } from 'app/core/utils/richHistoryTypes';\nimport { Observable, SubscriptionLike, Unsubscribable } from 'rxjs';\n\nimport {\n  AbsoluteTimeRange,\n  DataFrame,\n  DataQuery,\n  DataQueryRequest,\n  DataSourceApi,\n  HistoryItem,\n  LogsModel,\n  PanelData,\n  QueryHint,\n  RawTimeRange,\n  TimeRange,\n  EventBusExtended,\n  DataQueryResponse,\n  ExplorePanelsState,\n} from '@grafana/data';\n\nexport enum ExploreId {\n  left = 'left',\n  right = 'right',\n}\n\nexport type ExploreQueryParams = {\n  left: string;\n  right: string;\n};\n\n/**\n * Global Explore state\n */\nexport interface ExploreState {\n  /**\n   * True if time interval for panels are synced. Only possible with split mode.\n   */\n  syncedTimes: boolean;\n  /**\n   * Explore state of the left split (left is default in non-split view).\n   */\n  left: ExploreItemState;\n  /**\n   * Explore state of the right area in split view.\n   */\n  right?: ExploreItemState;\n\n  /**\n   * Settings for rich history (note: filters are stored per each pane separately)\n   */\n  richHistorySettings?: RichHistorySettings;\n\n  /**\n   * True if local storage quota was exceeded when a rich history item was added. This is to prevent showing\n   * multiple errors when local storage is full.\n   */\n  richHistoryStorageFull: boolean;\n\n  /**\n   * True if a warning message of hitting the exceeded number of items has been shown already.\n   */\n  richHistoryLimitExceededWarningShown: boolean;\n\n  /**\n   * True if a warning message about failed rich history has been shown already in this session.\n   */\n  richHistoryMigrationFailed: boolean;\n}\n\nexport const EXPLORE_GRAPH_STYLES = ['lines', 'bars', 'points', 'stacked_lines', 'stacked_bars'] as const;\nexport type ExploreGraphStyle = typeof EXPLORE_GRAPH_STYLES[number];\n\nexport interface ExploreItemState {\n  /**\n   * Width used for calculating the graph interval (can't have more datapoints than pixels)\n   */\n  containerWidth: number;\n  /**\n   * Datasource instance that has been selected. Datasource-specific logic can be run on this object.\n   */\n  datasourceInstance?: DataSourceApi | null;\n  /**\n   * True if there is no datasource to be selected.\n   */\n  datasourceMissing: boolean;\n  /**\n   * Emitter to send events to the rest of Grafana.\n   */\n  eventBridge: EventBusExtended;\n  /**\n   * List of timeseries to be shown in the Explore graph result viewer.\n   */\n  graphResult: DataFrame[] | null;\n  /**\n   * History of recent queries. Datasource-specific and initialized via localStorage.\n   */\n  history: HistoryItem[];\n  /**\n   * Queries for this Explore, e.g., set via URL. Each query will be\n   * converted to a query row.\n   */\n  queries: DataQuery[];\n  /**\n   * True if this Explore area has been initialized.\n   * Used to distinguish URL state injection versus split view state injection.\n   */\n  initialized: boolean;\n  /**\n   * Log query result to be displayed in the logs result viewer.\n   */\n  logsResult: LogsModel | null;\n\n  /**\n   * Time range for this Explore. Managed by the time picker and used by all query runs.\n   */\n  range: TimeRange;\n\n  absoluteRange: AbsoluteTimeRange;\n  /**\n   * True if scanning for more results is active.\n   */\n  scanning: boolean;\n  /**\n   * Current scanning range to be shown to the user while scanning is active.\n   */\n  scanRange?: RawTimeRange;\n\n  loading: boolean;\n  /**\n   * Table model that combines all query table results into a single table.\n   */\n  tableResult: DataFrame | null;\n\n  /**\n   * React keys for rendering of QueryRows\n   */\n  queryKeys: string[];\n\n  /**\n   * How often query should be refreshed\n   */\n  refreshInterval?: string;\n\n  /**\n   * If true, the view is in live tailing mode.\n   */\n  isLive: boolean;\n\n  /**\n   * If true, the live tailing view is paused.\n   */\n  isPaused: boolean;\n\n  querySubscription?: Unsubscribable;\n\n  queryResponse: ExplorePanelData;\n\n  showLogs?: boolean;\n  showMetrics?: boolean;\n  showTable?: boolean;\n  showTrace?: boolean;\n  showNodeGraph?: boolean;\n\n  /**\n   * History of all queries\n   */\n  richHistory: RichHistoryQuery[];\n  richHistorySearchFilters?: RichHistorySearchFilters;\n  richHistoryTotal?: number;\n\n  /**\n   * We are using caching to store query responses of queries run from logs navigation.\n   * In logs navigation, we do pagination and we don't want our users to unnecessarily run the same queries that they've run just moments before.\n   * We are currently caching last 5 query responses.\n   */\n  cache: Array<{ key: string; value: ExplorePanelData }>;\n\n  // properties below should be more generic if we add more providers\n  // see also: DataSourceWithLogsVolumeSupport\n  logsVolumeDataProvider?: Observable<DataQueryResponse>;\n  logsVolumeDataSubscription?: SubscriptionLike;\n  logsVolumeData?: DataQueryResponse;\n\n  /* explore graph style */\n  graphStyle: ExploreGraphStyle;\n  panelsState: ExplorePanelsState;\n}\n\nexport interface ExploreUpdateState {\n  datasource: boolean;\n  queries: boolean;\n  range: boolean;\n  mode: boolean;\n}\n\nexport interface QueryOptions {\n  minInterval?: string;\n  maxDataPoints?: number;\n  liveStreaming?: boolean;\n}\n\nexport interface QueryTransaction {\n  id: string;\n  done: boolean;\n  error?: string | JSX.Element;\n  hints?: QueryHint[];\n  request: DataQueryRequest;\n  queries: DataQuery[];\n  result?: any; // Table model / Timeseries[] / Logs\n  scanning?: boolean;\n}\n\nexport type RichHistoryQuery<T extends DataQuery = DataQuery> = {\n  id: string;\n  createdAt: number;\n  datasourceUid: string;\n  datasourceName: string;\n  starred: boolean;\n  comment: string;\n  queries: T[];\n};\n\nexport interface ExplorePanelData extends PanelData {\n  graphFrames: DataFrame[];\n  tableFrames: DataFrame[];\n  logsFrames: DataFrame[];\n  traceFrames: DataFrame[];\n  nodeGraphFrames: DataFrame[];\n  graphResult: DataFrame[] | null;\n  tableResult: DataFrame | null;\n  logsResult: LogsModel | null;\n}\n","/**\n * UserPermission is a map storing permissions in a form of\n * {\n *   action: true;\n * }\n */\nexport type UserPermission = Record<string, boolean>;\n\n// Permission actions\nexport enum AccessControlAction {\n  UsersRead = 'users:read',\n  UsersWrite = 'users:write',\n  UsersAuthTokenList = 'users.authtoken:read',\n  UsersAuthTokenUpdate = 'users.authtoken:write',\n  UsersPasswordUpdate = 'users.password:write',\n  UsersDelete = 'users:delete',\n  UsersCreate = 'users:create',\n  UsersEnable = 'users:enable',\n  UsersDisable = 'users:disable',\n  UsersPermissionsUpdate = 'users.permissions:write',\n  UsersLogout = 'users:logout',\n  UsersQuotasList = 'users.quotas:read',\n  UsersQuotasUpdate = 'users.quotas:write',\n\n  ServiceAccountsRead = 'serviceaccounts:read',\n  ServiceAccountsCreate = 'serviceaccounts:create',\n  ServiceAccountsWrite = 'serviceaccounts:write',\n  ServiceAccountsDelete = 'serviceaccounts:delete',\n  ServiceAccountsPermissionsRead = 'serviceaccounts.permissions:read',\n  ServiceAccountsPermissionsWrite = 'serviceaccounts.permissions:write',\n\n  OrgsRead = 'orgs:read',\n  OrgsPreferencesRead = 'orgs.preferences:read',\n  OrgsWrite = 'orgs:write',\n  OrgsPreferencesWrite = 'orgs.preferences:write',\n  OrgsCreate = 'orgs:create',\n  OrgsDelete = 'orgs:delete',\n  OrgUsersRead = 'org.users:read',\n  OrgUsersAdd = 'org.users:add',\n  OrgUsersRemove = 'org.users:remove',\n  OrgUsersWrite = 'org.users:write',\n\n  LDAPUsersRead = 'ldap.user:read',\n  LDAPUsersSync = 'ldap.user:sync',\n  LDAPStatusRead = 'ldap.status:read',\n\n  DataSourcesExplore = 'datasources:explore',\n  DataSourcesRead = 'datasources:read',\n  DataSourcesCreate = 'datasources:create',\n  DataSourcesWrite = 'datasources:write',\n  DataSourcesDelete = 'datasources:delete',\n  DataSourcesPermissionsRead = 'datasources.permissions:read',\n  DataSourcesCachingRead = 'datasources.caching:read',\n  DataSourcesInsightsRead = 'datasources.insights:read',\n\n  ActionServerStatsRead = 'server.stats:read',\n\n  ActionTeamsCreate = 'teams:create',\n  ActionTeamsDelete = 'teams:delete',\n  ActionTeamsRead = 'teams:read',\n  ActionTeamsWrite = 'teams:write',\n  ActionTeamsPermissionsRead = 'teams.permissions:read',\n  ActionTeamsPermissionsWrite = 'teams.permissions:write',\n\n  ActionRolesList = 'roles:read',\n  ActionTeamsRolesList = 'teams.roles:read',\n  ActionTeamsRolesAdd = 'teams.roles:add',\n  ActionTeamsRolesRemove = 'teams.roles:remove',\n  ActionUserRolesList = 'users.roles:read',\n  ActionUserRolesAdd = 'users.roles:add',\n  ActionUserRolesRemove = 'users.roles:remove',\n\n  DashboardsRead = 'dashboards:read',\n  DashboardsWrite = 'dashboards:write',\n  DashboardsDelete = 'dashboards:delete',\n  DashboardsCreate = 'dashboards:create',\n  DashboardsPermissionsRead = 'dashboards.permissions:read',\n  DashboardsPermissionsWrite = 'dashboards.permissions:write',\n  DashboardsPublicWrite = 'dashboards.public:write',\n\n  FoldersRead = 'folders:read',\n  FoldersWrite = 'folders:write',\n  FoldersDelete = 'folders:delete',\n  FoldersCreate = 'folders:create',\n  FoldersPermissionsRead = 'folders.permissions:read',\n  FoldersPermissionsWrite = 'folders.permissions:write',\n\n  // Alerting rules\n  AlertingRuleCreate = 'alert.rules:create',\n  AlertingRuleRead = 'alert.rules:read',\n  AlertingRuleUpdate = 'alert.rules:write',\n  AlertingRuleDelete = 'alert.rules:delete',\n\n  // Alerting instances (+silences)\n  AlertingInstanceCreate = 'alert.instances:create',\n  AlertingInstanceUpdate = 'alert.instances:write',\n  AlertingInstanceRead = 'alert.instances:read',\n\n  // Alerting Notification policies\n  AlertingNotificationsRead = 'alert.notifications:read',\n  AlertingNotificationsWrite = 'alert.notifications:write',\n\n  // External alerting rule actions.\n  AlertingRuleExternalWrite = 'alert.rules.external:write',\n  AlertingRuleExternalRead = 'alert.rules.external:read',\n\n  // External alerting instances actions.\n  AlertingInstancesExternalWrite = 'alert.instances.external:write',\n  AlertingInstancesExternalRead = 'alert.instances.external:read',\n\n  // External alerting notifications actions.\n  AlertingNotificationsExternalWrite = 'alert.notifications.external:write',\n  AlertingNotificationsExternalRead = 'alert.notifications.external:read',\n\n  ActionAPIKeysRead = 'apikeys:read',\n  ActionAPIKeysCreate = 'apikeys:create',\n  ActionAPIKeysDelete = 'apikeys:delete',\n\n  PluginsInstall = 'plugins:install',\n  PluginsWrite = 'plugins:write',\n}\n\nexport interface Role {\n  uid: string;\n  name: string;\n  displayName: string;\n  description: string;\n  group: string;\n  global: boolean;\n  delegatable?: boolean;\n  version: number;\n  created: string;\n  updated: string;\n}\n","import { AnnotationQuery, BusEventBase, BusEventWithPayload, eventFactory } from '@grafana/data';\nimport { IconName } from '@grafana/ui';\n\n\n/**\n * Event Payloads\n */\n\nexport interface ShowDashSearchPayload {\n  query?: string;\n}\n\nexport interface LocationChangePayload {\n  href: string;\n}\n\nexport interface ShowModalPayload {\n  model?: any;\n  modalClass?: string;\n  src?: string;\n  templateHtml?: string;\n  backdrop?: any;\n  scope?: any;\n}\n\nexport interface ShowModalReactPayload {\n  component: React.ComponentType<any>;\n  props?: any;\n}\n\nexport interface ShowConfirmModalPayload {\n  title?: string;\n  text?: string;\n  text2?: string;\n  text2htmlBind?: boolean;\n  confirmText?: string;\n  altActionText?: string;\n  yesText?: string;\n  noText?: string;\n  icon?: IconName;\n\n  onConfirm?: () => void;\n  onAltAction?: () => void;\n}\n\nexport interface DataSourceResponse<T> {\n  data: T;\n  readonly status: number;\n  readonly statusText: string;\n  readonly ok: boolean;\n  readonly headers: Headers;\n  readonly redirected: boolean;\n  readonly type: ResponseType;\n  readonly url: string;\n  readonly config: any;\n}\n\ntype DataSourceResponsePayload = DataSourceResponse<any>;\n\nexport interface ToggleKioskModePayload {\n  exit?: boolean;\n}\n\nexport interface GraphClickedPayload {\n  pos: any;\n  panel: any;\n  item: any;\n}\n\nexport interface ThresholdChangedPayload {\n  threshold: any;\n  handleIndex: any;\n}\n\nexport interface DashScrollPayload {\n  restore?: boolean;\n  animate?: boolean;\n  pos?: number;\n}\n\nexport interface PanelChangeViewPayload {}\n\ninterface ZoomOutEventPayload {\n  scale: number;\n  updateUrl?: boolean;\n}\n\nexport class ZoomOutEvent extends BusEventWithPayload<ZoomOutEventPayload> {\n  static type = 'zoom-out';\n}\n\nexport enum ShiftTimeEventDirection {\n  Left = -1,\n  Right = 1,\n}\n\ninterface ShiftTimeEventPayload {\n  direction: ShiftTimeEventDirection;\n  updateUrl?: boolean;\n}\n\nexport class ShiftTimeEvent extends BusEventWithPayload<ShiftTimeEventPayload> {\n  static type = 'shift-time';\n}\n\nexport class AbsoluteTimeEvent extends BusEventBase {\n  static type = 'absolute-time';\n}\n\nexport class RemovePanelEvent extends BusEventWithPayload<number> {\n  static type = 'remove-panel';\n}\n\n/**\n * @deprecated use ShowModalReactEvent instead that has this capability built in\n */\nexport class ShowModalEvent extends BusEventWithPayload<ShowModalPayload> {\n  static type = 'show-modal';\n}\n\nexport class ShowConfirmModalEvent extends BusEventWithPayload<ShowConfirmModalPayload> {\n  static type = 'show-confirm-modal';\n}\n\nexport class ShowModalReactEvent extends BusEventWithPayload<ShowModalReactPayload> {\n  static type = 'show-react-modal';\n}\n\n/**\n * @deprecated use ShowModalReactEvent instead that has this capability built in\n */\nexport class HideModalEvent extends BusEventBase {\n  static type = 'hide-modal';\n}\n\nexport class DashboardSavedEvent extends BusEventBase {\n  static type = 'dashboard-saved';\n}\n\nexport class AnnotationQueryStarted extends BusEventWithPayload<AnnotationQuery> {\n  static type = 'annotation-query-started';\n}\n\nexport class AnnotationQueryFinished extends BusEventWithPayload<AnnotationQuery> {\n  static type = 'annotation-query-finished';\n}\n\nexport class PanelEditEnteredEvent extends BusEventWithPayload<number> {\n  static type = 'panel-edit-started';\n}\n\nexport class PanelEditExitedEvent extends BusEventWithPayload<number> {\n  static type = 'panel-edit-finished';\n}\n","import { PluginState } from '@grafana/data';\nimport { config, GrafanaBootConfig } from '@grafana/runtime';\n// Legacy binding paths\nexport { config, GrafanaBootConfig as Settings };\n\nlet grafanaConfig: GrafanaBootConfig = config;\n\nexport default grafanaConfig;\n\nexport const getConfig = () => {\n  return grafanaConfig;\n};\n\nexport const updateConfig = (update: Partial<GrafanaBootConfig>) => {\n  grafanaConfig = {\n    ...grafanaConfig,\n    ...update,\n  };\n};\n\n// The `enable_alpha` flag is not exposed directly, this is equivalent\nexport const hasAlphaPanels = Boolean(config.panels?.debug?.state === PluginState.alpha);\n","import { AccessControlAction, UserPermission } from 'app/types';\nimport { CurrentUserInternal } from 'app/types/config';\nimport { extend } from 'lodash';\n\nimport { OrgRole, rangeUtil, WithAccessControlMetadata } from '@grafana/data';\nimport { featureEnabled, getBackendSrv } from '@grafana/runtime';\n\nimport config from '../../core/config';\n\nexport class User implements CurrentUserInternal {\n  isSignedIn: boolean;\n  id: number;\n  login: string;\n  email: string;\n  name: string;\n  externalUserId: string;\n  lightTheme: boolean;\n  orgCount: number;\n  orgId: number;\n  orgName: string;\n  orgRole: OrgRole | '';\n  isGrafanaAdmin: boolean;\n  gravatarUrl: string;\n  timezone: string;\n  weekStart: string;\n  locale: string;\n  helpFlags1: number;\n  hasEditPermissionInFolders: boolean;\n  permissions?: UserPermission;\n  fiscalYearStartMonth: number;\n\n  constructor() {\n    this.id = 0;\n    this.isGrafanaAdmin = false;\n    this.isSignedIn = false;\n    this.orgRole = '';\n    this.orgId = 0;\n    this.orgName = '';\n    this.login = '';\n    this.externalUserId = '';\n    this.orgCount = 0;\n    this.timezone = '';\n    this.fiscalYearStartMonth = 0;\n    this.helpFlags1 = 0;\n    this.lightTheme = false;\n    this.hasEditPermissionInFolders = false;\n    this.email = '';\n    this.name = '';\n    this.locale = '';\n    this.weekStart = '';\n    this.gravatarUrl = '';\n\n    if (config.bootData.user) {\n      extend(this, config.bootData.user);\n    }\n  }\n}\n\nexport class ContextSrv {\n  pinned: any;\n  version: any;\n  user: User;\n  isSignedIn: any;\n  isGrafanaAdmin: any;\n  isEditor: any;\n  sidemenuSmallBreakpoint = false;\n  hasEditPermissionInFolders: boolean;\n  minRefreshInterval: string;\n\n  constructor() {\n    if (!config.bootData) {\n      config.bootData = { user: {}, settings: {} } as any;\n    }\n\n    this.user = new User();\n    this.isSignedIn = this.user.isSignedIn;\n    this.isGrafanaAdmin = this.user.isGrafanaAdmin;\n    this.isEditor = this.hasRole('Editor') || this.hasRole('Admin');\n    this.hasEditPermissionInFolders = this.user.hasEditPermissionInFolders;\n    this.minRefreshInterval = config.minRefreshInterval;\n  }\n\n  async fetchUserPermissions() {\n    try {\n      if (this.accessControlEnabled()) {\n        this.user.permissions = await getBackendSrv().get('/api/access-control/user/permissions', {\n          reloadcache: true,\n        });\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  /**\n   * Indicate the user has been logged out\n   */\n  setLoggedOut() {\n    this.user.isSignedIn = false;\n    this.isSignedIn = false;\n  }\n\n  hasRole(role: string) {\n    if (role === 'ServerAdmin') {\n      return this.isGrafanaAdmin;\n    } else {\n      return this.user.orgRole === role;\n    }\n  }\n\n  accessControlEnabled(): boolean {\n    return config.rbacEnabled;\n  }\n\n  licensedAccessControlEnabled(): boolean {\n    return featureEnabled('accesscontrol') && config.rbacEnabled;\n  }\n\n  // Checks whether user has required permission\n  hasPermissionInMetadata(action: AccessControlAction | string, object: WithAccessControlMetadata): boolean {\n    // Fallback if access control disabled\n    if (!this.accessControlEnabled()) {\n      return true;\n    }\n\n    return !!object.accessControl?.[action];\n  }\n\n  // Checks whether user has required permission\n  hasPermission(action: AccessControlAction | string): boolean {\n    // Fallback if access control disabled\n    if (!this.accessControlEnabled()) {\n      return true;\n    }\n\n    return !!this.user.permissions?.[action];\n  }\n\n  isGrafanaVisible() {\n    return document.visibilityState === undefined || document.visibilityState === 'visible';\n  }\n\n  // checks whether the passed interval is longer than the configured minimum refresh rate\n  isAllowedInterval(interval: string) {\n    if (!config.minRefreshInterval) {\n      return true;\n    }\n    return rangeUtil.intervalToMs(interval) >= rangeUtil.intervalToMs(config.minRefreshInterval);\n  }\n\n  getValidInterval(interval: string) {\n    if (!this.isAllowedInterval(interval)) {\n      return config.minRefreshInterval;\n    }\n    return interval;\n  }\n\n  hasAccessToExplore() {\n    if (this.accessControlEnabled()) {\n      return this.hasPermission(AccessControlAction.DataSourcesExplore);\n    }\n    return (this.isEditor || config.viewersCanEdit) && config.exploreEnabled;\n  }\n\n  hasAccess(action: string, fallBack: boolean): boolean {\n    if (!this.accessControlEnabled()) {\n      return fallBack;\n    }\n    return this.hasPermission(action);\n  }\n\n  hasAccessInMetadata(action: string, object: WithAccessControlMetadata, fallBack: boolean) {\n    if (!this.accessControlEnabled()) {\n      return fallBack;\n    }\n    return this.hasPermissionInMetadata(action, object);\n  }\n\n  // evaluates access control permissions, granting access if the user has any of them; uses fallback if access control is disabled\n  evaluatePermission(fallback: () => string[], actions: string[]) {\n    if (!this.accessControlEnabled()) {\n      return fallback();\n    }\n    if (actions.some((action) => this.hasPermission(action))) {\n      return [];\n    }\n    // Hack to reject when user does not have permission\n    return ['Reject'];\n  }\n}\n\nlet contextSrv = new ContextSrv();\nexport { contextSrv };\n\nexport const setContextSrv = (override: ContextSrv) => {\n  if (process.env.NODE_ENV !== 'test') {\n    throw new Error('contextSrv can be only overridden in test environment');\n  }\n  contextSrv = override;\n};\n","import { contextSrv } from 'app/core/services/context_srv';\nimport { AlertManagerDataSourceJsonData, AlertManagerImplementation } from 'app/plugins/datasource/alertmanager/types';\nimport { AccessControlAction } from 'app/types';\nimport { RulesSource } from 'app/types/unified-alerting';\n\nimport { DataSourceInstanceSettings, DataSourceJsonData } from '@grafana/data';\nimport { getDataSourceSrv } from '@grafana/runtime';\n\nimport { instancesPermissions, notificationsPermissions } from './access-control';\nimport { getAllDataSources } from './config';\n\nexport const GRAFANA_RULES_SOURCE_NAME = 'grafana';\nexport const GRAFANA_DATASOURCE_NAME = '-- Grafana --';\n\nexport enum DataSourceType {\n  Alertmanager = 'alertmanager',\n  Loki = 'loki',\n  Prometheus = 'prometheus',\n}\n\nexport interface AlertManagerDataSource {\n  name: string;\n  imgUrl: string;\n  meta?: DataSourceInstanceSettings['meta'];\n}\n\nexport const RulesDataSourceTypes: string[] = [DataSourceType.Loki, DataSourceType.Prometheus];\n\nexport function getRulesDataSources() {\n  if (!contextSrv.hasPermission(AccessControlAction.AlertingRuleExternalRead)) {\n    return [];\n  }\n\n  return getAllDataSources()\n    .filter((ds) => RulesDataSourceTypes.includes(ds.type) && ds.jsonData.manageAlerts !== false)\n    .sort((a, b) => a.name.localeCompare(b.name));\n}\n\nexport function getRulesDataSource(rulesSourceName: string) {\n  return getRulesDataSources().find((x) => x.name === rulesSourceName);\n}\n\nexport function getAlertManagerDataSources() {\n  return getAllDataSources()\n    .filter(\n      (ds): ds is DataSourceInstanceSettings<AlertManagerDataSourceJsonData> => ds.type === DataSourceType.Alertmanager\n    )\n    .sort((a, b) => a.name.localeCompare(b.name));\n}\n\nconst grafanaAlertManagerDataSource: AlertManagerDataSource = {\n  name: GRAFANA_RULES_SOURCE_NAME,\n  imgUrl: 'public/img/grafana_icon.svg',\n};\n\n// Used only as a fallback for Alert Group plugin\nexport function getAllAlertManagerDataSources(): AlertManagerDataSource[] {\n  return [\n    grafanaAlertManagerDataSource,\n    ...getAlertManagerDataSources().map<AlertManagerDataSource>((ds) => ({\n      name: ds.name,\n      displayName: ds.name,\n      imgUrl: ds.meta.info.logos.small,\n      meta: ds.meta,\n    })),\n  ];\n}\n\nexport function getAlertManagerDataSourcesByPermission(\n  permission: 'instance' | 'notification'\n): AlertManagerDataSource[] {\n  const availableDataSources: AlertManagerDataSource[] = [];\n  const permissions = {\n    instance: instancesPermissions.read,\n    notification: notificationsPermissions.read,\n  };\n\n  if (contextSrv.hasPermission(permissions[permission].grafana)) {\n    availableDataSources.push(grafanaAlertManagerDataSource);\n  }\n\n  if (contextSrv.hasPermission(permissions[permission].external)) {\n    const cloudSources = getAlertManagerDataSources().map<AlertManagerDataSource>((ds) => ({\n      name: ds.name,\n      displayName: ds.name,\n      imgUrl: ds.meta.info.logos.small,\n      meta: ds.meta,\n    }));\n    availableDataSources.push(...cloudSources);\n  }\n\n  return availableDataSources;\n}\n\nexport function getLotexDataSourceByName(dataSourceName: string): DataSourceInstanceSettings {\n  const dataSource = getDataSourceByName(dataSourceName);\n  if (!dataSource) {\n    throw new Error(`Data source ${dataSourceName} not found`);\n  }\n  if (dataSource.type !== DataSourceType.Loki && dataSource.type !== DataSourceType.Prometheus) {\n    throw new Error(`Unexpected data source type ${dataSource.type}`);\n  }\n  return dataSource;\n}\n\nexport function getAllRulesSourceNames(): string[] {\n  const availableRulesSources: string[] = getRulesDataSources().map((r) => r.name);\n\n  if (contextSrv.hasPermission(AccessControlAction.AlertingRuleRead)) {\n    availableRulesSources.push(GRAFANA_RULES_SOURCE_NAME);\n  }\n\n  return availableRulesSources;\n}\n\nexport function getAllRulesSources(): RulesSource[] {\n  const availableRulesSources: RulesSource[] = getRulesDataSources();\n\n  if (contextSrv.hasPermission(AccessControlAction.AlertingRuleRead)) {\n    availableRulesSources.push(GRAFANA_RULES_SOURCE_NAME);\n  }\n\n  return availableRulesSources;\n}\n\nexport function getRulesSourceName(rulesSource: RulesSource): string {\n  return isCloudRulesSource(rulesSource) ? rulesSource.name : rulesSource;\n}\n\nexport function getRulesSourceUid(rulesSource: RulesSource): string {\n  return isCloudRulesSource(rulesSource) ? rulesSource.uid : GRAFANA_RULES_SOURCE_NAME;\n}\n\nexport function isCloudRulesSource(rulesSource: RulesSource | string): rulesSource is DataSourceInstanceSettings {\n  return rulesSource !== GRAFANA_RULES_SOURCE_NAME;\n}\n\nexport function isVanillaPrometheusAlertManagerDataSource(name: string): boolean {\n  return (\n    name !== GRAFANA_RULES_SOURCE_NAME &&\n    (getDataSourceByName(name)?.jsonData as AlertManagerDataSourceJsonData)?.implementation ===\n      AlertManagerImplementation.prometheus\n  );\n}\n\nexport function isGrafanaRulesSource(\n  rulesSource: RulesSource | string\n): rulesSource is typeof GRAFANA_RULES_SOURCE_NAME {\n  return rulesSource === GRAFANA_RULES_SOURCE_NAME;\n}\n\nexport function getDataSourceByName(name: string): DataSourceInstanceSettings<DataSourceJsonData> | undefined {\n  return getAllDataSources().find((source) => source.name === name);\n}\n\nexport function getRulesSourceByName(name: string): RulesSource | undefined {\n  if (name === GRAFANA_RULES_SOURCE_NAME) {\n    return GRAFANA_RULES_SOURCE_NAME;\n  }\n  return getDataSourceByName(name);\n}\n\nexport function getDatasourceAPIId(dataSourceName: string) {\n  if (dataSourceName === GRAFANA_RULES_SOURCE_NAME) {\n    return GRAFANA_RULES_SOURCE_NAME;\n  }\n  const ds = getDataSourceByName(dataSourceName);\n  if (!ds) {\n    throw new Error(`Datasource \"${dataSourceName}\" not found`);\n  }\n  return String(ds.id);\n}\n\nexport function getDatasourceAPIUid(dataSourceName: string) {\n  if (dataSourceName === GRAFANA_RULES_SOURCE_NAME) {\n    return GRAFANA_RULES_SOURCE_NAME;\n  }\n  const ds = getDataSourceByName(dataSourceName);\n  if (!ds) {\n    throw new Error(`Datasource \"${dataSourceName}\" not found`);\n  }\n  return ds.uid;\n}\n\nexport function getFirstCompatibleDataSource(): DataSourceInstanceSettings<DataSourceJsonData> | undefined {\n  return getRulesDataSources()[0];\n}\n\nexport function getDefaultOrFirstCompatibleDataSource(): DataSourceInstanceSettings<DataSourceJsonData> | undefined {\n  const defaultDataSource = getDataSourceSrv().getInstanceSettings('default');\n  const defaultIsCompatible = defaultDataSource?.meta.alerting ?? false;\n\n  return defaultIsCompatible ? defaultDataSource : getFirstCompatibleDataSource();\n}\n","import { SelectableValue } from '@grafana/data';\n\nexport enum AzureCloud {\n  Public = 'AzureCloud',\n  China = 'AzureChinaCloud',\n  USGovernment = 'AzureUSGovernment',\n  Germany = 'AzureGermanCloud',\n  None = '',\n}\n\nexport const KnownAzureClouds = [\n  { value: AzureCloud.Public, label: 'Azure' },\n  { value: AzureCloud.China, label: 'Azure China' },\n  { value: AzureCloud.USGovernment, label: 'Azure US Government' },\n  { value: AzureCloud.Germany, label: 'Azure Germany' },\n] as SelectableValue[];\n\nexport type AzureAuthType = 'msi' | 'clientsecret';\n\nexport type ConcealedSecret = symbol;\n\ninterface AzureCredentialsBase {\n  authType: AzureAuthType;\n  defaultSubscriptionId?: string;\n}\n\nexport interface AzureManagedIdentityCredentials extends AzureCredentialsBase {\n  authType: 'msi';\n}\n\nexport interface AzureClientSecretCredentials extends AzureCredentialsBase {\n  authType: 'clientsecret';\n  azureCloud?: string;\n  tenantId?: string;\n  clientId?: string;\n  clientSecret?: string | ConcealedSecret;\n}\n\nexport type AzureCredentials = AzureManagedIdentityCredentials | AzureClientSecretCredentials;\n\nexport function isCredentialsComplete(credentials: AzureCredentials): boolean {\n  switch (credentials.authType) {\n    case 'msi':\n      return true;\n    case 'clientsecret':\n      return !!(credentials.azureCloud && credentials.tenantId && credentials.clientId && credentials.clientSecret);\n  }\n}\n","import { contextSrv } from '../../../../core/services/context_srv';\nimport { AccessControlAction } from '../../../../types';\n\nimport { GRAFANA_RULES_SOURCE_NAME, isGrafanaRulesSource } from './datasource';\n\ntype RulesSourceType = 'grafana' | 'external';\n\nfunction getRulesSourceType(alertManagerSourceName: string): RulesSourceType {\n  return isGrafanaRulesSource(alertManagerSourceName) ? 'grafana' : 'external';\n}\n\nexport const instancesPermissions = {\n  read: {\n    grafana: AccessControlAction.AlertingInstanceRead,\n    external: AccessControlAction.AlertingInstancesExternalRead,\n  },\n  create: {\n    grafana: AccessControlAction.AlertingInstanceCreate,\n    external: AccessControlAction.AlertingInstancesExternalWrite,\n  },\n  update: {\n    grafana: AccessControlAction.AlertingInstanceUpdate,\n    external: AccessControlAction.AlertingInstancesExternalWrite,\n  },\n  delete: {\n    grafana: AccessControlAction.AlertingInstanceUpdate,\n    external: AccessControlAction.AlertingInstancesExternalWrite,\n  },\n};\n\nexport const notificationsPermissions = {\n  read: {\n    grafana: AccessControlAction.AlertingNotificationsRead,\n    external: AccessControlAction.AlertingNotificationsExternalRead,\n  },\n  create: {\n    grafana: AccessControlAction.AlertingNotificationsWrite,\n    external: AccessControlAction.AlertingNotificationsExternalWrite,\n  },\n  update: {\n    grafana: AccessControlAction.AlertingNotificationsWrite,\n    external: AccessControlAction.AlertingNotificationsExternalWrite,\n  },\n  delete: {\n    grafana: AccessControlAction.AlertingNotificationsWrite,\n    external: AccessControlAction.AlertingNotificationsExternalWrite,\n  },\n};\n\nconst rulesPermissions = {\n  read: {\n    grafana: AccessControlAction.AlertingRuleRead,\n    external: AccessControlAction.AlertingRuleExternalRead,\n  },\n  create: {\n    grafana: AccessControlAction.AlertingRuleCreate,\n    external: AccessControlAction.AlertingRuleExternalWrite,\n  },\n  update: {\n    grafana: AccessControlAction.AlertingRuleUpdate,\n    external: AccessControlAction.AlertingRuleExternalWrite,\n  },\n  delete: {\n    grafana: AccessControlAction.AlertingRuleDelete,\n    external: AccessControlAction.AlertingRuleExternalWrite,\n  },\n};\n\nexport function getInstancesPermissions(rulesSourceName: string) {\n  const sourceType = getRulesSourceType(rulesSourceName);\n\n  return {\n    read: instancesPermissions.read[sourceType],\n    create: instancesPermissions.create[sourceType],\n    update: instancesPermissions.update[sourceType],\n    delete: instancesPermissions.delete[sourceType],\n  };\n}\n\nexport function getNotificationsPermissions(rulesSourceName: string) {\n  const sourceType = getRulesSourceType(rulesSourceName);\n\n  return {\n    read: notificationsPermissions.read[sourceType],\n    create: notificationsPermissions.create[sourceType],\n    update: notificationsPermissions.update[sourceType],\n    delete: notificationsPermissions.delete[sourceType],\n  };\n}\n\nexport function getRulesPermissions(rulesSourceName: string) {\n  const sourceType = getRulesSourceType(rulesSourceName);\n\n  return {\n    read: rulesPermissions.read[sourceType],\n    create: rulesPermissions.create[sourceType],\n    update: rulesPermissions.update[sourceType],\n    delete: rulesPermissions.delete[sourceType],\n  };\n}\n\nexport function evaluateAccess(actions: AccessControlAction[], fallBackUserRoles: string[]) {\n  return () => {\n    return contextSrv.evaluatePermission(() => fallBackUserRoles, actions);\n  };\n}\n\nexport function getRulesAccess() {\n  return {\n    canCreateGrafanaRules:\n      contextSrv.hasAccess(AccessControlAction.FoldersRead, contextSrv.hasEditPermissionInFolders) &&\n      contextSrv.hasAccess(rulesPermissions.create.grafana, contextSrv.hasEditPermissionInFolders),\n    canCreateCloudRules:\n      contextSrv.hasAccess(AccessControlAction.DataSourcesRead, contextSrv.isEditor) &&\n      contextSrv.hasAccess(rulesPermissions.create.external, contextSrv.isEditor),\n    canEditRules: (rulesSourceName: string) => {\n      const permissionFallback =\n        rulesSourceName === GRAFANA_RULES_SOURCE_NAME ? contextSrv.hasEditPermissionInFolders : contextSrv.isEditor;\n      return contextSrv.hasAccess(getRulesPermissions(rulesSourceName).update, permissionFallback);\n    },\n  };\n}\n","import {\n  AlertManagerCortexConfig,\n  MatcherOperator,\n  Route,\n  Matcher,\n  TimeInterval,\n  TimeRange,\n} from 'app/plugins/datasource/alertmanager/types';\n\nimport { SelectableValue } from '@grafana/data';\n\nimport { Labels } from '../../../../types/unified-alerting-dto';\nimport { MatcherFieldValue } from '../types/silence-form';\n\nimport { getAllDataSources } from './config';\nimport { DataSourceType } from './datasource';\n\nexport function addDefaultsToAlertmanagerConfig(config: AlertManagerCortexConfig): AlertManagerCortexConfig {\n  // add default receiver if it does not exist\n  if (!config.alertmanager_config.receivers) {\n    config.alertmanager_config.receivers = [{ name: 'default ' }];\n  }\n  // add default route if it does not exists\n  if (!config.alertmanager_config.route) {\n    config.alertmanager_config.route = {\n      receiver: config.alertmanager_config.receivers![0].name,\n    };\n  }\n  if (!config.template_files) {\n    config.template_files = {};\n  }\n  return config;\n}\n\nexport function removeMuteTimingFromRoute(muteTiming: string, route: Route): Route {\n  const newRoute: Route = {\n    ...route,\n    mute_time_intervals: route.mute_time_intervals?.filter((muteName) => muteName !== muteTiming) ?? [],\n    routes: route.routes?.map((subRoute) => removeMuteTimingFromRoute(muteTiming, subRoute)),\n  };\n  return newRoute;\n}\n\nexport function renameMuteTimings(newMuteTimingName: string, oldMuteTimingName: string, route: Route): Route {\n  return {\n    ...route,\n    mute_time_intervals: route.mute_time_intervals?.map((name) =>\n      name === oldMuteTimingName ? newMuteTimingName : name\n    ),\n    routes: route.routes?.map((subRoute) => renameMuteTimings(newMuteTimingName, oldMuteTimingName, subRoute)),\n  };\n}\n\nfunction isReceiverUsedInRoute(receiver: string, route: Route): boolean {\n  return (\n    (route.receiver === receiver || route.routes?.some((route) => isReceiverUsedInRoute(receiver, route))) ?? false\n  );\n}\n\nexport function isReceiverUsed(receiver: string, config: AlertManagerCortexConfig): boolean {\n  return (\n    (config.alertmanager_config.route && isReceiverUsedInRoute(receiver, config.alertmanager_config.route)) ?? false\n  );\n}\n\nexport function matcherToOperator(matcher: Matcher): MatcherOperator {\n  if (matcher.isEqual) {\n    if (matcher.isRegex) {\n      return MatcherOperator.regex;\n    } else {\n      return MatcherOperator.equal;\n    }\n  } else if (matcher.isRegex) {\n    return MatcherOperator.notRegex;\n  } else {\n    return MatcherOperator.notEqual;\n  }\n}\n\nexport function matcherOperatorToValue(operator: MatcherOperator) {\n  switch (operator) {\n    case MatcherOperator.equal:\n      return { isEqual: true, isRegex: false };\n    case MatcherOperator.notEqual:\n      return { isEqual: false, isRegex: false };\n    case MatcherOperator.regex:\n      return { isEqual: true, isRegex: true };\n    case MatcherOperator.notRegex:\n      return { isEqual: false, isRegex: true };\n  }\n}\n\nexport function matcherToMatcherField(matcher: Matcher): MatcherFieldValue {\n  return {\n    name: matcher.name,\n    value: matcher.value,\n    operator: matcherToOperator(matcher),\n  };\n}\n\nexport function matcherFieldToMatcher(field: MatcherFieldValue): Matcher {\n  return {\n    name: field.name,\n    value: field.value,\n    ...matcherOperatorToValue(field.operator),\n  };\n}\n\nexport function matchersToString(matchers: Matcher[]) {\n  const matcherFields = matchers.map(matcherToMatcherField);\n\n  const combinedMatchers = matcherFields.reduce((acc, current) => {\n    const currentMatcherString = `${current.name}${current.operator}\"${current.value}\"`;\n    return acc ? `${acc},${currentMatcherString}` : currentMatcherString;\n  }, '');\n\n  return `{${combinedMatchers}}`;\n}\n\nexport const matcherFieldOptions: SelectableValue[] = [\n  { label: MatcherOperator.equal, description: 'Equals', value: MatcherOperator.equal },\n  { label: MatcherOperator.notEqual, description: 'Does not equal', value: MatcherOperator.notEqual },\n  { label: MatcherOperator.regex, description: 'Matches regex', value: MatcherOperator.regex },\n  { label: MatcherOperator.notRegex, description: 'Does not match regex', value: MatcherOperator.notRegex },\n];\n\nconst matcherOperators = [\n  MatcherOperator.regex,\n  MatcherOperator.notRegex,\n  MatcherOperator.notEqual,\n  MatcherOperator.equal,\n];\n\nexport function parseMatcher(matcher: string): Matcher {\n  const trimmed = matcher.trim();\n  if (trimmed.startsWith('{') && trimmed.endsWith('}')) {\n    throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${trimmed}`);\n  }\n  const operatorsFound = matcherOperators\n    .map((op): [MatcherOperator, number] => [op, trimmed.indexOf(op)])\n    .filter(([_, idx]) => idx > -1)\n    .sort((a, b) => a[1] - b[1]);\n\n  if (!operatorsFound.length) {\n    throw new Error(`Invalid matcher: ${trimmed}`);\n  }\n  const [operator, idx] = operatorsFound[0];\n  const name = trimmed.slice(0, idx).trim();\n  const value = trimmed.slice(idx + operator.length).trim();\n  if (!name) {\n    throw new Error(`Invalid matcher: ${trimmed}`);\n  }\n\n  return {\n    name,\n    value,\n    isRegex: operator === MatcherOperator.regex || operator === MatcherOperator.notRegex,\n    isEqual: operator === MatcherOperator.equal || operator === MatcherOperator.regex,\n  };\n}\n\nexport function parseMatchers(matcherQueryString: string): Matcher[] {\n  const matcherRegExp = /\\b([\\w.-]+)(=~|!=|!~|=(?=\"?\\w))\"?([^\"\\n,]*)\"?/g;\n  const matchers: Matcher[] = [];\n\n  matcherQueryString.replace(matcherRegExp, (_, key, operator, value) => {\n    const isEqual = operator === MatcherOperator.equal || operator === MatcherOperator.regex;\n    const isRegex = operator === MatcherOperator.regex || operator === MatcherOperator.notRegex;\n    matchers.push({\n      name: key,\n      value,\n      isEqual,\n      isRegex,\n    });\n    return '';\n  });\n\n  return matchers;\n}\n\nexport function labelsMatchMatchers(labels: Labels, matchers: Matcher[]): boolean {\n  return matchers.every(({ name, value, isRegex, isEqual }) => {\n    return Object.entries(labels).some(([labelKey, labelValue]) => {\n      const nameMatches = name === labelKey;\n      let valueMatches;\n      if (isEqual && !isRegex) {\n        valueMatches = value === labelValue;\n      }\n      if (!isEqual && !isRegex) {\n        valueMatches = value !== labelValue;\n      }\n      if (isEqual && isRegex) {\n        valueMatches = new RegExp(value).test(labelValue);\n      }\n      if (!isEqual && isRegex) {\n        valueMatches = !new RegExp(value).test(labelValue);\n      }\n\n      return nameMatches && valueMatches;\n    });\n  });\n}\n\nexport function getAllAlertmanagerDataSources() {\n  return getAllDataSources().filter((ds) => ds.type === DataSourceType.Alertmanager);\n}\n\nexport function getAlertmanagerByUid(uid?: string) {\n  return getAllAlertmanagerDataSources().find((ds) => uid === ds.uid);\n}\n\nexport function timeIntervalToString(timeInterval: TimeInterval): string {\n  const { times, weekdays, days_of_month, months, years } = timeInterval;\n  const timeString = getTimeString(times);\n  const weekdayString = getWeekdayString(weekdays);\n  const daysString = getDaysOfMonthString(days_of_month);\n  const monthsString = getMonthsString(months);\n  const yearsString = getYearsString(years);\n\n  return [timeString, weekdayString, daysString, monthsString, yearsString].join(', ');\n}\n\nexport function getTimeString(times?: TimeRange[]): string {\n  return (\n    'Times: ' +\n    (times ? times?.map(({ start_time, end_time }) => `${start_time} - ${end_time} UTC`).join(' and ') : 'All')\n  );\n}\n\nexport function getWeekdayString(weekdays?: string[]): string {\n  return (\n    'Weekdays: ' +\n    (weekdays\n      ?.map((day) => {\n        if (day.includes(':')) {\n          return day\n            .split(':')\n            .map((d) => {\n              const abbreviated = d.slice(0, 3);\n              return abbreviated[0].toLocaleUpperCase() + abbreviated.slice(1);\n            })\n            .join('-');\n        } else {\n          const abbreviated = day.slice(0, 3);\n          return abbreviated[0].toLocaleUpperCase() + abbreviated.slice(1);\n        }\n      })\n      .join(', ') ?? 'All')\n  );\n}\n\nexport function getDaysOfMonthString(daysOfMonth?: string[]): string {\n  return 'Days of the month: ' + (daysOfMonth?.join(', ') ?? 'All');\n}\n\nexport function getMonthsString(months?: string[]): string {\n  return 'Months: ' + (months?.join(', ') ?? 'All');\n}\n\nexport function getYearsString(years?: string[]): string {\n  return 'Years: ' + (years?.join(', ') ?? 'All');\n}\n","import { DataSourceSettings } from '@grafana/data';\nimport { config } from '@grafana/runtime';\n\nimport { AzureCloud, AzureCredentials, ConcealedSecret } from './AzureCredentials';\n\nconst concealed: ConcealedSecret = Symbol('Concealed client secret');\n\nfunction getDefaultAzureCloud(): string {\n  return config.azure.cloud || AzureCloud.Public;\n}\n\nfunction getSecret(options: DataSourceSettings<any, any>): undefined | string | ConcealedSecret {\n  if (options.secureJsonFields.azureClientSecret) {\n    // The secret is concealed on server\n    return concealed;\n  } else {\n    const secret = options.secureJsonData?.azureClientSecret;\n    return typeof secret === 'string' && secret.length > 0 ? secret : undefined;\n  }\n}\n\nexport function hasCredentials(options: DataSourceSettings<any, any>): boolean {\n  return !!options.jsonData.azureCredentials;\n}\n\nexport function getDefaultCredentials(): AzureCredentials {\n  if (config.azure.managedIdentityEnabled) {\n    return { authType: 'msi' };\n  } else {\n    return { authType: 'clientsecret', azureCloud: getDefaultAzureCloud() };\n  }\n}\n\nexport function getCredentials(options: DataSourceSettings<any, any>): AzureCredentials {\n  const credentials = options.jsonData.azureCredentials as AzureCredentials | undefined;\n\n  // If no credentials saved, then return empty credentials\n  // of type based on whether the managed identity enabled\n  if (!credentials) {\n    return getDefaultCredentials();\n  }\n\n  switch (credentials.authType) {\n    case 'msi':\n      if (config.azure.managedIdentityEnabled) {\n        return {\n          authType: 'msi',\n        };\n      } else {\n        // If authentication type is managed identity but managed identities were disabled in Grafana config,\n        // then we should fallback to an empty app registration (client secret) configuration\n        return {\n          authType: 'clientsecret',\n          azureCloud: getDefaultAzureCloud(),\n        };\n      }\n    case 'clientsecret':\n      return {\n        authType: 'clientsecret',\n        azureCloud: credentials.azureCloud || getDefaultAzureCloud(),\n        tenantId: credentials.tenantId,\n        clientId: credentials.clientId,\n        clientSecret: getSecret(options),\n      };\n  }\n}\n\nexport function updateCredentials(\n  options: DataSourceSettings<any, any>,\n  credentials: AzureCredentials\n): DataSourceSettings<any, any> {\n  switch (credentials.authType) {\n    case 'msi':\n      if (!config.azure.managedIdentityEnabled) {\n        throw new Error('Managed Identity authentication is not enabled in Grafana config.');\n      }\n\n      options = {\n        ...options,\n        jsonData: {\n          ...options.jsonData,\n          azureCredentials: {\n            authType: 'msi',\n          },\n        },\n      };\n\n      return options;\n\n    case 'clientsecret':\n      options = {\n        ...options,\n        jsonData: {\n          ...options.jsonData,\n          azureCredentials: {\n            authType: 'clientsecret',\n            azureCloud: credentials.azureCloud || getDefaultAzureCloud(),\n            tenantId: credentials.tenantId,\n            clientId: credentials.clientId,\n          },\n        },\n        secureJsonData: {\n          ...options.secureJsonData,\n          azureClientSecret:\n            typeof credentials.clientSecret === 'string' && credentials.clientSecret.length > 0\n              ? credentials.clientSecret\n              : undefined,\n        },\n        secureJsonFields: {\n          ...options.secureJsonFields,\n          azureClientSecret: typeof credentials.clientSecret === 'symbol',\n        },\n      };\n\n      return options;\n  }\n}\n\nexport function setDefaultCredentials(options: DataSourceSettings<any, any>): Partial<DataSourceSettings<any, any>> {\n  return {\n    jsonData: {\n      ...options.jsonData,\n      azureCredentials: getDefaultCredentials(),\n    },\n  };\n}\n\nexport function resetCredentials(options: DataSourceSettings<any, any>): Partial<DataSourceSettings<any, any>> {\n  return {\n    jsonData: {\n      ...options.jsonData,\n      azureAuth: undefined,\n      azureCredentials: undefined,\n      azureEndpointResourceId: undefined,\n    },\n  };\n}\n","import React, {ChangeEvent, FunctionComponent, useEffect, useReducer, useState} from 'react';\n\nimport {SelectableValue} from '@grafana/data';\nimport {Input, InlineFormLabel, Button, Select} from '@grafana/ui';\n\nimport {AzureAuthType, AzureCredentials, isCredentialsComplete} from './AzureCredentials';\n\nexport interface Props {\n  managedIdentityEnabled: boolean;\n  credentials: AzureCredentials;\n  azureCloudOptions?: SelectableValue[];\n  onCredentialsChange: (updatedCredentials: AzureCredentials) => void;\n  getSubscriptions?: () => Promise<SelectableValue[]>;\n}\n\nconst authTypeOptions: Array<SelectableValue<AzureAuthType>> = [\n  {\n    value: 'msi',\n    label: 'Managed Identity',\n  },\n  {\n    value: 'clientsecret',\n    label: 'App Registration',\n  },\n];\n\nexport const AzureCredentialsForm: FunctionComponent<Props> = (props: Props) => {\n  const { credentials, azureCloudOptions, onCredentialsChange, getSubscriptions } = props;\n  const hasRequiredFields = isCredentialsComplete(credentials);\n\n  const [subscriptions, setSubscriptions] = useState<Array<SelectableValue<string>>>([]);\n  const [loadSubscriptionsClicked, onLoadSubscriptions] = useReducer((val) => val + 1, 0);\n  useEffect(() => {\n    if (!getSubscriptions || !hasRequiredFields) {\n      updateSubscriptions([]);\n      return;\n    }\n    let canceled = false;\n    getSubscriptions().then((result) => {\n      if (!canceled) {\n        updateSubscriptions(result, loadSubscriptionsClicked);\n      }\n    });\n    return () => {\n      canceled = true;\n    };\n    // This effect is intended to be called only once initially and on Load Subscriptions click\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loadSubscriptionsClicked]);\n\n  const updateSubscriptions = (received: Array<SelectableValue<string>>, autoSelect = false) => {\n    setSubscriptions(received);\n    if (getSubscriptions) {\n      if (autoSelect && !credentials.defaultSubscriptionId && received.length > 0) {\n        // Selecting the default subscription if subscriptions received but no default subscription selected\n        onSubscriptionChange(received[0]);\n      } else if (credentials.defaultSubscriptionId) {\n        const found = received.find((opt) => opt.value === credentials.defaultSubscriptionId);\n        if (!found) {\n          // Unselecting the default subscription if it isn't found among the received subscriptions\n          onSubscriptionChange(undefined);\n        }\n      }\n    }\n  };\n\n  const onAuthTypeChange = (selected: SelectableValue<AzureAuthType>) => {\n    if (onCredentialsChange) {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        authType: selected.value || 'msi',\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onAzureCloudChange = (selected: SelectableValue<string>) => {\n    if (onCredentialsChange && credentials.authType === 'clientsecret') {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        azureCloud: selected.value,\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onTenantIdChange = (event: ChangeEvent<HTMLInputElement>) => {\n    if (onCredentialsChange && credentials.authType === 'clientsecret') {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        tenantId: event.target.value,\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onClientIdChange = (event: ChangeEvent<HTMLInputElement>) => {\n    if (onCredentialsChange && credentials.authType === 'clientsecret') {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        clientId: event.target.value,\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onClientSecretChange = (event: ChangeEvent<HTMLInputElement>) => {\n    if (onCredentialsChange && credentials.authType === 'clientsecret') {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        clientSecret: event.target.value,\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onClientSecretReset = () => {\n    if (onCredentialsChange && credentials.authType === 'clientsecret') {\n      setSubscriptions([]);\n      const updated: AzureCredentials = {\n        ...credentials,\n        clientSecret: '',\n        defaultSubscriptionId: undefined,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  const onSubscriptionChange = (selected: SelectableValue<string> | undefined) => {\n    if (onCredentialsChange) {\n      const updated: AzureCredentials = {\n        ...credentials,\n        defaultSubscriptionId: selected?.value,\n      };\n      onCredentialsChange(updated);\n    }\n  };\n\n  return (\n    <div className=\"gf-form-group\">\n      {props.managedIdentityEnabled && (\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form\">\n            <InlineFormLabel className=\"width-12\" tooltip=\"Choose the type of authentication to Azure services\">\n              Authentication\n            </InlineFormLabel>\n            <Select\n              className=\"width-15\"\n              value={authTypeOptions.find((opt) => opt.value === credentials.authType)}\n              options={authTypeOptions}\n              onChange={onAuthTypeChange}\n            />\n          </div>\n        </div>\n      )}\n      {credentials.authType === 'clientsecret' && (\n        <>\n          {azureCloudOptions && (\n            <div className=\"gf-form-inline\">\n              <div className=\"gf-form\">\n                <InlineFormLabel className=\"width-12\" tooltip=\"Choose an Azure Cloud\">\n                  Azure Cloud\n                </InlineFormLabel>\n                <Select\n                  className=\"width-15\"\n                  value={azureCloudOptions.find((opt) => opt.value === credentials.azureCloud)}\n                  options={azureCloudOptions}\n                  onChange={onAzureCloudChange}\n                />\n              </div>\n            </div>\n          )}\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <InlineFormLabel className=\"width-12\">Directory (tenant) ID</InlineFormLabel>\n              <div className=\"width-15\">\n                <Input\n                  className=\"width-30\"\n                  placeholder=\"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\"\n                  value={credentials.tenantId || ''}\n                  onChange={onTenantIdChange}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <InlineFormLabel className=\"width-12\">Application (client) ID</InlineFormLabel>\n              <div className=\"width-15\">\n                <Input\n                  className=\"width-30\"\n                  placeholder=\"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\"\n                  value={credentials.clientId || ''}\n                  onChange={onClientIdChange}\n                />\n              </div>\n            </div>\n          </div>\n          {typeof credentials.clientSecret === 'symbol' ? (\n            <div className=\"gf-form-inline\">\n              <div className=\"gf-form\">\n                <InlineFormLabel htmlFor=\"azure-client-secret\" className=\"width-12\">\n                  Client Secret\n                </InlineFormLabel>\n                <Input id=\"azure-client-secret\" className=\"width-25\" placeholder=\"configured\" disabled={true} />\n              </div>\n              <div className=\"gf-form\">\n                <div className=\"max-width-30 gf-form-inline\">\n                  <Button variant=\"secondary\" type=\"button\" onClick={onClientSecretReset}>\n                    reset\n                  </Button>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"gf-form-inline\">\n              <div className=\"gf-form\">\n                <InlineFormLabel className=\"width-12\">Client Secret</InlineFormLabel>\n                <div className=\"width-15\">\n                  <Input\n                    className=\"width-30\"\n                    placeholder=\"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\"\n                    value={credentials.clientSecret || ''}\n                    onChange={onClientSecretChange}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      )}\n      {getSubscriptions && (\n        <>\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <InlineFormLabel className=\"width-12\">Default Subscription</InlineFormLabel>\n              <div className=\"width-25\">\n                <Select\n                  value={\n                    credentials.defaultSubscriptionId\n                      ? subscriptions.find((opt) => opt.value === credentials.defaultSubscriptionId)\n                      : undefined\n                  }\n                  options={subscriptions}\n                  onChange={onSubscriptionChange}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <div className=\"max-width-30 gf-form-inline\">\n                <Button\n                  variant=\"secondary\"\n                  size=\"sm\"\n                  type=\"button\"\n                  onClick={onLoadSubscriptions}\n                  disabled={!hasRequiredFields}\n                >\n                  Load Subscriptions\n                </Button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default AzureCredentialsForm;\n","import React, { FunctionComponent, FormEvent, useMemo, useState } from 'react';\n\nimport { config } from '@grafana/runtime';\nimport { InlineField, InlineFieldRow, InlineSwitch, Input } from '@grafana/ui';\nimport { HttpSettingsBaseProps } from '@grafana/ui/components/DataSourceSettings/types';\n\nimport { KnownAzureClouds, AzureCredentials } from './AzureCredentials';\nimport { getCredentials, updateCredentials } from './AzureCredentialsConfig';\nimport { AzureCredentialsForm } from './AzureCredentialsForm';\n\nexport const AzureAuthSettings: FunctionComponent<HttpSettingsBaseProps> = (props: HttpSettingsBaseProps) => {\n  const { dataSourceConfig, onChange } = props;\n\n  const [overrideAudienceAllowed] = useState<boolean>(\n    config.featureToggles.prometheusAzureOverrideAudience || !!dataSourceConfig.jsonData.azureEndpointResourceId\n  );\n  const [overrideAudienceChecked, setOverrideAudienceChecked] = useState<boolean>(\n    !!dataSourceConfig.jsonData.azureEndpointResourceId\n  );\n\n  const credentials = useMemo(() => getCredentials(dataSourceConfig), [dataSourceConfig]);\n\n  const onCredentialsChange = (credentials: AzureCredentials): void => {\n    onChange(updateCredentials(dataSourceConfig, credentials));\n  };\n\n  const onOverrideAudienceChange = (ev: FormEvent<HTMLInputElement>): void => {\n    setOverrideAudienceChecked(ev.currentTarget.checked);\n    if (!ev.currentTarget.checked) {\n      onChange({\n        ...dataSourceConfig,\n        jsonData: { ...dataSourceConfig.jsonData, azureEndpointResourceId: undefined },\n      });\n    }\n  };\n\n  const onResourceIdChange = (ev: FormEvent<HTMLInputElement>): void => {\n    if (overrideAudienceChecked) {\n      onChange({\n        ...dataSourceConfig,\n        jsonData: { ...dataSourceConfig.jsonData, azureEndpointResourceId: ev.currentTarget.value },\n      });\n    }\n  };\n\n  return (\n    <>\n      <h6>Azure Authentication</h6>\n      <AzureCredentialsForm\n        managedIdentityEnabled={config.azure.managedIdentityEnabled}\n        credentials={credentials}\n        azureCloudOptions={KnownAzureClouds}\n        onCredentialsChange={onCredentialsChange}\n      />\n      {overrideAudienceAllowed && (\n        <>\n          <h6>Azure Configuration</h6>\n          <div className=\"gf-form-group\">\n            <InlineFieldRow>\n              <InlineField labelWidth={26} label=\"Override AAD audience\">\n                <InlineSwitch value={overrideAudienceChecked} onChange={onOverrideAudienceChange} />\n              </InlineField>\n            </InlineFieldRow>\n            {overrideAudienceChecked && (\n              <InlineFieldRow>\n                <InlineField labelWidth={26} label=\"Resource ID\">\n                  <Input\n                    className=\"width-30\"\n                    value={dataSourceConfig.jsonData.azureEndpointResourceId || ''}\n                    onChange={onResourceIdChange}\n                  />\n                </InlineField>\n              </InlineFieldRow>\n            )}\n          </div>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default AzureAuthSettings;\n","import React, { SyntheticEvent } from 'react';\n\nimport {\n  DataSourcePluginOptionsEditorProps,\n  onUpdateDatasourceJsonDataOptionChecked,\n  SelectableValue,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport {\n  InlineField,\n  InlineSwitch,\n  EventsWithValidation,\n  InlineFormLabel,\n  LegacyForms,\n  regexValidation,\n} from '@grafana/ui';\n\nimport { PromOptions } from '../types';\n\nconst { Select, Input, FormField } = LegacyForms;\n\nconst httpOptions = [\n  { value: 'POST', label: 'POST' },\n  { value: 'GET', label: 'GET' },\n];\n\ntype Props = Pick<DataSourcePluginOptionsEditorProps<PromOptions>, 'options' | 'onOptionsChange'>;\n\nexport const PromSettings = (props: Props) => {\n  const { options, onOptionsChange } = props;\n\n  // We are explicitly adding httpMethod so it is correctly displayed in dropdown. This way, it is more predictable for users.\n\n  if (!options.jsonData.httpMethod) {\n    options.jsonData.httpMethod = 'POST';\n  }\n\n  return (\n    <>\n      <div className=\"gf-form-group\">\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form\">\n            <FormField\n              label=\"Scrape interval\"\n              labelWidth={13}\n              inputEl={\n                <Input\n                  className=\"width-6\"\n                  value={options.jsonData.timeInterval}\n                  spellCheck={false}\n                  placeholder=\"15s\"\n                  onChange={onChangeHandler('timeInterval', options, onOptionsChange)}\n                  validationEvents={promSettingsValidationEvents}\n                />\n              }\n              tooltip=\"Set this to the typical scrape and evaluation interval configured in Prometheus. Defaults to 15s.\"\n            />\n          </div>\n        </div>\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form\">\n            <FormField\n              label=\"Query timeout\"\n              labelWidth={13}\n              inputEl={\n                <Input\n                  className=\"width-6\"\n                  value={options.jsonData.queryTimeout}\n                  onChange={onChangeHandler('queryTimeout', options, onOptionsChange)}\n                  spellCheck={false}\n                  placeholder=\"60s\"\n                  validationEvents={promSettingsValidationEvents}\n                />\n              }\n              tooltip=\"Set the Prometheus query timeout.\"\n            />\n          </div>\n        </div>\n        <div className=\"gf-form\">\n          <InlineFormLabel\n            width={13}\n            tooltip=\"You can use either POST or GET HTTP method to query your Prometheus data source. POST is the recommended method as it allows bigger queries. Change this to GET if you have a Prometheus version older than 2.1 or if POST requests are restricted in your network.\"\n          >\n            HTTP Method\n          </InlineFormLabel>\n          <Select\n            aria-label=\"Select HTTP method\"\n            options={httpOptions}\n            value={httpOptions.find((o) => o.value === options.jsonData.httpMethod)}\n            onChange={onChangeHandler('httpMethod', options, onOptionsChange)}\n            width={7}\n          />\n        </div>\n      </div>\n      <h3 className=\"page-heading\">Misc</h3>\n      <div className=\"gf-form-group\">\n        <div className=\"gf-form\">\n          <InlineField\n            labelWidth={28}\n            label=\"Disable metrics lookup\"\n            tooltip=\"Checking this option will disable the metrics chooser and metric/label support in the query field's autocomplete. This helps if you have performance issues with bigger Prometheus instances.\"\n          >\n            <InlineSwitch\n              value={options.jsonData.disableMetricsLookup ?? false}\n              onChange={onUpdateDatasourceJsonDataOptionChecked(props, 'disableMetricsLookup')}\n            />\n          </InlineField>\n        </div>\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form max-width-30\">\n            <FormField\n              label=\"Custom query parameters\"\n              labelWidth={14}\n              tooltip=\"Add Custom parameters to all Prometheus or Thanos queries.\"\n              inputEl={\n                <Input\n                  className=\"width-25\"\n                  value={options.jsonData.customQueryParameters}\n                  onChange={onChangeHandler('customQueryParameters', options, onOptionsChange)}\n                  spellCheck={false}\n                  placeholder=\"Example: max_source_resolution=5m&timeout=10\"\n                />\n              }\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport const promSettingsValidationEvents = {\n  [EventsWithValidation.onBlur]: [\n    regexValidation(\n      /^$|^\\d+(ms|[Mwdhmsy])$/,\n      'Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s'\n    ),\n  ],\n};\n\nexport const getValueFromEventItem = (eventItem: SyntheticEvent<HTMLInputElement> | SelectableValue<string>) => {\n  if (!eventItem) {\n    return '';\n  }\n\n  if (eventItem.hasOwnProperty('currentTarget')) {\n    return eventItem.currentTarget.value;\n  }\n\n  return (eventItem as SelectableValue<string>).value;\n};\n\nconst onChangeHandler =\n  (key: keyof PromOptions, options: Props['options'], onOptionsChange: Props['onOptionsChange']) =>\n  (eventItem: SyntheticEvent<HTMLInputElement> | SelectableValue<string>) => {\n    onOptionsChange({\n      ...options,\n      jsonData: {\n        ...options.jsonData,\n        [key]: getValueFromEventItem(eventItem),\n      },\n    });\n  };\n","import React, { useRef } from 'react';\n\nimport { SIGV4ConnectionConfig } from '@grafana/aws-sdk';\nimport { DataSourcePluginOptionsEditorProps, DataSourceSettings } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport {AlertingSettings, DataSourceHttpSettings, Alert, Icon} from '@grafana/ui';\n\nimport { getAllAlertmanagerDataSources } from '../../app/features/alerting/unified/utils/alertmanager';\nimport { PromOptions } from '../types';\n\nimport { AzureAuthSettings } from './AzureAuthSettings';\nimport { hasCredentials, setDefaultCredentials, resetCredentials } from './AzureCredentialsConfig';\nimport { PromSettings } from './PromSettings';\n\nexport type Props = DataSourcePluginOptionsEditorProps<PromOptions>;\nexport const ConfigEditor = (props: Props) => {\n  const { options, onOptionsChange } = props;\n  const alertmanagers = getAllAlertmanagerDataSources();\n  // use ref so this is evaluated only first time it renders and the select does not disappear suddenly.\n  const showAccessOptions = useRef(props.options.access === 'direct');\n\n  const azureAuthSettings = {\n    azureAuthSupported: config.azureAuthEnabled,\n    getAzureAuthEnabled: (config: DataSourceSettings<any, any>): boolean => hasCredentials(config),\n    setAzureAuthEnabled: (config: DataSourceSettings<any, any>, enabled: boolean) =>\n      enabled ? setDefaultCredentials(config) : resetCredentials(config),\n    azureSettingsUI: AzureAuthSettings,\n  };\n\n  return (\n    <>\n      {options.access === 'direct' && (\n        <Alert title=\"Error\" severity=\"error\">\n          Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.\n        </Alert>\n      )}\n\n      <div className=\"gf-form-group\">\n        <h3 className=\"page-heading\">Tips on how to setup</h3>\n\n       <div className=\"submenu-controls\">\n         <div className=\"gf-form\">\n           <a\n             className=\"gf-form-label gf-form-label--dashlink\"\n             href=\"https://docs.victoriametrics.com/Cluster-VictoriaMetrics.html#url-format\"\n             target=\"_blank\"\n             rel=\"noreferrer\">\n             <Icon name=\"file-alt\"/>\n             <span style={{marginLeft: \"4px\"}}>Cluster VM</span>\n           </a>\n         </div>\n         <div className=\"gf-form\">\n           <a\n             className=\"gf-form-label gf-form-label--dashlink\"\n             href=\"https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#grafana-setup\"\n             target=\"_blank\"\n             rel=\"noreferrer\">\n             <Icon name=\"file-alt\"/>\n             <span style={{marginLeft: \"4px\"}}>Grafana setup</span>\n           </a>\n         </div>\n       </div>\n      </div>\n\n        <DataSourceHttpSettings\n          defaultUrl=\"http://localhost:8428\"\n          dataSourceConfig={options}\n          showAccessOptions={showAccessOptions.current}\n          onChange={onOptionsChange}\n          sigV4AuthToggleEnabled={config.sigV4AuthEnabled}\n          azureAuthSettings={azureAuthSettings}\n          renderSigV4Editor={<SIGV4ConnectionConfig {...props}></SIGV4ConnectionConfig>}\n        />\n\n      <AlertingSettings<PromOptions>\n        alertmanagerDataSources={alertmanagers}\n        options={options}\n        onOptionsChange={onOptionsChange}\n      />\n\n      <PromSettings options={options} onOptionsChange={onOptionsChange} />\n    </>\n  );\n};\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { AnnotationQuery, BusEventBase, BusEventWithPayload } from '@grafana/data';\nimport { IconName } from '@grafana/ui';\n\n\n/**\n * Event Payloads\n */\n\nexport interface ShowDashSearchPayload {\n  query?: string;\n}\n\nexport interface LocationChangePayload {\n  href: string;\n}\n\nexport interface ShowModalPayload {\n  model?: any;\n  modalClass?: string;\n  src?: string;\n  templateHtml?: string;\n  backdrop?: any;\n  scope?: any;\n}\n\nexport interface ShowModalReactPayload {\n  component: React.ComponentType<any>;\n  props?: any;\n}\n\nexport interface ShowConfirmModalPayload {\n  title?: string;\n  text?: string;\n  text2?: string;\n  text2htmlBind?: boolean;\n  confirmText?: string;\n  altActionText?: string;\n  yesText?: string;\n  noText?: string;\n  icon?: IconName;\n\n  onConfirm?: () => void;\n  onAltAction?: () => void;\n}\n\nexport interface DataSourceResponse<T> {\n  data: T;\n  readonly status: number;\n  readonly statusText: string;\n  readonly ok: boolean;\n  readonly headers: Headers;\n  readonly redirected: boolean;\n  readonly type: ResponseType;\n  readonly url: string;\n  readonly config: any;\n}\n\nexport interface ToggleKioskModePayload {\n  exit?: boolean;\n}\n\nexport interface GraphClickedPayload {\n  pos: any;\n  panel: any;\n  item: any;\n}\n\nexport interface ThresholdChangedPayload {\n  threshold: any;\n  handleIndex: any;\n}\n\nexport interface DashScrollPayload {\n  restore?: boolean;\n  animate?: boolean;\n  pos?: number;\n}\n\nexport interface PanelChangeViewPayload {}\n\ninterface ZoomOutEventPayload {\n  scale: number;\n  updateUrl?: boolean;\n}\n\nexport class ZoomOutEvent extends BusEventWithPayload<ZoomOutEventPayload> {\n  static type = 'zoom-out';\n}\n\nexport enum ShiftTimeEventDirection {\n  Left = -1,\n  Right = 1,\n}\n\ninterface ShiftTimeEventPayload {\n  direction: ShiftTimeEventDirection;\n  updateUrl?: boolean;\n}\n\nexport class ShiftTimeEvent extends BusEventWithPayload<ShiftTimeEventPayload> {\n  static type = 'shift-time';\n}\n\nexport class AbsoluteTimeEvent extends BusEventBase {\n  static type = 'absolute-time';\n}\n\nexport class RemovePanelEvent extends BusEventWithPayload<number> {\n  static type = 'remove-panel';\n}\n\n/**\n * @deprecated use ShowModalReactEvent instead that has this capability built in\n */\nexport class ShowModalEvent extends BusEventWithPayload<ShowModalPayload> {\n  static type = 'show-modal';\n}\n\nexport class ShowConfirmModalEvent extends BusEventWithPayload<ShowConfirmModalPayload> {\n  static type = 'show-confirm-modal';\n}\n\nexport class ShowModalReactEvent extends BusEventWithPayload<ShowModalReactPayload> {\n  static type = 'show-react-modal';\n}\n\n/**\n * @deprecated use ShowModalReactEvent instead that has this capability built in\n */\nexport class HideModalEvent extends BusEventBase {\n  static type = 'hide-modal';\n}\n\nexport class DashboardSavedEvent extends BusEventBase {\n  static type = 'dashboard-saved';\n}\n\nexport class AnnotationQueryStarted extends BusEventWithPayload<AnnotationQuery> {\n  static type = 'annotation-query-started';\n}\n\nexport class AnnotationQueryFinished extends BusEventWithPayload<AnnotationQuery> {\n  static type = 'annotation-query-finished';\n}\n\nexport class PanelEditEnteredEvent extends BusEventWithPayload<number> {\n  static type = 'panel-edit-started';\n}\n\nexport class PanelEditExitedEvent extends BusEventWithPayload<number> {\n  static type = 'panel-edit-finished';\n}\n","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { operate } from '../util/lift';\nexport function catchError(selector) {\n    return operate(function (source, subscriber) {\n        var innerSub = null;\n        var syncUnsub = false;\n        var handledResult;\n        innerSub = source.subscribe(createOperatorSubscriber(subscriber, undefined, undefined, function (err) {\n            handledResult = innerFrom(selector(err, catchError(selector)(source)));\n            if (innerSub) {\n                innerSub.unsubscribe();\n                innerSub = null;\n                handledResult.subscribe(subscriber);\n            }\n            else {\n                syncUnsub = true;\n            }\n        }));\n        if (syncUnsub) {\n            innerSub.unsubscribe();\n            innerSub = null;\n            handledResult.subscribe(subscriber);\n        }\n    });\n}\n//# sourceMappingURL=catchError.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","import React from 'react';\n\nimport { AnnotationQuery } from '@grafana/data';\nimport { AutoSizeInput, Input } from '@grafana/ui';\n\nimport { PromQueryCodeEditor } from '../querybuilder/components/PromQueryCodeEditor';\nimport { PromQuery } from '../types';\n\nimport { EditorField, EditorRow, EditorRows, EditorSwitch, Space } from './QueryEditor';\nimport { PromQueryEditorProps } from './types';\n\ntype Props = PromQueryEditorProps & {\n  annotation?: AnnotationQuery<PromQuery>;\n  onAnnotationChange?: (annotation: AnnotationQuery<PromQuery>) => void;\n};\n\nexport function AnnotationQueryEditor(props: Props) {\n  // This is because of problematic typing. See AnnotationQueryEditorProps in grafana-data/annotations.ts.\n  const annotation = props.annotation!;\n  const onAnnotationChange = props.onAnnotationChange!;\n  const query = { expr: annotation.expr, refId: annotation.name, interval: annotation.step };\n\n  return (\n    <>\n      <EditorRows>\n        <PromQueryCodeEditor\n          {...props}\n          query={query}\n          showExplain={false}\n          onChange={(query) => {\n            onAnnotationChange({\n              ...annotation,\n              expr: query.expr,\n            });\n          }}\n        />\n        <EditorRow>\n          <EditorField\n            label=\"Min step\"\n            tooltip={\n              <>\n                An additional lower limit for the step parameter of the Prometheus query and for the{' '}\n                <code>$__interval</code> and <code>$__rate_interval</code> variables.\n              </>\n            }\n          >\n            <AutoSizeInput\n              type=\"text\"\n              aria-label=\"Set lower limit for the step parameter\"\n              placeholder={'auto'}\n              minWidth={10}\n              onCommitChange={(ev) => {\n                onAnnotationChange({\n                  ...annotation,\n                  step: ev.currentTarget.value,\n                });\n              }}\n              defaultValue={query.interval}\n            />\n          </EditorField>\n        </EditorRow>\n      </EditorRows>\n      <Space v={0.5} />\n      <EditorRow>\n        <EditorField\n          label=\"Title\"\n          tooltip={\n            'Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance.'\n          }\n        >\n          <Input\n            type=\"text\"\n            placeholder=\"{{alertname}}\"\n            value={annotation.titleFormat}\n            onChange={(event) => {\n              onAnnotationChange({\n                ...annotation,\n                titleFormat: event.currentTarget.value,\n              });\n            }}\n          />\n        </EditorField>\n        <EditorField label=\"Tags\">\n          <Input\n            type=\"text\"\n            placeholder=\"label1,label2\"\n            value={annotation.tagKeys}\n            onChange={(event) => {\n              onAnnotationChange({\n                ...annotation,\n                tagKeys: event.currentTarget.value,\n              });\n            }}\n          />\n        </EditorField>\n        <EditorField\n          label=\"Text\"\n          tooltip={\n            'Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance.'\n          }\n        >\n          <Input\n            type=\"text\"\n            placeholder=\"{{instance}}\"\n            value={annotation.textFormat}\n            onChange={(event) => {\n              onAnnotationChange({\n                ...annotation,\n                textFormat: event.currentTarget.value,\n              });\n            }}\n          />\n        </EditorField>\n        <EditorField\n          label=\"Series value as timestamp\"\n          tooltip={\n            'The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000.'\n          }\n        >\n          <EditorSwitch\n            value={annotation.useValueForTime}\n            onChange={(event) => {\n              onAnnotationChange({\n                ...annotation,\n                useValueForTime: event.currentTarget.value,\n              });\n            }}\n          />\n        </EditorField>\n      </EditorRow>\n    </>\n  );\n}\n","import { Labels } from '@grafana/data';\n\n/** replace labels in a string.  Used for loki+prometheus legend formats */\nexport function renderLegendFormat(aliasPattern: string, aliasData: Labels): string {\n  const aliasRegex = /\\{\\{\\s*(.+?)\\s*\\}\\}/g;\n  return aliasPattern.replace(aliasRegex, (_, g1) => (aliasData[g1] ? aliasData[g1] : g1));\n}\n","import { TimeRange, toUtc, AbsoluteTimeRange } from '@grafana/data';\n\nexport const getShiftedTimeRange = (direction: number, origRange: TimeRange): AbsoluteTimeRange => {\n  const range = {\n    from: toUtc(origRange.from),\n    to: toUtc(origRange.to),\n  };\n\n  const timespan = (range.to.valueOf() - range.from.valueOf()) / 2;\n  let to: number, from: number;\n\n  if (direction === -1) {\n    to = range.to.valueOf() - timespan;\n    from = range.from.valueOf() - timespan;\n  } else if (direction === 1) {\n    to = range.to.valueOf() + timespan;\n    from = range.from.valueOf() + timespan;\n    if (to > Date.now() && range.to.valueOf() < Date.now()) {\n      to = Date.now();\n      from = range.from.valueOf();\n    }\n  } else {\n    to = range.to.valueOf();\n    from = range.from.valueOf();\n  }\n\n  return { from, to };\n};\n\nexport const getZoomedTimeRange = (range: TimeRange, factor: number): AbsoluteTimeRange => {\n  const timespan = range.to.valueOf() - range.from.valueOf();\n  const center = range.to.valueOf() - timespan / 2;\n  // If the timepsan is 0, zooming out would do nothing, so we force a zoom out to 30s\n  const newTimespan = timespan === 0 ? 30000 : timespan * factor;\n\n  const to = center + newTimespan / 2;\n  const from = center - newTimespan / 2;\n\n  return { from, to };\n};\n","import { EventBusSrv, EventBusExtended } from '@grafana/data';\n\nexport const appEvents: EventBusExtended = new EventBusSrv();\n\nexport default appEvents;\n","import { PluginState } from '@grafana/data';\nimport { config, GrafanaBootConfig } from '@grafana/runtime';\n// Legacy binding paths\nexport { config, GrafanaBootConfig as Settings };\n\nlet grafanaConfig: GrafanaBootConfig = config;\n\nexport default grafanaConfig;\n\nexport const getConfig = () => {\n  return grafanaConfig;\n};\n\nexport const updateConfig = (update: Partial<GrafanaBootConfig>) => {\n  grafanaConfig = {\n    ...grafanaConfig,\n    ...update,\n  };\n};\n\n// The `enable_alpha` flag is not exposed directly, this is equivalent\nexport const hasAlphaPanels = Boolean(config.panels?.debug?.state === PluginState.alpha);\n","/**\n * UserPermission is a map storing permissions in a form of\n * {\n *   action: true;\n * }\n */\nexport type UserPermission = Record<string, boolean>;\n\n// Permission actions\nexport enum AccessControlAction {\n  UsersRead = 'users:read',\n  UsersWrite = 'users:write',\n  UsersAuthTokenList = 'users.authtoken:read',\n  UsersAuthTokenUpdate = 'users.authtoken:write',\n  UsersPasswordUpdate = 'users.password:write',\n  UsersDelete = 'users:delete',\n  UsersCreate = 'users:create',\n  UsersEnable = 'users:enable',\n  UsersDisable = 'users:disable',\n  UsersPermissionsUpdate = 'users.permissions:write',\n  UsersLogout = 'users:logout',\n  UsersQuotasList = 'users.quotas:read',\n  UsersQuotasUpdate = 'users.quotas:write',\n\n  ServiceAccountsRead = 'serviceaccounts:read',\n  ServiceAccountsCreate = 'serviceaccounts:create',\n  ServiceAccountsWrite = 'serviceaccounts:write',\n  ServiceAccountsDelete = 'serviceaccounts:delete',\n  ServiceAccountsPermissionsRead = 'serviceaccounts.permissions:read',\n  ServiceAccountsPermissionsWrite = 'serviceaccounts.permissions:write',\n\n  OrgsRead = 'orgs:read',\n  OrgsPreferencesRead = 'orgs.preferences:read',\n  OrgsWrite = 'orgs:write',\n  OrgsPreferencesWrite = 'orgs.preferences:write',\n  OrgsCreate = 'orgs:create',\n  OrgsDelete = 'orgs:delete',\n  OrgUsersRead = 'org.users:read',\n  OrgUsersAdd = 'org.users:add',\n  OrgUsersRemove = 'org.users:remove',\n  OrgUsersWrite = 'org.users:write',\n\n  LDAPUsersRead = 'ldap.user:read',\n  LDAPUsersSync = 'ldap.user:sync',\n  LDAPStatusRead = 'ldap.status:read',\n\n  DataSourcesExplore = 'datasources:explore',\n  DataSourcesRead = 'datasources:read',\n  DataSourcesCreate = 'datasources:create',\n  DataSourcesWrite = 'datasources:write',\n  DataSourcesDelete = 'datasources:delete',\n  DataSourcesPermissionsRead = 'datasources.permissions:read',\n  DataSourcesCachingRead = 'datasources.caching:read',\n  DataSourcesInsightsRead = 'datasources.insights:read',\n\n  ActionServerStatsRead = 'server.stats:read',\n\n  ActionTeamsCreate = 'teams:create',\n  ActionTeamsDelete = 'teams:delete',\n  ActionTeamsRead = 'teams:read',\n  ActionTeamsWrite = 'teams:write',\n  ActionTeamsPermissionsRead = 'teams.permissions:read',\n  ActionTeamsPermissionsWrite = 'teams.permissions:write',\n\n  ActionRolesList = 'roles:read',\n  ActionTeamsRolesList = 'teams.roles:read',\n  ActionTeamsRolesAdd = 'teams.roles:add',\n  ActionTeamsRolesRemove = 'teams.roles:remove',\n  ActionUserRolesList = 'users.roles:read',\n  ActionUserRolesAdd = 'users.roles:add',\n  ActionUserRolesRemove = 'users.roles:remove',\n\n  DashboardsRead = 'dashboards:read',\n  DashboardsWrite = 'dashboards:write',\n  DashboardsDelete = 'dashboards:delete',\n  DashboardsCreate = 'dashboards:create',\n  DashboardsPermissionsRead = 'dashboards.permissions:read',\n  DashboardsPermissionsWrite = 'dashboards.permissions:write',\n  DashboardsPublicWrite = 'dashboards.public:write',\n\n  FoldersRead = 'folders:read',\n  FoldersWrite = 'folders:write',\n  FoldersDelete = 'folders:delete',\n  FoldersCreate = 'folders:create',\n  FoldersPermissionsRead = 'folders.permissions:read',\n  FoldersPermissionsWrite = 'folders.permissions:write',\n\n  // Alerting rules\n  AlertingRuleCreate = 'alert.rules:create',\n  AlertingRuleRead = 'alert.rules:read',\n  AlertingRuleUpdate = 'alert.rules:write',\n  AlertingRuleDelete = 'alert.rules:delete',\n\n  // Alerting instances (+silences)\n  AlertingInstanceCreate = 'alert.instances:create',\n  AlertingInstanceUpdate = 'alert.instances:write',\n  AlertingInstanceRead = 'alert.instances:read',\n\n  // Alerting Notification policies\n  AlertingNotificationsRead = 'alert.notifications:read',\n  AlertingNotificationsWrite = 'alert.notifications:write',\n\n  // External alerting rule actions.\n  AlertingRuleExternalWrite = 'alert.rules.external:write',\n  AlertingRuleExternalRead = 'alert.rules.external:read',\n\n  // External alerting instances actions.\n  AlertingInstancesExternalWrite = 'alert.instances.external:write',\n  AlertingInstancesExternalRead = 'alert.instances.external:read',\n\n  // External alerting notifications actions.\n  AlertingNotificationsExternalWrite = 'alert.notifications.external:write',\n  AlertingNotificationsExternalRead = 'alert.notifications.external:read',\n\n  ActionAPIKeysRead = 'apikeys:read',\n  ActionAPIKeysCreate = 'apikeys:create',\n  ActionAPIKeysDelete = 'apikeys:delete',\n\n  PluginsInstall = 'plugins:install',\n  PluginsWrite = 'plugins:write',\n}\n\nexport interface Role {\n  uid: string;\n  name: string;\n  displayName: string;\n  description: string;\n  group: string;\n  global: boolean;\n  delegatable?: boolean;\n  version: number;\n  created: string;\n  updated: string;\n}\n","import { extend } from 'lodash';\n\nimport { OrgRole, rangeUtil, WithAccessControlMetadata } from '@grafana/data';\nimport { featureEnabled, getBackendSrv } from '@grafana/runtime';\n\nimport { AccessControlAction, UserPermission } from '../types/accessControl';\nimport { CurrentUserInternal } from '../types/config';\n\nimport config from './config';\n\nexport class User implements CurrentUserInternal {\n  isSignedIn: boolean;\n  id: number;\n  login: string;\n  email: string;\n  name: string;\n  externalUserId: string;\n  lightTheme: boolean;\n  orgCount: number;\n  orgId: number;\n  orgName: string;\n  orgRole: OrgRole | '';\n  isGrafanaAdmin: boolean;\n  gravatarUrl: string;\n  timezone: string;\n  weekStart: string;\n  locale: string;\n  helpFlags1: number;\n  hasEditPermissionInFolders: boolean;\n  permissions?: UserPermission;\n  fiscalYearStartMonth: number;\n\n  constructor() {\n    this.id = 0;\n    this.isGrafanaAdmin = false;\n    this.isSignedIn = false;\n    this.orgRole = '';\n    this.orgId = 0;\n    this.orgName = '';\n    this.login = '';\n    this.externalUserId = '';\n    this.orgCount = 0;\n    this.timezone = '';\n    this.fiscalYearStartMonth = 0;\n    this.helpFlags1 = 0;\n    this.lightTheme = false;\n    this.hasEditPermissionInFolders = false;\n    this.email = '';\n    this.name = '';\n    this.locale = '';\n    this.weekStart = '';\n    this.gravatarUrl = '';\n\n    if (config.bootData.user) {\n      extend(this, config.bootData.user);\n    }\n  }\n}\n\nexport class ContextSrv {\n  pinned: any;\n  version: any;\n  user: User;\n  isSignedIn: any;\n  isGrafanaAdmin: any;\n  isEditor: any;\n  sidemenuSmallBreakpoint = false;\n  hasEditPermissionInFolders: boolean;\n  minRefreshInterval: string;\n\n  constructor() {\n    if (!config.bootData) {\n      config.bootData = { user: {}, settings: {} } as any;\n    }\n\n    this.user = new User();\n    this.isSignedIn = this.user.isSignedIn;\n    this.isGrafanaAdmin = this.user.isGrafanaAdmin;\n    this.isEditor = this.hasRole('Editor') || this.hasRole('Admin');\n    this.hasEditPermissionInFolders = this.user.hasEditPermissionInFolders;\n    this.minRefreshInterval = config.minRefreshInterval;\n  }\n\n  async fetchUserPermissions() {\n    try {\n      if (this.accessControlEnabled()) {\n        this.user.permissions = await getBackendSrv().get('/api/access-control/user/permissions', {\n          reloadcache: true,\n        });\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  /**\n   * Indicate the user has been logged out\n   */\n  setLoggedOut() {\n    this.user.isSignedIn = false;\n    this.isSignedIn = false;\n  }\n\n  hasRole(role: string) {\n    if (role === 'ServerAdmin') {\n      return this.isGrafanaAdmin;\n    } else {\n      return this.user.orgRole === role;\n    }\n  }\n\n  accessControlEnabled(): boolean {\n    return config.rbacEnabled;\n  }\n\n  licensedAccessControlEnabled(): boolean {\n    return featureEnabled('accesscontrol') && config.rbacEnabled;\n  }\n\n  // Checks whether user has required permission\n  hasPermissionInMetadata(action: AccessControlAction | string, object: WithAccessControlMetadata): boolean {\n    // Fallback if access control disabled\n    if (!this.accessControlEnabled()) {\n      return true;\n    }\n\n    return !!object.accessControl?.[action];\n  }\n\n  // Checks whether user has required permission\n  hasPermission(action: AccessControlAction | string): boolean {\n    // Fallback if access control disabled\n    if (!this.accessControlEnabled()) {\n      return true;\n    }\n\n    return !!this.user.permissions?.[action];\n  }\n\n  isGrafanaVisible() {\n    return document.visibilityState === undefined || document.visibilityState === 'visible';\n  }\n\n  // checks whether the passed interval is longer than the configured minimum refresh rate\n  isAllowedInterval(interval: string) {\n    if (!config.minRefreshInterval) {\n      return true;\n    }\n    return rangeUtil.intervalToMs(interval) >= rangeUtil.intervalToMs(config.minRefreshInterval);\n  }\n\n  getValidInterval(interval: string) {\n    if (!this.isAllowedInterval(interval)) {\n      return config.minRefreshInterval;\n    }\n    return interval;\n  }\n\n  hasAccessToExplore() {\n    if (this.accessControlEnabled()) {\n      return this.hasPermission(AccessControlAction.DataSourcesExplore);\n    }\n    return (this.isEditor || config.viewersCanEdit) && config.exploreEnabled;\n  }\n\n  hasAccess(action: string, fallBack: boolean): boolean {\n    if (!this.accessControlEnabled()) {\n      return fallBack;\n    }\n    return this.hasPermission(action);\n  }\n\n  hasAccessInMetadata(action: string, object: WithAccessControlMetadata, fallBack: boolean) {\n    if (!this.accessControlEnabled()) {\n      return fallBack;\n    }\n    return this.hasPermissionInMetadata(action, object);\n  }\n\n  // evaluates access control permissions, granting access if the user has any of them; uses fallback if access control is disabled\n  evaluatePermission(fallback: () => string[], actions: string[]) {\n    if (!this.accessControlEnabled()) {\n      return fallback();\n    }\n    if (actions.some((action) => this.hasPermission(action))) {\n      return [];\n    }\n    // Hack to reject when user does not have permission\n    return ['Reject'];\n  }\n}\n\nlet contextSrv = new ContextSrv();\nexport { contextSrv };\n\nexport const setContextSrv = (override: ContextSrv) => {\n  if (process.env.NODE_ENV !== 'test') {\n    throw new Error('contextSrv can be only overridden in test environment');\n  }\n  contextSrv = override;\n};\n","import { cloneDeep, extend, isString } from 'lodash';\n\nimport {\n  dateMath,\n  dateTime,\n  getDefaultTimeRange,\n  isDateTime,\n  rangeUtil,\n  RawTimeRange,\n  TimeRange,\n  TimeZone,\n  toUtc,\n} from '@grafana/data';\nimport { locationService } from '@grafana/runtime';\n\nimport { AbsoluteTimeEvent, ShiftTimeEvent, ShiftTimeEventDirection, ZoomOutEvent } from '../types/events';\nimport { getRefreshFromUrl } from '../utils/getRefreshFromUrl';\nimport { getShiftedTimeRange, getZoomedTimeRange } from '../utils/timePicker';\n\nimport appEvents from './app_events';\nimport { config } from './config';\nimport { contextSrv, ContextSrv } from './context_srv';\n\nexport interface TimeModel {\n  time: any;\n  fiscalYearStartMonth?: number;\n  refresh: any;\n  timepicker: any;\n  getTimezone(): TimeZone;\n  timeRangeUpdated(timeRange: TimeRange): void;\n}\n\nexport class TimeSrv {\n  time: any;\n  refreshTimer: any;\n  refresh: any;\n  autoRefreshPaused = false;\n  oldRefresh: string | null | undefined;\n  timeModel?: TimeModel;\n  timeAtLoad: any;\n  private autoRefreshBlocked?: boolean;\n\n  constructor(private contextSrv: ContextSrv) {\n    // default time\n    this.time = getDefaultTimeRange().raw;\n    this.refreshTimeModel = this.refreshTimeModel.bind(this);\n\n    appEvents.subscribe(ZoomOutEvent, (e) => {\n      this.zoomOut(e.payload.scale, e.payload.updateUrl);\n    });\n\n    appEvents.subscribe(ShiftTimeEvent, (e) => {\n      this.shiftTime(e.payload.direction, e.payload.updateUrl);\n    });\n\n    appEvents.subscribe(AbsoluteTimeEvent, () => {\n      this.makeAbsoluteTime();\n    });\n\n    document.addEventListener('visibilitychange', () => {\n      if (this.autoRefreshBlocked && document.visibilityState === 'visible') {\n        this.autoRefreshBlocked = false;\n        this.refreshTimeModel();\n      }\n    });\n  }\n\n  init(timeModel: TimeModel) {\n    this.timeModel = timeModel;\n    this.time = timeModel.time;\n    this.refresh = timeModel.refresh;\n\n    this.initTimeFromUrl();\n    this.parseTime();\n\n    // remember time at load so we can go back to it\n    this.timeAtLoad = cloneDeep(this.time);\n\n    const range = rangeUtil.convertRawToRange(\n      this.time,\n      this.timeModel?.getTimezone(),\n      this.timeModel?.fiscalYearStartMonth\n    );\n\n    if (range.to.isBefore(range.from)) {\n      this.setTime(\n        {\n          from: range.raw.to,\n          to: range.raw.from,\n        },\n        false\n      );\n    }\n\n    if (this.refresh) {\n      this.setAutoRefresh(this.refresh);\n    }\n  }\n\n  getValidIntervals(intervals: string[]): string[] {\n    if (!this.contextSrv.minRefreshInterval) {\n      return intervals;\n    }\n\n    return intervals.filter((str) => str !== '').filter(this.contextSrv.isAllowedInterval);\n  }\n\n  private parseTime() {\n    // when absolute time is saved in json it is turned to a string\n    if (isString(this.time.from) && this.time.from.indexOf('Z') >= 0) {\n      this.time.from = dateTime(this.time.from).utc();\n    }\n    if (isString(this.time.to) && this.time.to.indexOf('Z') >= 0) {\n      this.time.to = dateTime(this.time.to).utc();\n    }\n  }\n\n  private parseUrlParam(value: any) {\n    if (value.indexOf('now') !== -1) {\n      return value;\n    }\n    if (value.length === 8) {\n      const utcValue = toUtc(value, 'YYYYMMDD');\n      if (utcValue.isValid()) {\n        return utcValue;\n      }\n    } else if (value.length === 15) {\n      const utcValue = toUtc(value, 'YYYYMMDDTHHmmss');\n      if (utcValue.isValid()) {\n        return utcValue;\n      }\n    }\n\n    if (!isNaN(value)) {\n      const epoch = parseInt(value, 10);\n      return toUtc(epoch);\n    }\n\n    return null;\n  }\n\n  private getTimeWindow(time: string, timeWindow: string) {\n    const valueTime = parseInt(time, 10);\n    let timeWindowMs;\n\n    if (timeWindow.match(/^\\d+$/) && parseInt(timeWindow, 10)) {\n      // when time window specified in ms\n      timeWindowMs = parseInt(timeWindow, 10);\n    } else {\n      timeWindowMs = rangeUtil.intervalToMs(timeWindow);\n    }\n\n    return {\n      from: toUtc(valueTime - timeWindowMs / 2),\n      to: toUtc(valueTime + timeWindowMs / 2),\n    };\n  }\n\n  private initTimeFromUrl() {\n    const params = locationService.getSearch();\n\n    if (params.get('time') && params.get('time.window')) {\n      this.time = this.getTimeWindow(params.get('time')!, params.get('time.window')!);\n    }\n\n    if (params.get('from')) {\n      this.time.from = this.parseUrlParam(params.get('from')!) || this.time.from;\n    }\n\n    if (params.get('to')) {\n      this.time.to = this.parseUrlParam(params.get('to')!) || this.time.to;\n    }\n\n    // if absolute ignore refresh option saved to timeModel\n    if (params.get('to') && params.get('to')!.indexOf('now') === -1) {\n      this.refresh = false;\n      if (this.timeModel) {\n        this.timeModel.refresh = false;\n      }\n    }\n\n    // but if refresh explicitly set then use that\n    this.refresh = getRefreshFromUrl({\n      urlRefresh: params.get('refresh'),\n      currentRefresh: this.refresh,\n      refreshIntervals: Array.isArray(this.timeModel?.timepicker?.refresh_intervals)\n        ? this.timeModel?.timepicker?.refresh_intervals\n        : undefined,\n      isAllowedIntervalFn: this.contextSrv.isAllowedInterval,\n      minRefreshInterval: config.minRefreshInterval,\n    });\n  }\n\n  updateTimeRangeFromUrl() {\n    const params = locationService.getSearch();\n\n    if (params.get('left')) {\n      return; // explore handles this;\n    }\n\n    const urlRange = this.timeRangeForUrl();\n    const from = params.get('from');\n    const to = params.get('to');\n\n    // check if url has time range\n    if (from && to) {\n      // is it different from what our current time range?\n      if (from !== urlRange.from || to !== urlRange.to) {\n        // issue update\n        this.initTimeFromUrl();\n        this.setTime(this.time, false);\n      }\n    } else if (this.timeHasChangedSinceLoad()) {\n      this.setTime(this.timeAtLoad, true);\n    }\n  }\n\n  private timeHasChangedSinceLoad() {\n    return this.timeAtLoad && (this.timeAtLoad.from !== this.time.from || this.timeAtLoad.to !== this.time.to);\n  }\n\n  setAutoRefresh(interval: any) {\n    if (this.timeModel) {\n      this.timeModel.refresh = interval;\n    }\n\n    this.stopAutoRefresh();\n\n    const currentUrlState = locationService.getSearchObject();\n\n    if (!interval) {\n      // Clear URL state\n      if (currentUrlState.refresh) {\n        locationService.partial({ refresh: null }, true);\n      }\n\n      return;\n    }\n\n    const validInterval = this.contextSrv.getValidInterval(interval);\n    const intervalMs = rangeUtil.intervalToMs(validInterval);\n\n    this.refreshTimer = setTimeout(() => {\n      this.startNextRefreshTimer(intervalMs);\n      !this.autoRefreshPaused && this.refreshTimeModel();\n    }, intervalMs);\n\n    const refresh = this.contextSrv.getValidInterval(interval);\n\n    if (currentUrlState.refresh !== refresh) {\n      locationService.partial({ refresh }, true);\n    }\n  }\n\n  refreshTimeModel() {\n    this.timeModel?.timeRangeUpdated(this.timeRange());\n  }\n\n  private startNextRefreshTimer(afterMs: number) {\n    this.refreshTimer = setTimeout(() => {\n      this.startNextRefreshTimer(afterMs);\n      if (this.contextSrv.isGrafanaVisible()) {\n        !this.autoRefreshPaused && this.refreshTimeModel();\n      } else {\n        this.autoRefreshBlocked = true;\n      }\n    }, afterMs);\n  }\n\n  stopAutoRefresh() {\n    clearTimeout(this.refreshTimer);\n  }\n\n  // store timeModel refresh value and pause auto-refresh in some places\n  // i.e panel edit\n  pauseAutoRefresh() {\n    this.autoRefreshPaused = true;\n  }\n\n  // resume auto-refresh based on old dashboard refresh property\n  resumeAutoRefresh() {\n    this.autoRefreshPaused = false;\n    this.refreshTimeModel();\n  }\n\n  setTime(time: RawTimeRange, updateUrl = true) {\n    extend(this.time, time);\n\n    // disable refresh if zoom in or zoom out\n    if (isDateTime(time.to)) {\n      this.oldRefresh = this.timeModel?.refresh || this.oldRefresh;\n      this.setAutoRefresh(false);\n    } else if (this.oldRefresh && this.oldRefresh !== this.timeModel?.refresh) {\n      this.setAutoRefresh(this.oldRefresh);\n      this.oldRefresh = null;\n    }\n\n    if (updateUrl === true) {\n      const urlRange = this.timeRangeForUrl();\n      const urlParams = locationService.getSearchObject();\n\n      if (urlParams.from === urlRange.from.toString() && urlParams.to === urlRange.to.toString()) {\n        return;\n      }\n\n      urlParams.from = urlRange.from.toString();\n      urlParams.to = urlRange.to.toString();\n\n      locationService.partial(urlParams);\n    }\n\n    this.refreshTimeModel();\n  }\n\n  timeRangeForUrl = () => {\n    const range = this.timeRange().raw;\n\n    if (isDateTime(range.from)) {\n      range.from = range.from.valueOf().toString();\n    }\n    if (isDateTime(range.to)) {\n      range.to = range.to.valueOf().toString();\n    }\n\n    return range;\n  };\n\n  timeRange(): TimeRange {\n    // make copies if they are moment  (do not want to return out internal moment, because they are mutable!)\n    const raw = {\n      from: isDateTime(this.time.from) ? dateTime(this.time.from) : this.time.from,\n      to: isDateTime(this.time.to) ? dateTime(this.time.to) : this.time.to,\n    };\n\n    const timezone = this.timeModel ? this.timeModel.getTimezone() : undefined;\n\n    return {\n      from: dateMath.parse(raw.from, false, timezone, this.timeModel?.fiscalYearStartMonth)!,\n      to: dateMath.parse(raw.to, true, timezone, this.timeModel?.fiscalYearStartMonth)!,\n      raw: raw,\n    };\n  }\n\n  zoomOut(factor: number, updateUrl = true) {\n    const range = this.timeRange();\n    const { from, to } = getZoomedTimeRange(range, factor);\n\n    this.setTime({ from: toUtc(from), to: toUtc(to) }, updateUrl);\n  }\n\n  shiftTime(direction: ShiftTimeEventDirection, updateUrl = true) {\n    const range = this.timeRange();\n    const { from, to } = getShiftedTimeRange(direction, range);\n\n    this.setTime(\n      {\n        from: toUtc(from),\n        to: toUtc(to),\n      },\n      updateUrl\n    );\n  }\n\n  makeAbsoluteTime() {\n    const params = locationService.getSearch();\n    if (params.get('left')) {\n      return; // explore handles this;\n    }\n\n    const { from, to } = this.timeRange();\n    this.setTime({ from, to }, true);\n  }\n\n  // isRefreshOutsideThreshold function calculates the difference between last refresh and now\n  // if the difference is outside 5% of the current set time range then the function will return true\n  // if the difference is within 5% of the current set time range then the function will return false\n  // if the current time range is absolute (i.e. not using relative strings like now-5m) then the function will return false\n  isRefreshOutsideThreshold(lastRefresh: number, threshold = 0.05) {\n    const timeRange = this.timeRange();\n\n    if (dateMath.isMathString(timeRange.raw.from)) {\n      const totalRange = timeRange.to.diff(timeRange.from);\n      const msSinceLastRefresh = Date.now() - lastRefresh;\n      const msThreshold = totalRange * threshold;\n      return msSinceLastRefresh >= msThreshold;\n    }\n\n    return false;\n  }\n}\n\nlet singleton: TimeSrv | undefined;\n\nexport function setTimeSrv(srv: TimeSrv) {\n  singleton = srv;\n}\n\nexport function getTimeSrv(): TimeSrv {\n  if (!singleton) {\n    singleton = new TimeSrv(contextSrv);\n  }\n\n  return singleton;\n}\n","import { defaultIntervals } from '@grafana/ui';\n\ninterface Args {\n  urlRefresh: string | null;\n  currentRefresh: string | boolean | undefined;\n  isAllowedIntervalFn: (interval: string) => boolean;\n  minRefreshInterval: string;\n  refreshIntervals?: string[];\n}\n\n// getRefreshFromUrl function returns the value from the supplied &refresh= param in url.\n// If the supplied interval is not allowed or does not exist in the refresh intervals for the dashboard then we\n// try to find the first refresh interval that matches the minRefreshInterval (min_refresh_interval in ini)\n// or just take the first interval.\nexport function getRefreshFromUrl({\n                                    urlRefresh,\n                                    currentRefresh,\n                                    isAllowedIntervalFn,\n                                    minRefreshInterval,\n                                    refreshIntervals = defaultIntervals,\n                                  }: Args): string | boolean | undefined {\n  if (!urlRefresh) {\n    return currentRefresh;\n  }\n\n  const isAllowedInterval = isAllowedIntervalFn(urlRefresh);\n  const isExistingInterval = refreshIntervals.find((interval) => interval === urlRefresh);\n\n  if (!isAllowedInterval || !isExistingInterval) {\n    const minRefreshIntervalInIntervals = minRefreshInterval\n      ? refreshIntervals.find((interval) => interval === minRefreshInterval)\n      : undefined;\n    const lowestRefreshInterval = refreshIntervals?.length ? refreshIntervals[0] : undefined;\n\n    return minRefreshIntervalInIntervals ?? lowestRefreshInterval ?? currentRefresh;\n  }\n\n  return urlRefresh || currentRefresh;\n}\n","import { chain, map as _map, uniq } from 'lodash';\nimport { lastValueFrom } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { MetricFindValue, TimeRange } from '@grafana/data';\n\nimport { PrometheusDatasource } from './datasource';\nimport { getTimeSrv } from './services/TimeSrv';\nimport { PromQueryRequest } from './types';\n\nexport default class PrometheusMetricFindQuery {\n  range: TimeRange;\n\n  constructor(private datasource: PrometheusDatasource, private query: string) {\n    this.datasource = datasource;\n    this.query = query;\n    this.range = getTimeSrv().timeRange();\n  }\n\n  process(): Promise<MetricFindValue[]> {\n    const labelNamesRegex = /^label_names\\(\\)\\s*$/;\n    const labelValuesRegex = /^label_values\\((?:(.+),\\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\\)\\s*$/;\n    const metricNamesRegex = /^metrics\\((.+)\\)\\s*$/;\n    const queryResultRegex = /^query_result\\((.+)\\)\\s*$/;\n    const labelNamesQuery = this.query.match(labelNamesRegex);\n    if (labelNamesQuery) {\n      return this.labelNamesQuery();\n    }\n\n    const labelValuesQuery = this.query.match(labelValuesRegex);\n    if (labelValuesQuery) {\n      if (labelValuesQuery[1]) {\n        return this.labelValuesQuery(labelValuesQuery[2], labelValuesQuery[1]);\n      } else {\n        return this.labelValuesQuery(labelValuesQuery[2]);\n      }\n    }\n\n    const metricNamesQuery = this.query.match(metricNamesRegex);\n    if (metricNamesQuery) {\n      return this.metricNameQuery(metricNamesQuery[1]);\n    }\n\n    const queryResultQuery = this.query.match(queryResultRegex);\n    if (queryResultQuery) {\n      return lastValueFrom(this.queryResultQuery(queryResultQuery[1]));\n    }\n\n    // if query contains full metric name, return metric name and label list\n    return this.metricNameAndLabelsQuery(this.query);\n  }\n\n  labelNamesQuery() {\n    const start = this.datasource.getPrometheusTime(this.range.from, false);\n    const end = this.datasource.getPrometheusTime(this.range.to, true);\n    const params = {\n      start: start.toString(),\n      end: end.toString(),\n    };\n\n    const url = `/api/v1/labels`;\n\n    return this.datasource.metadataRequest(url, params).then((result: any) => {\n      return _map(result.data.data, (value) => {\n        return { text: value };\n      });\n    });\n  }\n\n  labelValuesQuery(label: string, metric?: string) {\n    const start = this.datasource.getPrometheusTime(this.range.from, false);\n    const end = this.datasource.getPrometheusTime(this.range.to, true);\n\n    let url: string;\n\n    if (!metric) {\n      const params = {\n        start: start.toString(),\n        end: end.toString(),\n      };\n      // return label values globally\n      url = `/api/v1/label/${label}/values`;\n\n      return this.datasource.metadataRequest(url, params).then((result: any) => {\n        return _map(result.data.data, (value) => {\n          return { text: value };\n        });\n      });\n    } else {\n      const params = {\n        'match[]': metric,\n        start: start.toString(),\n        end: end.toString(),\n      };\n      url = `/api/v1/series`;\n\n      return this.datasource.metadataRequest(url, params).then((result: any) => {\n        const _labels = _map(result.data.data, (metric) => {\n          return metric[label] || '';\n        }).filter((label) => {\n          return label !== '';\n        });\n\n        return uniq(_labels).map((metric) => {\n          return {\n            text: metric,\n            expandable: true,\n          };\n        });\n      });\n    }\n  }\n\n  metricNameQuery(metricFilterPattern: string) {\n    const start = this.datasource.getPrometheusTime(this.range.from, false);\n    const end = this.datasource.getPrometheusTime(this.range.to, true);\n    const params = {\n      start: start.toString(),\n      end: end.toString(),\n    };\n    const url = `/api/v1/label/__name__/values`;\n\n    return this.datasource.metadataRequest(url, params).then((result: any) => {\n      return chain(result.data.data)\n        .filter((metricName) => {\n          const r = new RegExp(metricFilterPattern);\n          return r.test(metricName);\n        })\n        .map((matchedMetricName) => {\n          return {\n            text: matchedMetricName,\n            expandable: true,\n          };\n        })\n        .value();\n    });\n  }\n\n  queryResultQuery(query: string) {\n    const end = this.datasource.getPrometheusTime(this.range.to, true);\n    const instantQuery: PromQueryRequest = { expr: query } as PromQueryRequest;\n    return this.datasource.performInstantQuery(instantQuery, end).pipe(\n      map((result) => {\n        switch (result.data.data.resultType) {\n          case 'scalar': // [ <unix_time>, \"<scalar_value>\" ]\n          case 'string': // [ <unix_time>, \"<string_value>\" ]\n            return [\n              {\n                text: result.data.data.result[1] || '',\n                expandable: false,\n              },\n            ];\n          case 'vector':\n            return _map(result.data.data.result, (metricData) => {\n              let text = metricData.metric.__name__ || '';\n              delete metricData.metric.__name__;\n              text +=\n                '{' +\n                _map(metricData.metric, (v, k) => {\n                  return k + '=\"' + v + '\"';\n                }).join(',') +\n                '}';\n              text += ' ' + metricData.value[1] + ' ' + metricData.value[0] * 1000;\n\n              return {\n                text: text,\n                expandable: true,\n              };\n            });\n          default:\n            throw Error(`Unknown/Unhandled result type: [${result.data.data.resultType}]`);\n        }\n      })\n    );\n  }\n\n  metricNameAndLabelsQuery(query: string): Promise<MetricFindValue[]> {\n    const start = this.datasource.getPrometheusTime(this.range.from, false);\n    const end = this.datasource.getPrometheusTime(this.range.to, true);\n    const params = {\n      'match[]': query,\n      start: start.toString(),\n      end: end.toString(),\n    };\n\n    const url = `/api/v1/series`;\n    const self = this;\n\n    return this.datasource.metadataRequest(url, params).then((result: any) => {\n      return _map(result.data.data, (metric: { [key: string]: string }) => {\n        return {\n          text: self.datasource.getOriginalMetricName(metric),\n          expandable: true,\n        };\n      });\n    });\n  }\n}\n","import { size } from 'lodash';\n\nimport { QueryHint, QueryFix } from '@grafana/data';\n\nimport { PrometheusDatasource } from './datasource';\n\n/**\n * Number of time series results needed before starting to suggest sum aggregation hints\n */\nexport const SUM_HINT_THRESHOLD_COUNT = 20;\n\nexport function getQueryHints(query: string, series?: any[], datasource?: PrometheusDatasource): QueryHint[] {\n  const hints = [];\n\n  // ..._bucket metric needs a histogram_quantile()\n  const histogramMetric = query.trim().match(/^\\w+_bucket$|^\\w+_bucket{.*}$/);\n  if (histogramMetric) {\n    const label = 'Selected metric has buckets.';\n    hints.push({\n      type: 'HISTOGRAM_QUANTILE',\n      label,\n      fix: {\n        label: 'Consider calculating aggregated quantile by adding histogram_quantile().',\n        action: {\n          type: 'ADD_HISTOGRAM_QUANTILE',\n          query,\n        },\n      } as QueryFix,\n    });\n  }\n\n  // Check for need of rate()\n  if (query.indexOf('rate(') === -1 && query.indexOf('increase(') === -1) {\n    // Use metric metadata for exact types\n    const nameMatch = query.match(/\\b(\\w+_(total|sum|count))\\b/);\n    let counterNameMetric = nameMatch ? nameMatch[1] : '';\n    const metricsMetadata = datasource?.languageProvider?.metricsMetadata;\n    let certain = false;\n\n    if (metricsMetadata) {\n      // Tokenize the query into its identifiers (see https://prometheus.io/docs/concepts/data_model/#metric-names-and-labels)\n      const queryTokens = Array.from(query.matchAll(/\\$?[a-zA-Z_:][a-zA-Z0-9_:]*/g))\n        .map(([match]) => match)\n        // Exclude variable identifiers\n        .filter((token) => !token.startsWith('$'))\n        // Split composite keys to match the tokens returned by the language provider\n        .flatMap((token) => token.split(':'));\n      // Determine whether any of the query identifier tokens refers to a counter metric\n      counterNameMetric =\n        queryTokens.find((metricName) => {\n          // Only considering first type information, could be non-deterministic\n          const metadata = metricsMetadata[metricName];\n          if (metadata && metadata.type.toLowerCase() === 'counter') {\n            certain = true;\n            return true;\n          } else {\n            return false;\n          }\n        }) ?? '';\n    }\n\n    if (counterNameMetric) {\n      // FixableQuery consists of metric name and optionally label-value pairs. We are not offering fix for complex queries yet.\n      const fixableQuery = query.trim().match(/^\\w+$|^\\w+{.*}$/);\n      const verb = certain ? 'is' : 'looks like';\n      let label = `Selected metric ${verb} a counter.`;\n      let fix: QueryFix | undefined;\n\n      if (fixableQuery) {\n        fix = {\n          label: 'Consider calculating rate of counter by adding rate().',\n          action: {\n            type: 'ADD_RATE',\n            query,\n          },\n        };\n      } else {\n        label = `${label} Consider calculating rate of counter by adding rate().`;\n      }\n\n      hints.push({\n        type: 'APPLY_RATE',\n        label,\n        fix,\n      });\n    }\n  }\n\n  // Check for recording rules expansion\n  if (datasource && datasource.ruleMappings) {\n    const mapping = datasource.ruleMappings;\n    const mappingForQuery = Object.keys(mapping).reduce((acc, ruleName) => {\n      if (query.search(ruleName) > -1) {\n        return {\n          ...acc,\n          [ruleName]: mapping[ruleName],\n        };\n      }\n      return acc;\n    }, {});\n    if (size(mappingForQuery) > 0) {\n      const label = 'Query contains recording rules.';\n      hints.push({\n        type: 'EXPAND_RULES',\n        label,\n        fix: {\n          label: 'Expand rules',\n          action: {\n            type: 'EXPAND_RULES',\n            query,\n            options: mappingForQuery,\n          },\n        } as any as QueryFix,\n      });\n    }\n  }\n\n  if (series && series.length >= SUM_HINT_THRESHOLD_COUNT) {\n    const simpleMetric = query.trim().match(/^\\w+$/);\n    if (simpleMetric) {\n      hints.push({\n        type: 'ADD_SUM',\n        label: 'Many time series results returned.',\n        fix: {\n          label: 'Consider aggregating with sum().',\n          action: {\n            type: 'ADD_SUM',\n            query: query,\n            preventSubmit: true,\n          },\n        } as QueryFix,\n      });\n    }\n  }\n\n  return hints;\n}\n\nexport function getInitHints(datasource: PrometheusDatasource): QueryHint[] {\n  const hints = [];\n  // Hint if using Loki as Prometheus data source\n  if (datasource.directUrl.includes('/loki') && !datasource.languageProvider.metrics.length) {\n    hints.push({\n      label: `Using Loki as a Prometheus data source is no longer supported. You must use the Loki data source for your Loki instance.`,\n      type: 'INFO',\n    });\n  }\n\n  // Hint for big disabled lookups\n  if (datasource.lookupsDisabled) {\n    hints.push({\n      label: `Labels and metrics lookup was disabled in data source settings.`,\n      type: 'INFO',\n    });\n  }\n\n  return hints;\n}\n","import { descending, deviation } from 'd3';\nimport { flatten, forOwn, groupBy, partition } from 'lodash';\n\nimport {\n  ArrayDataFrame,\n  ArrayVector,\n  CoreApp,\n  DataFrame,\n  DataFrameType,\n  DataLink,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataTopic,\n  Field,\n  FieldType,\n  formatLabels,\n  getDisplayProcessor,\n  Labels,\n  MutableField,\n  PreferredVisualisationType,\n  ScopedVars,\n  TIME_SERIES_TIME_FIELD_NAME,\n  TIME_SERIES_VALUE_FIELD_NAME,\n} from '@grafana/data';\nimport { FetchResponse, getDataSourceSrv, getTemplateSrv } from '@grafana/runtime';\n\nimport { renderLegendFormat } from './legend';\nimport {\n  ExemplarTraceIdDestination,\n  isExemplarData,\n  isMatrixData,\n  MatrixOrVectorResult,\n  PromDataSuccessResponse,\n  PromMetric,\n  PromQuery,\n  PromQueryRequest,\n  PromValue,\n  TransformOptions,\n} from './types';\n\n// handles case-insensitive Inf, +Inf, -Inf (with optional \"inity\" suffix)\nconst INFINITY_SAMPLE_REGEX = /^[+-]?inf(?:inity)?$/i;\n\ninterface TimeAndValue {\n  [TIME_SERIES_TIME_FIELD_NAME]: number;\n  [TIME_SERIES_VALUE_FIELD_NAME]: number;\n}\n\nconst isTableResult = (dataFrame: DataFrame, options: DataQueryRequest<PromQuery>): boolean => {\n  // We want to process vector and scalar results in Explore as table\n  if (\n    options.app === CoreApp.Explore &&\n    (dataFrame.meta?.custom?.resultType === 'vector' || dataFrame.meta?.custom?.resultType === 'scalar')\n  ) {\n    return true;\n  }\n\n  // We want to process all dataFrames with target.format === 'table' as table\n  const target = options.targets.find((target) => target.refId === dataFrame.refId);\n  return target?.format === 'table';\n};\n\nconst isHeatmapResult = (dataFrame: DataFrame, options: DataQueryRequest<PromQuery>): boolean => {\n  const target = options.targets.find((target) => target.refId === dataFrame.refId);\n  return target?.format === 'heatmap';\n};\n\n// V2 result trasnformer used to transform query results from queries that were run trough prometheus backend\nexport function transformV2(\n  response: DataQueryResponse,\n  request: DataQueryRequest<PromQuery>,\n  options: { exemplarTraceIdDestinations?: ExemplarTraceIdDestination[] }\n) {\n  const [tableFrames, framesWithoutTable] = partition<DataFrame>(response.data, (df) => isTableResult(df, request));\n  const processedTableFrames = transformDFToTable(tableFrames);\n\n  const [exemplarFrames, framesWithoutTableAndExemplars] = partition<DataFrame>(\n    framesWithoutTable,\n    (df) => df.meta?.custom?.resultType === 'exemplar'\n  );\n\n  // EXEMPLAR FRAMES: We enrich exemplar frames with data links and add dataTopic meta info\n  const { exemplarTraceIdDestinations: destinations } = options;\n  const processedExemplarFrames = exemplarFrames.map((dataFrame) => {\n    if (destinations?.length) {\n      for (const exemplarTraceIdDestination of destinations) {\n        const traceIDField = dataFrame.fields.find((field) => field.name === exemplarTraceIdDestination.name);\n        if (traceIDField) {\n          const links = getDataLinks(exemplarTraceIdDestination);\n          traceIDField.config.links = traceIDField.config.links?.length\n            ? [...traceIDField.config.links, ...links]\n            : links;\n        }\n      }\n    }\n\n    return { ...dataFrame, meta: { ...dataFrame.meta, dataTopic: DataTopic.Annotations } };\n  });\n\n  const [heatmapResults, framesWithoutTableHeatmapsAndExemplars] = partition<DataFrame>(\n    framesWithoutTableAndExemplars,\n    (df) => isHeatmapResult(df, request)\n  );\n\n  // Group heatmaps by query\n  const heatmapResultsGroupedByQuery = groupBy<DataFrame>(heatmapResults, (h) => h.refId);\n\n  // Initialize empty array to push grouped histogram frames to\n  let processedHeatmapResultsGroupedByQuery: DataFrame[][] = [];\n\n  // Iterate through every query in this heatmap\n  for (const query in heatmapResultsGroupedByQuery) {\n    // Get reference to dataFrames for heatmap\n    const heatmapResultsGroup = heatmapResultsGroupedByQuery[query];\n\n    // Create a new grouping by iterating through the data frames...\n    const heatmapResultsGroupedByValues = groupBy<DataFrame>(heatmapResultsGroup, (dataFrame) => {\n      // Each data frame has `Time` and `Value` properties, we want to get the values\n      const values = dataFrame.fields.find((field) => field.name === TIME_SERIES_VALUE_FIELD_NAME);\n      // Specific functionality for special \"le\" quantile heatmap value, we know if this value exists, that we do not want to calculate the heatmap density across data frames from the same quartile\n      if (values?.labels && HISTOGRAM_QUANTILE_LABEL_NAME in values.labels) {\n        const { le, ...notLE } = values?.labels;\n        return Object.values(notLE).join();\n      }\n\n      // Return a string made from the concatenation of this frame's values to represent a grouping in the query\n      return Object.values(values?.labels ?? []).join();\n    });\n\n    // Then iterate through the resultant object\n    forOwn(heatmapResultsGroupedByValues, (dataFrames, key) => {\n      // Sort frames within each grouping\n      const sortedHeatmap = dataFrames.sort(sortSeriesByLabel);\n      // And push the sorted grouping with the rest\n      processedHeatmapResultsGroupedByQuery.push(mergeHeatmapFrames(transformToHistogramOverTime(sortedHeatmap)));\n    });\n  }\n\n  // Everything else is processed as time_series result and graph preferredVisualisationType\n  const otherFrames = framesWithoutTableHeatmapsAndExemplars.map((dataFrame) => {\n    const df = {\n      ...dataFrame,\n      meta: {\n        ...dataFrame.meta,\n        preferredVisualisationType: 'graph',\n      },\n    } as DataFrame;\n    return df;\n  });\n\n  const flattenedProcessedHeatmapFrames = flatten(processedHeatmapResultsGroupedByQuery);\n\n  return {\n    ...response,\n    data: [...otherFrames, ...processedTableFrames, ...flattenedProcessedHeatmapFrames, ...processedExemplarFrames],\n  };\n}\n\nconst HISTOGRAM_QUANTILE_LABEL_NAME = 'le';\n\nexport function transformDFToTable(dfs: DataFrame[]): DataFrame[] {\n  // If no dataFrames or if 1 dataFrames with no values, return original dataFrame\n  if (dfs.length === 0 || (dfs.length === 1 && dfs[0].length === 0)) {\n    return dfs;\n  }\n\n  // Group results by refId and process dataFrames with the same refId as 1 dataFrame\n  const dataFramesByRefId = groupBy(dfs, 'refId');\n  const refIds = Object.keys(dataFramesByRefId);\n\n  const frames = refIds.map((refId) => {\n    // Create timeField, valueField and labelFields\n    const valueText = getValueText(refIds.length, refId);\n    const valueField = getValueField({ data: [], valueName: valueText });\n    const timeField = getTimeField([]);\n    const labelFields: MutableField[] = [];\n\n    // Fill labelsFields with labels from dataFrames\n    dataFramesByRefId[refId].forEach((df) => {\n      const frameValueField = df.fields[1];\n      const promLabels = frameValueField.labels ?? {};\n\n      Object.keys(promLabels)\n        .sort()\n        .forEach((label) => {\n          // If we don't have label in labelFields, add it\n          if (!labelFields.some((l) => l.name === label)) {\n            const numberField = label === HISTOGRAM_QUANTILE_LABEL_NAME;\n            labelFields.push({\n              name: label,\n              config: { filterable: true },\n              type: numberField ? FieldType.number : FieldType.string,\n              values: new ArrayVector(),\n            });\n          }\n        });\n    });\n\n    // Fill valueField, timeField and labelFields with values\n    dataFramesByRefId[refId].forEach((df) => {\n      df.fields[0].values.toArray().forEach((value) => timeField.values.add(value));\n      df.fields[1].values.toArray().forEach((value) => {\n        valueField.values.add(parseSampleValue(value));\n        const labelsForField = df.fields[1].labels ?? {};\n        labelFields.forEach((field) => field.values.add(getLabelValue(labelsForField, field.name)));\n      });\n    });\n\n    const fields = [timeField, ...labelFields, valueField];\n    return {\n      refId,\n      fields,\n      meta: { ...dfs[0].meta, preferredVisualisationType: 'table' as PreferredVisualisationType },\n      length: timeField.values.length,\n    };\n  });\n  return frames;\n}\n\nfunction getValueText(responseLength: number, refId = '') {\n  return responseLength > 1 ? `Value #${refId}` : 'Value';\n}\n\nexport function transform(\n  response: FetchResponse<PromDataSuccessResponse>,\n  transformOptions: {\n    query: PromQueryRequest;\n    exemplarTraceIdDestinations?: ExemplarTraceIdDestination[];\n    target: PromQuery;\n    responseListLength: number;\n    scopedVars?: ScopedVars;\n  }\n) {\n  // Create options object from transformOptions\n  const options: TransformOptions = {\n    format: transformOptions.target.format,\n    step: transformOptions.query.step,\n    legendFormat: transformOptions.target.legendFormat,\n    start: transformOptions.query.start,\n    end: transformOptions.query.end,\n    query: transformOptions.query.expr,\n    responseListLength: transformOptions.responseListLength,\n    scopedVars: transformOptions.scopedVars,\n    refId: transformOptions.target.refId,\n    valueWithRefId: transformOptions.target.valueWithRefId,\n    meta: {\n      // Fix for showing of Prometheus results in Explore table\n      preferredVisualisationType: transformOptions.query.instant ? 'table' : 'graph',\n    },\n  };\n  const prometheusResult = response.data.data;\n\n  if (isExemplarData(prometheusResult)) {\n    return [];\n  }\n\n  if (!prometheusResult?.result) {\n    return [];\n  }\n\n  // Return early if result type is scalar\n  if (prometheusResult.resultType === 'scalar') {\n    return [\n      {\n        meta: options.meta,\n        refId: options.refId,\n        length: 1,\n        fields: [getTimeField([prometheusResult.result]), getValueField({ data: [prometheusResult.result] })],\n      },\n    ];\n  }\n\n  // Return early again if the format is table, this needs special transformation.\n  if (options.format === 'table') {\n    const tableData = transformMetricDataToTable(prometheusResult.result, options);\n    return [tableData];\n  }\n\n  // Process matrix and vector results to DataFrame\n  const dataFrame: DataFrame[] = [];\n  prometheusResult.result.forEach((data: MatrixOrVectorResult) => dataFrame.push(transformToDataFrame(data, options)));\n\n  // When format is heatmap use the already created data frames and transform it more\n  if (options.format === 'heatmap') {\n    return mergeHeatmapFrames(transformToHistogramOverTime(dataFrame.sort(sortSeriesByLabel)));\n  }\n\n  // Return matrix or vector result as DataFrame[]\n  return dataFrame;\n}\n\nfunction getDataLinks(options: ExemplarTraceIdDestination): DataLink[] {\n  const dataLinks: DataLink[] = [];\n\n  if (options.datasourceUid) {\n    const dataSourceSrv = getDataSourceSrv();\n    const dsSettings = dataSourceSrv.getInstanceSettings(options.datasourceUid);\n\n    // dsSettings is undefined because of the reasons below:\n    // - permissions issues (probably most likely)\n    // - deleted datasource\n    // - misconfiguration\n    if (dsSettings) {\n      dataLinks.push({\n        title: options.urlDisplayLabel || `Query with ${dsSettings?.name}`,\n        url: '',\n        internal: {\n          query: { query: '${__value.raw}', queryType: 'traceId' },\n          datasourceUid: options.datasourceUid,\n          datasourceName: dsSettings?.name ?? 'Data source not found',\n        },\n      });\n    }\n  }\n\n  if (options.url) {\n    dataLinks.push({\n      title: options.urlDisplayLabel || `Go to ${options.url}`,\n      url: options.url,\n      targetBlank: true,\n    });\n  }\n  return dataLinks;\n}\n\n/**\n * Transforms matrix and vector result from Prometheus result to DataFrame\n */\nfunction transformToDataFrame(data: MatrixOrVectorResult, options: TransformOptions): DataFrame {\n  const { name, labels } = createLabelInfo(data.metric, options);\n\n  const fields: Field[] = [];\n\n  if (isMatrixData(data)) {\n    const stepMs = options.step ? options.step * 1000 : NaN;\n    let baseTimestamp = options.start * 1000;\n    const dps: PromValue[] = [];\n\n    for (const value of data.values) {\n      let dpValue: number | null = parseSampleValue(value[1]);\n\n      if (isNaN(dpValue)) {\n        dpValue = null;\n      }\n\n      const timestamp = value[0] * 1000;\n      for (let t = baseTimestamp; t < timestamp; t += stepMs) {\n        dps.push([t, null]);\n      }\n      baseTimestamp = timestamp + stepMs;\n      dps.push([timestamp, dpValue]);\n    }\n\n    const endTimestamp = options.end * 1000;\n    for (let t = baseTimestamp; t <= endTimestamp; t += stepMs) {\n      dps.push([t, null]);\n    }\n    fields.push(getTimeField(dps, true));\n    fields.push(getValueField({ data: dps, parseValue: false, labels, displayNameFromDS: name }));\n  } else {\n    fields.push(getTimeField([data.value]));\n    fields.push(getValueField({ data: [data.value], labels, displayNameFromDS: name }));\n  }\n\n  return {\n    meta: options.meta,\n    refId: options.refId,\n    length: fields[0].values.length,\n    fields,\n    name,\n  };\n}\n\nfunction transformMetricDataToTable(md: MatrixOrVectorResult[], options: TransformOptions): DataFrame {\n  if (!md || md.length === 0) {\n    return {\n      meta: options.meta,\n      refId: options.refId,\n      length: 0,\n      fields: [],\n    };\n  }\n\n  const valueText = options.responseListLength > 1 || options.valueWithRefId ? `Value #${options.refId}` : 'Value';\n\n  const timeField = getTimeField([]);\n  const metricFields = Object.keys(md.reduce((acc, series) => ({ ...acc, ...series.metric }), {}))\n    .sort()\n    .map((label) => {\n      // Labels have string field type, otherwise table tries to figure out the type which can result in unexpected results\n      // Only \"le\" label has a number field type\n      const numberField = label === HISTOGRAM_QUANTILE_LABEL_NAME;\n      return {\n        name: label,\n        config: { filterable: true },\n        type: numberField ? FieldType.number : FieldType.string,\n        values: new ArrayVector(),\n      };\n    });\n  const valueField = getValueField({ data: [], valueName: valueText });\n\n  md.forEach((d) => {\n    if (isMatrixData(d)) {\n      d.values.forEach((val) => {\n        timeField.values.add(val[0] * 1000);\n        metricFields.forEach((metricField) => metricField.values.add(getLabelValue(d.metric, metricField.name)));\n        valueField.values.add(parseSampleValue(val[1]));\n      });\n    } else {\n      timeField.values.add(d.value[0] * 1000);\n      metricFields.forEach((metricField) => metricField.values.add(getLabelValue(d.metric, metricField.name)));\n      valueField.values.add(parseSampleValue(d.value[1]));\n    }\n  });\n\n  return {\n    meta: options.meta,\n    refId: options.refId,\n    length: timeField.values.length,\n    fields: [timeField, ...metricFields, valueField],\n  };\n}\n\nfunction getLabelValue(metric: PromMetric, label: string): string | number {\n  if (metric.hasOwnProperty(label)) {\n    if (label === HISTOGRAM_QUANTILE_LABEL_NAME) {\n      return parseSampleValue(metric[label]);\n    }\n    return metric[label];\n  }\n  return '';\n}\n\nfunction getTimeField(data: PromValue[], isMs = false): MutableField {\n  return {\n    name: TIME_SERIES_TIME_FIELD_NAME,\n    type: FieldType.time,\n    config: {},\n    values: new ArrayVector<number>(data.map((val) => (isMs ? val[0] : val[0] * 1000))),\n  };\n}\n\ntype ValueFieldOptions = {\n  data: PromValue[];\n  valueName?: string;\n  parseValue?: boolean;\n  labels?: Labels;\n  displayNameFromDS?: string;\n};\n\nfunction getValueField({\n  data,\n  valueName = TIME_SERIES_VALUE_FIELD_NAME,\n  parseValue = true,\n  labels,\n  displayNameFromDS,\n}: ValueFieldOptions): MutableField {\n  return {\n    name: valueName,\n    type: FieldType.number,\n    display: getDisplayProcessor(),\n    config: {\n      displayNameFromDS,\n    },\n    labels,\n    values: new ArrayVector<number | null>(data.map((val) => (parseValue ? parseSampleValue(val[1]) : val[1]))),\n  };\n}\n\nfunction createLabelInfo(labels: { [key: string]: string }, options: TransformOptions) {\n  if (options?.legendFormat) {\n    const title = renderLegendFormat(getTemplateSrv().replace(options.legendFormat, options?.scopedVars), labels);\n    return { name: title, labels };\n  }\n\n  const { __name__, ...labelsWithoutName } = labels;\n  const labelPart = formatLabels(labelsWithoutName);\n  let title = `${__name__ ?? ''}${labelPart}`;\n\n  if (!title) {\n    title = options.query;\n  }\n\n  return { name: title, labels: labelsWithoutName };\n}\n\nexport function getOriginalMetricName(labelData: { [key: string]: string }) {\n  const metricName = labelData.__name__ || '';\n  delete labelData.__name__;\n  const labelPart = Object.entries(labelData)\n    .map((label) => `${label[0]}=\"${label[1]}\"`)\n    .join(',');\n  return `${metricName}{${labelPart}}`;\n}\n\nfunction mergeHeatmapFrames(frames: DataFrame[]): DataFrame[] {\n  if (frames.length === 0) {\n    return [];\n  }\n\n  const timeField = frames[0].fields.find((field) => field.type === FieldType.time)!;\n  const countFields = frames.map((frame) => {\n    let field = frame.fields.find((field) => field.type === FieldType.number)!;\n\n    return {\n      ...field,\n      name: field.config.displayNameFromDS!,\n    };\n  });\n\n  return [\n    {\n      ...frames[0],\n      meta: {\n        ...frames[0].meta,\n        type: DataFrameType.HeatmapRows,\n      },\n      fields: [timeField!, ...countFields],\n    },\n  ];\n}\n\nfunction transformToHistogramOverTime(seriesList: DataFrame[]) {\n  /*      t1 = timestamp1, t2 = timestamp2 etc.\n            t1  t2  t3          t1  t2  t3\n    le10    10  10  0     =>    10  10  0\n    le20    20  10  30    =>    10  0   30\n    le30    30  10  35    =>    10  0   5\n    */\n  for (let i = seriesList.length - 1; i > 0; i--) {\n    const topSeries = seriesList[i].fields.find((s) => s.name === TIME_SERIES_VALUE_FIELD_NAME);\n    const bottomSeries = seriesList[i - 1].fields.find((s) => s.name === TIME_SERIES_VALUE_FIELD_NAME);\n    if (!topSeries || !bottomSeries) {\n      throw new Error('Prometheus heatmap transform error: data should be a time series');\n    }\n\n    for (let j = 0; j < topSeries.values.length; j++) {\n      const bottomPoint = bottomSeries.values.get(j) || [0];\n      topSeries.values.toArray()[j] -= bottomPoint;\n    }\n  }\n\n  return seriesList;\n}\n\nfunction sortSeriesByLabel(s1: DataFrame, s2: DataFrame): number {\n  let le1, le2;\n\n  try {\n    // fail if not integer. might happen with bad queries\n    le1 = parseSampleValue(s1.name ?? '');\n    le2 = parseSampleValue(s2.name ?? '');\n  } catch (err) {\n    console.error(err);\n    return 0;\n  }\n\n  if (le1 > le2) {\n    return 1;\n  }\n\n  if (le1 < le2) {\n    return -1;\n  }\n\n  return 0;\n}\n\n/** @internal */\nexport function parseSampleValue(value: string): number {\n  if (INFINITY_SAMPLE_REGEX.test(value)) {\n    return value[0] === '-' ? Number.NEGATIVE_INFINITY : Number.POSITIVE_INFINITY;\n  }\n  return parseFloat(value);\n}\n","import { from, Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport {\n  DataQueryRequest,\n  DataQueryResponse,\n  rangeUtil,\n  StandardVariableQuery,\n  StandardVariableSupport,\n} from '@grafana/data';\nimport { getTemplateSrv, TemplateSrv } from '@grafana/runtime';\n\nimport { PrometheusDatasource } from './datasource';\nimport PrometheusMetricFindQuery from './metric_find_query';\nimport { getTimeSrv, TimeSrv } from './services/TimeSrv';\nimport { PromQuery } from './types';\n\nexport class PrometheusVariableSupport extends StandardVariableSupport<PrometheusDatasource> {\n  constructor(\n    private readonly datasource: PrometheusDatasource,\n    private readonly templateSrv: TemplateSrv = getTemplateSrv(),\n    private readonly timeSrv: TimeSrv = getTimeSrv()\n  ) {\n    super();\n    this.query = this.query.bind(this);\n  }\n\n  query(request: DataQueryRequest<PromQuery>): Observable<DataQueryResponse> {\n    const query = request.targets[0].expr;\n    if (!query) {\n      return of({ data: [] });\n    }\n\n    const scopedVars = {\n      __interval: { text: this.datasource.interval, value: this.datasource.interval },\n      __interval_ms: {\n        text: rangeUtil.intervalToMs(this.datasource.interval),\n        value: rangeUtil.intervalToMs(this.datasource.interval),\n      },\n      ...this.datasource.getRangeScopedVars(this.timeSrv.timeRange()),\n    };\n\n    const interpolated = this.templateSrv.replace(query, scopedVars, this.datasource.interpolateQueryExpr);\n    const metricFindQuery = new PrometheusMetricFindQuery(this.datasource, interpolated);\n    const metricFindStream = from(metricFindQuery.process());\n\n    return metricFindStream.pipe(map((results) => ({ data: results })));\n  }\n\n  toDataQuery(query: StandardVariableQuery): PromQuery {\n    return {\n      refId: 'PrometheusDatasource-VariableQuery',\n      expr: query.query,\n    };\n  }\n}\n","import {cloneDeep, defaults} from 'lodash';\nimport {forkJoin, lastValueFrom, merge, Observable, of, OperatorFunction, pipe, throwError} from 'rxjs';\nimport {catchError, filter, map, tap} from 'rxjs/operators';\n\nimport {\n  AbstractQuery,\n  AnnotationEvent,\n  AnnotationQueryRequest,\n  CoreApp,\n  DataFrame,\n  DataQueryError,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  DataSourceWithQueryExportSupport,\n  DataSourceWithQueryImportSupport,\n  dateMath,\n  DateTime,\n  dateTime,\n  LoadingState,\n  QueryFixAction,\n  rangeUtil,\n  ScopedVars,\n  TimeRange,\n} from '@grafana/data';\nimport {\n  BackendDataSourceResponse,\n  BackendSrvRequest,\n  DataSourceWithBackend,\n  FetchError,\n  FetchResponse,\n  TemplateSrv,\n  getBackendSrv,\n  getTemplateSrv,\n  isFetchError,\n  toDataQueryResponse,\n} from '@grafana/runtime';\n\n\nimport {addLabelToQuery} from './add_label_to_query';\nimport {AnnotationQueryEditor} from './components/AnnotationQueryEditor';\nimport PrometheusLanguageProvider from './language_provider';\nimport {expandRecordingRules} from './language_utils';\nimport {renderLegendFormat} from './legend';\nimport PrometheusMetricFindQuery from './metric_find_query';\nimport {getInitHints, getQueryHints} from './query_hints';\nimport {getOriginalMetricName, transform, transformV2} from './result_transformer';\nimport {getTimeSrv, TimeSrv} from './services/TimeSrv';\nimport {\n  ExemplarTraceIdDestination,\n  PromDataErrorResponse,\n  PromDataSuccessResponse,\n  PromMatrixData,\n  PromOptions,\n  PromQuery,\n  PromQueryRequest,\n  PromQueryType,\n  PromScalarData,\n  PromVectorData,\n} from './types';\nimport {safeStringifyValue} from './utils/safeStringifyValue';\nimport {PrometheusVariableSupport} from './variables';\n\n\nenum PromApplication {\n  Lotex = 'Lotex',\n  Mimir = 'Mimir',\n  Prometheus = 'Prometheus',\n}\nconst ANNOTATION_QUERY_STEP_DEFAULT = '60s';\nconst GET_AND_POST_METADATA_ENDPOINTS = ['api/v1/query', 'api/v1/query_range', 'api/v1/series', 'api/v1/labels'];\n\nexport class PrometheusDatasource\n  extends DataSourceWithBackend<PromQuery, PromOptions>\n  implements DataSourceWithQueryImportSupport<PromQuery>, DataSourceWithQueryExportSupport<PromQuery> {\n  type: string;\n  editorSrc: string;\n  ruleMappings: { [index: string]: string };\n  url: string;\n  id: number;\n  directUrl: string;\n  access: 'direct' | 'proxy';\n  basicAuth: any;\n  withCredentials: any;\n  // metricsNameCache = new LRU<string, string[]>({max: 10});\n  interval: string;\n  queryTimeout: string | undefined;\n  httpMethod: string;\n  languageProvider: PrometheusLanguageProvider;\n  exemplarTraceIdDestinations: ExemplarTraceIdDestination[] | undefined;\n  lookupsDisabled: boolean;\n  customQueryParameters: any;\n  exemplarsAvailable: boolean;\n  subType: PromApplication;\n  rulerEnabled: boolean;\n\n  constructor(\n    instanceSettings: DataSourceInstanceSettings<PromOptions>,\n    private readonly templateSrv: TemplateSrv = getTemplateSrv(),\n    private readonly timeSrv: TimeSrv = getTimeSrv(),\n    languageProvider?: PrometheusLanguageProvider\n  ) {\n    super(instanceSettings);\n\n    this.type = 'prometheus';\n    this.subType = PromApplication.Prometheus;\n    this.rulerEnabled = false;\n    this.editorSrc = 'app/features/prometheus/partials/query.editor.html';\n    this.id = instanceSettings.id;\n    this.url = instanceSettings.url!;\n    this.access = 'direct' //instanceSettings.access;\n    this.basicAuth = instanceSettings.basicAuth;\n    this.withCredentials = instanceSettings.withCredentials;\n    this.interval = instanceSettings.jsonData.timeInterval || '15s';\n    this.queryTimeout = instanceSettings.jsonData.queryTimeout;\n    this.httpMethod = instanceSettings.jsonData.httpMethod || 'GET';\n    // `directUrl` is never undefined, we set it at https://github.com/grafana/grafana/blob/main/pkg/api/frontendsettings.go#L108\n    // here we \"fall back\" to this.url to make typescript happy, but it should never happen\n    this.directUrl = instanceSettings.jsonData.directUrl ?? this.url;\n    this.exemplarTraceIdDestinations = instanceSettings.jsonData.exemplarTraceIdDestinations;\n    this.ruleMappings = {};\n    this.languageProvider = languageProvider ?? new PrometheusLanguageProvider(this);\n    this.lookupsDisabled = instanceSettings.jsonData.disableMetricsLookup ?? false;\n    this.customQueryParameters = new URLSearchParams(instanceSettings.jsonData.customQueryParameters);\n    this.variables = new PrometheusVariableSupport(this, this.templateSrv, this.timeSrv);\n    this.exemplarsAvailable = false;\n\n    // This needs to be here and cannot be static because of how annotations typing affects casting of data source\n    // objects to DataSourceApi types.\n    // We don't use the default processing for prometheus.\n    // See standardAnnotationSupport.ts/[shouldUseMappingUI|shouldUseLegacyRunner]\n    this.annotations = {\n      QueryEditor: AnnotationQueryEditor,\n    };\n  }\n\n  init = async () => {\n    await this.loadRules();\n  };\n\n  getQueryDisplayText(query: PromQuery) {\n    return query.expr;\n  }\n\n  _addTracingHeaders(httpOptions: PromQueryRequest, options: DataQueryRequest<PromQuery>) {\n    httpOptions.headers = {};\n    const proxyMode = !this.url.match(/^http/);\n    if (proxyMode) {\n      httpOptions.headers['X-Dashboard-Id'] = options.dashboardId;\n      httpOptions.headers['X-Dashboard-UID'] = options.dashboardUID || \"\";\n      httpOptions.headers['X-Panel-Id'] = options.panelId;\n    }\n  }\n\n  /**\n   * Any request done from this data source should go through here as it contains some common processing for the\n   * request. Any processing done here needs to be also copied on the backend as this goes through data source proxy\n   * but not through the same code as alerting.\n   */\n  _request<T = any>(\n    url: string,\n    data: Record<string, string> | null,\n    overrides: Partial<BackendSrvRequest> = {}\n  ): Observable<FetchResponse<T>> {\n    // if (this.access === 'direct') {\n    //   const error = new Error(\n    //     'Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.'\n    //   );\n    //   return throwError(() => error);\n    // }\n\n    data = data || {};\n    for (const [key, value] of this.customQueryParameters) {\n      if (data[key] == null) {\n        data[key] = value;\n      }\n    }\n\n    let queryUrl = this.url + url;\n    if (url.startsWith(`/api/datasources/proxy/${this.id}`)) {\n      // This url is meant to be a replacement for the whole URL. Replace the entire URL\n      queryUrl = url;\n    }\n\n    const options: BackendSrvRequest = defaults(overrides, {\n      url: queryUrl,\n      method: this.httpMethod,\n      headers: {},\n    });\n\n    if (options.method === 'GET') {\n      if (data && Object.keys(data).length) {\n        options.url =\n          options.url +\n          (options.url.search(/\\?/) >= 0 ? '&' : '?') +\n          Object.entries(data)\n            .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\n            .join('&');\n      }\n    } else {\n      options.headers!['Content-Type'] = 'application/x-www-form-urlencoded';\n      options.data = data;\n    }\n\n    if (this.basicAuth || this.withCredentials) {\n      options.withCredentials = true;\n    }\n\n    if (this.basicAuth) {\n      options.headers!.Authorization = this.basicAuth;\n    }\n\n    return getBackendSrv().fetch<T>(options);\n  }\n\n  async importFromAbstractQueries(abstractQueries: AbstractQuery[]): Promise<PromQuery[]> {\n    return abstractQueries.map((abstractQuery) => this.languageProvider.importFromAbstractQuery(abstractQuery));\n  }\n\n  async exportToAbstractQueries(queries: PromQuery[]): Promise<AbstractQuery[]> {\n    return queries.map((query) => this.languageProvider.exportToAbstractQuery(query));\n  }\n\n  // Use this for tab completion features, won't publish response to other components\n  async metadataRequest<T = any>(url: string, params = {}, options?: Partial<BackendSrvRequest>) {\n    // If URL includes endpoint that supports POST and GET method, try to use configured method. This might fail as POST is supported only in v2.10+.\n    if (GET_AND_POST_METADATA_ENDPOINTS.some((endpoint) => url.includes(endpoint))) {\n      try {\n        return await lastValueFrom(\n          // VM\n          this._request<T>(`/api/datasources/proxy/${this.id}${url}`, params, {\n            method: this.httpMethod,\n            hideFromInspector: true,\n            showErrorAlert: false,\n            ...options,\n          })\n        );\n      } catch (err) {\n        // If status code of error is Method Not Allowed (405) and HTTP method is POST, retry with GET\n        if (this.httpMethod === 'POST' && isFetchError(err) && (err.status === 405 || err.status === 400)) {\n          console.warn(`Couldn't use configured POST HTTP method for this request. Trying to use GET method instead.`);\n        } else {\n          throw err;\n        }\n      }\n    }\n\n    return await lastValueFrom(\n      this._request<T>(`/api/datasources/proxy/${this.id}${url}`, params, {\n        method: 'GET',\n        hideFromInspector: true,\n        ...options,\n      })\n    ); // toPromise until we change getTagValues, getTagKeys to Observable\n  }\n\n  interpolateQueryExpr(value: string | string[] = [], variable: any) {\n    // if no multi or include all do not regexEscape\n    if (!variable.multi && !variable.includeAll) {\n      return prometheusRegularEscape(value);\n    }\n\n    if (typeof value === 'string') {\n      return prometheusSpecialRegexEscape(value);\n    }\n\n    const escapedValues = value.map((val) => prometheusSpecialRegexEscape(val));\n\n    if (escapedValues.length === 1) {\n      return escapedValues[0];\n    }\n\n    return '(' + escapedValues.join('|') + ')';\n  }\n\n  targetContainsTemplate(target: PromQuery) {\n    return this.templateSrv.containsTemplate(target.expr);\n  }\n\n  prepareTargets = (options: DataQueryRequest<PromQuery>, start: number, end: number) => {\n    const queries: PromQueryRequest[] = [];\n    const activeTargets: PromQuery[] = [];\n    const clonedTargets = cloneDeep(options.targets);\n\n    for (const target of clonedTargets) {\n      if (!target.expr || target.hide) {\n        continue;\n      }\n\n      target.requestId = options.panelId + target.refId;\n      // const metricName = this.languageProvider.histogramMetrics.find((m) => target.expr.includes(m));\n\n      // In Explore, we run both (instant and range) queries if both are true (selected) or both are undefined (legacy Explore queries)\n      if (options.app === CoreApp.Explore && target.range === target.instant) {\n        // Create instant target\n        const instantTarget: any = cloneDeep(target);\n        instantTarget.format = 'table';\n        instantTarget.instant = true;\n        instantTarget.range = false;\n        instantTarget.valueWithRefId = true;\n        delete instantTarget.maxDataPoints;\n        instantTarget.requestId += '_instant';\n\n        // Create range target\n        const rangeTarget: any = cloneDeep(target);\n        rangeTarget.format = 'time_series';\n        rangeTarget.instant = false;\n        instantTarget.range = true;\n\n        // Add both targets to activeTargets and queries arrays\n        activeTargets.push(instantTarget, rangeTarget);\n        queries.push(\n          this.createQuery(instantTarget, options, start, end),\n          this.createQuery(rangeTarget, options, start, end)\n        );\n        // If running only instant query in Explore, format as table\n      } else if (target.instant && options.app === CoreApp.Explore) {\n        const instantTarget: any = cloneDeep(target);\n        instantTarget.format = 'table';\n        queries.push(this.createQuery(instantTarget, options, start, end));\n        activeTargets.push(instantTarget);\n      } else {\n        queries.push(this.createQuery(target, options, start, end));\n        activeTargets.push(target);\n      }\n    }\n\n    return {\n      queries,\n      activeTargets,\n    };\n  };\n\n  processTargetV2(target: PromQuery, request: DataQueryRequest<PromQuery>) {\n    return {\n      ...target,\n      queryType: PromQueryType.timeSeriesQuery,\n      requestId: request.panelId + target.refId,\n      // We need to pass utcOffsetSec to backend to calculate aligned range\n      utcOffsetSec: this.timeSrv.timeRange().to.utcOffset() * 60,\n    };\n  }\n\n  query(request: DataQueryRequest<PromQuery>): Observable<DataQueryResponse> {\n    if (this.access === 'proxy') {\n      const targets = request.targets.map((target) => this.processTargetV2(target, request));\n      return super\n        .query({...request, targets})\n        .pipe(\n          map((response) =>\n            transformV2(response, request, {})\n          )\n        );\n      // Run queries trough browser/proxy\n    } else {\n      const start = this.getPrometheusTime(request.range.from, false);\n      const end = this.getPrometheusTime(request.range.to, true);\n      const {queries, activeTargets} = this.prepareTargets(request, start, end);\n\n      // No valid targets, return the empty result to save a round trip.\n      if (!queries || !queries.length) {\n        return of({\n          data: [],\n          state: LoadingState.Done,\n        });\n      }\n\n      if (request.app === CoreApp.Explore) {\n        return this.exploreQuery(queries, activeTargets, end);\n      }\n\n      return this.panelsQuery(queries, activeTargets, end, request.requestId, request.scopedVars);\n    }\n  }\n\n  private exploreQuery(queries: PromQueryRequest[], activeTargets: PromQuery[], end: number) {\n    let runningQueriesCount = queries.length;\n\n    const subQueries = queries.map((query, index) => {\n      const target = activeTargets[index];\n\n      const filterAndMapResponse = pipe(\n        // Decrease the counter here. We assume that each request returns only single value and then completes\n        // (should hold until there is some streaming requests involved).\n        tap(() => runningQueriesCount--),\n        filter((response: any) => (!response.cancelled)),\n        map((response: any) => {\n          const data = transform(response, {\n            query,\n            target,\n            responseListLength: queries.length,\n          });\n          return {\n            data,\n            key: query.requestId,\n            state: runningQueriesCount === 0 ? LoadingState.Done : LoadingState.Loading,\n          } as DataQueryResponse;\n        })\n      );\n\n      return this.runQuery(query, end, filterAndMapResponse);\n    });\n\n    return merge(...subQueries);\n  }\n\n  private panelsQuery(\n    queries: PromQueryRequest[],\n    activeTargets: PromQuery[],\n    end: number,\n    requestId: string,\n    scopedVars: ScopedVars\n  ) {\n    const observables = queries.map((query, index) => {\n      const target = activeTargets[index];\n\n      const filterAndMapResponse = pipe(\n        filter((response: any) => (!response.cancelled)),\n        map((response: any) => {\n          return transform(response, {\n            query,\n            target,\n            responseListLength: queries.length,\n            scopedVars,\n          });\n        })\n      );\n\n      return this.runQuery(query, end, filterAndMapResponse);\n    });\n\n    return forkJoin(observables).pipe(\n      map((results) => {\n        const data = results.reduce((result, current) => {\n          return [...result, ...current];\n        }, []);\n        return {\n          data,\n          key: requestId,\n          state: LoadingState.Done,\n        };\n      })\n    );\n  }\n\n  private runQuery<T>(query: PromQueryRequest, end: number, filter: OperatorFunction<any, T>): Observable<T> {\n    if (query.instant) {\n      return this.performInstantQuery(query, end).pipe(filter);\n    }\n\n    return this.performTimeSeriesQuery(query, query.start, query.end).pipe(filter);\n  }\n\n  createQuery(target: PromQuery, options: DataQueryRequest<PromQuery>, start: number, end: number) {\n    const query: PromQueryRequest = {\n      hinting: target.hinting,\n      instant: target.instant,\n      exemplar: target.exemplar,\n      step: 0,\n      expr: '',\n      requestId: target.requestId,\n      refId: target.refId,\n      start: 0,\n      end: 0,\n    };\n    const range = Math.ceil(end - start);\n\n    // options.interval is the dynamically calculated interval\n    let interval: number = rangeUtil.intervalToSeconds(options.interval);\n    // Minimum interval (\"Min step\"), if specified for the query, or same as interval otherwise.\n    const minInterval = rangeUtil.intervalToSeconds(\n      this.templateSrv.replace(target.interval || options.interval, options.scopedVars)\n    );\n    // Scrape interval as specified for the query (\"Min step\") or otherwise taken from the datasource.\n    // Min step field can have template variables in it, make sure to replace it.\n    const scrapeInterval = target.interval\n      ? rangeUtil.intervalToSeconds(this.templateSrv.replace(target.interval, options.scopedVars))\n      : rangeUtil.intervalToSeconds(this.interval);\n\n    const intervalFactor = target.intervalFactor || 1;\n    // Adjust the interval to take into account any specified minimum and interval factor plus Prometheus limits\n    const adjustedInterval = this.adjustInterval(interval, minInterval, range, intervalFactor);\n    let scopedVars = {\n      ...options.scopedVars,\n      ...this.getRangeScopedVars(options.range),\n      ...this.getRateIntervalScopedVariable(adjustedInterval, scrapeInterval),\n    };\n    // If the interval was adjusted, make a shallow copy of scopedVars with updated interval vars\n    if (interval !== adjustedInterval) {\n      interval = adjustedInterval;\n      scopedVars = Object.assign({}, options.scopedVars, {\n        __interval: {text: interval + 's', value: interval + 's'},\n        __interval_ms: {text: interval * 1000, value: interval * 1000},\n        ...this.getRateIntervalScopedVariable(interval, scrapeInterval),\n        ...this.getRangeScopedVars(options.range),\n      });\n    }\n    query.step = interval;\n\n    let expr = target.expr;\n\n    // Apply adhoc filters\n    expr = this.enhanceExprWithAdHocFilters(expr);\n\n    // Only replace vars in expression after having (possibly) updated interval vars\n    query.expr = this.templateSrv.replace(expr, scopedVars, this.interpolateQueryExpr);\n\n    // Align query interval with step to allow query caching and to ensure\n    // that about-same-time query results look the same.\n    const adjusted = alignRange(start, end, query.step, this.timeSrv.timeRange().to.utcOffset() * 60);\n    query.start = adjusted.start;\n    query.end = adjusted.end;\n    this._addTracingHeaders(query, options);\n\n    return query;\n  }\n\n  getRateIntervalScopedVariable(interval: number, scrapeInterval: number) {\n    // Fall back to the default scrape interval of 15s if scrapeInterval is 0 for some reason.\n    if (scrapeInterval === 0) {\n      scrapeInterval = 15;\n    }\n    const rateInterval = Math.max(interval + scrapeInterval, 4 * scrapeInterval);\n    return {__rate_interval: {text: rateInterval + 's', value: rateInterval + 's'}};\n  }\n\n  adjustInterval(interval: number, minInterval: number, range: number, intervalFactor: number) {\n    // Prometheus will drop queries that might return more than 11000 data points.\n    // Calculate a safe interval as an additional minimum to take into account.\n    // Fractional safeIntervals are allowed, however serve little purpose if the interval is greater than 1\n    // If this is the case take the ceil of the value.\n    let safeInterval = range / 11000;\n    if (safeInterval > 1) {\n      safeInterval = Math.ceil(safeInterval);\n    }\n    return Math.max(interval * intervalFactor, minInterval, safeInterval);\n  }\n\n  performTimeSeriesQuery(query: PromQueryRequest, start: number, end: number) {\n    if (start > end) {\n      throw {message: 'Invalid time range'};\n    }\n\n    const url = '/api/v1/query_range';\n    const data: any = {\n      query: query.expr,\n      start,\n      end,\n      step: query.step,\n    };\n\n    if (this.queryTimeout) {\n      data['timeout'] = this.queryTimeout;\n    }\n\n    return this._request<PromDataSuccessResponse<PromMatrixData>>(url, data, {\n      requestId: query.requestId,\n      headers: query.headers,\n    }).pipe(\n      catchError((err: FetchError<PromDataErrorResponse<PromMatrixData>>) => {\n        if (err.cancelled) {\n          return of(err);\n        }\n\n        return throwError(this.handleErrors(err, query));\n      })\n    );\n  }\n\n  performInstantQuery(\n    query: PromQueryRequest,\n    time: number\n  ): Observable<FetchResponse<PromDataSuccessResponse<PromVectorData | PromScalarData>> | FetchError> {\n    const url = '/api/v1/query';\n    const data: any = {\n      query: query.expr,\n      time,\n    };\n\n    if (this.queryTimeout) {\n      data['timeout'] = this.queryTimeout;\n    }\n\n    return this._request<PromDataSuccessResponse<PromVectorData | PromScalarData>>(url, data, {\n      requestId: query.requestId,\n      headers: query.headers,\n    }).pipe(\n      catchError((err: FetchError<PromDataErrorResponse<PromVectorData | PromScalarData>>) => {\n        if (err.cancelled) {\n          return of(err);\n        }\n\n        return throwError(this.handleErrors(err, query));\n      })\n    );\n  }\n\n  handleErrors = (err: any, target: PromQuery) => {\n    const error: DataQueryError = {\n      message: (err && err.statusText) || 'Unknown error during query transaction. Please check JS console logs.',\n      refId: target.refId,\n    };\n\n    if (err.data) {\n      if (typeof err.data === 'string') {\n        error.message = err.data;\n      } else if (err.data.error) {\n        error.message = safeStringifyValue(err.data.error);\n      }\n    } else if (err.message) {\n      error.message = err.message;\n    } else if (typeof err === 'string') {\n      error.message = err;\n    }\n\n    error.status = err.status;\n    error.statusText = err.statusText;\n\n    return error;\n  };\n\n  metricFindQuery(query: string) {\n    if (!query) {\n      return Promise.resolve([]);\n    }\n\n    const scopedVars = {\n      __interval: {text: this.interval, value: this.interval},\n      __interval_ms: {text: rangeUtil.intervalToMs(this.interval), value: rangeUtil.intervalToMs(this.interval)},\n      ...this.getRangeScopedVars(this.timeSrv.timeRange()),\n    };\n    const interpolated = this.templateSrv.replace(query, scopedVars, this.interpolateQueryExpr);\n    const metricFindQuery = new PrometheusMetricFindQuery(this, interpolated);\n    return metricFindQuery.process();\n  }\n\n  getRangeScopedVars(range: TimeRange = this.timeSrv.timeRange()) {\n    const msRange = range.to.diff(range.from);\n    const sRange = Math.round(msRange / 1000);\n    return {\n      __range_ms: {text: msRange, value: msRange},\n      __range_s: {text: sRange, value: sRange},\n      __range: {text: sRange + 's', value: sRange + 's'},\n    };\n  }\n\n  async annotationQuery(options: AnnotationQueryRequest<PromQuery>): Promise<AnnotationEvent[]> {\n    // if (this.access === 'direct') {\n    //   const error = new Error(\n    //     'Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.'\n    //   );\n    //   return Promise.reject(error);\n    // }\n\n    const annotation = options.annotation;\n    const {expr = ''} = annotation;\n\n    if (!expr) {\n      return Promise.resolve([]);\n    }\n\n    const step = options.annotation.step || ANNOTATION_QUERY_STEP_DEFAULT;\n    const queryModel = {\n      expr,\n      range: true,\n      instant: false,\n      exemplar: false,\n      interval: step,\n      queryType: PromQueryType.timeSeriesQuery,\n      refId: 'X',\n      datasource: this.getRef(),\n    };\n    return await lastValueFrom(\n      getBackendSrv()\n        .fetch<BackendDataSourceResponse>({\n          url: '/api/ds/query',\n          method: 'POST',\n          data: {\n            from: (this.getPrometheusTime(options.range.from, false) * 1000).toString(),\n            to: (this.getPrometheusTime(options.range.to, true) * 1000).toString(),\n            queries: [this.applyTemplateVariables(queryModel, {})],\n          },\n          requestId: `prom-query-${annotation.name}`,\n        })\n        .pipe(\n          map((rsp: FetchResponse<BackendDataSourceResponse>) => {\n            return this.processAnnotationResponse(options, rsp.data);\n          })\n        )\n    );\n  }\n\n  processAnnotationResponse = (options: AnnotationQueryRequest<PromQuery>, data: BackendDataSourceResponse) => {\n    const frames: DataFrame[] = toDataQueryResponse({data: data}).data;\n    if (!frames || !frames.length) {\n      return [];\n    }\n\n    const annotation = options.annotation;\n    const {tagKeys = '', titleFormat = '', textFormat = ''} = annotation;\n\n    const step = rangeUtil.intervalToSeconds(annotation.step || ANNOTATION_QUERY_STEP_DEFAULT) * 1000;\n    const tagKeysArray = tagKeys.split(',');\n\n    const eventList: AnnotationEvent[] = [];\n\n    for (const frame of frames) {\n      const timeField = frame.fields[0];\n      const valueField = frame.fields[1];\n      const labels = valueField?.labels || {};\n\n      const tags = Object.keys(labels)\n        .filter((label) => tagKeysArray.includes(label))\n        .map((label) => labels[label]);\n\n      const timeValueTuple: Array<[number, number]> = [];\n\n      let idx = 0;\n      valueField.values.toArray().forEach((value: string) => {\n        let timeStampValue: number;\n        let valueValue: number;\n        const time = timeField.values.get(idx);\n\n        // If we want to use value as a time, we use value as timeStampValue and valueValue will be 1\n        if (options.annotation.useValueForTime) {\n          timeStampValue = Math.floor(parseFloat(value));\n          valueValue = 1;\n        } else {\n          timeStampValue = Math.floor(parseFloat(time));\n          valueValue = parseFloat(value);\n        }\n\n        idx++;\n        timeValueTuple.push([timeStampValue, valueValue]);\n      });\n\n      const activeValues = timeValueTuple.filter((value) => value[1] >= 1);\n      const activeValuesTimestamps = activeValues.map((value) => value[0]);\n\n      // Instead of creating singular annotation for each active event we group events into region if they are less\n      // or equal to `step` apart.\n      let latestEvent: AnnotationEvent | null = null;\n\n      for (const timestamp of activeValuesTimestamps) {\n        // We already have event `open` and we have new event that is inside the `step` so we just update the end.\n        if (latestEvent && (latestEvent.timeEnd ?? 0) + step >= timestamp) {\n          latestEvent.timeEnd = timestamp;\n          continue;\n        }\n\n        // Event exists but new one is outside the `step` so we add it to eventList.\n        if (latestEvent) {\n          eventList.push(latestEvent);\n        }\n\n        // We start a new region.\n        latestEvent = {\n          time: timestamp,\n          timeEnd: timestamp,\n          annotation,\n          title: renderLegendFormat(titleFormat, labels),\n          tags,\n          text: renderLegendFormat(textFormat, labels),\n        };\n      }\n\n      if (latestEvent) {\n        // Finish up last point if we have one\n        latestEvent.timeEnd = activeValuesTimestamps[activeValuesTimestamps.length - 1];\n        eventList.push(latestEvent);\n      }\n    }\n\n    return eventList;\n  };\n\n  async getTagKeys(options?: any) {\n    if (options?.series) {\n      // Get tags for the provided series only\n      const seriesLabels: Array<Record<string, string[]>> = await Promise.all(\n        options.series.map((series: string) => this.languageProvider.fetchSeriesLabels(series))\n      );\n      // Combines tags from all options.series provided\n      let tags: string[] = [];\n      seriesLabels.map((value) => (tags = tags.concat(Object.keys(value))));\n      const uniqueLabels = [...new Set(tags)];\n      return uniqueLabels.map((value: any) => ({text: value}));\n    } else {\n      // Get all tags\n      const result = await this.metadataRequest('/api/v1/labels');\n      return result?.data?.data?.map((value: any) => ({text: value})) ?? [];\n    }\n  }\n\n  async getTagValues(options: { key?: string } = {}) {\n    const result = await this.metadataRequest(`/api/v1/label/${options.key}/values`);\n    return result?.data?.data?.map((value: any) => ({text: value})) ?? [];\n  }\n\n  async testDatasource() {\n    const now = new Date().getTime();\n    const request: DataQueryRequest<PromQuery> = {\n      targets: [{refId: 'test', expr: '1+1', instant: true}],\n      requestId: `${this.id}-health`,\n      scopedVars: {},\n      dashboardId: 0,\n      panelId: 0,\n      interval: '1m',\n      intervalMs: 60000,\n      maxDataPoints: 1,\n      range: {\n        from: dateTime(now - 1000),\n        to: dateTime(now),\n      },\n    } as DataQueryRequest<PromQuery>;\n\n    return lastValueFrom(this.query(request))\n      .then((res: DataQueryResponse) => {\n        if (!res || !res.data || res.state !== LoadingState.Done) {\n          return {status: 'error', message: `Error reading Prometheus: ${res?.error?.message}`};\n        } else {\n          return {\n            status: 'success',\n            message: 'Data source is working',\n          };\n        }\n      })\n      .catch((err: any) => {\n        console.error('Prometheus Error', err);\n        return {status: 'error', message: err.message};\n      });\n  }\n\n  interpolateVariablesInQueries(queries: PromQuery[], scopedVars: ScopedVars): PromQuery[] {\n    let expandedQueries = queries;\n    if (queries && queries.length) {\n      expandedQueries = queries.map((query) => ({\n        ...query,\n        datasource: this.getRef(),\n        expr: this.templateSrv.replace(query.expr, scopedVars, this.interpolateQueryExpr),\n        interval: this.templateSrv.replace(query.interval, scopedVars),\n      }));\n    }\n    return expandedQueries;\n  }\n\n  getQueryHints(query: PromQuery, result: any[]) {\n    return getQueryHints(query.expr ?? '', result, this);\n  }\n\n  getInitHints() {\n    return getInitHints(this);\n  }\n\n  async loadRules() {\n    try {\n      const res = await this.metadataRequest('/api/v1/rules', {}, {showErrorAlert: false});\n      const groups = res.data?.data?.groups;\n\n      if (groups) {\n        this.ruleMappings = extractRuleMappingFromGroups(groups);\n      }\n    } catch (e) {\n      console.log('Rules API is experimental. Ignore next error.');\n      console.error(e);\n    }\n  }\n\n  modifyQuery(query: PromQuery, action: QueryFixAction): PromQuery {\n    let expression = query.expr ?? '';\n    switch (action.type) {\n      case 'ADD_FILTER': {\n        const {key, value} = action.options ?? {};\n        if (key && value) {\n          expression = addLabelToQuery(expression, key, value);\n        }\n\n        break;\n      }\n      case 'ADD_FILTER_OUT': {\n        const {key, value} = action.options ?? {};\n        if (key && value) {\n          expression = addLabelToQuery(expression, key, value, '!=');\n        }\n        break;\n      }\n      case 'ADD_HISTOGRAM_QUANTILE': {\n        expression = `histogram_quantile(0.95, sum(rate(${expression}[$__rate_interval])) by (le))`;\n        break;\n      }\n      case 'ADD_RATE': {\n        expression = `rate(${expression}[$__rate_interval])`;\n        break;\n      }\n      case 'ADD_SUM': {\n        expression = `sum(${expression.trim()}) by ($1)`;\n        break;\n      }\n      case 'EXPAND_RULES': {\n        if (action.options) {\n          expression = expandRecordingRules(expression, action.options);\n        }\n        break;\n      }\n      default:\n        break;\n    }\n    return {...query, expr: expression};\n  }\n\n  getPrometheusTime(date: string | DateTime, roundUp: boolean) {\n    if (typeof date === 'string') {\n      date = dateMath.parse(date, roundUp)!;\n    }\n\n    return Math.ceil(date.valueOf() / 1000);\n  }\n\n  getTimeRangeParams(): { start: string; end: string } {\n    const range = this.timeSrv.timeRange();\n    return {\n      start: this.getPrometheusTime(range.from, false).toString(),\n      end: this.getPrometheusTime(range.to, true).toString(),\n    };\n  }\n\n  getOriginalMetricName(labelData: { [key: string]: string }) {\n    return getOriginalMetricName(labelData);\n  }\n\n  enhanceExprWithAdHocFilters(expr: string) {\n    const adhocFilters = this.templateSrv.getAdhocFilters(this.name);\n\n    return adhocFilters.reduce((acc: string, filter: { key?: any; operator?: any; value?: any }) => {\n      const {key, operator} = filter;\n      let {value} = filter;\n      if (operator === '=~' || operator === '!~') {\n        value = prometheusRegularEscape(value);\n      }\n      return addLabelToQuery(acc, key, value, operator);\n    }, expr);\n  }\n\n  // Used when running queries trough backend\n  filterQuery(query: PromQuery): boolean {\n    return !(query.hide || !query.expr);\n  }\n\n  // Used when running queries trough backend\n  applyTemplateVariables(target: PromQuery, scopedVars: ScopedVars): Record<string, any> {\n    const variables = cloneDeep(scopedVars);\n\n    // We want to interpolate these variables on backend\n    delete variables.__interval;\n    delete variables.__interval_ms;\n\n    //Add ad hoc filters\n    const expr = this.enhanceExprWithAdHocFilters(target.expr);\n\n    return {\n      ...target,\n      legendFormat: this.templateSrv.replace(target.legendFormat, variables),\n      expr: this.templateSrv.replace(expr, variables, this.interpolateQueryExpr),\n      interval: this.templateSrv.replace(target.interval, variables),\n    };\n  }\n\n  getVariables(): string[] {\n    return this.templateSrv.getVariables().map((v) => `$${v.name}`);\n  }\n\n  interpolateString(string: string) {\n    return this.templateSrv.replace(string, undefined, this.interpolateQueryExpr);\n  }\n}\n\n/**\n * Align query range to step.\n * Rounds start and end down to a multiple of step.\n * @param start Timestamp marking the beginning of the range.\n * @param end Timestamp marking the end of the range.\n * @param step Interval to align start and end with.\n * @param utcOffsetSec Number of seconds current timezone is offset from UTC\n */\n\nexport function alignRange(\n  start: number,\n  end: number,\n  step: number,\n  utcOffsetSec: number\n): { end: number; start: number } {\n  const alignedEnd = Math.floor((end + utcOffsetSec) / step) * step - utcOffsetSec;\n  const alignedStart = Math.floor((start + utcOffsetSec) / step) * step - utcOffsetSec;\n  return {\n    end: alignedEnd,\n    start: alignedStart,\n  };\n}\n\nexport function extractRuleMappingFromGroups(groups: any[]) {\n  return groups.reduce(\n    (mapping, group) =>\n      group.rules\n        .filter((rule: any) => rule.type === 'recording')\n        .reduce(\n          (acc: { [key: string]: string }, rule: any) => ({\n            ...acc,\n            [rule.name]: rule.query,\n          }),\n          mapping\n        ),\n    {}\n  );\n}\n\n// NOTE: these two functions are very similar to the escapeLabelValueIn* functions\n// in language_utils.ts, but they are not exactly the same algorithm, and we found\n// no way to reuse one in the another or vice versa.\nexport function prometheusRegularEscape(value: any) {\n  return typeof value === 'string' ? value.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\\\\\'\") : value;\n}\n\nexport function prometheusSpecialRegexEscape(value: any) {\n  return typeof value === 'string' ? value.replace(/\\\\/g, '\\\\\\\\\\\\\\\\').replace(/[$^*{}\\[\\]'+?.()|]/g, '\\\\\\\\$&') : value;\n}\n","import { isFunction } from '../util/isFunction';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { identity } from '../util/identity';\nexport function tap(observerOrNext, error, complete) {\n    var tapObserver = isFunction(observerOrNext) || error || complete\n        ?\n            { next: observerOrNext, error: error, complete: complete }\n        : observerOrNext;\n    return tapObserver\n        ? operate(function (source, subscriber) {\n            var _a;\n            (_a = tapObserver.subscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n            var isUnsub = true;\n            source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                var _a;\n                (_a = tapObserver.next) === null || _a === void 0 ? void 0 : _a.call(tapObserver, value);\n                subscriber.next(value);\n            }, function () {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.complete) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                subscriber.complete();\n            }, function (err) {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.error) === null || _a === void 0 ? void 0 : _a.call(tapObserver, err);\n                subscriber.error(err);\n            }, function () {\n                var _a, _b;\n                if (isUnsub) {\n                    (_a = tapObserver.unsubscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                }\n                (_b = tapObserver.finalize) === null || _b === void 0 ? void 0 : _b.call(tapObserver);\n            }));\n        })\n        :\n            identity;\n}\n//# sourceMappingURL=tap.js.map","export const safeStringifyValue = (value: any, space?: number) => {\n  if (!value) {\n    return '';\n  }\n\n  try {\n    return JSON.stringify(value, null, space);\n  } catch (error) {\n    console.error(error);\n  }\n\n  return '';\n};\n","import { DataSourcePlugin } from '@grafana/data';\n\nimport PromQueryEditorByApp from './components/PromQueryEditorByApp';\nimport { ConfigEditor } from './configuration/ConfigEditor';\nimport { PrometheusDatasource } from './datasource';\n\nexport const plugin = new DataSourcePlugin(PrometheusDatasource)\n  .setQueryEditor(PromQueryEditorByApp)\n  .setConfigEditor(ConfigEditor)\n","import { DataSourceInstanceSettings, DataSourceJsonData, isValidGoDuration, rangeUtil } from '@grafana/data';\nimport { config } from '@grafana/runtime';\n\nexport function getAllDataSources(): Array<DataSourceInstanceSettings<DataSourceJsonData>> {\n  return Object.values(config.datasources);\n}\n\nexport function checkEvaluationIntervalGlobalLimit(alertGroupEvaluateEvery?: string) {\n  if (!alertGroupEvaluateEvery || !isValidGoDuration(alertGroupEvaluateEvery)) {\n    return { globalLimit: 0, exceedsLimit: false };\n  }\n\n  if (!isValidGoDuration(config.unifiedAlerting.minInterval)) {\n    return { globalLimit: 0, exceedsLimit: false };\n  }\n\n  const evaluateEveryMs = rangeUtil.intervalToMs(alertGroupEvaluateEvery);\n  const evaluateEveryGlobalLimitMs = rangeUtil.intervalToMs(config.unifiedAlerting.minInterval);\n\n  const exceedsLimit = evaluateEveryGlobalLimitMs > evaluateEveryMs && evaluateEveryMs > 0;\n\n  return { globalLimit: evaluateEveryGlobalLimitMs, exceedsLimit };\n}\n"],"names":["inProgress","e","t","a","default","n","l","s","Object","assign","arguments","length","prototype","hasOwnProperty","call","apply","this","u","Symbol","iterator","o","next","done","push","value","error","return","c","d","exports","Keys","Credentials","Default","EC2IAMRole","ARN","p","h","label","f","v","i","r","m","g","y","b","useState","standardRegions","map","D","w","E","loadRegions","A","onOptionsChange","S","skipHeader","C","x","skipEndpoint","V","I","options","F","jsonData","profile","database","O","window","grafanaBootData","settings","R","awsAllowedAuthProviders","j","awsAssumeRoleEnabled","K","find","authType","useEffect","then","createElement","FieldSet","InlineField","labelWidth","tooltip","Select","className","filter","includes","defaultValue","onChange","onUpdateDatasourceJsonDataOptionSelect","menuShouldPortal","Input","placeholder","onUpdateDatasourceJsonDataOption","Fragment","secureJsonFields","accessKey","ButtonGroup","disabled","ToolbarButton","icon","type","onClick","onUpdateDatasourceResetOption","secureJsonData","onUpdateDatasourceSecureJsonDataOption","secretKey","assumeRoleArn","externalId","defaultEndpoint","endpoint","defaultRegion","allowCustomValue","formatCreateLabel","children","Previous","Null","Value","SIGV4ConnectionConfig","sigV4AuthType","sigV4Profile","sigV4AssumeRoleArn","sigV4ExternalId","sigV4Region","sigV4Endpoint","sigV4AccessKey","sigV4SecretKey","module","TimePicker","openButton","fromField","toField","applyTimeRange","calendar","closeButton","absoluteTimeRangeTitle","DataSource","TestData","QueryTab","scenarioSelectContainer","scenarioSelect","max","min","noise","seriesCount","spread","startValue","drop","DataSourceHttpSettings","urlInput","Jaeger","traceIDInput","Prometheus","configPage","exemplarsAddButton","internalLinkSwitch","exemplarMarker","Menu","MenuComponent","MenuGroup","MenuItem","SubMenu","container","Panels","Panel","title","headerItems","containerByTitle","headerCornerInfo","Visualization","Graph","VisualizationTab","legendSection","Legend","legendItemAlias","showLegendSwitch","xAxis","labels","BarGauge","valueV2","PieChart","svgSlice","Text","Table","header","footer","VizLegend","seriesName","Drawer","General","expand","contract","close","rcContentWrapper","PanelEditor","content","OptionsPane","select","fieldLabel","DataPane","applyButton","toggleVizPicker","toggleVizOptions","toggleTableView","PanelInspector","Data","Stats","Json","Query","refreshButton","jsonObjectKeys","Tab","active","RefreshPicker","runButton","intervalButton","runButtonV2","intervalButtonV2","queryInspectorButton","queryHistoryButton","addQuery","QueryHistory","queryText","QueryEditorRows","rows","QueryEditorRow","actionButton","AlertTab","Alert","alert","alertV2","TransformTab","newTransform","transformationEditor","transformationEditorDebugger","Transforms","card","Reduce","modeLabel","calculationsLabel","searchInput","PageToolbar","item","QueryEditorToolbarItem","button","BackButton","backArrow","OptionsGroup","group","toggle","PluginVisualization","current","option","input","singleValue","FieldConfigEditor","OverridesConfigEditor","FolderPicker","containerV2","ReadonlyFolderPicker","DataSourcePicker","inputV2","TimeZonePicker","WeekStartPicker","TraceViewer","spanBar","QueryField","QueryBuilder","queryPatterns","labelSelect","valueSelect","matchOperatorSelect","ValuePicker","Search","section","sectionV2","items","itemsV2","cards","collapseFolder","expandFolder","dashboardItem","dashboardItems","dashboardCard","DashboardLinks","dropDown","link","LoadingIndicator","CallToActionCard","buttonV2","DataLinksContextMenu","singleLink","CodeEditor","DashboardImportPage","textarea","submit","ImportDashboardForm","name","PanelAlertTabContent","VisualizationPreview","ColorSwatch","DashboardRow","UserProfile","profileSaveButton","preferencesSaveButton","orgsTable","sessionsTable","FileUpload","inputField","fileNameSpan","pages","Login","url","username","password","skip","Home","delete","readOnly","saveAndTest","DataSources","dataSources","AddDataSource","dataSourcePlugins","dataSourcePluginsV2","ConfirmModal","AddDashboard","addNewPanel","addNewRow","addNewPanelLibrary","Dashboard","DashNav","nav","navV2","publicDashboardTag","submenu","submenuItem","submenuItemLabels","submenuItemValueDropDownValueLinkTexts","submenuItemValueDropDownDropDown","submenuItemValueDropDownOptionTexts","Settings","deleteDashBoard","sectionItems","saveDashBoard","saveAsDashBoard","timezone","Annotations","List","addAnnotationCTA","addAnnotationCTAV2","Variables","addVariableCTA","addVariableCTAV2","newButton","table","tableRowNameFields","tableRowDefinitionFields","tableRowArrowUpButtons","tableRowArrowDownButtons","tableRowDuplicateButtons","tableRowRemoveButtons","Edit","headerLink","modeLabelNew","modeLabelEdit","generalNameInput","generalNameInputV2","generalTypeSelect","generalTypeSelectV2","generalLabelInput","generalLabelInputV2","generalHideSelect","generalHideSelectV2","selectionOptionsMultiSwitch","selectionOptionsIncludeAllSwitch","selectionOptionsCustomAllInput","selectionOptionsCustomAllInputV2","previewOfValuesOption","submitButton","QueryVariable","queryOptionsDataSourceSelect","queryOptionsRefreshSelect","queryOptionsRefreshSelectV2","queryOptionsRegExInput","queryOptionsRegExInputV2","queryOptionsSortSelect","queryOptionsSortSelectV2","queryOptionsQueryInput","valueGroupsTagsEnabledSwitch","valueGroupsTagsTagsQueryInput","valueGroupsTagsTagsValuesQueryInput","ConstantVariable","constantOptionsQueryInput","constantOptionsQueryInputV2","DatasourceVariable","datasourceSelect","TextBoxVariable","textBoxOptionsQueryInput","textBoxOptionsQueryInputV2","CustomVariable","customValueInput","IntervalVariable","intervalsValueInput","Dashboards","dashboards","SaveDashboardAsModal","newName","save","SaveDashboardModal","saveVariables","saveTimerange","SharePanelModal","linkToRenderedImage","ShareDashboardModal","shareButton","PublicDashboard","WillBePublicCheckbox","LimitedDSCheckbox","CostIncreaseCheckbox","EnableSwitch","SaveConfigButton","CopyUrlInput","CopyUrlButton","TemplateVariablesWarningAlert","Explore","graph","scrollView","SoloPanel","PluginsList","page","list","listItem","signatureErrorNotice","PluginPage","signatureInfo","disabledInfo","PlaylistForm","interval","itemRow","itemIdType","itemTagType","itemMoveUp","itemMoveDown","itemDelete","components","selectors","perf","performance","now","Date","AC","AbortController","constructor","signal","AS","abort","dispatchEvent","hasAbortSignal","AbortSignal","hasACAbortSignal","aborted","_listeners","target","onabort","forEach","addEventListener","ev","fn","removeEventListener","warned","Set","deprecatedOption","opt","instead","code","shouldWarn","warn","LRUCache","deprecatedMethod","method","get","getOwnPropertyDescriptor","emitWarning","process","console","has","what","add","isPosInt","Math","floor","isFinite","getUintArray","pow","Uint8Array","Uint16Array","Uint32Array","Number","MAX_SAFE_INTEGER","ZeroArray","Array","size","super","fill","Stack","UintArray","heap","pop","ttl","ttlResolution","ttlAutopurge","updateAgeOnGet","updateAgeOnHas","allowStale","dispose","disposeAfter","noDisposeOnSet","noUpdateTTL","maxSize","maxEntrySize","sizeCalculation","fetchMethod","fetchContext","noDeleteOnFetchRejection","noDeleteOnStaleGet","maxAge","stale","TypeError","Error","undefined","keyMap","Map","keyList","valList","prev","head","tail","free","initialFill","disposed","initializeSizeTracking","initializeTTLTracking","getRemainingTTL","key","Infinity","ttls","starts","setItemTTL","index","start","setTimeout","isStale","unref","updateItemAge","cachedNow","getNow","calculatedSize","sizes","removeItemSize","requireSize","k","addItemSize","evict","isValidIndex","indexes","rindexes","entries","getOptions","thisp","rforEach","prune","purgeStale","deleted","dump","arr","entry","isBackgroundFetch","__staleWhileFetching","age","unshift","load","clear","set","reason","newIndex","oldVal","__abortController","moveToTail","shift","val","peek","backgroundFetch","context","ac","fetchOpts","Promise","res","er","__returned","async","forceRefresh","fetching","connect","del","reset","field","deprecatedProperty","pluralRules","singularRules","uncountables","irregularPlurals","irregularSingles","sanitizeRule","rule","RegExp","restoreCase","word","token","toLowerCase","toUpperCase","charAt","substr","interpolate","str","args","replace","match","result","sanitizeWord","rules","len","test","replaceWord","replaceMap","keepMap","checkWord","bool","pluralize","count","inclusive","singular","plural","isPlural","isSingular","addPluralRule","replacement","addSingularRule","addUncountableRule","addIrregularRule","single","hasElementType","Element","hasMap","hasSet","hasArrayBuffer","ArrayBuffer","isView","equal","keys","it","isArray","source","flags","valueOf","toString","$$typeof","message","modules","installedModules","moduleId","id","loaded","defineProperty","obj","_Highlighter2","__esModule","_extends","_interopRequireDefault","Highlighter","_highlightWordsCore","_propTypes2","_react","_memoizeOne2","_ref","_ref$activeClassName","activeClassName","_ref$activeIndex","activeIndex","activeStyle","autoEscape","_ref$caseSensitive","caseSensitive","findChunks","_ref$highlightClassName","highlightClassName","_ref$highlightStyle","highlightStyle","_ref$highlightTag","highlightTag","sanitize","searchWords","textToHighlight","_ref$unhighlightClassName","unhighlightClassName","unhighlightStyle","rest","indexOf","_objectWithoutProperties","chunks","findAll","HighlightTag","highlightIndex","highlightClassNames","highlightStyles","memoizedLowercaseProps","object","mapped","chunk","text","end","highlight","highlightClass","isActive","props","style","propTypes","string","number","func","oneOfType","node","arrayOf","instanceOf","isRequired","_utils","enumerable","combineChunks","fillInChunks","_ref$findChunks","defaultFindChunks","chunksToHighlight","totalLength","_ref2","sort","first","second","reduce","processedChunks","nextChunk","prevChunk","endIndex","_ref3","_ref3$sanitize","identity","searchWord","regex","exec","lastIndex","_ref4","allChunks","append","env","NODE_ENV","REACT_ELEMENT_TYPE","for","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","marker","runClearTimeout","Item","array","noop","nextTick","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","emptyFunction","invariant","warning","ReactPropTypesSecret","checkPropTypes","isValidElement","throwOnDirectAccess","ITERATOR_SYMBOL","ANONYMOUS","ReactPropTypes","createPrimitiveTypeChecker","symbol","any","createChainableTypeChecker","thatReturnsNull","typeChecker","propName","componentName","location","propFullName","PropTypeError","propValue","getPropType","element","expectedClass","expectedClassName","isNode","objectOf","propType","oneOf","expectedValues","JSON","stringify","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","shape","shapeTypes","exact","allKeys","stack","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","secret","cacheKey","chainedCheckType","bind","expectedType","getPreciseType","every","iteratorFn","maybeIterable","getIteratorFn","step","isSymbol","PropTypes","makeEmptyFunction","arg","thatReturns","thatReturnsFalse","thatReturnsTrue","thatReturnsThis","thatReturnsArgument","validateFormat","format","condition","argIndex","framesToPop","printWarning","_len","_key","_len2","_key2","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","test1","String","getOwnPropertyNames","test2","fromCharCode","join","test3","split","letter","err","shouldUseNative","from","symbols","to","loggedTypeFailures","typeSpecs","values","getStack","typeSpecName","ex","shim","getShim","simpleIsEqual","resultFn","isEqual","lastThis","lastArgs","lastResult","calledOnce","isNewArgEqualToLast","newArg","newArgs","__WEBPACK_EXTERNAL_MODULE__7644__","__WEBPACK_EXTERNAL_MODULE__3305__","__WEBPACK_EXTERNAL_MODULE__3545__","__WEBPACK_EXTERNAL_MODULE__7388__","__WEBPACK_EXTERNAL_MODULE__5980__","__WEBPACK_EXTERNAL_MODULE__3342__","__WEBPACK_EXTERNAL_MODULE__2650__","__WEBPACK_EXTERNAL_MODULE__2729__","__WEBPACK_EXTERNAL_MODULE__3929__","__WEBPACK_EXTERNAL_MODULE__3129__","__WEBPACK_EXTERNAL_MODULE__1177__","__webpack_module_cache__","__webpack_require__","cachedModule","__webpack_modules__","amdO","getter","definition","chunkId","all","promises","globalThis","Function","prop","script","needAttach","scripts","document","getElementsByTagName","getAttribute","charset","nc","setAttribute","src","onScriptComplete","event","onerror","onload","doneFns","parentNode","removeChild","appendChild","toStringTag","baseURI","self","href","installedChunks","installedChunkData","promise","resolve","reject","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","AccessoryButton","theme","useTheme2","styles","getButtonStyles","Button","cx","stylesFactory","css","paddingLeft","spacing","paddingRight","useStyles2","useCallback","getStyles","div","root","display","flexDirection","direction","flexWrap","wrap","alignItems","gap","flexGrow","EditorFieldGroup","EditorHeader","minHeight","Space","span","wrapper","defaultProps","layout","paddingBottom","EditorField","optional","width","fieldProps","childInputId","htmlFor","ReactUtils","labelEl","Tooltip","placement","Icon","Field","minWidth","fontSize","fontWeight","typography","fontWeightMedium","fontStyle","color","colors","secondary","marginBottom","marginLeft","primary","EditorRow","padding","backgroundColor","background","borderRadius","EditorList","renderItem","newItem","itemIndex","newItems","onChangeItem","splice","onDeleteItem","variant","aria-label","EditorRows","EditorSwitch","switch","Switch","FlexItem","grow","shrink","flexShrink","InlineSelect","labelProp","random","slice","getSelectStyles","SelectContainer","ValueContainer","SingleValue","openMenuOnFocus","inputId","BaseSelectContainer","valueContainer","whiteSpace","borderColor","flex","InputGroup","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","position","zIndex","RATE_RANGES","sortValue","FUNCTIONS","insertText","detail","documentation","metricsqlGrammar","comment","pattern","lookbehind","inside","alias","punctuation","greedy","function","idList","operator","LabelParamEditor","operationIndex","query","datasource","state","setState","getOperationParamId","autoFocus","onOpenMenu","isLoading","loadGroupByLabels","noOptionsMessage","loadingMessage","toOption","op","metric","expr","promQueryModeller","renderLabels","languageProvider","fetchSeriesLabels","functionRendererLeft","model","def","innerExpr","params","renderParams","functionRendererRight","rangeRendererWithParams","renderLeft","rangeVector","defaultParams","rangeRendererRightWithParams","rangeRendererLeftWithParams","defaultAddOperationHandler","newOperation","operations","getPromAndLokiOperationDisplayName","funcName","capitalize","paramIndex","getRangeVectorParamDef","withRateInterval","param","createAggregationOperation","overrides","aggregation","changeToOperationId","restParam","alternativesKey","category","PromVisualQueryOperationCategory","Aggregations","renderer","paramChangedHandler","explainHandler","getAggregationExplainer","addOperationHandler","editor","getLastLabelRemovedHandler","hideFromList","getAggregationWithoutRenderer","createAggregationOperationWithParam","paramsDef","getAggregationByRendererWithParameter","aggregationName","mode","labelWord","restParamIndex","findIndex","restParams","idx","Functions","Trigonometric","PromOperationId","binaryScalarDefs","Addition","sign","Subtraction","MultiplyBy","DivideBy","Modulo","Exponent","EqualTo","comparison","NotEqualTo","GreaterThan","LessThan","GreaterOrEqual","LessOrEqual","binaryScalarOperatorToOperatorName","acc","binaryScalarOperations","opDef","description","BinaryOps","getSimpleBinaryRenderer","createFunction","createRangeFunction","RangeFunctions","operationWithRangeVectorRenderer","addOperationWithRangeVector","changeTypeHandler","operationTypeChangedHandlerForRangeFunction","operation","newDef","modeller","getOperationDef","addNestedQueryHandler","binaryQueries","labelJoinRenderer","separator","labelJoinAddOperationHandler","createAggregationOverTime","PromQueryModeller","categories","getOperationsForCategory","operationsRegistry","getAlternativeOperations","getCategories","getIfExists","renderOperations","queryString","renderBinaryQueries","binQuery","renderBinaryQuery","leftOperand","binaryQuery","vectorMatches","vectorMatchesType","renderQuery","nested","hasBinaryOp","Boolean","getOperations","Registry","getQueryPatterns","allOperations","HistogramQuantile","LabelReplace","Ln","Changes","Rate","Irate","Increase","Idelta","Delta","HoltWinters","PredictLinear","QuantileOverTime","NestedQuery","Absent","Acos","Acosh","Asin","Asinh","Atan","Atanh","Ceil","Clamp","ClampMax","ClampMin","Cos","Cosh","DayOfMonth","Time","DayOfWeek","DaysInMonth","Deg","Deriv","Exp","Floor","Group","Hour","LabelJoin","Log10","Log2","Minute","Month","Pi","Quantile","Rad","Resets","Round","Scalar","Sgn","Sin","Sinh","Sort","SortDesc","Sqrt","Stddev","Tan","Tanh","Timestamp","Vector","Year","Sum","Avg","Min","Max","Count","TopK","BottomK","CountValues","SumOverTime","AvgOverTime","MinOverTime","MaxOverTime","CountOverTime","LastOverTime","PresentOverTime","AbsentOverTime","StddevOverTime","setOperationCategories","DefaultBufferLength","nextPropID","Range","config","perNode","deserialize","RangeError","NodeType","closedBy","openedBy","contextHash","lookAhead","mounted","noProps","create","static","spec","top","skipped","isTop","isSkipped","isError","isAnonymous","is","direct","groups","found","none","NodeSet","types","extend","newTypes","newProps","CachedNode","WeakMap","CachedInnerNode","IterMode","Tree","positions","overlay","tree","ch","cursor","TreeCursor","topNode","cursorAt","pos","side","scope","moveTo","_tree","TreeNode","resolveNode","resolveInner","iterate","enter","leave","IncludeAnonymous","entered","firstChild","nextSibling","parent","propValues","balance","balanceRange","makeTree","_a","buffer","nodeSet","maxBufferLength","reused","minRepeatType","FlatBufferCursor","takeNode","parentStart","minPos","inRepeat","lookAheadAtStart","startPos","fork","minStart","scan","nodeSize","localSkipped","nodeStart","findBufferSize","endPos","copyToBuffer","TreeBuffer","localChildren","localPositions","localInRepeat","lastGroup","lastEnd","makeRepeatLeaf","reverse","make","last","lookAheadProp","lastI","makeBalanced","base","pair","bufferStart","startIndex","topID","buildTree","empty","childString","findChild","pick","checkSide","startI","endI","copy","enterUnfinishedNodesBefore","childBefore","lastChild","prevSibling","overlays","IgnoreOverlays","inner","_parent","nextChild","ExcludeBuffers","BufferNode","BufferContext","hasChild","IgnoreMounts","childAfter","rPos","nextSignificantParent","toTree","getChild","before","after","getChildren","matchContext","matchNodeContext","cur","child","externalSibling","bufferNode","yieldNode","yieldBuf","yield","enterChild","sibling","atLastNode","move","cache","depth","mustLeave","nodeSizeCache","balanceType","mkTop","mkTree","total","maxChild","ceil","divide","offset","groupFrom","groupStart","groupSize","nextSize","only","StringInput","lineChunks","read","reducePos","score","bufferBase","curContext","_","parser","StackContext","pushState","action","dPrec","dynamicPrecedence","getGoto","minRepeatTerm","storeNode","reduceContext","stateFlag","baseStateID","term","isReduce","nextEnd","nextState","maxNode","shiftContext","useNode","updateContext","tracker","reuse","stream","recoverByDelete","canShift","sim","SimulatedStack","stateSlot","hasAction","recoverByInsert","nextStates","best","forceReduce","validAction","forceAll","deadEnd","restart","sameState","other","dialectEnabled","dialectID","dialect","emitContext","hash","emitLookAhead","newCx","setLookAhead","strict","Recover","goto","StackBufferCursor","maybeNext","CachedToken","extended","mask","nullToken","InputStream","ranges","chunkOff","chunk2","chunk2Pos","rangeIndex","chunkPos","range","readNext","resolveOffset","assoc","charCodeAt","resolved","acceptToken","endOffset","getChunk","advance","setDone","TokenGroup","groupMask","accEnd","allows","low","high","mid","readToken","decodeArray","Type","out","stop","digit","contextual","fallback","verbose","LOG","stackIDs","Safety","Rec","cutAt","fragments","fragment","safeFrom","safeTo","trees","nextFragment","fr","openStart","openEnd","nextStart","nodeAt","TokenCache","tokens","mainToken","actions","tokenizers","getActions","actionIndex","main","tokenizer","updateCachedToken","addActions","eofTerm","getMainToken","specialized","specializers","putAction","Parse","recovering","nextStackID","minStackPos","stoppedAt","topTerm","stacks","bufferLength","parsedPos","stopped","stoppedTokens","newStacks","advanceStack","tok","finished","findFinished","stackToTree","log","getName","SyntaxError","runRecovery","maxRemaining","outer","stopAt","stackID","strictCx","cxHash","cached","defaultReduce","localStack","advanceFully","pushStackDedup","restarted","tokenEnd","force","forceBase","insert","build","fromCodePoint","Dialect","LRParser","startParse","createParse","parse","wrappers","nodeNames","repeatNodeCount","topTerms","topRules","nodeProps","setProp","nodeID","propSpec","define","skippedNodes","propSources","tokenArray","tokenData","states","stateData","maxTerm","dialects","dynamicPrecedences","tokenPrecTable","tokenPrec","termNames","parseDialect","loose","groupTag","terminal","slot","flag","iPrev","findOffset","configure","info","contextTracker","hasWrappers","prec","part","nextTagID","Tag","modified","tag","mod","Modifier","nextModifierID","instances","mods","exists","sameArray","configs","permute","ruleNodeProp","Rule","tags","opaque","inherit","typeName","propertyName","literal","heading","keyword","bracket","meta","lineComment","blockComment","docComment","variableName","tagName","attributeName","labelName","namespace","macroName","docString","character","attributeValue","integer","float","regexp","escape","null","atom","unit","modifier","operatorKeyword","controlKeyword","definitionKeyword","moduleKeyword","derefOperator","arithmeticOperator","logicOperator","bitwiseOperator","compareOperator","updateOperator","definitionOperator","typeOperator","controlOperator","angleBracket","squareBracket","paren","brace","heading1","heading2","heading3","heading4","heading5","heading6","contentSeparator","quote","emphasis","strong","monospace","strikethrough","inserted","changed","invalid","documentMeta","annotation","processingInstruction","defineModifier","constant","standard","local","special","keywordTokens","class","tagHighlighter","inf","nan","ignoring","group_left","group_right","contextualKeywordTokens","avg","atan2","bottomk","count_values","quantile","stddev","stdvar","sum","topk","by","without","and","or","unless","promQLHighLight","byName","pieces","styleTags","LineComment","LabelName","StringLiteral","NumberLiteral","Duration","UnaryOp","spec_Identifier","__proto__","absent_over_time","absent","abs","acos","acosh","asin","asinh","atan","atanh","avg_over_time","changes","clamp","clamp_max","clamp_min","cos","cosh","count_over_time","days_in_month","day_of_month","day_of_week","day_of_year","deg","delta","deriv","exp","histogram_quantile","holt_winters","hour","idelta","increase","irate","label_replace","label_join","last_over_time","ln","log10","log2","max_over_time","min_over_time","minute","month","pi","predict_linear","present_over_time","quantile_over_time","rad","rate","resets","round","scalar","sgn","sin","sinh","sort_desc","sqrt","stddev_over_time","stdvar_over_time","sum_over_time","tan","tanh","timestamp","time","vector","year","specializeIdentifier","extendIdentifier","VectorSelector","MetricIdentifier","LabelMatchList","LabelMatcher","getLeftMostChild","makeError","getString","parentType","variableRegex","varTypeFunc","parseInt","returnVariables","substring","makeBinOp","numberNode","hasBool","parseFloat","getAllByType","buildVisualQueryFromString","replacedExpr","var1","var2","fmt2","var3","fieldPath","fmt3","fmt","variable","varType","replaceVariables","errors","handleExpression","visQuery","getLabel","callArgs","rangeFunctions","endsWith","updateFunctionArgs","handleFunction","handleAggregation","left","binModifier","isBool","isMatcher","matcher","matches","matchType","getBinaryModifier","right","leftNumber","rightNumber","rightBinary","leftMostChild","handleBinary","isIntervalVariableError","FeedbackLink","feedbackUrl","rel","reportInteraction","bodySmall","QueryEditorMode","editorModes","Builder","component","verticalAlign","colorIndex","Code","QueryEditorModeToggle","data-testid","RadioButtonGroup","QueryHeaderSwitch","inputProps","dashedLabel","switchIdRef","useRef","uniqueId","switchLabel","localStorage","getBool","getObject","ret","json","setObject","errorToThrow","removeItem","useFlag","updateFlag","store","getFlagValue","setFlag","setFlagValue","isMatrixData","PromQueryType","timeSeriesQuery","LegendFormatMode","queryEditorModeDefaultLocalStorageKey","changeEditorMode","editorMode","getDefaultEditorMode","Q","getPrototypeOf","Z","L","nn","X","q","rn","writable","configurable","freeze","isFrozen","tn","U","P","M","H","z","N","T","en","Proxy","revocable","revoke","proxy","J","G","W","B","Reflect","ownKeys","getOwnPropertyDescriptors","deleteProperty","setPrototypeOf","un","produce","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","path","$","an","__extends","extendStatics","__","__spreadArray","il","__defProp","__getOwnPropSymbols","defineProperties","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","_i","_c","freezeDraftable","createAction","prepareAction","actionCreator","prepared","payload","executeReducerBuilderCallback","builderCallback","defaultCaseReducer","actionsMap","actionMatchers","builder","addCase","typeOrActionCreator","reducer","addMatcher","addDefaultCase","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","__REDUX_DEVTOOLS_EXTENSION__","_super","MiddlewareArray","_this","species","prepend","alm","addLabelToQuery","vectorSelectorPositions","getVectorSelectorPositions","toLabelFilter","newQuery","isLast","labelExists","addFilter","selectorRegexp","labelRegexp","parseSelector","cursorOffset","selector","labelKeys","prefix","prefixOpen","lastIndexOf","prefixClose","suffix","suffixClose","suffixOpenIndex","suffixOpen","labelOffset","valueStart","valueEnd","metricMatch","cleanSelector","roundMsToMin","milliseconds","roundSecToMin","seconds","limitSuggestions","SUGGESTIONS_LIMIT","addLimitInfo","RE2_METACHARACTERS","escapeLabelValueInExactSelector","labelValue","escapeLabelValueInRegexSelector","FromPromLikeMap","AbstractLabelOperator","ToPromLikeMap","invert","toPromLikeExpr","labelBasedQuery","labelMatchers","DEFAULT_KEYS","wrapLabel","setFunctionKind","suggestion","kind","getMetadataString","metadata","help","PREFIX_DELIMITER_REGEX","PromQlLanguageProvider","LanguageProvider","cleanText","trimLeft","syntax","PromqlSyntax","metricsMetadata","baseMetadata","summaryMetadata","syntheticMetadata","fixSummariesMetadata","showErrorAlert","getLabelKeys","getRangeCompletionItems","suggestions","importFromAbstractQuery","refId","toPromLikeQuery","exportToAbstractQuery","promQuery","Prism","Token","labelKey","labelOperator","contentTokens","currentToken","currentStr","labelComparator","extractLabelMatchers","nameLabelValue","getNameLabelValue","withName","lookupsDisabled","fetchDefaultSeries","fetchLabelValues","getTimeRangeParams","labelFetchTs","initialValues","labelsCache","LRU","metadataRequest","fetchLabels","metrics","loadMetricsMetadata","histogramMetrics","resultSet","processHistogramMetrics","provideCompletionItems","wrapperClasses","emptyResult","selectedLines","getTextsAtRange","selection","currentLine","getText","nextCharacter","anchor","tokenRecognized","prefixUnrecognized","noSuffix","safePrefix","isNextOperand","getLabelCompletionItems","getAggregationCompletionItems","getEmptyCompletionItems","getBeginningCompletionItems","getTermCompletionItems","history","historyItems","chain","uniq","take","cutoffTs","historyForItem","ts","recent","hint","dateTime","fromNow","addHistoryMetadata","searchFunctionType","SearchFunctionType","skipSort","addMetricsMetadata","queryOffset","getBlocks","block","blockText","anchorBlock","openParensAggregationIndex","openParensSelectorIndex","closeParensSelectorIndex","closeParensAggregationIndex","selectorString","series","getSeries","limitInfo","line","isValueStart","isValueEnd","isPreValue","parsedSelector","containsMetric","existingKeys","possibleKeys","difference","newSuggestion","interpolateString","interpolatedName","urlParams","URLSearchParams","valueSet","__name__","valueArray","processLabels","fetchSeries","timeRange","LabelFilterItem","defaultOp","onDelete","onGetLabelNames","onGetLabelValues","isMultiSelect","operators","isMultiValue","getSelectOptionsFromString","isLoadingLabelNames","labelNames","change","isLoadingLabelValues","labelValues","isMulti","selectedOptions","uniqBy","LabelFilters","labelsFilters","setItems","newLabels","OperationExplainedBox","stepNumber","markdown","box","boxInner","body","dangerouslySetInnerHTML","__html","renderMarkdown","height","justifyContent","fontFamily","fontFamilyMonospace","margin","textDecoration","_setPrototypeOf","_inheritsLoose","subClass","superClass","useMemoOne","getResult","inputs","initial","isFirstRun","committed","useCache","newInputs","lastInputs","areInputsEqual","useMemo","callback","getRect","bottom","center","expandBy","shrinkBy","noSpacing","createBox","borderBox","_ref2$margin","_ref2$border","border","_ref2$padding","marginBox","paddingBox","contentBox","raw","isNaN","original","shiftBy","shifted","withScroll","scroll","pageXOffset","pageYOffset","calculateBox","marginTop","marginRight","paddingTop","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","getBox","el","getBoundingClientRect","getComputedStyle","safeIsNaN","frameId","wrapperFn","requestAnimationFrame","cancel","cancelAnimationFrame","bindEvents","bindings","sharedOptions","unbindings","shared","fromBinding","eventName","unbind","RbdInvariant","ErrorBoundary","_React$Component","callbacks","onWindowError","getCallbacks","isDragging","tryAbort","preventDefault","setCallbacks","_proto","componentDidMount","componentDidCatch","componentWillUnmount","render","withLocation","destination","isInHomeList","droppableId","startPosition","endPosition","withCombine","combine","draggableId","returnedToStart","preset","update","origin","point1","point2","subtract","negate","point","patch","otherValue","distance","closest","points","offsetByPosition","getCorners","clip","frame","shouldClipSubject","subject","executeClip","pageMarginBox","getSubject","withPlaceholder","axis","scrolled","diff","displacement","increased","_extends2","increasedBy","scrollDroppable","droppable","newScroll","scrollable","scrollDiff","scrollDisplacement","predicate","toArray","toDroppableMap","droppables","previous","descriptor","toDraggableMap","draggables","toDroppableList","toDraggableList","getDraggablesInsideDroppable","draggable","tryGetDestination","impact","at","tryGetCombine","removeDraggableFromList","remove","isHomeOf","noDisplacedBy","emptyGroups","invisible","visible","noImpact","displaced","displacedBy","isWithin","lowerBound","upperBound","isPartiallyVisibleThroughFrame","isWithinVertical","isWithinHorizontal","isPartiallyVisibleVertically","isPartiallyVisibleHorizontally","isBiggerVertically","isBiggerHorizontally","isTotallyVisibleThroughFrame","vertical","crossAxisLine","crossAxisStart","crossAxisEnd","crossAxisSize","horizontal","isVisible","toBeDisplaced","viewport","withDroppableDisplacement","isVisibleThroughFrameFn","displacedTarget","getDroppableDisplaced","isVisibleInDroppable","isVisibleInViewport","isTotallyVisible","getDisplacementGroups","afterDragging","forceShouldAnimate","getTarget","shouldAnimate","getShouldAnimate","goAtEnd","insideDestination","inHomeList","indexOfLastItem","getIndexOfLastItem","calculateReorderImpact","withoutDragging","sliceFrom","didStartAfterCritical","afterCritical","effected","distanceFromStartToBorderBoxCenter","getCrossAxisBorderBoxCenter","isMoving","goAfter","moveRelativeTo","goBefore","distanceFromEndToBorderBoxCenter","getPageBorderBoxCenterFromImpact","withoutDisplacement","draggablePage","moveInto","goIntoStart","closestAfter","withDisplacement","whenReordering","combineWith","displaceBy","isDisplaced","getCombinedItemDisplacement","whenCombining","getResultWithoutDroppableDisplacement","scrollViewport","getDraggables","ids","getClientFromPageBorderBoxCenter","pageBorderBoxCenter","withoutPageScrollChange","withViewportDisplacement","client","isTotallyVisibleInNewLocation","newPageBorderBoxCenter","_ref$onlyOnMainAxis","onlyOnMainAxis","changeNeeded","isTotallyVisibleOnAxis","moveToNextPlace","isMovingForward","previousImpact","previousPageBorderBoxCenter","previousClientSelection","isEnabled","isCombineEnabled","getImpact","closestId","withoutDraggable","indexOfClosest","proposedIndex","moveToNextCombine","wasAt","_newIndex","currentIndex","firstIndex","fromReorder","combineId","combineWithIndex","fromCombine","moveToNextIndex","clientSelection","scrollJumpRequest","cautious","maxScrollChange","scrolledViewport","scrolledDroppable","withViewportScroll","withDroppableScroll","tryGetVisible","speculativelyIncrease","getKnownActive","rect","getCurrentPageBorderBoxCenter","getCurrentPageBorderBox","getDisplacedBy","withMaxScroll","addPlaceholder","placeholderSize","requiredGrowth","availableSpace","needsToGrowBy","dimension","getRequiredGrowthForPlaceholder","added","oldFrameMaxScroll","maxScroll","newFrame","whatIsDraggedOver","moveInDirection","isActuallyOver","getDroppableOver","dimensions","isMainAxisMovementAllowed","home","critical","isOver","isMovingOnMainAxis","borderBoxCenter","_state$dimensions","isBetweenSourceClipped","candidates","activeOfTarget","isBetweenDestinationClipped","contains","isWithinDroppable","getBestCrossAxisDroppable","sorted","distanceToA","distanceToB","getClosestDraggable","proposed","proposedPageBorderBoxCenter","relativeTo","isGoingBeforeTarget","moveToNewDroppable","moveCrossAxis","isMovementAllowed","phase","isPositionInFrame","offsetRectByPosition","getIsDisplaced","getDragImpact","pageOffset","pageBorderBox","destinationId","childCenter","isContained","isStartContained","isEndContained","startCenter","candidate","getFurthestAway","getDroppableOver$1","pageBorderBoxWithDroppableScroll","area","targetRect","targetStart","targetEnd","childRect","threshold","didStartAfterCritical$1","getCombineImpact","atIndex","getReorderImpact","patchDroppableMap","updated","forcedClientSelection","forcedDimensions","forcedViewport","forcedImpact","newImpact","withUpdatedPlaceholders","cleaned","lastDroppable","oldMaxScroll","removePlaceholder","clearUnusedPlaceholder","patched","recomputePlaceholders","recompute","getDraggables$1","getClientBorderBoxCenter","refreshSnap","movementMode","needsVisibilityCheck","getLiftEffect","insideHome","rawIndex","inVirtualList","isSnapping","postDroppableChange","isEnabledChanging","patchDimensionMap","removeScrollJumpRequest","idle","completed","shouldFlush","_action$payload","isWindowScrollAllowed","isFixedOnPage","_getLiftEffect","onLiftImpact","published","withScrollChange","existing","updatedAdditions","additions","updatedDroppables","windowScrollChange","getFrame","droppableScrollChange","moved","offset$1","initialWindowScroll","offsetDraggable","adjustAdditionsForScrollChanges","removals","wasOverId","wasOver","draggingState","isWaiting","publishWhileDraggingInVirtual","_clientSelection","_action$payload2","_action$payload3","_id","_target","_action$payload4","_id2","_target2","_updated","_newScroll","_viewport","_result2","_action$payload5","dropDuration","newHomeClientOffset","publishWhileDragging","collectionStarting","updateDroppableScroll","updateDroppableIsEnabled","updateDroppableIsCombineEnabled","moveUp","moveDown","moveRight","moveLeft","completeDrop","curves","outOfTheWayTiming","timings","transitions","fluid","snap","duration","timing","outOfTheWay","transforms","minDropTime","drop$1","getState","dispatch","_getDropImpact","lastImpact","didDropInsideDroppable","getDropImpact","newClientCenter","getNewHomeClientOffset","distance$1","maxDropTime","toFixed","getDropDuration","dropPending","scrollListener","listener","onWindowScroll","scheduled","passive","capture","getWindowScrollBinding","getScrollListener","shouldEnd","withTimings","getDragStart","execute","responder","announce","getDefaultMessage","willExpire","wasCalled","isExpired","timeoutId","getExpiringAnnounce","responders","getResponders","publisher","asyncMarshal","timerId","flush","shallow","dragging","onDragEnd","beforeCapture","onBeforeCapture","beforeStart","onBeforeDragStart","lastCritical","lastLocation","lastCombine","onDragStart","hasCriticalChanged","isDraggableEqual","isDroppableEqual","isCriticalEqual","hasLocationChanged","hasGroupingChanged","isCombineEqual","onDragUpdate","getPublisher","dropAnimationFinish","dropAnimationFlushOnScroll","pendingDrop","postActionState","composeEnhancers","compose","getMaxScroll","scrollHeight","scrollWidth","getDocumentElement","doc","documentElement","getMaxWindowScroll","clientWidth","clientHeight","shouldPublishUpdate","registry","getById","getRemainder","createDimensionMarshal","collection","staging","collect","_staging","getDimension","getScrollWhileDragging","publish","createPublisher","subscriber","marshal","startPublishing","unsubscribe","subscribe","scrollOptions","getViewport","windowScroll","getDimensionAndWatchScroll","getInitialPublish","stopPublishing","dragStopped","canStartDrag","scrollWindow","scrollBy","getScrollableDroppables","percentage","getPercentage","startOfRange","endOfRange","accelerateAt","getValue","distanceToEdge","thresholds","dragStartTime","shouldUseTimeDampening","startScrollingFrom","maxScrollValueAt","percentageFromMaxScrollValueAt","getValueFromDistance","proposedScroll","runTime","betweenAccelerateAtAndStopAtPercentage","dampenValueByTime","getScrollOnAxis","distanceToEdges","getDistanceThresholds","clean$2","getScroll","required","limited","isTooBigVertically","isTooBigHorizontally","adjustForSizeLimits","smallestSigned","getOverlap","targetScroll","overlap","canPartiallyScroll","rawMax","smallestChange","canScrollWindow","canScrollDroppable","scroll$1","_change","getWindowScrollChange","_dimension","maybe","getScrollableDroppableOver","getBestScrollableDroppable","getDroppableScrollChange","createJumpScroller","droppableRemainder","getDroppableOverlap","whatTheDroppableCanScroll","scrollDroppableAsMuchAsItCan","windowRemainder","getWindowOverlap","whatTheWindowCanScroll","scrollWindowAsMuchAsItCan","moveByOffset","dragHandle","prefix$1","contextId","scrollContainer","property","useIsomorphicLayoutEffect","useLayoutEffect","getHead","querySelector","createStyleEl","nonce","getWindowFromEl","ownerDocument","defaultView","isHtmlElement","HTMLElement","createRegistry","subscribers","notify","cb","findDraggableById","findDroppableById","register","unregister","findById","clean","StoreContext","getBodyElement","visuallyHidden","overflow","defaults","useUniqueId","AppContext","usePrevious","ref","_preventedKeys","_scrollJumpKeys","preventedKeys","preventStandardKeyEvents","keyCode","supportedEventName","idle$1","noop$1","scrollJumpKeys","idle$2","interactiveTagNames","optgroup","video","audio","isAnInteractiveElement","attribute","parentElement","isEventInInteractiveElement","getBorderBoxCenterPosition","supportedMatchesName","closestPonyfill","closest$1","_isActive","expected","isLockActive","canStart","lockAPI","isClaimed","defaultSensors","api","phaseRef","unbindEventsRef","startCaptureBinding","defaultPrevented","ctrlKey","metaKey","shiftKey","altKey","findClosestDraggableId","tryGetLock","sourceEvent","clientX","clientY","startPendingDrag","preventForcePressBinding","findOptionsForDraggable","shouldRespectForcePress","canGetLock","listenForCapture","shouldBlockNextClick","bindCapturingEvents","getPhase","setPhase","fluidLift","getCaptureBindings","preDrag","isCapturing","snapLift","getDraggingBindings","touch","touches","longPressTimerId","unbindTarget","hasMoved","_event$touches$","shouldRespect","getHandleBindings","unbindWindow","getWindowBindings","startDragging","useSensorMarshal","customSensors","enableDefaultSensors","useSensors","lock","release","claim","abandon","newLock","tryAbandon","tryAbandonLock","forceStop","forceSensorStop","draggable$1","querySelectorAll","findDraggable","canDragInteractiveElements","getShouldRespectForcePress","tryDispatchWhenDragging","getAction","lift$1","finish","cleanup","lift","liftActionArgs","move$1","tryStart","handle","getSelector","findClosestDragHandleFromEvent","tryGetClosestDraggableIdFromEvent","tryReleaseLock","isLockClaimed","getStore","lazyRef","App","sensors","dragHandleUsageInstructions","lazyStoreRef","lastPropsRef","createResponders","getId","textContent","useAnnouncer","dragHandleUsageInstructionsId","useHiddenTextElement","styleMarshal","grabCursor","transition","makeGetSelector","dragHandle$1","always","resting","dropAnimating","userCancel","getStyles$1","alwaysRef","dynamicRef","setDynamicStyle","setAlwaysStyle","dynamic","dropping","useStyleMarshal","lazyDispatch","marshalCallbacks","bindActionCreators","useRegistry","dimensionMarshal","autoScroller","fluidScroller","scheduleWindowScroll","scheduleDroppableScroll","tryScroll","_dragging","wasScrollNeeded","fakeScrollCallback","createFluidScroller","jumpScroll","createAutoScroller","focusMarshal","entriesRef","recordRef","restoreFocusFrameRef","isMountedRef","focus","tryGiveFocus","tryGiveFocusTo","possible","findDragHandle","activeElement","tryShiftRecord","redirectTo","tryRestoreFocusRecorded","record","tryRecordFocus","focused","useFocusMarshal","createStore","applyMiddleware","dimensionMarshalStopper","shouldPublishImmediately","_marshal$startPublish","shouldStop","autoScroll","isWatching","tryResetStore","getCanLift","getIsMovementAllowed","appContext","canLift","Provider","count$1","DragDropContext","isEqual$1","isScroll","isAuto","isEither","overflowX","overflowY","getClosestScrollable","isElementScrollable","getScroll$1","scrollLeft","scrollTop","getIsFixed","immediate","delayed","getListenerOptions","useRequiredContext","Context","useContext","getClosestScrollableFromDrag","closestScrollable","noop$2","Placeholder$1","animateOpenTimerRef","tryClearAnimateOpenTimer","animate","onTransitionEnd","onClose","_useState","isAnimatingOpenOnMount","setIsAnimatingOpenOnMount","onSizeChangeEnd","getSize","boxSizing","pointerEvents","getStyle","innerRef","DroppableContext","AnimateInOut","_React$PureComponent","getDerivedStateFromProps","provided","getDraggingTransition","shouldAnimateDragMovement","getDraggingOpacity","isCombining","isDropAnimating","getStyle$1","getShouldDraggingAnimate","transform","translate","opacity","getDraggingStyle","shouldAnimateDisplacement","preventHtml5Dnd","isStrictEqual","whatIsDraggedOverFromResult","getSecondarySnapshot","combineTargetFor","isClone","dropAnimation","draggingOver","atRest","snapshot","mapDispatchToProps","dropAnimationFinished","ConnectedDraggable","memoizedOffset","getMemoizedSnapshot","getMemoizedProps","draggingSelector","ownProps","_draggingOver","_combineWith","getCombineWithFromResult","curve","scale","secondarySelector","getFallback","getProps","ownId","draggingId","visualDisplacement","isAfterCriticalInVirtualList","_offset","getSecondarySelector","pure","areStatePropsEqual","setRef","getRef","_useRequiredContext","_useRequiredContext2","dropAnimationFinishedAction","getDraggableRef","computedStyles","getDimension$1","publishedRef","isFirstPublishRef","useDraggablePublisher","dragHandleProps","tabIndex","role","onMoveEnd","draggableProps","rubric","PrivateDraggable","isUsingCloneFor","PublicDraggable","isDragDisabled","disableInteractiveElementBlocking","isMatchingType","getDraggable","isDropDisabled","ignoreContainerClipping","renderClone","getContainerForClone","ConnectedDroppable","idleWithAnimation","shouldAnimatePlaceholder","isDraggingOver","draggingOverWith","draggingFromThisWith","isUsingPlaceholder","useClone","idleWithoutAnimation","getDraggableRubric","getMapProps","isDraggingOverForConsumer","isDraggingOverForImpact","_snapshot","_completed","wasCombining","isHome","updateViewportMaxScroll","droppableRef","placeholderRef","getDroppableRef","setDroppableRef","setPlaceholderRef","onPlaceholderTransitionEnd","whileDraggingRef","previousRef","publishedDescriptorRef","memoizedUpdateScroll","getClosestScroll","updateScroll","scheduleScrollUpdate","onClosestScroll","getEnv","targetRef","getClient","frameClient","scrollSize","getDroppableDimension","removeAttribute","useDroppablePublisher","droppableProps","droppableContext","draggableProvided","draggableSnapshot","getClone","getWindow","isHTMLElement","isShadowRoot","ShadowRoot","includeScale","scaleX","scaleY","offsetHeight","offsetWidth","win","getNodeName","nodeName","getWindowScrollBarX","isScrollParent","_getComputedStyle","getCompositeRect","elementOrVirtualElement","offsetParent","isFixed","isOffsetParentAnElement","offsetParentIsScaled","isElementScaled","offsets","clientLeft","clientTop","getLayoutRect","clientRect","offsetLeft","offsetTop","getParentNode","assignedSlot","host","getScrollParent","listScrollParents","_element$ownerDocumen","scrollParent","isBody","visualViewport","updatedList","isTableElement","getTrueOffsetParent","getOffsetParent","isFirefox","navigator","userAgent","currentNode","perspective","contain","willChange","getContainingBlock","auto","basePlacements","popper","variationPlacements","modifierPhases","order","modifiers","visited","requires","requiresIfExists","dep","depModifier","debounce","pending","DEFAULT_OPTIONS","strategy","areValidElements","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","reference","orderedModifiers","modifiersData","elements","attributes","effectCleanupFns","isDestroyed","instance","setOptions","setOptionsAction","cleanupModifierEffects","scrollParents","contextElement","merged","orderModifiers","enabled","_ref3$options","effect","cleanupFn","forceUpdate","_state$elements","rects","_state$orderedModifie","_state$orderedModifie2","_options","destroy","onFirstUpdate","_options$scroll","_options$resize","resize","getBasePlacement","getVariation","getMainAxisFromPlacement","computeOffsets","basePlacement","variation","commonX","commonY","mainAxis","unsetSides","mapToStyles","_Object$assign2","popperRect","gpuAcceleration","adaptive","roundOffsets","_offsets$x","_offsets$y","hasX","hasY","sideX","sideY","heightProp","widthProp","_Object$assign","commonStyles","dpr","devicePixelRatio","roundOffsetsByDPR","_ref5","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","popperOffsets","arrow","_options$offset","invertDistance","skidding","distanceAndSkiddingToXY","_data$state$placement","getOppositePlacement","matched","getOppositeVariationPlacement","rootNode","getRootNode","isSameNode","rectToClientRect","getClientRectFromMixedType","clippingParent","html","getViewportRect","getInnerBoundingClientRect","winScroll","getDocumentRect","mergePaddingObject","paddingObject","expandToHashMap","hashMap","detectOverflow","_options$placement","_options$boundary","boundary","_options$rootBoundary","rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","altContext","clippingClientRect","mainClippingParents","clippingParents","clipperElement","getClippingParents","firstClippingParent","clippingRect","accRect","getClippingRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","_skip","_options$mainAxis","checkMainAxis","_options$altAxis","altAxis","checkAltAxis","specifiedFallbackPlacements","fallbackPlacements","_options$flipVariatio","flipVariations","allowedAutoPlacements","preferredPlacement","oppositePlacement","getExpandedFallbackPlacements","placements","_options$allowedAutoP","allowedPlacements","overflows","computeAutoPlacement","referenceRect","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","isVertical","mainVariationSide","altVariationSide","checks","check","_loop","fittingPlacement","within","_options$tether","tether","_options$tetherOffset","tetherOffset","isBasePlacement","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","minLen","maxLen","arrowElement","arrowRect","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","arrowOffsetParent","clientOffset","offsetModifierValue","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","withinMaxClamp","_state$modifiersData$","toPaddingObject","minProp","maxProp","endDiff","startDiff","clientSize","centerToReference","axisProp","centerOffset","_options$element","getSideOffsets","preventedOffsets","isAnySideFullyClipped","eventListeners","initialStyles","preventOverflow","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","fromEntries","EMPTY_MODIFIERS","useGetLatest","generateBoundingClientRect","toJSON","_excluded","virtualElement","defaultConfig","closeOnOutsideClick","closeOnTriggerHidden","defaultVisible","delayHide","delayShow","followCursor","interactive","mutationObserverOptions","childList","subtree","trigger","OperationInfoButton","React","show","setShow","getTooltipProps","setTooltipRef","setTriggerRef","popperOptions","_popperProps$state","_popperProps$state$mo","_popperProps$state$mo2","finalConfig","finalPopperOptions","_React$useState","triggerRef","_React$useState2","tooltipRef","_useControlledState","_ref$onChange","getLatest","updater","updatedState","persist","isControlled","useControlledState","onVisibleChange","setVisible","timer","_usePopper","referenceElement","popperElement","prevOptions","optionsWithDefaults","updateStateModifier","newOptions","popperInstanceRef","popperInstance","createPopper","usePopper","popperProps","excluded","sourceKeys","isTriggeredBy","hideTooltip","showTooltip","toggleTooltip","handleClickOutside","_event$composedPath","_getLatest","composedPath","Node","preventDefaultAndToggle","hide","setMousePosition","observer","MutationObserver","observe","disconnect","getArrowProps","usePopperTooltip","Portal","docBox","docBoxHeader","docBoxBody","getOperationDocs","displayName","boxShadow","shadows","z3","maxWidth","h5","signature","dropdown","OperationHeader","onRemove","queryModeller","onToggleSwitcher","isOpen","alternatives","alt","operationHeaderButtons","selectWrapper","onCloseMenu","newParams","changedOp","borderBottom","medium","short","getOperationParamEditor","paramDef","SelectInputParamEditor","BoolInputParamEditor","SimpleInputParamEditor","AutoSizeInput","onCommitChange","evt","currentTarget","runQueryOnEnter","onRunQuery","Checkbox","checked","selectOptions","valueOption","optionalParam","OperationEditor","flash","shouldFlash","keepFlash","setKeepFlash","useFlash","onParamValueChanged","paramIdx","callParamChangedThenOnChange","onAddRestParam","onRemoveRestParam","operationElements","Editor","paramRow","hideName","paramName","infoIcon","paramValue","lastParamDef","renderAddRestParamButton","Draggable","cardHighlight","arrowLine","arrowArrow","borderTop","borderLeft","OperationList","highlightedOp","opsToHighlight","isMounted","mountedRef","prevOperations","newOps","newOp","op1","op2","useOperationsHighlight","cascaderOpen","setCascaderOpen","onOperationChange","addOptions","isLeaf","Droppable","operationList","addButton","Cascader","onSelect","operationDef","onBlur","alwaysOpen","hideActiveLevelLabel","RawQuery","lang","highlighted","grammar","editorField","OperationListExplained","onMouseEnter","onMouseLeave","OperationsEditorRow","QueryBuilderHints","visualQuery","hints","setHints","getQueryHints","fix","modifyQuery","newVisualQuery","MetricSelect","onGetMetrics","customFilterOption","searchQuery","formatOptionLabel","inputValue","filterOption","contrastText","nestedQuery","showExplain","vectorMatchWrapper","vectorMatchInput","IconButton","PromQueryBuilder","NestedQueryList","nestedQueries","onNestedQueryUpdate","EXPLAIN_LABEL_FILTER_CONTENT","PromQueryBuilderExplained","setHighlightedOp","withTemplateVariableOptions","optionsPromise","variables","getVariables","forLabel","labelsToConsider","labelsIndex","getLabelValues","getMetrics","QueryPreview","PromQueryBuilderContainer","showRawQuery","useReducer","stateSlice","exprChanged","visualQueryChange","_reducer","initialState","reducers","reducerNames","sliceCaseReducersByName","sliceCaseReducersByType","actionCreators","buildReducer","extraReducers","_d","_e","_f","finalCaseReducers","mapOrBuilderCallback","getInitialState","finalActionMatchers","finalDefaultCaseReducer","isStateFunction","frozenInitialState_1","caseReducers","cr","previousState","caseReducer","draft","createReducer","reducerName","prepareCallback","maybeReducerWithPrepare","prepare","createSlice","parseResult","PromExploreExtraField","memo","rangeOptions","getQueryTypeOptions","onQueryTypeChange","getQueryTypeChangeHandler","testIds","extraFieldEditor","queryTypeField","InlineFormLabel","instant","stepField","onKeyDown","includeBoth","queryType","exemplar","PromLink","panelData","setHref","getExternalLink","scopedVars","getPrometheusTime","rangeDiff","endTime","utc","getRateIntervalScopedVariable","rangeUtil","customQueryParameters","queryOptions","createQuery","encodeURIComponent","directUrl","textUtil","LocalStorageValueProvider","PureComponent","onSaveToStore","onDeleteFromStore","storageKey","_assertThisInitialized","ReferenceError","cancelTimeout","timeoutID","cachedRTLResult","getRTLOffsetType","recalculate","outerDiv","outerStyle","innerDiv","innerStyle","defaultItemKey$1","createListComponent","_class","getItemOffset","getEstimatedTotalSize","getItemSize","getOffsetForIndexAndAlignment","getStartIndexForOffset","getStopIndexForStartIndex","initInstanceProps","shouldResetStyleCacheOnItemSizeChange","validateProps","_PureComponent","_instanceProps","_outerRef","_resetIsScrollingTimeoutId","isScrolling","scrollDirection","scrollOffset","initialScrollOffset","scrollUpdateWasRequested","_callOnItemsRendered","overscanStartIndex","overscanStopIndex","visibleStartIndex","visibleStopIndex","onItemsRendered","_callOnScroll","onScroll","_getItemStyle","_this$props","itemSize","itemStyleCache","_getItemStyleCache","isHorizontal","isRtl","offsetHorizontal","___","_onScrollHorizontal","_event$currentTarget","prevState","_resetIsScrollingDebounced","_onScrollVertical","_event$currentTarget2","_outerRefSetter","outerRef","delay","tick","requestTimeout","_resetIsScrolling","nextProps","validateSharedProps$1","scrollTo","scrollToItem","align","itemCount","_this$props2","_callPropsCallbacks","componentDidUpdate","_this$props3","_this$state","_this$props4","innerElementType","innerTagName","itemData","_this$props4$itemKey","itemKey","outerElementType","outerTagName","useIsScrolling","_this$_getRangeToRend","_getRangeToRender","stopIndex","_index","estimatedTotalSize","WebkitOverflowScrolling","_this$_getRangeToRend2","_overscanStartIndex","_overscanStopIndex","_visibleStartIndex","_visibleStopIndex","_this$state2","_scrollDirection","_scrollOffset","_scrollUpdateWasRequested","_this$props5","overscanCount","_this$state3","overscanBackward","overscanForward","FixedSizeList","lastItemOffset","middleOffset","_ref6","numVisibleItems","_ref7","EMPTY_SELECTOR","METRIC_LABEL","buildSelector","singleMetric","selectedLabels","selected","selectedValues","bg2","sm","md","status","xs","textSemiWeak","statusShowing","palette","brandDanger","valueList","valueListWrapper","border2","valueListArea","valueTitle","validationStatus","textStrong","UnthemedPrometheusMetricsBrowser","updateLabelState","updatedFields","lastUsedLabels","rawLabels","fetchValues","loading","doFacettingForLabel","storeLastUsedLabels","doFacetting","rawValues","details","lastFacetted","possibleLabels","possibleValues","existingValues","hidden","facets","facetLabels","streams","labelSearchTerm","metricSearchTerm","valueSearchTerm","LoadingPlaceholder","nonMetricLabels","metricCount","HorizontalGroup","Label","onChangeMetricSearch","PromLabel","onClickMetric","searchTerm","onChangeLabelSearch","onClickLabel","onChangeValueSearch","valueListsRef","onClickValue","onClickRunQuery","onClickRunRateQuery","onClickValidate","onClickClear","deleteLastUsedLabels","nextValue","validateSelector","PrometheusMetricsBrowser","withTheme","promLanguageDefinition","extensions","aliases","mimetypes","loader","makeStorageService","strings","onDidChangeValue","onDidChangeTarget","onWillSaveState","fallbackValue","getBoolean","getNumber","logStorage","migrate","isNew","overrideServices","NeverCaseError","getAllMetricNamesCompletions","dataProvider","getAllMetricNames","FUNCTION_COMPLETIONS","getAllFunctionsAndMetricNamesCompletions","metricNames","DURATION_COMPLETIONS","getAllHistoryCompletions","getHistory","makeSelector","metricName","allLabels","getLabelNames","otherLabels","getAllLabelNames","possibleLabelNames","usedLabelNames","getLabelNamesForCompletions","triggerOnInsert","getLabelNamesForSelectorCompletions","getLabelNamesForByCompletions","getLabelValuesForMetricCompletions","betweenQuotes","getCompletions","situation","walk","getNodeText","isPathMatch","resolverPath","cursorPath","RESOLVERS","getNodeInSubtree","subTreeHasError","metricNameNode","getLabels","resolveLabelMatcher","aggrExpNode","bodyNode","metricIdNode","idNode","LABEL_OP_MAP","labelMatcherNode","nameNode","opNode","opChild","getLabelOp","valueNode","startsWith","parsePromQLStringLiteral","labelMatchersNode","listNode","matcherNode","typeId","getNodeChildren","inStringNode","labelNameNode","firstListNode","getMonacoCompletionItemKind","monaco","languages","CompletionItemKind","Unit","Variable","Snippet","Enum","EnumMember","Constructor","codeLens","contextmenu","fixedOverflowWidgets","folding","lineDecorationsWidth","lineNumbers","minimap","overviewRulerBorder","overviewRulerLanes","renderLineHighlight","scrollbar","verticalScrollbarSize","horizontalScrollbarSize","scrollBeyondLastLine","suggest","showWords","suggestFontSize","wordWrap","PROMQL_LANG_ID","PROMQL_SETUP_STARTED","overrideServicesRef","storageService","containerRef","initialValue","lpRef","useLatest","historyRef","onRunQueryRef","onBlurRef","autocompleteDisposeFun","ReactMonacoEditor","language","beforeMount","setMonarchTokensProvider","setLanguageConfiguration","languageConfiguration","ensurePromQL","onMount","onDidBlurEditorWidget","metaItem","completionProvider","triggerCharacters","getWordAtPosition","startLineNumber","lineNumber","endLineNumber","startColumn","endColumn","fromPositions","positionClone","column","getOffsetAt","maybeErrorNode","getErrorNode","resolver","getSituation","completionsPromise","maxIndexDigits","sortText","padStart","command","getCompletionProvider","filteringCompletionProvider","getModel","registerCompletionItemProvider","updateElementHeight","containerDiv","pixelHeight","getContentHeight","pixelWidth","onDidContentSizeChange","addCommand","KeyMod","Shift","KeyCode","Enter","CtrlCmd","KeyK","global","KeyboardEvent","placeholderDecorators","contents","isWholeLine","decorators","checkDecorators","newDecorators","getValueLength","deltaDecorations","onDidChangeModelContent","MonacoQueryFieldLazy","Suspense","MonacoQueryFieldWrapper","lastRunValueRef","runQueryOnBlur","handleRunQuery","PromQueryField","refreshMetrics","refreshHint","languageProviderInitializationPromise","prevProps","syntaxLoaded","changedRangeToRefresh","rangeChangedToRefresh","prevRange","sameMinuteFrom","sameMinuteTo","ExtraFieldElement","labelBrowserVisible","hasMetrics","chooserText","metricsLookupDisabled","hasSyntax","getChooserText","buttonDisabled","onLastUsedLabelsSave","onLastUsedLabelsDelete","onClickChooserButton","app","CoreApp","onChangeQuery","onChangeLabelBrowser","onClickHintFix","initHints","getInitHints","initHint","isDataFrame","toLegacyResponseData","queryHints","queryHint","hasCanceled_","canceledPromiseRejection","isCanceled","catch","makePromiseCancelable","remainingTasks","onUpdateLanguage","override","onTypeahead","typeahead","plugins","BracesPlugin","SlatePrism","onlyIn","getSyntax","prismLanguages","promql","LegacyForms","FORMAT_OPTIONS","INTERVAL_FACTOR_OPTIONS","PromQueryEditor","formatOption","intervalFactorOption","legendFormat","onFieldChange","onLegendChange","onIntervalChange","isSearchable","onIntervalFactorChange","onFormatChange","onInstantChange","intervalFactor","toggleReducer","QueryOptionGroup","collapsedInfo","toggleOpen","h6","emphasize","legendModeOptions","Auto","Verbose","Custom","PromQueryLegendEditor","getLegendMode","inputRef","newFormat","setSelectionRange","PromQueryBuilderOptions","queryTypeOptions","queryTypeValue","getQueryTypeValue","queryTypeLabel","getCollapsedInfo","getLegendModeLabel","PromQueryCodeEditor","PromQueryEditorSelector","parseModalOpen","setParseModalOpen","dataIsStale","setDataIsStale","explain","setExplain","rawQuery","setRawQuery","getQueryWithDefaults","onEditorModeChange","newMetricEditorMode","newEditor","previousEditor","confirmText","onConfirm","onDismiss","LoadingState","PromExploreQueryEditor","PromQueryEditorForAlerting","PromQueryEditorByApp","AlertManagerImplementation","MatcherOperator","AccessControlAction","SilenceState","AlertState","AlertmanagerChoice","cortex","mimir","prometheus","DashboardRoutes","DashboardInitPhase","Fetching","Services","Failed","Completed","KioskMode","OrgRole","Viewer","Admin","PermissionLevel","View","PermissionLevelString","DataSourcePermissionLevel","AclTarget","Team","User","TeamPermissionLevel","Member","ServiceAccountStateFilter","All","WithExpiredTokens","Disabled","AppNotificationSeverity","AppNotificationTimeout","Success","Warning","Info","ExploreId","ZoomOutEvent","BusEventWithPayload","ShiftTimeEventDirection","Left","Right","ShiftTimeEvent","AbsoluteTimeEvent","BusEventBase","RemovePanelEvent","ShowModalEvent","ShowConfirmModalEvent","ShowModalReactEvent","HideModalEvent","DashboardSavedEvent","AnnotationQueryStarted","AnnotationQueryFinished","PanelEditEnteredEvent","PanelEditExitedEvent","debug","PluginState","isGrafanaAdmin","isSignedIn","orgRole","orgId","orgName","login","externalUserId","orgCount","fiscalYearStartMonth","helpFlags1","lightTheme","hasEditPermissionInFolders","email","locale","weekStart","gravatarUrl","accessControlEnabled","user","permissions","getBackendSrv","reloadcache","setLoggedOut","hasRole","licensedAccessControlEnabled","featureEnabled","hasPermissionInMetadata","accessControl","hasPermission","isGrafanaVisible","visibilityState","isAllowedInterval","getValidInterval","hasAccessToExplore","isEditor","hasAccess","fallBack","hasAccessInMetadata","evaluatePermission","sidemenuSmallBreakpoint","minRefreshInterval","DataSourceType","Loki","AzureCloud","KnownAzureClouds","Public","China","USGovernment","Germany","concealed","getDefaultAzureCloud","getSecret","azureClientSecret","getDefaultCredentials","azureCloud","authTypeOptions","AzureCredentialsForm","credentials","azureCloudOptions","onCredentialsChange","getSubscriptions","hasRequiredFields","tenantId","clientId","clientSecret","isCredentialsComplete","subscriptions","setSubscriptions","loadSubscriptionsClicked","onLoadSubscriptions","updateSubscriptions","canceled","received","autoSelect","defaultSubscriptionId","onSubscriptionChange","managedIdentityEnabled","AzureAuthSettings","dataSourceConfig","overrideAudienceAllowed","azureEndpointResourceId","overrideAudienceChecked","setOverrideAudienceChecked","azureCredentials","getCredentials","updateCredentials","InlineFieldRow","InlineSwitch","FormField","httpOptions","PromSettings","httpMethod","inputEl","timeInterval","spellCheck","onChangeHandler","validationEvents","promSettingsValidationEvents","queryTimeout","h3","disableMetricsLookup","onUpdateDatasourceJsonDataOptionChecked","EventsWithValidation","regexValidation","getValueFromEventItem","eventItem","isFunction","operate","init","hasLift","liftedSource","thisArg","sent","trys","ops","verb","__values","__read","ar","pack","__await","__asyncGenerator","_arguments","generator","asyncIterator","resume","fulfill","settle","createImpl","ctorFunc","UnsubscriptionError","arrRemove","Subscription","initialTeardown","closed","_parentage","_finalizers","e_1","e_2","_b","_parentage_1","_parentage_1_1","e_1_1","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","_hasParent","_addParent","_removeParent","EMPTY","isSubscription","timeoutProvider","handler","delegate","reportUnhandledError","COMPLETE_NOTIFICATION","createNotification","Subscriber","isStopped","EMPTY_OBSERVER","complete","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_error","_complete","_bind","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","errorThrown","notification","onStoppedNotification","createOperatorSubscriber","onNext","onComplete","onError","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","project","observable","pipeFromArray","fns","Observable","_subscribe","isObserver","isRoot","errorContext","_trySubscribe","sink","promiseCtor","getPromiseCtor","pipe","toPromise","fromAsyncIterable","asyncIterable","asyncIterable_1","asyncIterable_1_1","fulfilled","rejected","__awaiter","__asyncValues","catchError","handledResult","innerSub","syncUnsub","isInteropObservable","obs","isArrayLike","isAsyncIterable","isIterable","iterable","iterable_1","iterable_1_1","getReader","isReadableStreamLike","readableStream","reader","releaseLock","readableStreamLikeToAsyncGenerator","createInvalidObservableTypeError","innerFrom","AnnotationQueryEditor","onAnnotationChange","titleFormat","tagKeys","textFormat","useValueForTime","renderLegendFormat","aliasPattern","aliasData","g1","EventBusSrv","singleton","contextSrv","TimeSrv","timeModel","refresh","initTimeFromUrl","parseTime","timeAtLoad","cloneDeep","getTimezone","isBefore","setTime","setAutoRefresh","getValidIntervals","intervals","isString","utcValue","toUtc","isValid","epoch","timeWindow","valueTime","timeWindowMs","locationService","getTimeWindow","parseUrlParam","urlRefresh","currentRefresh","isAllowedIntervalFn","refreshIntervals","defaultIntervals","isExistingInterval","minRefreshIntervalInIntervals","lowestRefreshInterval","getRefreshFromUrl","timepicker","refresh_intervals","updateTimeRangeFromUrl","urlRange","timeRangeForUrl","timeHasChangedSinceLoad","stopAutoRefresh","currentUrlState","validInterval","intervalMs","refreshTimer","startNextRefreshTimer","autoRefreshPaused","refreshTimeModel","timeRangeUpdated","afterMs","autoRefreshBlocked","pauseAutoRefresh","resumeAutoRefresh","updateUrl","isDateTime","oldRefresh","dateMath","zoomOut","factor","timespan","newTimespan","getZoomedTimeRange","shiftTime","origRange","getShiftedTimeRange","makeAbsoluteTime","isRefreshOutsideThreshold","lastRefresh","totalRange","getDefaultTimeRange","appEvents","getTimeSrv","PrometheusMetricFindQuery","labelNamesQuery","labelValuesQuery","metricNamesQuery","metricNameQuery","queryResultQuery","lastValueFrom","metricNameAndLabelsQuery","_map","_labels","expandable","metricFilterPattern","matchedMetricName","instantQuery","performInstantQuery","resultType","metricData","getOriginalMetricName","trim","nameMatch","counterNameMetric","certain","queryTokens","matchAll","flatMap","fixableQuery","ruleMappings","mapping","mappingForQuery","ruleName","search","preventSubmit","INFINITY_SAMPLE_REGEX","HISTOGRAM_QUANTILE_LABEL_NAME","response","transformOptions","responseListLength","valueWithRefId","preferredVisualisationType","prometheusResult","fields","getTimeField","getValueField","tableData","valueText","timeField","metricFields","filterable","FieldType","ArrayVector","valueField","valueName","metricField","getLabelValue","parseSampleValue","transformMetricDataToTable","dataFrame","getTemplateSrv","labelsWithoutName","formatLabels","createLabelInfo","stepMs","NaN","baseTimestamp","dps","dpValue","endTimestamp","parseValue","displayNameFromDS","transformToDataFrame","mergeHeatmapFrames","transformToHistogramOverTime","sortSeriesByLabel","getDataLinks","dataLinks","datasourceUid","dsSettings","getDataSourceSrv","getInstanceSettings","urlDisplayLabel","internal","datasourceName","targetBlank","isMs","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","getDisplayProcessor","frames","countFields","DataFrameType","seriesList","topSeries","bottomSeries","bottomPoint","s1","s2","le1","le2","NEGATIVE_INFINITY","POSITIVE_INFINITY","PrometheusVariableSupport","StandardVariableSupport","targets","of","__interval","__interval_ms","getRangeScopedVars","timeSrv","interpolated","templateSrv","interpolateQueryExpr","metricFindQuery","results","toDataQuery","PromApplication","Lotex","Mimir","GET_AND_POST_METADATA_ENDPOINTS","PrometheusDatasource","DataSourceWithBackend","getQueryDisplayText","_addTracingHeaders","headers","dashboardId","dashboardUID","panelId","_request","queryUrl","basicAuth","withCredentials","Authorization","fetch","abstractQueries","abstractQuery","queries","hideFromInspector","isFetchError","multi","includeAll","prometheusRegularEscape","prometheusSpecialRegexEscape","escapedValues","targetContainsTemplate","containsTemplate","processTargetV2","requestId","utcOffsetSec","utcOffset","access","tableFrames","framesWithoutTable","partition","df","custom","isTableResult","processedTableFrames","dfs","dataFramesByRefId","groupBy","refIds","responseLength","getValueText","labelFields","frameValueField","promLabels","numberField","labelsForField","transformDFToTable","exemplarFrames","framesWithoutTableAndExemplars","exemplarTraceIdDestinations","destinations","processedExemplarFrames","exemplarTraceIdDestination","traceIDField","links","dataTopic","DataTopic","heatmapResults","framesWithoutTableHeatmapsAndExemplars","isHeatmapResult","heatmapResultsGroupedByQuery","processedHeatmapResultsGroupedByQuery","heatmapResultsGroup","heatmapResultsGroupedByValues","le","notLE","forOwn","dataFrames","sortedHeatmap","otherFrames","flattenedProcessedHeatmapFrames","flatten","transformV2","activeTargets","prepareTargets","exploreQuery","panelsQuery","runningQueriesCount","subQueries","filterAndMapResponse","tapObserver","isUnsub","finalize","cancelled","runQuery","merge","observables","forkJoin","performTimeSeriesQuery","hinting","minInterval","scrapeInterval","adjustedInterval","adjustInterval","enhanceExprWithAdHocFilters","adjusted","alignRange","rateInterval","__rate_interval","safeInterval","throwError","handleErrors","msRange","sRange","__range_ms","__range_s","__range","queryModel","applyTemplateVariables","rsp","processAnnotationResponse","seriesLabels","getTime","maxDataPoints","interpolateVariablesInQueries","expandedQueries","extractRuleMappingFromGroups","expression","ruleNames","rulesRegex","queryArray","pre","post","invalidLabelsRegex","correctlyExpandedQueryArray","invalidLabelsRegexp","indexOfRegexMatch","exprBeforeRegexMatch","exprAfterRegexMatch","arrayOfLabelObjects","addLabelsToExpression","expandRecordingRules","date","roundUp","labelData","getAdhocFilters","filterQuery","instanceSettings","loadRules","clonedTargets","instantTarget","rangeTarget","statusText","space","safeStringifyValue","toDataQueryResponse","tagKeysArray","eventList","timeValueTuple","timeStampValue","valueValue","activeValuesTimestamps","latestEvent","timeEnd","subType","rulerEnabled","editorSrc","PrometheusLanguageProvider","exemplarsAvailable","annotations","QueryEditor","plugin","DataSourcePlugin","setQueryEditor","setConfigEditor","alertmanagers","ds","Alertmanager","showAccessOptions","azureAuthSettings","azureAuthSupported","getAzureAuthEnabled","hasCredentials","setAzureAuthEnabled","setDefaultCredentials","azureAuth","resetCredentials","azureSettingsUI","severity","defaultUrl","sigV4AuthToggleEnabled","renderSigV4Editor","AlertingSettings","alertmanagerDataSources"],"sourceRoot":""}